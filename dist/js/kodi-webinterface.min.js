/*! kodi-webinterface by Jeremy Graham - built on 09-11-2015 */
var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}},__slice=[].slice;this.helpers={},this.config={"static":{appTitle:"Kodi",jsonRpcEndpoint:"jsonrpc",socketsHost:location.hostname,socketsPort:9090,ajaxTimeout:5e3,hashKey:"kodi",defaultPlayer:"auto",ignoreArticle:!0,pollInterval:1e4,reverseProxy:!1,albumAtristsOnly:!0,searchIndexCacheExpiry:86400,collectionCacheExpiry:604800,addOnsLoaded:!1,vibrantHeaders:!1,lang:"en"}},this.Kodi=function(a){var b;return b=new a.Marionette.Application,b.addRegions({root:"body"}),b.on("before:start",function(){return config["static"]=_.extend(config["static"],config.get("app","config:local",config["static"]))}),b.vent.on("shell:ready",function(){return function(){return b.startHistory()}}(this)),b}(Backbone,Marionette),$(document).ready(function(){return function(){return helpers.translate.init(function(){return Kodi.start(),$.material.init()})}}(this)),helpers.backscroll={lastPath:"",lastScroll:0,setLast:function(){return this.lastPath=location.hash,this.lastScroll=document.body.scrollTop},scrollToLast:function(){var a;return a=this.lastPath===location.hash?this.lastScroll:0,window.scrollTo(0,a)}},helpers.cache={store:{},defaultExpiry:406800},helpers.cache.set=function(a,b,c){return null==c&&(c=helpers.cache.defaultExpiry),helpers.cache.store[a]={data:b,expires:c+helpers.global.time(),key:a},b},helpers.cache.get=function(a,b){return null==b&&(b=!1),null!=helpers.cache.store[a]&&helpers.cache.store[a].expires>=helpers.global.time()?helpers.cache.store[a].data:b},helpers.cache.del=function(a){return null!=helpers.cache.store[a]?delete helpers.cache.store[a]:void 0},helpers.cache.clear=function(){return helpers.cache.store={}},helpers.cache.updateCollection=function(a,b,c,d,e){var f,g,h,i;if(null!=Backbone.fetchCache._cache&&null!=Backbone.fetchCache._cache[a]&&null!=Backbone.fetchCache._cache[a].value.result&&null!=Backbone.fetchCache._cache[a].value.result[b]){h=Backbone.fetchCache._cache[a].value.result[b],i=[];for(f in h)g=h[f],i.push(g.id===c?Backbone.fetchCache._cache[a].value.result[b][parseInt(f)][d]=e:void 0);return i}},config.get=function(a,b,c,d){var e;return null==c&&(c=""),e=Kodi.request("config:"+a+":get",b,c),null!=d&&d(e),e},config.set=function(a,b,c,d){var e;return e=Kodi.request("config:"+a+":set",b,c),null!=d&&d(e),e},config.preStartGet=function(a,b){var c;return null==b&&(b=""),"undefined"!=typeof localStorage&&null!==localStorage&&null!=localStorage.getItem("config:app-config:local")&&(c=JSON.parse(localStorage.getItem("config:app-config:local")).data,null!=c[a])?c[a]:b},null==this.KodiMixins&&(this.KodiMixins={}),KodiMixins.Entities={url:function(){return helpers.url.baseKodiUrl("Mixins")},rpc:new Backbone.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),applySettings:function(){return"model"===this.entityType?this.setModelDefaultFields():void 0},entityType:"model",setEntityType:function(a){return this.entityType=a,this},entityKeys:{type:"",modelResponseProperty:"",collectionResponseProperty:"",idProperty:""},setEntityKey:function(a,b){return this.entityKeys[a]=b,this},getEntityKey:function(a){var b,c;switch(c=this.entityKeys.type,a){case"modelResponseProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"details";break;case"collectionResponseProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"s";break;case"idProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"id";break;default:b=c}return b},entitiyFields:{minimal:[],small:[],full:[]},setEntityFields:function(a,b){return null==b&&(b=[]),this.entitiyFields[a]=b,this},getEntityFields:function(a){var b;return b=this.entitiyFields.minimal,"full"===a?b.concat(this.entitiyFields.small).concat(this.entitiyFields.full):"small"===a?b.concat(this.entitiyFields.small):b},modelDefaults:{id:0,fullyloaded:!1,thumbnail:"",thumbsUp:!1},setModelDefaultFields:function(a){var b,c,d,e,f;for(null==a&&(a={}),a=_.extend(this.modelDefaults,a),e=this.getEntityFields("full"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this.defaults[b]="");return f},callMethodName:"",callArgs:[],callIgnoreArticle:!0,setMethod:function(a){return this.callMethodName=a,this},setArgStatic:function(a){return this.callArgs.push(a),this},setArgHelper:function(a,b,c){var d;return d="argHelper"+a,this.callArgs.push(this[d](b,c)),this},argCheckOption:function(a,b){return null!=this.options&&null!=this.options[a]?this.options[a]:b},argHelperfields:function(a){var b;return null==a&&(a="small"),b=this.getEntityFields(a),this.argCheckOption("fields",b)},argHelpersort:function(a,b){var c;return null==b&&(b="ascending"),c={method:a,order:b,ignorearticle:this.callIgnoreArticle},this.argCheckOption("sort",c)},argHelperlimit:function(a,b){var c;return null==a&&(a=0),null==b&&(b="all"),c={start:a},"all"!==b&&(c.end=b),this.argCheckOption("limit",c)},argHelperfilter:function(a,b){var c;return c={},null!=a&&(c[a]=b),this.argCheckOption("filter",c)},buildRpcRequest:function(a){var b,c,d,e,f,g,h;for(null==a&&(a="read"),e=[this.callMethodName],h=this.callArgs,f=0,g=h.length;g>f;f++)b=h[f],c="argHelper"+b,"function"==typeof c?(d="arg"+e.length,e.push(d),this[d]=c):e.push(b);return e}},helpers.debug={verbose:!1},helpers.debug.consoleStyle=function(a){var b,c,d,e;null==a&&(a="error"),b={background:"#ccc",padding:"0 5px",color:"#444","font-weight":"bold","font-size":"110%"},e=[],c={info:"#D8FEFE",success:"#CCFECD",warning:"#FFFDD9",error:"#FFCECD"},b.background=c[a];for(d in b)e.push(d+": "+b[d]);return e.join("; ")},helpers.debug.msg=function(a,b,c){return null==b&&(b="info"),"undefined"!=typeof console&&null!==console&&(console.log("%c "+a,helpers.debug.consoleStyle(b)),null!=c)?console.log(c):void 0},helpers.debug.log=function(a,b,c,d){if(null==b&&(b="No data provided"),null==c&&(c="error"),null==d&&(d=arguments.callee.caller.toString()),null!=b[0]&&"Internal server error"===b[0].error);else if("undefined"!=typeof console&&null!==console&&(console.log("%c Error in: "+a,helpers.debug.consoleStyle(c),b),helpers.debug.verbose&&d!==!1))return console.log(d)},helpers.debug.rpcError=function(a,b){var c,d;return c={called:a},d="",b.error&&b.error.message?(d='"'+b.error.message+'"',c.error=b.error):c.error=b,helpers.debug.log("jsonRPC request - "+d,c,"error")},helpers.entities={},helpers.entities.getFields=function(a,b){var c;return null==b&&(b="small"),c=a.minimal,"full"===b?c.concat(a.small).concat(a.full):"small"===b?c.concat(a.small):c},helpers.entities.getSubtitle=function(a){var b;switch(a.type){case"song":b=a.artist.join(",");break;default:b=""}return b},helpers.entities.playingLink=function(a){return"<a href='#"+a.url+"'>"+a.label+"</a>"},helpers.entities.isWatched=function(a){var b;return b=!1,null!=a&&a.get("playcount")&&(b=a.get("playcount")>0?!0:!1),b},helpers.global={},helpers.global.shuffle=function(a){var b,c,d;for(b=a.length-1;b>0;)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d,b--;return a},helpers.global.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},helpers.global.time=function(){var a;return a=(new Date).getTime(),a/1e3},helpers.global.inArray=function(a,b){return _.indexOf(b,a)>-1},helpers.global.loading=function(a){return function(b){var c;return null==b&&(b="start"),c="start"===b?"add":"remove",null!=a.Kodi?a.Kodi.execute("body:state",c,"loading"):void 0}}(this),helpers.global.numPad=function(a,b){var c;return c="000000000"+a,c.substr(c.length-b)},helpers.global.secToTime=function(a){var b,c,d;return null==a&&(a=0),a=Math.round(a),b=parseInt(a/3600)%24,c=parseInt(a/60)%60,d=a%60,{hours:b,minutes:c,seconds:d}},helpers.global.timeToSec=function(a){var b,c;return b=3600*parseInt(a.hours),c=60*parseInt(a.minutes),parseInt(b)+parseInt(c)+parseInt(a.seconds)},helpers.global.epgDateTimeToJS=function(a){return new Date(a?a.replace(" ","t"):0)},helpers.global.formatTime=function(a){var b;return null==a?0:(b="",a.hours>0&&(a.hours<10&&(b="0"),b+=a.hours+":"),b+(a.minutes<10?"0":"")+a.minutes+":"+(a.seconds<10?"0":"")+a.seconds)},helpers.global.paramObj=function(a,b){var c;return c={},c[a]=b,c},helpers.global.regExpEscape=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},helpers.global.stringStartsWith=function(a,b){return new RegExp("^"+helpers.global.regExpEscape(a)).test(b)},helpers.global.stringStripStartsWith=function(a,b){return b.substring(a.length)},helpers.global.arrayToSentence=function(a,b){var c,d,e,f,g;if(null==b&&(b=!0),g="",f=b?"s":"",e=a.pop(),a.length>0){for(c in a)d=a[c],g+="<strong>"+d+f+"</strong>",g+=parseInt(c)!==a.length-1?", ":"";g+=" "+t.gettext("and")+" "}return g+="<strong>"+e+f+"</strong>"},helpers.global.hash=function(a,b){return"encode"===a?encodeURIComponent(b):decodeURIComponent(b)},helpers.global.rating=function(a){return Math.round(10*a)/10},helpers.global.appTitle=function(a){var b;return null==a&&(a=!1),b="",_.isObject(a)&&null!=a.label&&(b="▶ "+a.label+" | "),document.title=b+config.get("static","appTitle")},helpers.global.localVideoPopup=function(a,b){return null==b&&(b=545),window.open(a,"_blank","toolbar=no, scrollbars=no, resizable=yes, width=925, height="+b+", top=100, left=100")},helpers.global.stripTags=function(a){return null!=a?a.replace(/(<([^>]+)>)/gi,""):""},helpers.global.hashCode=function(a){var b,c,d,e;if(c=0,0===a.length)return c;for(d=0,e=a.length;e>d;)b=a.charCodeAt(d),c=(c<<5)-c+b,c|=0,d++;return c},$.fn.removeClassRegex=function(a){return $(this).removeClass(function(b,c){return c.split(/\s+/).filter(function(b){return a.test(b)}).join(" ")})},$.fn.removeClassStartsWith=function(a){var b;return b=new RegExp("^"+a,"g"),$(this).removeClassRegex(b)},$.fn.scrollStopped=function(a){var b,c;return b=$(this),c=this,b.scroll(function(){return b.data("scrollTimeout")&&clearTimeout(b.data("scrollTimeout")),b.data("scrollTimeout",setTimeout(a,250,c))})},$.fn.resizeStopped=function(a){var b,c;return b=$(this),c=this,b.resize(function(){return b.data("resizeTimeout")&&clearTimeout(b.data("resizeTimeout")),b.data("resizeTimeout",setTimeout(a,250,c))})},$(document).ready(function(){return $(".dropdown li").on("click",function(){return $(this).closest(".dropdown").removeClass("open")}),$(".dropdown").on("click",function(){return $(this).removeClass("open").trigger("hide.bs.dropdown")})}),helpers.stream={},helpers.stream.videoSizeMap=[{min:0,max:360,label:"SD"},{min:361,max:480,label:"480"},{min:481,max:720,label:"720p"},{min:721,max:1080,label:"1080p"},{min:1081,max:1e5,label:"4K"}],helpers.stream.audioChannelMap=[{channels:6,label:"5.1"},{channels:8,label:"7.1"},{channels:2,label:"2.1"},{channels:1,label:"mono"}],helpers.stream.langMap={eng:"English",und:"Unknown",bul:"Bulgaria",ara:"Arabic",zho:"Chinese",ces:"Czech",dan:"Danish",nld:"Netherland",fin:"Finish",fra:"French",deu:"German",nor:"Norwegian",pol:"Polish",por:"Portuguese",ron:"Romanian",spa:"Spanish",swe:"Swedish",tur:"Turkish",vie:"Vietnamese"},helpers.stream.videoFormat=function(a){var b,c,d;for(b in a)d=a[b],c={label:"SD"},d.height&&d.height>0&&(c=_.find(helpers.stream.videoSizeMap,function(a){var b;return a.min<(b=d.height)&&b<=a.max?!0:!1})),a[b].label=d.codec+" "+c.label+" ("+d.width+" x "+d.height+")",a[b].shortlabel=d.codec+" "+c.label,a[b].res=c.label;return a},helpers.stream.formatLanguage=function(a){return helpers.stream.langMap[a]?helpers.stream.langMap[a]:a},helpers.stream.audioFormat=function(a){var b,c,d,e;for(c in a)e=a[c],b=_.findWhere(helpers.stream.audioChannelMap,{channels:e.channels}),b=b?b.label:e.channels,d="",""!==e.language&&(d=" ("+helpers.stream.formatLanguage(e.language)+")"),a[c].label=e.codec+" "+b+d,a[c].shortlabel=e.codec+" "+b,a[c].ch=b;return a},helpers.stream.subtitleFormat=function(a){var b,c;for(b in a)c=a[b],a[b].label=helpers.stream.formatLanguage(c.language),a[b].shortlabel=helpers.stream.formatLanguage(c.language);return a},helpers.stream.streamFormat=function(a){var b,c,d,e;for(b=["audio","video","subtitle"],d=0,e=b.length;e>d;d++)c=b[d],a[c]=a[c]&&a[c].length>0?helpers.stream[c+"Format"](a[c]):[];return a},helpers.translate={},helpers.translate.getLanguages=function(){return{en:"English",fr:"French",de:"German",nl:"Dutch"}},helpers.translate.init=function(a){var b,c;return b=config.get("static","lang","en"),c=config.preStartGet("lang",b),$.getJSON("lang/"+c+".json",function(b){return window.t=new Jed(b),t.options.missing_key_callback=function(a){return helpers.translate.missingKeyLog(a)},a()})},helpers.translate.missingKeyLog=function(a){var b;return b='\n\nmsgctxt ""\nmsgid "'+a+'"\nmsgstr "'+a+'"\n',helpers.debug.msg(b,"warning")},helpers.ui={},helpers.ui.getSwatch=function(a,b){var c,d;return d={},c=document.createElement("img"),c.setAttribute("src",a),c.addEventListener("load",function(){var a,e,f,g;g=new Vibrant(c),f=g.swatches();for(e in f)f.hasOwnProperty(e)&&f[e]&&(a=f[e],d[e]={hex:a.getHex(),rgb:_.map(a.getRgb(),function(a){return Math.round(a)}),title:a.getTitleTextColor(),body:a.getBodyTextColor()});return b(d)})},helpers.ui.applyHeaderSwatch=function(a){var b,c,d,e;return null!=a&&null!=a.DarkVibrant&&null!=a.DarkVibrant.hex&&config.get("static","vibrantHeaders")===!0?(c=a.DarkVibrant,b=$(".details-header"),b.css("background-color",c.hex),e=c.rgb.join(","),d="linear-gradient(to right, "+c.hex+" 0%, rgba("+e+",0.9) 30%, rgba("+e+",0) 100%)",$(".region-details-fanart .gradient",b).css("background-image",d)):void 0},helpers.url={},helpers.url.map={artist:"music/artist/:id",album:"music/album/:id",song:"music/song/:id",movie:"movie/:id",tvshow:"tvshow/:id",season:"tvshow/:id",episode:"tvshow/:tvshowid/:season/:id",channeltv:"tvshows/live/:id",channelradio:"music/radio/:id",file:"browser/file/:id",playlist:"playlist/:id"},helpers.url.baseKodiUrl=function(a){var b;return null==a&&(a="Kodi"),b=config.get("static","jsonRpcEndpoint")+"?"+a,config.get("static","reverseProxy")?b:"/"+b},helpers.url.get=function(a,b,c){var d,e;null==b&&(b=""),null==c&&(c={}),d="",null!=helpers.url.map[a]&&(d=helpers.url.map[a]),c[":id"]=b;for(e in c)b=c[e],d=d.replace(e,b);return d},helpers.url.filterLinks=function(a,b,c,d){var e,f,g,h;null==d&&(d=5),e="#"+a+"?"+b+"=",h=[];for(f in c)g=c[f],d>f&&h.push('<a href="'+e+encodeURIComponent(g)+'">'+g+"</a>");return h.join(", ")},helpers.url.playlistUrl=function(a){return"song"===a.type&&(""!==a.albumid?a.url=helpers.url.get("album",a.albumid):a.url("music/albums")),a.url},helpers.url.arg=function(a){var b,c;return null==a&&(a="none"),c=location.hash,b=c.substring(1).split("/"),"none"===a?b:null!=b[a]?b[a]:""},helpers.url.params=function(a){var b,c,d,e;if(null==a&&(a="auto"),"auto"===a){if(b=document.location.href,-1===b.indexOf("?"))return{};e=b.split("?"),c=e[0],d=e[1]}return null==d&&(d=a),_.object(_.compact(_.map(d.split("&"),function(a){return a?a.split("="):void 0})))},helpers.url.buildParams=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(b+"="+encodeURIComponent(d));return"?"+c.join("&")},helpers.url.alterParams=function(a,b){var c,d,e,f,g;if(null==a&&(a={}),null==b&&(b=[]),c=helpers.url.params(),b.length>0)for(f=0,g=b.length;g>f;f++)d=b[f],delete c[d];return e=_.extend(c,a),helpers.url.path()+helpers.url.buildParams(e)},helpers.url.path=function(){var a,b,c,d;return a=document.location.hash,d=a.split("?"),b=d[0],c=d[1],b.substring(1)},helpers.url.imdbUrl=function(a,b){var c;return c="http://www.imdb.com/title/"+a+"/","<a href='"+c+"' class='imdblink' target='_blank'>"+t.gettext(b)+"</a>"},helpers.url.parseTrailerUrl=function(a){var b,c;return b={source:"",id:"",img:"",url:""},c=helpers.url.params(a),a.indexOf("youtube")>-1&&(b.source="youtube",b.id=c.videoid,b.img="http://img.youtube.com/vi/"+b.id+"/0.jpg",b.url="https://www.youtube.com/watch?v="+b.id),b},helpers.url.isSecureProtocol=function(){var a;return a="undefined"!=typeof document&&null!==document&&"https:"===document.location.protocal?!0:!1},Cocktail.patch(Backbone),function(a){var b,c;return c=a.sync,a.sync=function(a,d,e){var f;return null==e&&(e={}),_.defaults(e,{beforeSend:_.bind(b.beforeSend,d),complete:_.bind(b.complete,d)}),f=c(a,d,e),d._fetch||"read"!==a?void 0:d._fetch=f},b={beforeSend:function(){return this.trigger("sync:start",this)},complete:function(){return this.trigger("sync:stop",this)}}}(Backbone),function(a){return _.extend(a.Marionette.Application.prototype,{navigate:function(b,c){return null==c&&(c={}),a.history.navigate(b,c)},getCurrentRoute:function(){var b;return b=a.history.fragment,_.isEmpty(b)?null:b},startHistory:function(){return a.history?a.history.start():void 0},register:function(a,b){return null==this._registry&&(this._registry={}),this._registry[b]=a},unregister:function(a,b){return delete this._registry[b]},resetRegistry:function(){var a,b,c,d,e;d=this.getRegistrySize(),e=this._registry;for(b in e)a=e[b],a.region.close();return c="There were "+d+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(c,this._registry):console.log(c)},getRegistrySize:function(){return _.size(this._registry)}})}(Backbone),function(a){return _.extend(a.Renderer,{extension:[".jst"],render:function(a,b){var c;if(c=this.getTemplate(a),!c)throw"Template "+a+" not found!";return c(b)},getTemplate:function(a){var b;return b=this.insertAt(a.split("/"),-1,"tpl").join("/"),b+=this.extension,JST[b]?JST[b]:void 0},insertAt:function(a,b,c){return a.splice(b,0,c),a}})}(Marionette),this.Kodi.module("Entities",function(a,b,c){return a.Collection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.getRawCollection=function(){var a,b,c,d,e;if(b=[],this.models.length>0)for(e=this.models,c=0,d=e.length;d>c;c++)a=e[c],b.push(a.attributes);return b},b.prototype.getCacheKey=function(){var a;return a=this.constructor.name},b.prototype.autoSort=function(a){var b;return a.sort?(b=a.order?a.order:"asc",this.sortCollection(a.sort,b)):void 0},b.prototype.sortCollection=function(a,b){null==b&&(b="asc"),this.comparator=function(b){return function(c){return b.ignoreArticleParse(c.get(a))}}(this),"desc"===b&&(this.comparator=this.reverseSortBy(this.comparator)),this.sort()},b.prototype.reverseSortBy=function(a){return function(b,c){var d,e;return d=a(b),e=a(c),void 0===d?-1:void 0===e?1:e>d?1:d>e?-1:0}},b.prototype.ignoreArticleParse=function(a){var b,c,d,e,f;if(b=["'",'"',"the ","a "],"string"==typeof a&&config.get("static","ignoreArticle",!0))for(a=a.toLowerCase(),c=!1,e=0,f=b.length;f>e;e++)d=b[e],c||helpers.global.stringStartsWith(d,a)&&(a=helpers.global.stringStripStartsWith(d,a),c=!0);return a},b}(c.Collection)}),this.Kodi.module("Entities",function(a,b,c,d,e,f){return a.Filtered=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.filterByMultiple=function(a,b){return null==b&&(b=[]),this.filterBy(a,function(c){return helpers.global.inArray(c.get(a),b)})},b.prototype.filterByMultipleArray=function(a,b){return null==b&&(b=[]),this.filterBy(a,function(c){var d,e,f,g,h;for(d=!1,h=c.get(a),f=0,g=h.length;g>f;f++)e=h[f],helpers.global.inArray(e,b)&&(d=!0);return d})},b.prototype.filterByMultipleObject=function(a,b,c){return null==c&&(c=[]),this.filterBy(a,function(d){var e,g,h,i,j;for(g=!1,e=f.pluck(d.get(a),b),i=0,j=e.length;j>i;i++)h=e[i],helpers.global.inArray(h,c)&&(g=!0);return g})},b.prototype.filterByUnwatched=function(){return this.filterBy("unwatched",function(a){var b;return b=1,"tvshow"===a.get("type")?b=a.get("episode")-a.get("watchedepisodes"):("movie"===a.get("type")||"episode"===a.get("type"))&&(b=a.get("playcount")>0?0:1),b>0})},b.prototype.filterByString=function(a,b){return this.filterBy("search",function(c){var d;return b.length<3?!1:(d=c.get(a).toLowerCase(),d.indexOf(b.toLowerCase())>-1)})},b}(FilteredCollection)}),this.Kodi.module("Entities",function(a,b,c,d,e,f){return a.Model=function(a){function b(){return this.saveError=__bind(this.saveError,this),this.saveSuccess=__bind(this.saveSuccess,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.getCacheKey=function(){var a;return a=this.constructor.name},b.prototype.destroy=function(a){return null==a&&(a={}),f.defaults(a,{wait:!0}),this.set({_destroy:!0}),b.__super__.destroy.call(this,a)},b.prototype.isDestroyed=function(){return this.get("_destroy")},b.prototype.save=function(a,c){var d;return null==c&&(c={}),d=this.isNew(),f.defaults(c,{wait:!0,success:f.bind(this.saveSuccess,this,d,c.collection),error:f.bind(this.saveError,this)}),this.unset("_errors"),b.__super__.save.call(this,a,c)},b.prototype.saveSuccess=function(a,b){return a?(b&&b.add(this),b&&b.trigger("model:created",this),this.trigger("created",this)):(null==b&&(b=this.collection),b&&b.trigger("model:updated",this),this.trigger("updated",this))},b.prototype.saveError=function(a,b){var c;return 500!==b.status&&404!==b.status?this.set({_errors:null!=(c=e.parseJSON(b.responseText))?c.errors:void 0}):void 0},b}(c.Model)}),this.Kodi.module("Entities",function(a,b,c){var d;return d={storageKey:"config:app",getCollection:function(){var b;return b=new a.ConfigAppCollection,b.fetch(),b},getConfig:function(a,b){return null==b&&(b=d.getCollection()),b.find({id:a})}},a.ConfigApp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={data:{}},b}(a.Model),a.ConfigAppCollection=function(b){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,b),e.prototype.model=a.ConfigApp,e.prototype.localStorage=new c.LocalStorage(d.storageKey),e}(a.Collection),b.reqres.setHandler("config:app:get",function(a,b){var c;return c=d.getConfig(a),null!=c?c.get("data"):b}),b.reqres.setHandler("config:app:set",function(a,b){var c,e;return c=d.getCollection(),e=d.getConfig(a,c),null!=e?e.save({data:b}):(c.create({id:a,data:b}),b)}),b.reqres.setHandler("config:static:get",function(a,b){var c;return c=null!=config["static"][a]?config["static"][a]:b}),b.reqres.setHandler("config:static:set",function(a,b){return config["static"][a]=b,b})}),this.Kodi.module("Entities",function(a,b,c){var d;return d={apiKey:"AIzaSyBxvaR6mCnUWN8cv2TiPRmuEh0FykBTAH0",searchUrl:"https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoDefinition=any&videoEmbeddable=true&order=relevance&safeSearch=none",getSearchUrl:function(){return this.searchUrl+"&key="+this.apiKey},parseItems:function(a){var b,c,d,e,f;d=[],f=a.items;for(b in f)c=f[b],e={id:c.id.videoId,title:c.snippet.title,desc:c.snippet.description,thumbnail:c.snippet.thumbnails["default"].url},d.push(e);return d}},a.youtubeItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:"",title:"",desc:"",thumbnail:""},b}(a.Model),a.youtubeCollection=function(b){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,b),e.prototype.model=a.youtubeItem,e.prototype.url=d.getSearchUrl(),e.prototype.sync=function(a,b,d){return d.dataType="jsonp",d.timeout=5e3,c.sync(a,b,d)},e.prototype.parse=function(a){return d.parseItems(a)},e}(a.Collection),b.commands.setHandler("youtube:search:entities",function(b,c){var d;return d=new a.youtubeCollection,d.fetch({data:{q:b},success:function(a){return c(a)},error:function(a){return helpers.debug.log("Youtube search error","error",a)}})})}),this.Kodi.module("Entities",function(a,b){return a.Filter=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={alias:"",type:"string",key:"",sortOrder:"asc",title:"",active:!1},b}(a.Model),a.FilterCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Filter,c}(a.Collection),a.FilterOption=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={key:"",value:"",title:""},b}(a.Model),a.FilterOptionCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Filter,c}(a.Collection),a.FilterSort=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={alias:"",type:"string",defaultSort:!1,defaultOrder:"asc",key:"",active:!1,order:"asc",title:""},b}(a.Model),a.FilterSortCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FilterSort,c}(a.Collection),a.FilterActive=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={key:"",values:[],title:""},b}(a.Model),a.FilterActiveCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FilterActive,c}(a.Collection),b.reqres.setHandler("filter:filters:entities",function(b){return new a.FilterCollection(b)}),b.reqres.setHandler("filter:filters:options:entities",function(b){return new a.FilterOptionCollection(b)}),b.reqres.setHandler("filter:sort:entities",function(b){return new a.FilterSortCollection(b)}),b.reqres.setHandler("filter:active:entities",function(b){return new a.FilterActiveCollection(b)})}),this.Kodi.module("Entities",function(a,b){var c;return a.FormItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,title:"",type:"",element:"",options:[],defaultValue:"",description:"",children:[],attributes:{}},b}(a.Model),a.Form=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FormItem,c}(a.Collection),c={applyState:function(a,b){return null!=b[a.id]&&(a.defaultValue=b[a.id],a.defaultsApplied=!0),a},processItems:function(a,b,d){var e,f,g,h;for(null==b&&(b={}),null==d&&(d=!1),e=[],g=0,h=a.length;h>g;g++)f=a[g],f=this.applyState(f,b),f.children&&f.children.length>0&&(f.children=c.processItems(f.children,b,!0)),e.push(f);return e},toCollection:function(b){var c,d,e;for(d in b)e=b[d],e.children&&e.children.length>0&&(c=new a.Form(e.children),b[d].children=c);return new a.Form(b)}},b.reqres.setHandler("form:item:entites",function(a,b){return null==a&&(a=[]),null==b&&(b={}),c.toCollection(c.processItems(a,b))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={cacheSynced:function(a,b){return a.on("cachesync",function(){return b(),helpers.global.loading("end")})},xhrsFetch:function(a,b){var c;return c=f.chain([a]).flatten().pluck("_fetch").value(),e.when.apply(e,c).done(function(){return b(),helpers.global.loading("end")})}},b.commands.setHandler("when:entity:fetched",function(a,b){return helpers.global.loading("start"),a.params?g.xhrsFetch(a,b):g.cacheSynced(a,b)})}),this.Kodi.module("KodiEntities",function(a,b,c){return c.fetchCache.localStorage=!1,a.Collection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=function(){return helpers.url.baseKodiUrl("Collection")},b.prototype.rpc=new c.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),b.prototype.sync=function(a,b,d){return"read"===a&&(this.options=d),c.sync(a,b,d)},b.prototype.getCacheKey=function(a){var b,c,d,e,f,g,h,i;for(this.options=a,c=this.constructor.name,h=["filter","sort","limit","file"],f=0,g=h.length;g>f;f++)if(b=h[f],a[b]){i=a[b];for(d in i)e=i[d],c+=":"+d+":"+e}return c},b.prototype.getResult=function(a,b){var c;return c=a.jsonrpc&&a.result?a.result:a,c[b]},b.prototype.argCheckOption=function(a,b){return null!=this.options&&null!=this.options[a]?this.options[a]:b},b.prototype.argSort=function(a,b){var c;return null==b&&(b="ascending"),c={method:a,order:b,ignorearticle:this.isIgnoreArticle()},this.argCheckOption("sort",c)},b.prototype.argLimit=function(a,b){var c;return null==a&&(a=0),null==b&&(b="all"),c={start:a},"all"!==b&&(c.end=b),this.argCheckOption("limit",c)},b.prototype.argFilter=function(a,b){var c;return c={},null!=a&&(c[a]=b),this.argCheckOption("filter",c)},b.prototype.isIgnoreArticle=function(){return config.get("static","ignoreArticle",!0)},b}(b.Entities.Collection)}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){return a.Model=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,a),d.prototype.url=function(){return helpers.url.baseKodiUrl("Model")},d.prototype.rpc=new c.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),d.prototype.modelDefaults={fullyloaded:!1,thumbnail:"",thumbsUp:!1,parsed:!1},d.prototype.parseModel=function(a,c,d){return c.parsed||("mixed"!==d&&(c.id=d),c.rating&&(c.rating=helpers.global.rating(c.rating)),c.streamdetails&&f.isObject(c.streamdetails)&&(c.streamdetails=helpers.stream.streamFormat(c.streamdetails)),c.resume&&(c.progress=0===c.resume.position?0:Math.round(c.resume.position/c.resume.total*100)),c.trailer&&(c.trailer=helpers.url.parseTrailerUrl(c.trailer)),"episode"===a?c.url=helpers.url.get(a,d,{":tvshowid":c.tvshowid,":season":c.season}):"channel"===a?(a="tv"===c.channeltype?"channeltv":"channelradio",c.url=helpers.url.get(a,d)):c.url=helpers.url.get(a,d),c=b.request("images:path:entity",c),c.type=a,c.uid=this.getUniqueId(c,a),c.parsed=!0),c},d.prototype.parseFieldsToDefaults=function(a,b){var c,d,e;for(null==b&&(b={}),d=0,e=a.length;e>d;d++)c=a[d],b[c]="";return b},d.prototype.getUniqueId=function(a,b){var c,d,e;return b=b?b:a.type,d=a.id,e="none","number"==typeof d?e=d:(c=a.file,c&&(e="file-"+helpers.global.hashCode(c))),b+"-"+e},d}(b.Entities.Model)}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={getAlbumFields:function(a){var b,c,d;return null==a&&(a="small"),b=["thumbnail","playcount","artistid","artist","genre","albumlabel","year"],c=["fanart","style","mood","description","genreid","rating"],"full"===a?d=b.concat(c):b},getAlbum:function(a,c){var d;return d=new b.KodiEntities.Album,d.set({albumid:parseInt(a),properties:g.getAlbumFields("full")}),d.fetch(c),d},getAlbums:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.AlbumCollection,c.fetch(b),c},getRecentlyAddedAlbums:function(b){var c;return c=new a.AlbumRecentlyAddedCollection,c.fetch(b),c},getRecentlyPlayedAlbums:function(b){var c;return c=new a.AlbumRecentlyPlayedCollection,c.fetch(b),c}},a.Album=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{albumid:1,album:""}),this.parseFieldsToDefaults(g.getAlbumFields("full"),a)},b.prototype.methods={read:["AudioLibrary.GetAlbumDetails","albumid","properties"]},b.prototype.arg2=g.getAlbumFields("full"),b.prototype.parse=function(a){var b;return b=null!=a.albumdetails?a.albumdetails:a,null!=a.albumdetails&&(b.fullyloaded=!0),this.parseModel("album",b,b.albumid)},b}(b.KodiEntities.Model),a.AlbumCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetAlbums","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.arg3=function(){return this.argFilter()},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),a.AlbumRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetRecentlyAddedAlbums","arg1","arg2"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit(0,21)
},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),a.AlbumRecentlyPlayedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetRecentlyPlayedAlbums","arg1","arg2"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit(0,21)},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),b.reqres.setHandler("album:entity",function(a,b){return null==b&&(b={}),g.getAlbum(a,b)}),b.reqres.setHandler("album:entities",function(a){return null==a&&(a={}),g.getAlbums(a)}),b.reqres.setHandler("album:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedAlbums(a)}),b.reqres.setHandler("album:recentlyplayed:entities",function(a){return null==a&&(a={}),g.getRecentlyPlayedAlbums(a)}),b.commands.setHandler("album:search:entities",function(a,c,d){var e;return e=g.getAlbums({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={getArtistFields:function(a){var b,c,d;return null==a&&(a="small"),b=["thumbnail","mood","genre","style"],c=["fanart","born","formed","description"],"full"===a?d=b.concat(c):b},getArtist:function(a,c){var d;return d=new b.KodiEntities.Artist,d.set({artistid:parseInt(a),properties:g.getArtistFields("full")}),d.fetch(c),d},getArtists:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=helpers.cache.get("artist:entities"),(c===!1||b.reset===!0)&&(c=new a.ArtistCollection,c.fetch(b)),helpers.cache.set("artist:entities",c),c}},a.Artist=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{artistid:1,artist:""}),this.parseFieldsToDefaults(g.getArtistFields("full"),a)},b.prototype.methods={read:["AudioLibrary.GetArtistDetails","artistid","properties"]},b.prototype.arg2=g.getArtistFields("full"),b.prototype.parse=function(a){var b;return b=null!=a.artistdetails?a.artistdetails:a,null!=a.artistdetails&&(b.fullyloaded=!0),this.parseModel("artist",b,b.artistid)},b}(b.KodiEntities.Model),a.ArtistCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Artist,c.prototype.methods={read:["AudioLibrary.GetArtists","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return config.get("static","albumAtristsOnly",!0)},c.prototype.arg2=function(){return g.getArtistFields("small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("artist","ascending")},c.prototype.parse=function(a){return this.getResult(a,"artists")},c}(b.KodiEntities.Collection),b.reqres.setHandler("artist:entity",function(a,b){return null==b&&(b={}),g.getArtist(a,b)}),b.reqres.setHandler("artist:entities",function(a){return null==a&&(a={}),g.getArtists(a)}),b.commands.setHandler("artist:search:entities",function(a,c,d){var e;return e=g.getArtists({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b){var c;return c={fields:{minimal:["name"],small:["order","role","thumbnail","origin","url"],full:[]},getCollection:function(b,c){var d,e,f;for(e in b)f=b[e],b[e].origin=c;return d=new a.CastCollection(b)}},a.Cast=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="order",b.prototype.defaults=function(){return this.parseFieldsToDefaults(helpers.entities.getFields(c.fields,"small"),{})},b.prototype.parse=function(a){return a.url="?cast="+a.name,a},b}(b.KodiEntities.Model),a.CastCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Cast,c}(b.KodiEntities.Collection),b.reqres.setHandler("cast:entities",function(a,b){return c.getCollection(a,b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:[],small:["title","runtime","starttime","endtime","genre"],full:["plot","progress","progresspercentage","episodename","episodenum","episodepart","firstaired","hastimer","isactive","parentalrating","wasactive","thumbnail"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Broadcast,d.set({channelid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c;return c=new a.BroadcastCollection,c.fetch(b),c}},a.Broadcast=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{channelid:1,channel:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["PVR.GetBroadcasts","channelid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.broadcasts?a.broadcasts:a,null!=a.broadcasts&&(b.fullyloaded=!0),this.parseModel("broadcast",b,b.channelid)},b}(b.KodiEntities.Model),a.BroadcastCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Broadcast,c.prototype.methods={read:["PVR.GetBroadcasts","arg1","arg2","arg3"]},c.prototype.arg1=function(){return parseInt(this.argCheckOption("channelid",0))},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"full")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"broadcasts")},c}(b.KodiEntities.Collection),b.reqres.setHandler("broadcast:entity",function(a,b){return g.getEntity(a,b)}),b.reqres.setHandler("broadcast:entities",function(a,b){return null==b&&(b={}),b.channelid=a,g.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","episode","season","rating","file","cast","showtitle","tvshowid","uniqueid","resume"],full:["fanart","plot","firstaired","director","writer","runtime","streamdetails"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Episode,d.set({episodeid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!1,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.EpisodeCollection,c.fetch(b),c},getRecentlyAddedCollection:function(b){var c;return c=new a.EpisodeRecentlyAddedCollection,c.fetch(b),c}},a.Episode=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{episodeid:1,episode:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetEpisodeDetails","episodeid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.episodedetails?a.episodedetails:a,null!=a.episodedetails&&(b.fullyloaded=!0),b.unwatched=b.playcount>0?0:1,this.parseModel("episode",b,b.episodeid)},b}(b.KodiEntities.Model),a.EpisodeCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Episode,c.prototype.methods={read:["VideoLibrary.GetEpisodes","arg1","arg2","arg3"]},c.prototype.arg1=function(){return this.argCheckOption("tvshowid",0)},c.prototype.arg2=function(){return this.argCheckOption("season",0)},c.prototype.arg3=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg4=function(){return this.argLimit()},c.prototype.arg5=function(){return this.argSort("episode","ascending")},c.prototype.parse=function(a){return this.getResult(a,"episodes")},c}(b.KodiEntities.Collection),a.EpisodeRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Episode,c.prototype.methods={read:["VideoLibrary.GetRecentlyAddedEpisodes","arg1","arg2"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"episodes")},c}(b.KodiEntities.Collection),b.reqres.setHandler("episode:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("episode:entities",function(a,b,c){return null==c&&(c={}),c.tvshowid=a,c.season=b,g.getCollection(c)}),b.reqres.setHandler("episode:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedCollection(a)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title","file","mimetype"],small:["thumbnail"],full:["fanart","streamdetails"]},addonFields:["path","name"],sources:[{media:"video",label:"Video",type:"source",provides:"video"},{media:"music",label:"Music",type:"source",provides:"audio"},{media:"music",label:"Audio Addons",type:"addon",provides:"audio",addonType:"xbmc.addon.audio",content:"unknown"},{media:"video",label:"Video Addons",type:"addon",provides:"files",addonType:"xbmc.addon.video",content:"unknown"}],directorySeperator:"/",getEntity:function(a,c){var d;return d=new b.KodiEntities.File,d.set({file:a,properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b,c){var d,e;return e={cache:!0},c=f.extend(e,c),d="sources"===b?new a.SourceCollection:new a.FileCollection,d.fetch(c),d},parseToFilesAndFolders:function(b){var c,d;return c=b.getRawCollection(),d={},d.file=new a.FileCustomCollection(f.where(c,{filetype:"file"})),d.directory=new a.FileCustomCollection(f.where(c,{filetype:"directory"})),d},getSources:function(){var c,d,e,f,g,h,i;for(d=b.request("command:kodi:controller","auto","Commander"),e=[],c=new a.SourceCollection,i=this.sources,g=0,h=i.length;h>g;g++)f=i[g],"source"===f.type&&e.push({method:"Files.GetSources",params:[f.media]}),"addon"===f.type&&e.push({method:"Addons.GetAddons",params:[f.addonType,f.content,!0,this.addonFields]});return d.multipleCommands(e,function(a){return function(b){var d,e,g,h,i,j,k;for(d in b)if(e=b[d],f=a.sources[d],h=f.type+"s",e[h])for(k=e[h],i=0,j=k.length;j>i;i++)g=k[i],g.media=f.media,g.sourcetype=f.type,"addon"===f.type&&(g.file=a.createAddonFile(g),g.label=g.name),g.url=a.createFileUrl(f.media,g.file),c.add(g);return c.trigger("cachesync")}}(this)),c},parseSourceCollection:function(b){var c,d,e,g,h,i;for(c=b.getRawCollection(),b=[],i=this.sources,g=0,h=i.length;h>g;g++)e=i[g],d=f.where(c,{media:e.media}),d.length>0&&"source"===e.type&&(e.sources=new a.SourceCollection(d),e.url="browser/"+e.media,b.push(e));return new a.SourceSetCollection(b)},createFileUrl:function(a,b){return"browser/"+a+"/"+helpers.global.hash("encode",b)},createAddonFile:function(a){return"plugin://"+a.addonid},parseFiles:function(a,c){var d,e;for(d in a)e=a[d],e.parsed||(e=b.request("images:path:entity",e),a[d]=this.correctFileType(e),a[d].media=c,a[d].player=this.getPlayer(c),a[d].url=this.createFileUrl(c,e.file),a[d].parsed=!0);return a},correctFileType:function(a){var b;return b=["x-directory/normal"],a.mimetype&&helpers.global.inArray(a.mimetype,b)&&(a.filetype="directory"),a},createPathCollection:function(b,c){var d,e,f,g,h,i,j,k,l,m,n;for(f=[],g={},d=c.getRawCollection(),k=0,m=d.length;m>k;k++)j=d[k],g.file||helpers.global.stringStartsWith(j.file,b)&&(g=j);if(g.file)for(f.push(g),e=g.file,i=helpers.global.stringStripStartsWith(g.file,b).split(this.directorySeperator),l=0,n=i.length;n>l;l++)h=i[l],""!==h&&(e+=h+this.directorySeperator,f.push(this.createPathModel(g.media,h,e)));return new a.FileCustomCollection(f)},createPathModel:function(a,b,c){var d;return d={label:b,file:c,media:a,url:this.createFileUrl(a,c)}},getPlayer:function(a){return a}},a.EmptyFile=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{filetype:"directory",media:"",label:"",url:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b}(b.KodiEntities.Model),a.File=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["Files.GetFileDetails","file","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.filedetails?a.filedetails:a,null!=a.filedetails&&(b.fullyloaded=!0),b},b}(a.EmptyFile),a.FileCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.File,c.prototype.methods={read:["Files.GetDirectory","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return this.argCheckOption("file","")},c.prototype.arg2=function(){return this.argCheckOption("media","")},c.prototype.arg3=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg4=function(){return this.argSort("label","ascending")},c.prototype.parse=function(a){var b;return b=this.getResult(a,"files"),g.parseFiles(b,this.options.media)},c}(b.KodiEntities.Collection),a.FileCustomCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.File,c}(b.KodiEntities.Collection),a.Source=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults={label:"",file:"",media:"",url:""},b}(b.KodiEntities.Model),a.SourceCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Source,c}(b.KodiEntities.Collection),a.SourceSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults={label:"",sources:""},b}(b.KodiEntities.Model),a.SourceSetCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Source,c}(b.KodiEntities.Collection),b.reqres.setHandler("file:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("file:url:entity",function(b,c){var d;return d=helpers.global.hash("decode",c),new a.EmptyFile({media:b,file:d,url:g.createFileUrl(b,d)})}),b.reqres.setHandler("file:entities",function(a){return null==a&&(a={}),g.getCollection("files",a)}),b.reqres.setHandler("file:path:entities",function(a,b){return g.createPathCollection(a,b)}),b.reqres.setHandler("file:parsed:entities",function(a){return g.parseToFilesAndFolders(a)}),b.reqres.setHandler("file:source:entities",function(){return g.getSources()}),b.reqres.setHandler("file:source:media:entities",function(a){return g.parseSourceCollection(a)}),b.reqres.setHandler("file:source:mediatypes",function(){return g.availableSources})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","resume","rating","year","file","genre","writer","director","cast","set"],full:["fanart","plotoutline","studio","mpaa","imdbnumber","runtime","streamdetails","plot","trailer"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Movie,d.set({movieid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.MovieCollection,c.fetch(b),c},getRecentlyAddedCollection:function(b){var c;return c=new a.MovieRecentlyAddedCollection,c.fetch(b),c},getFilteredCollection:function(b){var c;return c=new a.MovieFilteredCollection,c.fetch(b),c}},a.Movie=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{movieid:1,movie:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetMovieDetails","movieid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.moviedetails?a.moviedetails:a,null!=a.moviedetails&&(b.fullyloaded=!0),b.unwatched=b.playcount>0?0:1,this.parseModel("movie",b,b.movieid)},b}(b.KodiEntities.Model),a.MovieCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Movie,c.prototype.methods={read:["VideoLibrary.GetMovies","arg1","arg2","arg3"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.parse=function(a){return this.getResult(a,"movies")},c}(b.KodiEntities.Collection),a.MovieRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Movie,c.prototype.methods={read:["VideoLibrary.GetRecentlyAddedMovies","arg1","arg2"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"movies")},c}(b.KodiEntities.Collection),a.MovieFilteredCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["VideoLibrary.GetMovies","arg1","arg2","arg3","arg4"]},b.prototype.arg4=function(){return this.argFilter()},b}(a.MovieCollection),b.reqres.setHandler("movie:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("movie:entities",function(a){return null==a&&(a={}),g.getCollection(a)}),b.reqres.setHandler("movie:filtered:entities",function(a){return null==a&&(a={}),g.getFilteredCollection(a)}),b.reqres.setHandler("movie:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedCollection(a)}),b.commands.setHandler("movie:search:entities",function(a,c,d){var e;return e=g.getCollection({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title","thumbnail","file"],small:["artist","genre","year","rating","album","track","duration","playcount","dateadded","episode","artistid","albumid","tvshowid"],full:["fanart"]},getCollection:function(b){var c,d;return d={cache:!1},b=f.extend(d,b),c=new a.PlaylistCollection,c.fetch(b),c},getType:function(a,b){var c;return c="file",void 0!==a.id&&""!==a.id&&("audio"===b?c="song":"video"===b&&(c=""!==a.episode?"episode":"movie")),c},parseItems:function(a,b){var c,d;for(c in a)d=a[c],d.position=parseInt(c),a[c]=this.parseItem(d,b);return a},parseItem:function(a,b){return a.playlistid=b.playlistid,a.media=b.media,a.player="kodi",a.type&&"unknown"!==a.type||(a.type=g.getType(a,b.media)),"file"===a.type&&(a.id=a.file),a}},a.PlaylistItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="position",b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{position:0}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.parse=function(a){var b;return a.fullyloaded=!0,b=this.parseModel(a.type,a,a.id),b.url=helpers.url.playlistUrl(b),b},b}(b.KodiEntities.Model),a.PlaylistCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.PlaylistItem,c.prototype.methods={read:["Playlist.GetItems","arg1","arg2","arg3"]},c.prototype.arg1=function(){return this.argCheckOption("playlistid",0)},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("position","ascending")},c.prototype.parse=function(a){var b;return b=this.getResult(a,"items"),g.parseItems(b,this.options)},c}(b.KodiEntities.Collection),b.reqres.setHandler("playlist:kodi:entities",function(a){var c,d,e;return null==a&&(a="audio"),e=b.request("command:kodi:controller",a,"PlayList"),d={},d.media=a,d.playlistid=e.getPlayer(),c=g.getCollection(d),c.sortCollection("position","asc"),c}),b.reqres.setHandler("playlist:kodi:entity:api",function(){return g})}),this.Kodi.module("KodiEntities",function(a,b){var c;return c={fields:{minimal:["thumbnail"],small:["channeltype","hidden","locked","channel","lastplayed","broadcastnow"],full:[]},getEntity:function(a,b){return a.findWhere({channel:b})},getCollection:function(b){var c;return c=new a.ChannelCollection,c.fetch(b),c}},a.Channel=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return this.parseFieldsToDefaults(helpers.entities.getFields(c.fields,"full"),{})},b.prototype.parse=function(a){return a.fullyloaded=!0,this.parseModel("channel",a,a.channelid)},b}(b.KodiEntities.Model),a.ChannelCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.Channel,d.prototype.methods={read:["PVR.GetChannels","arg1","arg2","arg3"]},d.prototype.arg1=function(){return this.argCheckOption("group",0)},d.prototype.arg2=function(){return helpers.entities.getFields(c.fields,"small")},d.prototype.arg3=function(){return this.argLimit()},d.prototype.parse=function(a){return this.getResult(a,"channels")},d}(b.KodiEntities.Collection),b.reqres.setHandler("channel:entity",function(a,b){return c.getEntity(a,b)}),b.reqres.setHandler("channel:entities",function(a,b){return null==a&&(a="alltv"),null==b&&(b={}),b.group=a,c.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["season"],small:["showtitle","playcount","thumbnail","tvshowid","episode","watchedepisodes","fanart"],full:[]},getEntity:function(a,b){return a.findWhere({season:b})},getCollection:function(b){var c,d;return d={cache:!1,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.SeasonCollection,c.fetch(b),c}},a.Season=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{seasonid:1,season:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.parse=function(a){var b;return b=null!=a.seasondetails?a.seasondetails:a,null!=a.seasondetails&&(b.fullyloaded=!0),b.unwatched=b.episode-b.watchedepisodes,this.parseModel("season",b,b.tvshowid+"/"+b.season)},b}(b.KodiEntities.Model),a.SeasonCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Season,c.prototype.methods={read:["VideoLibrary.GetSeasons","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return this.argCheckOption("tvshowid",0)},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("season","ascending")},c.prototype.parse=function(a){return this.getResult(a,"seasons")},c}(b.KodiEntities.Collection),b.reqres.setHandler("season:entity",function(a,b){return g.getEntity(a,b)}),b.reqres.setHandler("season:entities",function(a,b){return null==b&&(b={}),b.tvshowid=a,g.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={songsByIdMax:50,fields:{minimal:["title","file"],small:["thumbnail","artist","artistid","album","albumid","lastplayed","track","year","duration"],full:["fanart","genre","style","mood","born","formed","description","lyrics"]},getSong:function(a,c){var d;return d=new b.KodiEntities.Song,d.set({songid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getFilteredSongs:function(b){var c,d;return c={cache:!0},b=f.extend(c,b),b.indexOnly?(b.expires=config.get("static","searchIndexCacheExpiry",86400),d=new a.SongSearchIndexCollection):d=new a.SongFilteredCollection,d.fetch(b),d},parseSongsToAlbumSongs:function(b){var c,d,e,f,g,h,i,j;for(h=b.getRawCollection(),e={},d={},i=0,j=h.length;j>i;i++)f=h[i],e[f.albumid]||(e[f.albumid]=[]),e[f.albumid].push(f);for(c in e)g=e[c],d[c]=new a.SongCustomCollection(g);return d},getSongsByIds:function(c,d,e){var h,i,j,k,l,m,n,o,p,q;if(null==c&&(c=[]),null==d&&(d=-1),k=b.request("command:kodi:controller","auto","Commander"),c=this.getLimitIds(c,d),i="songs-"+c.join("-"),n=[],h=helpers.cache.get(i,!1))j=new a.SongCustomCollection(h),e&&e(j);else{for(o=new a.Song,l=[],p=0,q=c.length;q>p;p++)m=c[p],l.push({method:"AudioLibrary.GetSongDetails",params:[m,helpers.entities.getFields(g.fields,"small")]});l.length>0&&k.multipleCommands(l,function(){return function(b){var c,d,g,h;for(h=f.flatten([b]),d=0,g=h.length;g>d;d++)c=h[d],n.push(o.parseModel("song",c.songdetails,c.songdetails.songid));return helpers.cache.set(i,n),j=new a.SongCustomCollection(n),e?e(j):void 0}}(this))}return j},getLimitIds:function(a,b){var c,d,e;b=-1===b?this.songsByIdMax:b,e=[];for(c in a)d=a[c],b>c&&e.push(d);return e}},a.Song=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{songid:1,artist:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["AudioLibrary.GetSongDetails","songidid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.songdetails?a.songdetails:a,null!=a.songdetails&&(b.fullyloaded=!0),this.parseModel("song",b,b.songid)},b}(b.KodiEntities.Model),a.SongFilteredCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Song,c.prototype.methods={read:["AudioLibrary.GetSongs","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("track","ascending")},c.prototype.arg4=function(){return this.argFilter()},c.prototype.parse=function(a){return this.getResult(a,"songs")},c}(b.KodiEntities.Collection),a.SongCustomCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Song,c}(b.KodiEntities.Collection),a.SongSearchIndexCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["AudioLibrary.GetSongs"]},b}(a.SongFilteredCollection),b.reqres.setHandler("song:entity",function(a,b){return null==b&&(b={}),g.getSong(a,b)}),b.reqres.setHandler("song:filtered:entities",function(a){return null==a&&(a={}),g.getFilteredSongs(a)}),b.reqres.setHandler("song:byid:entities",function(a,b){return null==a&&(a=[]),g.getSongsByIds(a,-1,b)}),b.reqres.setHandler("song:albumparse:entities",function(a){return g.parseSongsToAlbumSongs(a)}),b.commands.setHandler("song:search:entities",function(a,c,d){var e,f,h;return e=20,h=helpers.global.paramObj("indexOnly",!0),f=g.getFilteredSongs(h),b.execute("when:entity:fetched",f,function(){return function(){var h,i,j;return i=new b.Entities.Filtered(f),i.filterByString("label",a),j=i.pluck("songid"),h="limit"===c?e:-1,g.getSongsByIds(j,h,function(a){return j.length>e&&"limit"===c&&(a.more=!0),d?d(a):void 0})}}(this)),f})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","episode","rating","year","file","genre","watchedepisodes","cast"],full:["fanart","studio","mpaa","imdbnumber","episodeguide","plot"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.TVShow,d.set({tvshowid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.TVShowCollection,c.fetch(b),c}},a.TVShow=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{tvshowid:1,tvshow:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetTVShowDetails","tvshowid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.tvshowdetails?a.tvshowdetails:a,null!=a.tvshowdetails&&(b.fullyloaded=!0),b.unwatched=b.episode-b.watchedepisodes,this.parseModel("tvshow",b,b.tvshowid)},b}(b.KodiEntities.Model),a.TVShowCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.TVShow,c.prototype.methods={read:["VideoLibrary.GetTVShows","arg1","arg2","arg3"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.parse=function(a){return this.getResult(a,"tvshows")},c}(b.KodiEntities.Collection),a.TVShowFilteredCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["VideoLibrary.GetTVShowss","arg1","arg2","arg3","arg4"]},b.prototype.arg4=function(){return this.argFilter()},b}(a.TVShowCollection),b.reqres.setHandler("tvshow:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("tvshow:entities",function(a){return null==a&&(a={}),g.getCollection(a)}),b.commands.setHandler("tvshow:search:entities",function(a,c,d){var e;return e=g.getCollection({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("Entities",function(a,b,c,d,e,f){var g;return g={savedFields:["id","position","file","type","label","thumbnail","artist","album","artistid","artistid","tvshowid","tvshow","year","rating","duration","track","url"],playlistKey:"localplaylist:list",playlistItemNamespace:"localplaylist:item:",thumbsUpNamespace:"thumbs:",localPlayerNamespace:"localplayer:",getPlaylistKey:function(a){return this.playlistItemNamespace+a},getThumbsKey:function(a){return this.thumbsUpNamespace+a},getlocalPlayerKey:function(a){return null==a&&(a="audio"),this.localPlayerNamespace+a},getListCollection:function(b){var c;return null==b&&(b="list"),c=new a.localPlaylistCollection,c.fetch(),c.where({type:b}),c},addList:function(a){var b;return b=this.getListCollection(),a.id=this.getNextId(),b.create(a),a.id},getNextId:function(){var a,b,c,d;return a=g.getListCollection(),b=a.getRawCollection(),0===b.length?d=1:(c=f.max(b,function(a){return a.id}),d=c.id+1),d},getItemCollection:function(b){var c;return c=new a.localPlaylistItemCollection([],{key:b}),c.fetch(),c},addItemsToPlaylist:function(a,b){var c,d,e,h,i;for(d=f.isArray(b)?b:b.getRawCollection(),b=this.getItemCollection(a),e=b.length,h=0,i=d.length;i>h;h++)c=d[h],b.create(g.getSavedModelFromSource(c,e)),e++;return b},getSavedModelFromSource:function(a,b){var c,d,e,f,g,h;for(e={},h=this.savedFields,f=0,g=h.length;g>f;f++)c=h[f],a[c]&&(e[c]=a[c]);return e.position=parseInt(b),d=a.type+"id",e[d]=a[d],e
},clearPlaylist:function(a){var b,c;for(b=this.getItemCollection(a);c=b.first();)c.destroy()}},a.localPlaylist=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,name:"",media:"",type:"list"},b}(a.Model),a.localPlaylistCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.localPlaylist,d.prototype.localStorage=new c.LocalStorage(g.playlistKey),d}(a.Collection),a.localPlaylistItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="position",b.prototype.defaults=function(){var a,b,c,d,e;for(b={},e=g.savedFields,c=0,d=e.length;d>c;c++)a=e[c],b[a]="";return b},b}(a.Model),a.localPlaylistItemCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.localPlaylistItem,d.prototype.initialize=function(a,b){return this.localStorage=new c.LocalStorage(g.getPlaylistKey(b.key))},d}(a.Collection),b.reqres.setHandler("localplaylist:add:entity",function(a,b,c){return null==c&&(c="list"),g.addList({name:a,media:b,type:c})}),b.commands.setHandler("localplaylist:remove:entity",function(a){var b,c;return b=g.getListCollection(),c=b.findWhere({id:parseInt(a)}),c.destroy()}),b.reqres.setHandler("localplaylist:entities",function(){return g.getListCollection()}),b.commands.setHandler("localplaylist:clear:entities",function(a){return g.clearPlaylist(a)}),b.reqres.setHandler("localplaylist:entity",function(a){var b;return b=g.getListCollection(),b.findWhere({id:parseInt(a)})}),b.reqres.setHandler("localplaylist:item:entities",function(a){return g.getItemCollection(a)}),b.reqres.setHandler("localplaylist:item:add:entities",function(a,b){return g.addItemsToPlaylist(a,b)}),b.reqres.setHandler("thumbsup:toggle:entity",function(a){var b,c,d,e;return d=a.get("type"),b=g.getItemCollection(g.getThumbsKey(d)),e=b?b.length+1:1,c=b.findWhere({id:a.get("id")}),c?c.destroy():b.create(g.getSavedModelFromSource(a.attributes,e)),b}),b.reqres.setHandler("thumbsup:get:entities",function(a){return g.getItemCollection(g.getThumbsKey(a))}),b.reqres.setHandler("thumbsup:check",function(a){var b,c;return null!=a?(b=g.getItemCollection(g.getThumbsKey(a.get("type"))),c=b.findWhere({id:a.get("id")}),f.isObject(c)):!1}),b.reqres.setHandler("localplayer:get:entities",function(a){return null==a&&(a="audio"),g.getItemCollection(g.getlocalPlayerKey(a))}),b.commands.setHandler("localplayer:clear:entities",function(a){return null==a&&(a="audio"),g.clearPlaylist(g.getlocalPlayerKey(a))}),b.reqres.setHandler("localplayer:item:add:entities",function(a,b){return null==b&&(b="audio"),g.addItemsToPlaylist(g.getlocalPlayerKey(b),a)})}),this.Kodi.module("Entities",function(a,b,c,d,e,f){var g;return a.NavMain=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,title:"Untitled",path:"",icon:"",classes:"",parent:0,children:[]},b}(a.Model),a.NavMainCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.NavMain,c}(a.Collection),g={getItems:function(){var a;return a=[],a.push({id:1,title:"Music",path:"music",icon:"mdi-av-my-library-music",classes:"nav-music",parent:0}),a.push({id:2,title:"Recent",path:"music",icon:"",classes:"",parent:1}),a.push({id:3,title:"Artists",path:"music/artists",icon:"",classes:"",parent:1}),a.push({id:4,title:"Albums",path:"music/albums",icon:"",classes:"",parent:1}),a.push({id:5,title:"Digital radio",path:"music/radio",icon:"",classes:"pvr-link",parent:1,visibility:"addon:pvr:enabled"}),a.push({id:11,title:"Movies",path:"movies/recent",icon:"mdi-av-movie",classes:"nav-movies",parent:0}),a.push({id:12,title:"Recent movies",path:"movies/recent",icon:"",classes:"",parent:11}),a.push({id:13,title:"All movies",path:"movies",icon:"",classes:"",parent:11}),a.push({id:21,title:"TV shows",path:"tvshows/recent",icon:"mdi-hardware-tv",classes:"nav-tv",parent:0}),a.push({id:22,title:"Recent episodes",path:"tvshows/recent",icon:"",classes:"",parent:21}),a.push({id:23,title:"All TV shows",path:"tvshows",icon:"",classes:"",parent:21}),a.push({id:24,title:"TV",path:"tvshows/live",icon:"",classes:"pvr-link",parent:21,visibility:"addon:pvr:enabled"}),a.push({id:31,title:"Browser",path:"browser",icon:"mdi-action-view-list",classes:"nav-browser",parent:0}),a.push({id:41,title:"Thumbs up",path:"thumbsup",icon:"mdi-action-thumb-up",classes:"nav-thumbs-up",parent:0}),a.push({id:42,title:"Playlists",path:"playlists",icon:"mdi-action-assignment",classes:"playlists",parent:0}),a.push({id:51,title:"Settings",path:"settings/web",icon:"mdi-action-settings",classes:"nav-browser",parent:0}),a.push({id:52,title:"Web settings",path:"settings/web",icon:"",classes:"",parent:51}),a.push({id:53,title:"Kodi settings",path:"settings/kodi",icon:"",classes:"",parent:51}),this.checkVisibility(a)},checkVisibility:function(a){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],null!=c.visibility?b.request(c.visibility)&&d.push(c):d.push(c);return d},getDefaultStructure:function(){var b,c;return c=this.sortStructure(this.getItems()),b=new a.NavMainCollection(c)},getChildStructure:function(b){var c,d,e;return d=this.getItems(),e=f.findWhere(d,{id:b}),c=f.where(d,{parent:b}),e.items=new a.NavMainCollection(c),new a.NavMain(e)},sortStructure:function(a){var b,c,d,e,f,g,h;for(b={},f=0,g=a.length;g>f;f++)d=a[f],null!=d.path&&0!==d.parent&&(d.title=t.gettext(d.title),null==b[h=d.parent]&&(b[h]=[]),b[d.parent].push(d));e=[];for(c in a)d=a[c],null!=d.path&&0===d.parent&&(d.children=b[d.id],e.push(d));return e}},b.reqres.setHandler("navMain:entities",function(a){return null==a&&(a="all"),"all"===a?g.getDefaultStructure():g.getChildStructure(a)})}),this.Kodi.module("Controllers",function(a,b,c,d,e,f){return a.Base=function(a){function c(a){null==a&&(a={}),this.region=a.region||b.request("default:region"),this.params=helpers.url.params(),c.__super__.constructor.call(this,a),this._instance_id=f.uniqueId("controller"),b.execute("register:instance",this,this._instance_id)}return __extends(c,a),c.prototype.params={},c.prototype.close=function(){var a;return a=1<=arguments.length?__slice.call(arguments,0):[],delete this.region,delete this.options,c.__super__.close.call(this,a),b.execute("unregister:instance",this,this._instance_id)},c.prototype.show=function(a){return this.listenTo(a,"close",this.close),this.region.show(a)},c}(c.Marionette.Controller)}),this.Kodi.module("Router",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.before=function(){return b.execute("loading:show:page")},c.prototype.after=function(){return this.setBodyClasses()},c.prototype.setBodyClasses=function(){var a,c;return a=b.getRegion("root").$el,a.removeClassRegex(/^section-/),a.removeClassRegex(/^page-/),c=helpers.url.arg(0),""===c&&(c="home"),a.addClass("section-"+c),a.addClass("page-"+helpers.url.arg().join("-"))},c}(d.AppRouter)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.CollectionView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.itemViewEventPrefix="childview",b.prototype.onShow=function(){return e("img.lazy").lazyload({threshold:200})},b}(c.Marionette.CollectionView)}),this.Kodi.module("Views",function(a,b,c){return a.CompositeView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.itemViewEventPrefix="childview",b}(c.Marionette.CompositeView)}),this.Kodi.module("Views",function(a,b,c){return a.ItemView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Marionette.ItemView)}),this.Kodi.module("Views",function(a,b,c){return a.LayoutView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Marionette.LayoutView)}),this.Kodi.module("Views",function(a,b,c,d,e,f){var g;return g=d.View.prototype.remove,f.extend(d.View.prototype,{themeLink:function(a,b,c){var d;return null==c&&(c={}),f.defaults(c,{external:!1,className:""}),d=c.external?void 0:{href:"#"+b},""!==c.className&&(d["class"]=c.className),this.themeTag("a",d,a)},parseAttributes:function(a){var b,c,d;b=[];for(c in a)d=a[c],b.push(""+c+"='"+d+"'");return b.join(" ")},themeTag:function(a,b,c){var d;return d=this.parseAttributes(b),"<"+a+" "+d+">"+c+"</"+a+">"}})}),this.Kodi.module("Views",function(a,b,c,d,e,f){return a.VirtualListView=function(a){function g(){return g.__super__.constructor.apply(this,arguments)}return __extends(g,a),g.prototype.originalCollection={},g.prototype.preload=20,g.prototype.originalChildView={},g.prototype.buffer=30,g.prototype.isTicking=!1,g.prototype.addChild=function(a,d,e){return e>this.preload&&(d=b.Views.CardViewPlaceholder),c.Marionette.CollectionView.prototype.addChild.apply(this,arguments)},g.prototype.bindScroll=function(){return e(window).scrollStopped(function(a){return function(){return a.requestTick()}}(this)),e(window).resizeStopped(function(a){return function(){return a.requestTick()}}(this))},g.prototype.initialize=function(){return this.originalChildView=this.getOption("childView"),this.placeholderChildView=b.Views.CardViewPlaceholder,this.bindScroll()},g.prototype.onRender=function(){return this.requestTick()},g.prototype.requestTick=function(){return this.isTicking||requestAnimationFrame(function(a){return function(){return a.renderItemsInViewport()}}(this)),this.isTicking=!0},g.prototype.renderItemsInViewport=function(){var a,b,c,d,g,h;return this.isTicking=!1,a=e(".card",this.$el),d=[],a.each(function(){return function(a,b){return e(b).visible(!0)?d.push(a):void 0}}(this)),c=f.min(d),b=f.max(d),c=c-this.buffer<0?0:c-this.buffer,b=b+this.buffer>=a.length?a.length-1:b+this.buffer,g=function(){h=[];for(var a=c;b>=c?b>=a:a>=b;b>=c?a++:a--)h.push(a);return h}.apply(this),a.each(function(a){return function(b,c){return e(c).hasClass("ph")&&helpers.global.inArray(b,g)?e(c).replaceWith(a.getRenderedChildView(e(c).data("model"),a.originalChildView,b)):e(c).hasClass("ph")||helpers.global.inArray(b,g)?void 0:e(c).replaceWith(a.getRenderedChildView(e(c).data("model"),a.placeholderChildView,b))}}(this))},g.prototype.getRenderedChildView=function(a,b,c){var e,f;return e=this.getOption("childViewOptions"),e=d._getValue(e,this,[a,c]),f=this.buildChildView(a,b,e),this.proxyChildEvents(f),f.render().$el},g.prototype.events={"click a":"storeScroll"},g.prototype.storeScroll=function(){return helpers.backscroll.setLast()},g.prototype.onShow=function(){return helpers.backscroll.scrollToLast()},g.prototype.onDestroy=function(){return e(window).unbind("scroll"),e(window).unbind("resize")},g}(a.CollectionView)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.CardView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="views/card/card",c.prototype.tagName="li",c.prototype.events={"click .dropdown > i":"populateMenu","click .thumbs":"toggleThumbs"},c.prototype.populateMenu=function(){var a,b,c,d;if(b="",this.model.get("menu")){d=this.model.get("menu");for(a in d)c=d[a],b+=this.themeTag("li",{"class":a},c);return this.$el.find(".dropdown-menu").html(b)}},c.prototype.toggleThumbs=function(){return b.request("thumbsup:toggle:entity",this.model),this.$el.toggleClass("thumbs-up")},c.prototype.attributes=function(){var a;return a=["card","card-loaded"],b.request("thumbsup:check",this.model)&&a.push("thumbs-up"),{"class":a.join(" ")}},c.prototype.onRender=function(){return this.$el.data("model",this.model)},c.prototype.onShow=function(){return e(".dropdown",this.$el).on("click",function(){return e(this).removeClass("open").trigger("hide.bs.dropdown")})},c}(b.Views.ItemView),a.CardViewPlaceholder=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/card/card_placeholder",b.prototype.attributes=function(){return{"class":"card ph"}},b.prototype.onRender=function(){return this.$el.data("model",this.model)},b}(b.Views.ItemView)}),this.Kodi.module("Views",function(a,b){return a.EmptyViewPage=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.template="views/empty/empty_page",d.prototype.regions={regionEmptyContent:".empty--page"},a.EmptyViewResults=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/empty/empty_results",b.prototype.regions={regionEmptyContent:".empty-result"},b}(b.Views.ItemView),d}(b.Views.ItemView)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.LayoutWithSidebarFirstView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_with_sidebar_first",b.prototype.regions={regionSidebarFirst:".region-first",regionContent:".region-content"},b.prototype.events={"click .region-first-toggle":"toggleRegionFirst"},b.prototype.toggleRegionFirst=function(){return this.$el.toggleClass("region-first-open")},b}(b.Views.LayoutView),a.LayoutWithHeaderView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_with_header",b.prototype.regions={regionHeader:".region-header",regionContentTop:".region-content-top",regionContent:".region-content"},b}(b.Views.LayoutView),a.LayoutDetailsHeaderView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_details_header",b.prototype.regions={regionSide:".region-details-side",regionTitle:".region-details-title",regionMeta:".region-details-meta",regionMetaSideFirst:".region-details-meta-side-first",regionMetaSideSecond:".region-details-meta-side-second",regionMetaBelow:".region-details-meta-below",regionFanart:".region-details-fanart"},b.prototype.onRender=function(){return e(".region-details-fanart",this.$el).css("background-image",'url("'+this.model.get("fanart")+'")'),helpers.ui.getSwatch(this.model.get("thumbnail"),function(a){return helpers.ui.applyHeaderSwatch(a)})},b}(b.Views.LayoutView)}),this.Kodi.module("Components.Form",function(a,b,c,d,e){return a.Controller=function(d){function f(){return f.__super__.constructor.apply(this,arguments)}return __extends(f,d),f.prototype.initialize=function(a){var b;return null==a&&(a={}),b=a.config?a.config:{},this.formLayout=this.getFormLayout(b),this.listenTo(this.formLayout,"show",function(c){return function(){return c.formBuild(a.form,a.formState,b),e.material.init()}}(this)),this.listenTo(this.formLayout,"form:submit",function(b){return function(){return b.formSubmit(a)}}(this)),this},f.prototype.formSubmit=function(a){var b;return b=c.Syphon.serialize(this.formLayout),this.processFormSubmit(b,a)},f.prototype.processFormSubmit=function(a,b){return b.config&&"function"==typeof b.config.callback?b.config.callback(a,this.formLayout):void 0},f.prototype.getFormLayout=function(b){return null==b&&(b={}),new a.FormWrapper({config:b})},f.prototype.formBuild=function(c,d,e){var f,g;return null==c&&(c=[]),null==d&&(d={}),null==e&&(e={}),g=b.request("form:item:entites",c,d),f=new a.Groups({collection:g}),this.formLayout.formContentRegion.show(f)},f}(b.Controllers.Base),b.reqres.setHandler("form:wrapper",function(b){var c;return null==b&&(b={}),c=new a.Controller(b),c.formLayout}),b.reqres.setHandler("form:popup:wrapper",function(c){var d,e,f;return null==c&&(c={}),f=c.config.callback,c.config.callback=function(a,c){return b.execute("ui:modal:close"),f(a,c)},e=new a.Controller(c),d=e.formLayout.render().$el,e.formLayout.trigger("show"),b.execute("ui:modal:form:show",c.title,d)})}),this.Kodi.module("Components.Form",function(a,b,c,d,e,f){return a.FormWrapper=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="components/form/form",b.prototype.tagName="form",b.prototype.regions={formContentRegion:".form-content-region",formResponse:".response"},b.prototype.triggers={"click .form-save":"form:submit","click [data-form-button='cancel']":"form:cancel"},b.prototype.modelEvents={"change:_errors":"changeErrors","sync:start":"syncStart","sync:stop":"syncStop"},b.prototype.initialize=function(){return this.config=this.options.config,this.on("form:save",function(a){return function(b){return a.addSuccessMsg(b)}}(this))},b.prototype.attributes=function(){var a;return a={"class":"component-form"},this.options.config&&this.options.config.attributes&&(a=f.extend(a,this.options.config.attributes)),a},b.prototype.onShow=function(){return f.defer(function(a){return function(){return a.config.focusFirstInput&&a.focusFirstInput(),e(".btn").ripples({color:"rgba(255,255,255,0.1)"})}}(this))},b.prototype.focusFirstInput=function(){return this.$(":input:visible:enabled:first").focus()},b.prototype.changeErrors=function(a,b){return this.config.errors?f.isEmpty(b)?this.removeErrors():this.addErrors(b):void 0},b.prototype.removeErrors=function(){return this.$(".error").removeClass("error").find("small").remove()},b.prototype.addErrors=function(a){var b,c,d;null==a&&(a={}),d=[];for(c in a)b=a[c],d.push(this.addError(c,b[0]));return d},b.prototype.addError=function(a,b){var c,d;return c=this.$("[name='"+a+"']"),d=e("<small>").text(b),c.after(d).closest(".row").addClass("error")},b.prototype.addSuccessMsg=function(a){var b;return b=e(".response",this.$el),b.html(a).show(),setTimeout(function(){return b.fadeOut()},5e3)},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="components/form/form_item",b.prototype.tagName="div",b.prototype.initialize=function(){var a,b,c,d,e,g,h,i;switch(b=f.extend({id:"form-edit-"+this.model.get("id"),name:this.model.get("id")},this.model.get("attributes")),e=f.extend(b,{"class":"form-control"}),this.model.get("type")){case"checkbox":a={type:"checkbox",value:1,"class":"form-checkbox"},this.model.get("defaultValue")===!0&&(a.checked="checked"),c=this.themeTag("input",f.extend(b,a),"");break;case"textfield":a={type:"text",value:this.model.get("defaultValue")},c=this.themeTag("input",f.extend(e,a),"");break;case"textarea":c=this.themeTag("textarea",e,this.model.get("defaultValue"));break;case"select":g="",i=this.model.get("options");for(d in i)h=i[d],a={value:d},this.model.get("defaultValue")===d&&(a.selected="selected"),g+=this.themeTag("option",a,h);c=this.themeTag("select",f.extend(b,{"class":"form-control"}),g);break;default:c=""}return this.model.set({element:c})},b.prototype.attributes=function(){return{"class":"form-item form-group form-type-"+this.model.get("type")+" form-edit-"+this.model.get("id")}},b}(b.Views.ItemView),a.Group=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="components/form/form_item_group",c.prototype.tagName="div",c.prototype.className="form-group",c.prototype.childView=a.Item,c.prototype.childViewContainer=".form-items",c.prototype.initialize=function(){return this.collection=this.model.get("children")},c}(b.Views.CompositeView),a.Groups=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Group,c.prototype.className="form-groups",c}(b.Views.CollectionView)}),this.Kodi.module("AddonApp",function(a,b){var c;return c={addonController:function(){return b.request("command:kodi:controller","auto","AddOn")},getEnabledAddons:function(a){return this.addonController().getEnabledAddons(a)}},b.on("before:start",function(){return c.getEnabledAddons(function(a){return config.set("static","addOnsEnabled",a),config.set("static","addOnsLoaded",!0)})})}),this.Kodi.module("AddonApp.Pvr",function(a,b,c,d,e,f){var g;return g={pvrEnabled:function(){var a,b,c;return b=!1,config.get("static","addOnsLoaded",!1)&&(a=config.get("static","addOnsEnabled",[]),c=f.findWhere(a,{type:"xbmc.pvrclient"}),b=null!=c?!0:!1),b}},b.reqres.setHandler("addon:pvr:enabled",function(){return g.pvrEnabled()})}),this.Kodi.module("AlbumApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={music:"recent","music/albums":"list","music/album/:id":"view"},b}(b.Router.Base),c={recent:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f;switch(e=c.model,f=b.request("command:kodi:controller","audio","PlayList"),a){case"play":return b.execute("command:audio:play","albumid",e.get("albumid"));case"add":return f.add("albumid",e.get("albumid"));case"localadd":return b.execute("localplaylist:addentity","albumid",e.get("albumid"));case"localplay":return d=b.request("command:local:controller","audio","PlayList"),d.play("albumid",e.get("albumid"))}}},b.on("before:start",function(){return new a.Router({controller:c})}),b.commands.setHandler("album:action",function(a,b){return c.action(a,b)}),b.reqres.setHandler("album:action:items",function(){return{actions:{thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",localadd:"Add to local playlist",divider:"",localplay:"Play in browser"}}})}),this.Kodi.module("AlbumApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=1,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded(),a.renderRecentlyPlayed()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("album:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("album:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d.prototype.renderRecentlyPlayed=function(){var a;return a=b.request("album:recentlyplayed:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("album:list:view",a),c.page.regionRecentlyPlayed.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("AlbumApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/landing/landing",b.prototype.className="album-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added",regionRecentlyPlayed:".region-recently-played"},b}(b.Views.LayoutView)}),this.Kodi.module("AlbumApp.List",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"childview:album:play",function(a,c){return b.execute("album:action","play",c)}),b.listenTo(a,"childview:album:add",function(a,c){return b.execute("album:action","add",c)}),b.listenTo(a,"childview:album:localadd",function(a,c){return b.execute("album:action","localadd",c)}),b.listenTo(a,"childview:album:localplay",function(a,c){return b.execute("album:action","localplay",c)})},getAlbumsList:function(b,d){var e,f;return null==d&&(d=!1),f=d?"AlbumsSet":"Albums",e=new a[f]({collection:b}),c.bindTriggers(e),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("album:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=1,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["label","year","rating"],filter:["year","genre"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getAlbumsList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("album:list:view",function(a){return c.getAlbumsList(a,!0)})}),this.Kodi.module("AlbumApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.AlbumTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"album:play","click .dropdown .add":"album:add","click .dropdown .localadd":"album:localadd","click .dropdown .localplay":"album:localplay"},c.prototype.initialize=function(){var a,d;return c.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set(b.request("album:action:items")),a=""!==this.model.get("artist")?this.model.get("artist"):"&nbsp;",d=this.themeLink(a,helpers.url.get("artist",this.model.get("artistid"))),this.model.set({subtitle:d})):void 0},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="album-empty-result",b}(b.Views.EmptyViewResults),a.Albums=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.AlbumTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.sort="artist",c.prototype.className="card-grid--square",c}(b.Views.VirtualListView),a.AlbumsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.AlbumTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.sort="artist",c.prototype.className="card-grid--square",c}(b.Views.CollectionView)}),this.Kodi.module("AlbumApp.Show",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"album:play",function(a){return b.execute("album:action","play",a)}),b.listenTo(a,"album:add",function(a){return b.execute("album:action","add",a)}),b.listenTo(a,"album:localadd",function(a){return b.execute("album:action","localadd",a)}),b.listenTo(a,"album:localplay",function(a){return b.execute("album:action","localplay",a)})},getAlbumsFromSongs:function(d){var e,f,g,h;g=new a.WithSongsCollection,g.on("add:child",function(){return function(f){return b.execute("when:entity:fetched",e,function(){var e,g,h;return e=f.model,h=new a.AlbumTeaser({model:e}),c.bindTriggers(h),f.regionMeta.show(h),g=b.request("song:list:view",d[e.get("albumid")]),f.regionSongs.show(g)})}}(this));for(f in d)h=d[f],e=b.request("album:entity",f,{success:function(b){return g.addChild(b,a.WithSongsLayout)}});return g}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d;return d=parseInt(a.id),c=b.request("album:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getMusic(d),a.getDetailsLayoutView(c)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.AlbumDetailTeaser({model:b}),c.bindTriggers(f),e=new a.Details({model:b}),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getMusic=function(c){var d,e;return d={filter:{albumid:c}},e=b.request("song:filtered:entities",d),b.execute("when:entity:fetched",e,function(c){return function(){var d,f;return d=new a.WithSongsLayout,f=b.request("song:list:view",e),c.listenTo(d,"show",function(){return d.regionSongs.show(f)}),c.layout.regionContent.show(d)}}(this))},e}(b.Controllers.Base),b.reqres.setHandler("albums:withsongs:view",function(a){return c.getAlbumsFromSongs(a)})}),this.Kodi.module("AlbumApp.Show",function(a,b){return a.WithSongsLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/show/album_with_songs",b.prototype.className="album-wrapper",b.prototype.regions={regionMeta:".region-album-meta",regionSongs:".region-album-songs"},b}(b.Views.LayoutView),a.WithSongsCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.WithSongsLayout,c.prototype.tagName="div",c.prototype.sort="year",c.prototype.className="albums-wrapper",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/show/details_meta",b}(b.Views.ItemView),a.AlbumTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.tagName="div",c.prototype.className="card-minimal",c.prototype.initialize=function(){return this.model.set({subtitle:this.model.get("year")}),this.model.set(b.request("album:action:items"))},c}(b.AlbumApp.List.AlbumTeaser),a.AlbumDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="card-detail",b}(a.AlbumTeaser)}),this.Kodi.module("ArtistApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"music/artists":"list","music/artist/:id":"view"},b}(b.Router.Base),c={list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f;switch(e=c.model,f=b.request("command:kodi:controller","audio","PlayList"),a){case"play":return b.execute("command:audio:play","artistid",e.get("artistid"));case"add":return f.add("artistid",e.get("artistid"));case"localadd":return b.execute("localplaylist:addentity","artistid",e.get("artistid"));case"localplay":return d=b.request("command:local:controller","audio","PlayList"),d.play("artistid",e.get("artistid"))
}}},b.on("before:start",function(){return new a.Router({controller:c})}),b.commands.setHandler("artist:action",function(a,b){return c.action(a,b)}),b.reqres.setHandler("artist:action:items",function(){return{actions:{thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",localadd:"Add to local playlist",divider:"",localplay:"Play in browser"}}})}),this.Kodi.module("ArtistApp.List",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"childview:artist:play",function(a,c){return b.execute("artist:action","play",c)}),b.listenTo(a,"childview:artist:add",function(a,c){return b.execute("artist:action","add",c)}),b.listenTo(a,"childview:artist:localadd",function(a,c){return b.execute("artist:action","localadd",c)}),b.listenTo(a,"childview:artist:localplay",function(a,c){return b.execute("artist:action","localplay",c)})},getArtistList:function(b,d){var e,f;return null==d&&(d=!1),f=d?"ArtistsSet":"Artists",e=new a[f]({collection:b}),c.bindTriggers(e),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("artist:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=1,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["label"],filter:["mood","genre","style"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getArtistList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("artist:list:view",function(a){return c.getArtistList(a,!0)})}),this.Kodi.module("ArtistApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.ArtistTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"artist:play","click .dropdown .add":"artist:add","click .dropdown .localadd":"artist:localadd","click .dropdown .localplay":"artist:localplay"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),null!=this.model?this.model.set(b.request("album:action:items")):void 0},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="artist-empty-result",b}(b.Views.EmptyViewResults),a.Artists=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ArtistTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--wide",c}(b.Views.VirtualListView),a.ArtistsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ArtistTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--wide",c}(b.Views.CollectionView)}),this.Kodi.module("ArtistApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return d=parseInt(a.id),c=b.request("artist:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getMusic(d),a.getDetailsLayoutView(c)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},d.prototype.getDetailsLayoutView=function(b){var c;return c=new a.HeaderLayout({model:b}),this.listenTo(c,"show",function(){return function(){var d,e;return e=new a.ArtistTeaser({model:b}),d=new a.Details({model:b}),c.regionSide.show(e),c.regionMeta.show(d)}}(this)),this.layout.regionHeader.show(c)},d.prototype.getMusic=function(a){var c,d;return c={filter:{artistid:a}},d=b.request("song:filtered:entities",c),b.execute("when:entity:fetched",d,function(a){return function(){var c,e;return e=b.request("song:albumparse:entities",d),c=b.request("albums:withsongs:view",e),a.layout.regionContent.show(c)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("ArtistApp.Show",function(a,b){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/artist/show/details_meta",b}(b.Views.ItemView),a.ArtistTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b}(b.ArtistApp.List.ArtistTeaser)}),soundManager.setup({url:"lib/soundmanager/swf/",flashVersion:9,preferFlash:!0,useHTML5Audio:!0,useFlashBlock:!1,flashLoadTimeout:3e3,debugMode:!1,noSWFCache:!0,debugFlash:!1,flashPollingInterval:1e3,html5PollingInterval:1e3,onready:function(){return $(window).trigger("audiostream:ready")},ontimeout:function(){return $(window).trigger("audiostream:timout"),soundManager.flashLoadTimeout=0,soundManager.onerror={},soundManager.reboot()}}),this.Kodi.module("BrowserApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={browser:"list","browser/:media/:id":"view"},b}(b.Router.Base),c={list:function(){return new a.List.Controller},view:function(b,c){return new a.List.Controller({media:b,id:c})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("BrowserApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.sourceCollection={},d.prototype.backButtonModel={},d.prototype.initialize=function(a){return null==a&&(a={}),this.layout=this.getLayout(),this.listenTo(this.layout,"show",function(b){return function(){return b.getSources(a),b.getFolderLayout()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getFolderLayout=function(){return this.folderLayout=new a.FolderLayout,this.layout.regionContent.show(this.folderLayout)},d.prototype.getSources=function(c){var d;return d=b.request("file:source:entities","video"),b.execute("when:entity:fetched",d,function(e){return function(){var f,g;return e.sourceCollection=d,g=b.request("file:source:media:entities",d),f=new a.SourcesSet({collection:g}),e.layout.regionSidebarFirst.show(f),e.listenTo(f,"childview:childview:source:open",function(a,b){return e.getFolder(b.model)}),e.loadFromUrl(c)}}(this))},d.prototype.loadFromUrl=function(a){var c;return a.media&&a.id?(c=b.request("file:url:entity",a.media,a.id),this.getFolder(c)):void 0},d.prototype.getFolder=function(a){var c,d;return b.navigate(a.get("url")),c=b.request("file:entities",{file:a.get("file"),media:a.get("media")}),d=b.request("file:path:entities",a.get("file"),this.sourceCollection),this.getPathList(d),b.execute("when:entity:fetched",c,function(a){return function(){var d;return d=b.request("file:parsed:entities",c),a.getFolderList(d.directory),a.getFileList(d.file)}}(this))},d.prototype.getFolderList=function(c){var d;return d=new a.FolderList({collection:c}),this.folderLayout.regionFolders.show(d),this.getBackButton(),this.listenTo(d,"childview:folder:open",function(a){return function(b,c){return a.getFolder(c.model)}}(this)),this.listenTo(d,"childview:folder:play",function(){return function(a,c){var d;return d=b.request("command:kodi:controller",c.model.get("player"),"PlayList"),d.play("directory",c.model.get("file"))}}(this))},d.prototype.getFileList=function(c){var d;return d=new a.FileList({collection:c}),this.folderLayout.regionFiles.show(d),this.listenTo(d,"childview:file:play",function(){return function(a,c){var d;return d=b.request("command:kodi:controller",c.model.get("player"),"PlayList"),d.play("file",c.model.get("file"))}}(this))},d.prototype.getPathList=function(b){var c;return c=new a.PathList({collection:b}),this.folderLayout.regionPath.show(c),this.setBackModel(b),this.listenTo(c,"childview:folder:open",function(a){return function(b,c){return a.getFolder(c.model)}}(this))},d.prototype.setBackModel=function(a){return this.backButtonModel=a.length>=2?a.models[a.length-2]:{}},d.prototype.getBackButton=function(){var b;return this.backButtonModel.attributes?(b=new a.Back({model:this.backButtonModel}),this.folderLayout.regionBack.show(b),this.listenTo(b,"folder:open",function(a){return function(b){return a.getFolder(b.model)}}(this))):this.folderLayout.regionBack.empty()},d}(b.Controllers.Base)}),this.Kodi.module("BrowserApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="browser-page",b}(b.Views.LayoutWithSidebarFirstView),a.Source=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/source",b.prototype.tagName="li",b.prototype.triggers={"click .source":"source:open"},b.prototype.attributes=function(){return{"class":"type-"+this.model.get("sourcetype")}},b}(b.Views.ItemView),a.Sources=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/browser/list/source_set",c.prototype.childView=a.Source,c.prototype.tagName="div",c.prototype.childViewContainer="ul.sources",c.prototype.className="source-set",c.prototype.initialize=function(){return this.collection=this.model.get("sources")},c}(b.Views.CompositeView),a.SourcesSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Sources,c.prototype.tagName="div",c.prototype.className="sources-sets",c}(b.Views.CollectionView),a.FolderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/folder_layout",b.prototype.className="folder-page-wrapper",b.prototype.regions={regionPath:".path",regionFolders:".folders",regionFiles:".files",regionBack:".back"},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/file",b.prototype.tagName="li",b}(b.Views.ItemView),a.Folder=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="folder",b.prototype.triggers={"click .title":"folder:open","click .play":"folder:play"},b}(a.Item),a.EmptyFiles=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.initialize=function(){return this.model.set({id:"empty",content:t.gettext("no media in this folder")})},b}(b.Views.EmptyViewPage),a.File=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="file",b.prototype.triggers={"click .play":"file:play"},b}(a.Item),a.FolderList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.Folder,c}(b.Views.CollectionView),a.FileList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.File,c.prototype.emptyView=a.EmptyFiles,c}(b.Views.CollectionView),a.Path=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/path",b.prototype.tagName="li",b.prototype.triggers={"click .title":"folder:open"},b}(b.Views.ItemView),a.PathList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.Path,c}(b.Views.CollectionView),a.Back=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/back_button",b.prototype.tagName="div",b.prototype.className="back-button",b.prototype.triggers={"click .title":"folder:open"},b}(b.Views.ItemView)}),this.Kodi.module("CastApp",function(a,b){var c;return c={getCastCollection:function(a,c){return b.request("cast:entities",a,c)},getCastView:function(c){var d;return d=new a.List.CastList({collection:c}),b.listenTo(d,"childview:cast:google",function(a,b){return window.open("https://www.google.com/webhp?#q="+encodeURIComponent(b.model.get("name")))}),b.listenTo(d,"childview:cast:imdb",function(a,b){return window.open("http://www.imdb.com/find?s=nm&q="+encodeURIComponent(b.model.get("name")))}),d}},b.reqres.setHandler("cast:list:view",function(a,b){var d;return d=c.getCastCollection(a,b),c.getCastView(d)})}),this.Kodi.module("CastApp.List",function(a,b){return a.CastTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/cast/list/cast",b.prototype.tagName="li",b.prototype.triggers={"click .imdb":"cast:imdb","click .google":"cast:google"},b}(b.Views.ItemView),a.CastList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.CastTeaser,c.prototype.tagName="ul",c.prototype.className="cast-full",c}(b.Views.CollectionView)}),this.Kodi.module("CommandApp",function(a,b){var c;return c={currentAudioPlaylistController:function(){var a;return a=b.request("state:current"),b.request("command:"+a.getPlayer()+":controller","audio","PlayList")}},b.reqres.setHandler("command:kodi:player",function(b,c,d){var e;return e=new a.Kodi.Player("auto"),e.sendCommand(b,c,d)}),b.reqres.setHandler("command:kodi:controller",function(b,c){return null==b&&(b="auto"),new a.Kodi[c](b)}),b.reqres.setHandler("command:local:player",function(b,c,d){var e;return e=new a.Local.Player("audio"),e.sendCommand(b,c,d)}),b.reqres.setHandler("command:local:controller",function(b,c){return null==b&&(b="auto"),new a.Local[c](b)}),b.commands.setHandler("command:audio:play",function(a,b){return c.currentAudioPlaylistController().play(a,b)}),b.commands.setHandler("command:audio:add",function(a,b){return c.currentAudioPlaylistController().add(a,b)}),b.addInitializer(function(){})}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.Base=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.ajaxOptions={},b.prototype.initialize=function(a){return null==a&&(a={}),e.jsonrpc.defaultUrl=helpers.url.baseKodiUrl("Base"),this.setOptions(a)},b.prototype.setOptions=function(a){return this.ajaxOptions=a},b.prototype.multipleCommands=function(a,b){var c;return c=e.jsonrpc(a,this.ajaxOptions),c.fail(function(b){return function(c){return b.onError(a,c)}}(this)),c.done(function(c){return function(d){return d=c.parseResponse(a,d),c.triggerMethod("response:ready",d),null!=b?c.doCallback(b,d):void 0}}(this)),c},b.prototype.singleCommand=function(a,b,c){var d;return a={method:a},null!=b&&(b.length>0||f.isObject(b))&&(a.params=b),d=this.multipleCommands([a],c)},b.prototype.parseResponse=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],d.result||d.result===!1?e.push(d.result):this.onError(a[c],d);return 1===a.length&&1===e.length&&(e=e[0]),e},b.prototype.paramObj=function(a,b){return helpers.global.paramObj(a,b)},b.prototype.doCallback=function(a,b){return null!=a?a(b):void 0},b.prototype.onError=function(a,b){return helpers.debug.rpcError(a,b)},b}(d.Object)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Commander=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.playerActive=0,b.prototype.playerName="music",b.prototype.playerForced=!1,b.prototype.playerIds={audio:0,video:1},b.prototype.setPlayer=function(a){return"audio"===a||"video"===a?(this.playerActive=this.playerIds[a],this.playerName=a,this.playerForced=!0):void 0},b.prototype.getPlayer=function(){return this.playerActive},b.prototype.getPlayerName=function(){return this.playerName},b.prototype.playerIdToName=function(a){var b,c,d,e;e=this.playerIds;for(c in e)b=e[c],b===a&&(d=c);return d},b.prototype.commandNameSpace="JSONRPC",b.prototype.getCommand=function(a,b){return null==b&&(b=this.commandNameSpace),b+"."+a},b.prototype.sendCommand=function(a,b,c){return this.singleCommand(this.getCommand(a),b,function(a){return function(b){return a.doCallback(c,b)}}(this))},b}(a.Base),a.Player=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Player",c.prototype.playlistApi={},c.prototype.initialize=function(a){return null==a&&(a="audio"),this.setPlayer(a),this.playlistApi=b.request("playlist:kodi:entity:api")},c.prototype.getParams=function(a,b){var c;return null==a&&(a=[]),this.playerForced?(c=[this.playerActive],this.doCallback(b,c.concat(a))):this.getActivePlayers(function(d){return function(e){return c=[e],d.doCallback(b,c.concat(a))}}(this))},c.prototype.getActivePlayers=function(a){return this.singleCommand(this.getCommand("GetActivePlayers"),{},function(b){return function(c){return c.length>0?(b.playerActive=c[0].playerid,b.playerName=b.playerIdToName(b.playerActive),b.triggerMethod("player:ready",b.playerActive),b.doCallback(a,b.playerActive)):b.doCallback(a,b.playerActive)}}(this))},c.prototype.sendCommand=function(a,b,c){return null==b&&(b=[]),this.getParams(b,function(b){return function(d){return b.singleCommand(b.getCommand(a),d,function(a){return b.doCallback(c,a)})}}(this))},c.prototype.playEntity=function(a,c,d,e){var f,g;return null==d&&(d={}),g=[],f=this.paramObj(a,c),"position"===a&&(f.playlistid=this.getPlayer()),g.push(f),d.length>0&&g.push(d),this.singleCommand(this.getCommand("Open","Player"),g,function(a){return function(c){return b.request("sockets:active")||b.request("state:kodi:update"),a.doCallback(e,c)}}(this))},c.prototype.getPlaying=function(a){var b;return b={active:!1,properties:!1,item:!1},this.singleCommand(this.getCommand("GetActivePlayers"),{},function(c){return function(d){var e,f,g;return d.length>0?(b.active=d[0],e=[],f=helpers.entities.getFields(c.playlistApi.fields,"full"),g=["playlistid","speed","position","totaltime","time","percentage","shuffled","repeat","canrepeat","canshuffle","canseek","partymode"],e.push({method:c.getCommand("GetProperties"),params:[b.active.playerid,g]}),e.push({method:c.getCommand("GetItem"),params:[b.active.playerid,f]}),c.multipleCommands(e,function(d){return b.properties=d[0],b.item=d[1].item,c.doCallback(a,b)})):c.doCallback(a,!1)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a){return a.AddOn=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="Addons",b.prototype.getAddons=function(a,b,c){return null==a&&(a="unknown"),null==b&&(b=!0),this.singleCommand(this.getCommand("GetAddons"),[a,"unknown",b],function(a){return function(b){return a.doCallback(c,b.addons)}}(this))},b.prototype.getEnabledAddons=function(a){return this.getAddons("unknown",!0,function(b){return function(c){return b.doCallback(a,c)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Application=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Application",c.prototype.getProperties=function(a){return this.singleCommand(this.getCommand("GetProperties"),[["volume","muted"]],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.setVolume=function(a,b){return this.singleCommand(this.getCommand("SetVolume"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},c.prototype.toggleMute=function(a){var c;return c=b.request("state:kodi"),this.singleCommand(this.getCommand("SetMute"),[!c.getState("muted")],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.quit=function(a){return this.singleCommand(this.getCommand("Quit"),[],function(b){return function(c){return b.doCallback(a,c)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.AudioLibrary=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="AudioLibrary",b.prototype.setAlbumDetails=function(a,b,c){var d;return null==b&&(b={}),d={albumid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetAlbumDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setArtistDetails=function(a,b,c){var d;return null==b&&(b={}),d={artistid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetArtistDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setArtistDetails=function(a,b,c){var d;return null==b&&(b={}),d={songid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetSongDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.scan=function(a){return this.singleCommand(this.getCommand("Scan"),function(b){return function(c){return b.doCallback(a,c)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a){return a.Files=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="Files",b.prototype.prepareDownload=function(a,b){return this.singleCommand(this.getCommand("PrepareDownload"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},b.prototype.downloadPath=function(a,b){return this.prepareDownload(a,function(a){return function(c){return a.doCallback(b,c.details.path)}}(this))},b.prototype.downloadFile=function(a){var b;return b=window.open("about:blank","download"),this.downloadPath(a,function(a){return b.location=a})},b.prototype.videoStream=function(a,b){var c;return null==b&&(b="html5"),c=helpers.global.localVideoPopup("about:blank"),this.downloadPath(a,function(a){return c.location="videoPlayer.html?player="+b+"&src="+encodeURIComponent(a)})},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Input=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Input",c.prototype.sendText=function(a,b){return this.singleCommand(this.getCommand("SendText"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},c.prototype.sendInput=function(a,c){return this.singleCommand(this.getCommand(a),[],function(a){return function(d){return a.doCallback(c,d),b.request("sockets:active")?void 0:b.request("state:kodi:update",c)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.PlayList=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Playlist",c.prototype.play=function(a,c){var d;return d=b.request("state:kodi"),d.isPlaying()?this.insertAndPlay(a,c,d.getPlaying("position")+1):this.clear(function(b){return function(){return b.insertAndPlay(a,c,0)}}(this))},c.prototype.playCollection=function(a,b){return null==b&&(b=0),this.clear(function(c){return function(){var d,e,f,g,h,i,j,k;g=a.getRawCollection(),i=c.getPlayer(),d=[];for(e in g)f=g[e],j=parseInt(b)+parseInt(e),k="file"===f.type?"file":f.type+"id",h=[i,j,c.paramObj(k,f[k])],d.push({method:c.getCommand("Insert"),params:h});return c.multipleCommands(d,function(){return c.playEntity("position",parseInt(b),{},function(){return c.refreshPlaylistView()})})}}(this))},c.prototype.add=function(a,b){return this.playlistSize(function(c){return function(d){return c.insert(a,b,d)}}(this))},c.prototype.remove=function(a,b){return this.singleCommand(this.getCommand("Remove"),[this.getPlayer(),parseInt(a)],function(a){return function(c){return a.refreshPlaylistView(),a.doCallback(b,c)}}(this))},c.prototype.clear=function(a){return this.singleCommand(this.getCommand("Clear"),[this.getPlayer()],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.insert=function(a,b,c,d){return null==c&&(c=0),this.singleCommand(this.getCommand("Insert"),[this.getPlayer(),parseInt(c),this.paramObj(a,b)],function(a){return function(b){return a.refreshPlaylistView(),a.doCallback(d,b)}}(this))},c.prototype.getItems=function(a){return this.singleCommand(this.getCommand("GetItems"),[this.getPlayer(),["title"]],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.insertAndPlay=function(a,b,c,d){return null==c&&(c=0),this.insert(a,b,c,function(a){return function(b){return a.playEntity("position",parseInt(c),{},function(){return a.doCallback(d,b)})}}(this))},c.prototype.playlistSize=function(a){return this.getItems(function(b){return function(c){var d;return d=null!=c.items?c.items.length:0,b.doCallback(a,d)}}(this))},c.prototype.refreshPlaylistView=function(){var a;return a=b.request("sockets:active"),a?void 0:b.execute("playlist:refresh","kodi",this.playerName)},c.prototype.moveItem=function(a,b,c,d,e){var f;return f="file"===a?"file":a+"id",this.singleCommand(this.getCommand("Remove"),[this.getPlayer(),parseInt(c)],function(a){return function(){return a.insert(f,b,d,function(){return a.doCallback(e,d)})}}(this))},c}(a.Player)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.PVR=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="PVR",b.prototype.setPVRRecord=function(a,b,c){var d;return null==b&&(b={}),d={channel:a},d=f.extend(d,b),this.singleCommand(this.getCommand("Record"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.VideoLibrary=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="VideoLibrary",b.prototype.setEpisodeDetails=function(a,b,c){var d;return null==b&&(b={}),d={episodeid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetEpisodeDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setMovieDetails=function(a,b,c){var d;return null==b&&(b={}),d={movieid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetMovieDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.scan=function(a){return this.singleCommand(this.getCommand("Scan"),function(b){return function(c){return b.doCallback(a,c)}}(this))},b.prototype.toggleWatched=function(a,b){var c,d;return d=a.get("playcount")>0?0:1,c=helpers.global.paramObj("playcount",d),"movie"===a.get("type")&&this.setMovieDetails(a.get("id"),c,function(c){return function(){return helpers.cache.updateCollection("MovieCollection","movies",a.get("id"),"playcount",d),c.doCallback(b,d)}}(this)),"episode"===a.get("type")?this.setEpisodeDetails(a.get("id"),c,function(c){return function(){return helpers.cache.updateCollection("TVShowCollection","tvshows",a.get("tvshowid"),"playcount",d),c.doCallback(b,d)}}(this)):void 0},b}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.localLoad=function(a,c){var d,e;return e=b.request("state:local"),null==a?(e.setPlaying("playing",!1),void this.localStateUpdate()):(e.setState("currentPlaybackId","browser-"+a.get("id")),d=b.request("command:kodi:controller","video","Files"),d.downloadPath(a.get("file"),function(d){return function(f){var g;return g=soundManager,d.localStop(),e.setState("localPlay",g.createSound({id:e.getState("currentPlaybackId"),url:f,autoplay:!1,autoLoad:!0,stream:!0,onerror:function(){return console.log("SM ERROR!")},onplay:function(){return e.setPlayer("local"),e.setPlaying("playing",!0),e.setPlaying("paused",!1),e.setPlaying("playState","playing"),e.setPlaying("position",a.get("position")),e.setPlaying("itemChanged",!0),e.setPlaying("item",a.attributes),e.setPlaying("totaltime",helpers.global.secToTime(a.get("duration"))),d.localStateUpdate()},onstop:function(){return e.setPlaying("playing",!1),d.localStateUpdate()},onpause:function(){return e.setPlaying("paused",!0),e.setPlaying("playState","paused"),d.localStateUpdate()},onresume:function(){return e.setPlaying("paused",!1),e.setPlaying("playState","playing"),d.localStateUpdate()},onfinish:function(){return d.localFinished()},whileplaying:function(){var c,d,f;return f=parseInt(this.position)/1e3,c=parseInt(a.get("duration")),d=Math.round(f/c*100),e.setPlaying("time",helpers.global.secToTime(f)),e.setPlaying("percentage",d),b.execute("player:local:progress:update",d,helpers.global.secToTime(f))}})),d.doCallback(c)}}(this)))},c.prototype.localFinished=function(){return this.localGoTo("next")},c.prototype.localPlay=function(){return this.localCommand("play")},c.prototype.localStop=function(){return this.localCommand("stop")},c.prototype.localPause=function(){return this.localCommand("pause")},c.prototype.localPlayPause=function(){var a;return a=b.request("state:local"),this.localCommand(a.getPlaying("paused")?"play":"pause")},c.prototype.localSetVolume=function(a){return this.localCommand("setVolume",a)},c.prototype.localCommand=function(a,c){var d,e;return e=b.request("state:local"),d=e.getState("localPlay"),d!==!1&&d[a](c),this.localStateUpdate()},c.prototype.localGoTo=function(a){var c,d,e,f,g;return c=b.request("localplayer:get:entities"),g=b.request("state:local"),d=g.getPlaying("position"),f=!1,c.length>0&&("one"===g.getState("repeat")?f=d:g.getState("shuffled")===!0?f=helpers.global.getRandomInt(0,c.length-1):("next"===a&&(d===c.length-1&&"all"===g.getState("repeat")?f=0:d<c.length&&(f=d+1)),"previous"===a&&(0===d&&"all"===g.getState("repeat")?f=c.length-1:d>0&&(f=d-1)))),f!==!1?(e=c.findWhere({position:f}),this.localLoad(e,function(a){return function(){return a.localPlay(),a.localStateUpdate()}}(this))):void 0},c.prototype.localSeek=function(a){var c,d,e,f;return f=b.request("state:local"),c=f.getState("localPlay"),c!==!1?(d=a/100*c.duration,e=soundManager.getSoundById(f.getState("currentPlaybackId")),e.setPosition(d)):void 0},c.prototype.localRepeat=function(a){var c,d,e,f,g,h;if(g=b.request("state:local"),"cycle"!==a)return g.setState("repeat",a);e=!1,h=["off","all","one"];for(c in h)f=h[c],c=parseInt(c),e===!1&&g.getState("repeat")===f&&(c!==h.length-1?(d=c+1,e=h[d]):e="off");return g.setState("repeat",e)},c.prototype.localShuffle=function(){var a,c;return c=b.request("state:local"),a=c.getState("shuffled"),c.setState("shuffled",!a)},c.prototype.localStateUpdate=function(){return b.vent.trigger("state:local:changed")
},c.prototype.paramObj=function(a,b){return helpers.global.paramObj(a,b)},c.prototype.doCallback=function(a,b){return"function"==typeof a?a(b):void 0},c.prototype.onError=function(a,b){return helpers.debug.rpcError(a,b)},c}(d.Object)}),this.Kodi.module("CommandApp.Local",function(a,b){return a.Commander=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(a.Base),a.Player=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.playEntity=function(a,c,d){var e,f;return null==a&&(a="position"),e=b.request("localplayer:get:entities"),f=e.findWhere({position:c}),this.localLoad(f,function(a){return function(){return a.localPlay(),a.doCallback(d,c)}}(this))},c.prototype.sendCommand=function(a,b){switch(a){case"GoTo":this.localGoTo(b);break;case"PlayPause":this.localPlayPause();break;case"Seek":this.localSeek(b);break;case"SetRepeat":this.localRepeat(b);break;case"SetShuffle":this.localShuffle();break;case"Stop":this.localStop()}return this.localStateUpdate()},c}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b){return a.Application=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.getProperties=function(a){var c,d;return d=b.request("state:local"),c={volume:d.getState("volume"),muted:d.getState("muted")},this.doCallback(a,c)},c.prototype.setVolume=function(a,c){var d;return d=b.request("state:local"),d.setState("volume",a),this.localSetVolume(a),this.doCallback(c,a)},c.prototype.toggleMute=function(a){var c,d;return c=b.request("state:local"),d=0,c.getState("muted")?(d=c.getState("lastVolume"),c.setState("muted",!1)):(c.setState("lastVolume",c.getState("volume")),c.setState("muted",!0),d=0),this.localSetVolume(d),this.doCallback(a,d)},c}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b,c,d,e,f){return a.PlayList=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.play=function(a,b){return this.getSongs(a,b,function(a){return function(b){return a.playCollection(b)}}(this))},c.prototype.add=function(a,b){return this.getSongs(a,b,function(a){return function(b){return a.addCollection(b)}}(this))},c.prototype.playCollection=function(a){return f.isArray(a)||(a=a.getRawCollection()),this.clear(function(b){return function(){return b.insertAndPlay(a,0)}}(this))},c.prototype.addCollection=function(a){return this.playlistSize(function(b){return function(c){return b.insert(a,c)}}(this))},c.prototype.remove=function(a,b){return this.getItems(function(c){return function(d){var e,f,g,h;g=d.getRawCollection(),h=[];for(f in g)e=g[f],parseInt(f)!==parseInt(a)&&h.push(e);return c.clear(function(){return d=c.addItems(h),c.doCallback(b,d)})}}(this))},c.prototype.clear=function(a){var c;return c=b.execute("localplayer:clear:entities"),this.refreshPlaylistView(),this.doCallback(a,c)},c.prototype.insert=function(a,b,c){return null==b&&(b=0),this.getItems(function(d){return function(e){var g,h,i,j,k,l,m,n,o,p,q;if(j=e.getRawCollection(),0===j.length)k=f.flatten([a]);else if(parseInt(b)>=j.length)for(k=j,p=f.flatten([a]),l=0,n=p.length;n>l;l++)h=p[l],k.push(h);else{k=[];for(i in j){if(g=j[i],parseInt(i)===parseInt(b))for(q=f.flatten([a]),m=0,o=q.length;o>m;m++)h=q[m],k.push(h);k.push(g)}}return d.clear(function(){return e=d.addItems(k),d.doCallback(c,e)})}}(this))},c.prototype.addItems=function(a){return b.request("localplayer:item:add:entities",a),this.refreshPlaylistView()},c.prototype.getSongs=function(a,c,d){var e;return"songid"===a?b.request("song:byid:entities",[c],function(a){return function(b){return a.doCallback(d,b.getRawCollection())}}(this)):(e=b.request("song:filtered:entities",{filter:helpers.global.paramObj(a,c)}),b.execute("when:entity:fetched",e,function(a){return function(){return a.doCallback(d,e.getRawCollection())}}(this)))},c.prototype.getItems=function(a){var c;return c=b.request("localplayer:get:entities"),this.doCallback(a,c)},c.prototype.insertAndPlay=function(a,b,c){return null==b&&(b=0),this.insert(a,b,function(a){return function(){return a.playEntity("position",parseInt(b),{},function(){return a.doCallback(c,b)})}}(this))},c.prototype.playlistSize=function(a){return this.getItems(function(b){return function(c){return b.doCallback(a,c.length)}}(this))},c.prototype.refreshPlaylistView=function(){return b.execute("playlist:refresh","local","audio")},c.prototype.moveItem=function(a,b,c,d,e){return this.getItems(function(a){return function(b){var f,g;return g=b.getRawCollection(),f=g[c],a.remove(c,function(){return a.insert(f,d,function(){return a.doCallback(e,d)})})}}(this))},c}(a.Player)}),this.Kodi.module("EPGApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/live/:channelid":"tv","music/radio/:channelid":"radio"},b}(b.Router.Base),c={tv:function(b){return new a.List.Controller({channelid:b,type:"tv"})},radio:function(b){return new a.List.Controller({channelid:b,type:"radio"})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("EPGApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c;return c=b.request("broadcast:entities",a.channelid),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.getSubNav(),a.renderProgrammes(c)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.Layout({collection:b})},d.prototype.renderProgrammes=function(b){var c;return c=new a.EPGList({collection:b}),this.layout.regionContent.show(c)},d.prototype.getSubNav=function(){var a,c;return c="tv"===this.getOption("type")?21:1,a=b.request("navMain:children:show",c,"Sections"),this.layout.regionSidebarFirst.show(a)},d}(b.Controllers.Base)}),this.Kodi.module("EPGApp.List",function(a,b,c,d,e){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="epg-page",b}(b.Views.LayoutWithSidebarFirstView),a.ProgrammeList=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/epg/list/programmes",b.prototype.tagName="li",b.prototype.className="programme",b.prototype.onRender=function(){return this.model.attributes.wasactive?this.$el.addClass("aired"):void 0},b}(b.Views.ItemView),a.EPGList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ProgrammeList,c.prototype.tagName="ul",c.prototype.className="programmes",c.prototype.onShow=function(){return e(window).scrollTop(this.$el.find(".airing").offset().top-150)},c}(b.Views.CollectionView)}),this.Kodi.module("ExternalApp",function(){}),this.Kodi.module("ExternalApp.Youtube",function(a,b){var c;return c={getSearchView:function(c,d){return b.execute("youtube:search:entities",c,function(c){var e;return e=new a.List({collection:c}),b.listenTo(e,"childview:youtube:kodiplay",function(a,c){var d;return d=b.request("command:kodi:controller","video","PlayList"),d.play("file","plugin://plugin.video.youtube/play/?video_id="+c.model.get("id"))}),b.listenTo(e,"childview:youtube:localplay",function(a,b){var c;return c="videoPlayer.html?yt="+b.model.get("id"),helpers.global.localVideoPopup(c,500)}),d(e)})}},b.commands.setHandler("youtube:search:view",function(a,b){return c.getSearchView(a,b)})}),this.Kodi.module("ExternalApp.Youtube",function(a,b){return a.Item=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/external/youtube/youtube",c.prototype.tagName="li",c.prototype.triggers={"click .play-kodi":"youtube:kodiplay","click .play-local":"youtube:localplay"},c.prototype.events={"click .action":"closeModal"},c.prototype.closeModal=function(){return b.execute("ui:modal:close")},c}(b.Views.ItemView),a.List=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Item,c.prototype.tagName="ul",c.prototype.className="youtube-list",c}(b.Views.CollectionView)}),this.Kodi.module("FilterApp",function(a,b,c,d,e,f){var g;return g={sortFields:[{alias:"Title",type:"string",defaultSort:!0,defaultOrder:"asc",key:"title"},{alias:"Title",type:"string",defaultSort:!0,defaultOrder:"asc",key:"label"},{alias:"Year",type:"number",key:"year",defaultOrder:"desc"},{alias:"Date Added",type:"string",key:"dateadded",defaultOrder:"desc"},{alias:"Rating",type:"float",key:"rating",defaultOrder:"desc"}],filterFields:[{alias:"Year",type:"number",key:"year",sortOrder:"desc",filterCallback:"multiple"},{alias:"Genre",type:"array",key:"genre",sortOrder:"asc",filterCallback:"multiple"},{alias:"Mood",type:"array",key:"mood",sortOrder:"asc",filterCallback:"multiple"},{alias:"Style",type:"array",key:"style",sortOrder:"asc",filterCallback:"multiple"},{alias:"Unwatched",type:"boolean",key:"unwatched",sortOrder:"asc",filterCallback:"unwatched"},{alias:"Writer",type:"array",key:"writer",sortOrder:"asc",filterCallback:"multiple"},{alias:"Director",type:"array",key:"director",sortOrder:"asc",filterCallback:"multiple"},{alias:"Actor",type:"object",property:"name",key:"cast",sortOrder:"asc",filterCallback:"multiple"},{alias:"Set",type:"string",property:"set",key:"set",sortOrder:"asc",filterCallback:"multiple"}],getFilterFields:function(a){var b,c,d,e,f,h,i,j;for(f=a+"Fields",e=g[f],c=g.getAvailable(),b=c[a],h=[],i=0,j=e.length;j>i;i++)d=e[i],helpers.global.inArray(d.key,b)&&h.push(d);return h},storeFiltersNamespace:"filter:store:",getStoreNameSpace:function(a){return g.storeFiltersNamespace+a},setStoreFilters:function(a,c){var d;return null==a&&(a={}),null==c&&(c="filters"),d={},d[helpers.url.path()]=a,helpers.cache.set(g.getStoreNameSpace(c),d),b.vent.trigger("filter:changed",a)},getStoreFilters:function(a){var b,c,d,e,h,i;if(null==a&&(a="filters"),h=helpers.cache.get(g.getStoreNameSpace(a),{}),d=helpers.url.path(),b=h[d]?h[d]:{},e={},!f.isEmpty(b))for(c in b)i=b[c],i.length>0&&(e[c]=i);return e},updateStoreFiltersKey:function(a,b){var c;return null==b&&(b=[]),c=g.getStoreFilters(),c[a]=b,g.setStoreFilters(c),c},getStoreFiltersKey:function(a){var b,c;return c=g.getStoreFilters(),b=c[a]?c[a]:[]},setStoreSort:function(a,b){var c;return null==b&&(b="asc"),c={method:a,order:b},g.setStoreFilters(c,"sort")},getStoreSort:function(){var a,b;return b=g.getStoreFilters("sort"),b.method||(a=f.findWhere(g.getFilterFields("sort"),{defaultSort:!0}),b={method:a.key,order:a.defaultOrder}),b},setAvailable:function(a){return g.setStoreFilters(a,"available")},getAvailable:function(){return g.getStoreFilters("available")},toggleOrder:function(a){return a="asc"===a?"desc":"asc"},parseSortable:function(a){var b,c,d;d=g.getStoreSort(!1,"asc");for(b in a)c=a[b],a[b].active=!1,a[b].order=c.defaultOrder,d.method&&c.key===d.method?(a[b].active=!0,a[b].order=this.toggleOrder(d.order)):c.defaultSort&&d.method===!1&&(a[b].active=!0);return a},parseFilterable:function(a){var b,c,d,e;b=g.getFilterActive();for(d in a)e=a[d],c=f.findWhere(b,{key:e.key}),a[d].active=void 0!==c;return a},getFilterOptions:function(a,c){var d,e,h,i,j,k,l,m,n,o;if(m=b.request("filter:store:key:get",a),l=g.getFilterSettings(a),j=[],d=c.pluck(a),"multiple"===l.filterCallback&&"object"===l.type){for(k=[],n=0,o=d.length;o>n;n++){i=d[n];for(h in i)e=i[h],5>h&&k.push(e[l.property])}d=k}return f.map(f.uniq(f.flatten(d)),function(b){return j.push({key:a,value:b,active:helpers.global.inArray(b,m)})}),j},applyFilters:function(a){var c,d,e,f,h;e=g.getStoreSort(),a.sortCollection(e.method,e.order),c=new b.Entities.Filtered(a),h=g.getStoreFilters();for(d in h)f=h[d],f.length>0&&(c=g.applyFilter(c,d,f));return c},applyFilter:function(a,b,c){var d;switch(d=g.getFilterSettings(b),d.filterCallback){case"multiple":"array"===d.type?a.filterByMultipleArray(b,c):"object"===d.type?a.filterByMultipleObject(b,d.property,c):a.filterByMultiple(b,c);break;case"unwatched":a.filterByUnwatched()}return a},getFilterSettings:function(a){return f.findWhere(g.getFilterFields("filter"),{key:a})},getFilterActive:function(){var a,b,c,d;a=[],d=g.getStoreFilters();for(b in d)c=d[b],c.length>0&&a.push({key:b,values:c});return a}},b.reqres.setHandler("filter:show",function(b){var c,d;return g.setAvailable(b.availableFilters),c=new a.Show.Controller({refCollection:b}),d=c.getFilterView()}),b.reqres.setHandler("filter:options",function(a,c){var d,e,f;return e=g.getFilterOptions(a,c),f=b.request("filter:filters:options:entities",e),d=g.getFilterSettings(a),f.sortCollection("value",d.sortOrder),f}),b.reqres.setHandler("filter:active",function(){return b.request("filter:active:entities",g.getFilterActive())}),b.reqres.setHandler("filter:apply:entites",function(a){return g.setAvailable(a.availableFilters),g.applyFilters(a)}),b.reqres.setHandler("filter:sortable:entities",function(){return b.request("filter:sort:entities",g.parseSortable(g.getFilterFields("sort")))}),b.reqres.setHandler("filter:filterable:entities",function(){return b.request("filter:filters:entities",g.parseFilterable(g.getFilterFields("filter")))}),b.reqres.setHandler("filter:init",function(a){var b,c,d,e,h,i,j;if(c=helpers.url.params(),!f.isEmpty(c)){for(g.setStoreFilters({}),i=a.filter,j=[],e=0,h=i.length;h>e;e++)b=i[e],c[b]?(d=g.getStoreFiltersKey(b),helpers.global.inArray(c[b],d)?j.push(void 0):(d.push(decodeURIComponent(c[b])),j.push(g.updateStoreFiltersKey(b,d)))):j.push(void 0);return j}}),b.reqres.setHandler("filter:store:set",function(a){return g.setStoreFilters(a),a}),b.reqres.setHandler("filter:store:get",function(){return g.getStoreFilters()}),b.reqres.setHandler("filter:store:key:get",function(a){return g.getStoreFiltersKey(a)}),b.reqres.setHandler("filter:store:key:update",function(a,b){return null==b&&(b=[]),g.updateStoreFiltersKey(a,b)}),b.reqres.setHandler("filter:store:key:toggle",function(a,b){var c,d,e,h,i,j;if(h=g.getStoreFiltersKey(a),e=[],f.indexOf(h,b)>-1){for(d=[],i=0,j=h.length;j>i;i++)c=h[i],c!==b&&d.push(c);e=d}else h.push(b),e=h;return g.updateStoreFiltersKey(a,e),e}),b.reqres.setHandler("filter:sort:store:set",function(a,b){return null==b&&(b="asc"),g.setStoreSort(a,b)}),b.reqres.setHandler("filter:sort:store:get",function(){return g.getStoreSort()})}),this.Kodi.module("FilterApp.Show",function(a,b,c,d,e,f){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.getFilterView=function(){var a;return a=this.getOption("refCollection"),this.layoutFilters=this.getLayoutView(a),this.listenTo(this.layoutFilters,"show",function(a){return function(){return a.getSort(),a.getFilters(),a.getActive(),a.getSections()}}(this)),this.listenTo(this.layoutFilters,"filter:layout:close:filters",function(a){return function(){return a.stateChange("normal")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:close:options",function(a){return function(){return a.stateChange("filters")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:open:filters",function(a){return function(){return a.stateChange("filters")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:open:options",function(a){return function(){return a.stateChange("options")}}(this)),this.layoutFilters},d.prototype.getLayoutView=function(b){return new a.FilterLayout({collection:b})},d.prototype.getSort=function(){var c,d;return c=b.request("filter:sortable:entities"),d=new a.SortList({collection:c}),this.layoutFilters.regionSort.show(d),b.listenTo(d,"childview:filter:sortable:select",function(a){return function(c,d){return b.request("filter:sort:store:set",d.model.get("key"),d.model.get("order")),a.layoutFilters.trigger("filter:changed"),a.getSort()}}(this))},d.prototype.getFilters=function(c){var d,e;return null==c&&(c=!0),d=b.request("filter:filterable:entities"),e=new a.FilterList({collection:d}),b.listenTo(e,"childview:filter:filterable:select",function(a){return function(c,d){var e;return e=d.model.get("key"),"boolean"===d.model.get("type")?(b.request("filter:store:key:toggle",e,d.model.get("alias")),a.triggerChange()):(a.getFilterOptions(e),a.stateChange("options"))}}(this)),this.layoutFilters.regionFiltersList.show(e),c?this.layoutFilters.regionFiltersOptions.empty():void 0},d.prototype.getActive=function(){var c,d;return c=b.request("filter:active"),d=new a.ActiveList({collection:c}),this.layoutFilters.regionFiltersActive.show(d),b.listenTo(d,"childview:filter:option:remove",function(a){return function(c,d){var e;return e=d.model.get("key"),b.request("filter:store:key:update",e,[]),a.triggerChange()}}(this)),b.listenTo(d,"childview:filter:add",function(a){return function(){return a.stateChange("filters")}}(this)),this.getFilterBar()},d.prototype.getFilterOptions=function(c){var d,e;return d=b.request("filter:options",c,this.getOption("refCollection")),e=new a.OptionList({collection:d}),this.layoutFilters.regionFiltersOptions.show(e),b.listenTo(e,"childview:filter:option:select",function(a){return function(d,e){var f;return f=e.model.get("value"),e.view.$el.find(".option").toggleClass("active"),b.request("filter:store:key:toggle",c,f),a.triggerChange(!1)}}(this)),b.listenTo(e,"filter:option:deselectall",function(a){return function(d){return d.view.$el.find(".option").removeClass("active"),b.request("filter:store:key:update",c,[]),a.triggerChange(!1)}}(this))},d.prototype.triggerChange=function(a){return null==a&&(a=!0),this.getFilters(a),this.getActive(),b.navigate(helpers.url.path()),this.layoutFilters.trigger("filter:changed")},d.prototype.getFilterBar=function(){var c,d,g,h,i;return h=b.request("filter:store:get"),i=f.flatten(f.values(h)),d=e(".layout-container"),c=e(".region-content-top",d),i.length>0?(g=new a.FilterBar({filters:i}),c.html(g.render().$el),d.addClass("filters-active"),b.listenTo(g,"filter:remove:all",function(a){return function(){return b.request("filter:store:set",{}),a.triggerChange(),a.stateChange("normal")}}(this))):d.removeClass("filters-active")},d.prototype.stateChange=function(a){var b;switch(null==a&&(a="normal"),b=this.layoutFilters.$el.find(".filters-container"),a){case"filters":return b.removeClass("show-options").addClass("show-filters");case"options":return b.addClass("show-options").removeClass("show-filters");default:return b.removeClass("show-options").removeClass("show-filters")}},d.prototype.getSections=function(){var a,c;return a=this.getOption("refCollection"),a.sectionId?(c=b.request("navMain:children:show",a.sectionId,"Sections"),this.layoutFilters.regionNavSection.show(c)):void 0},d}(b.Controllers.Base)}),this.Kodi.module("FilterApp.Show",function(a,b,c,d,e){return a.FilterLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/filters_ui",b.prototype.className="side-bar",b.prototype.regions={regionSort:".sort-options",regionFiltersActive:".filters-active",regionFiltersList:".filters-list",regionFiltersOptions:".filter-options-list",regionNavSection:".nav-section"},b.prototype.triggers={"click .close-filters":"filter:layout:close:filters","click .close-options":"filter:layout:close:options","click .open-filters":"filter:layout:open:filters"},b}(b.Views.LayoutView),a.ListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/list_item",b.prototype.tagName="li",b}(b.Views.ItemView),a.List=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ListItem,c.prototype.tagName="ul",c.prototype.className="selection-list",c}(b.Views.CollectionView),a.SortListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .sortable":"filter:sortable:select"},b.prototype.initialize=function(){var a,b;return a=["option","sortable"],this.model.get("active")===!0&&a.push("active"),a.push("order-"+this.model.get("order")),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("alias")),this.model.set({title:b})},b}(a.ListItem),a.SortList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.SortListItem,c}(a.List),a.FilterListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable":"filter:filterable:select"},b.prototype.initialize=function(){var a,b;return a=["option","option filterable"],this.model.get("active")&&a.push("active"),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("alias")),this.model.set({title:b})},b}(a.ListItem),a.FilterList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.FilterListItem,c}(a.List),a.OptionListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-option":"filter:option:select"},b.prototype.initialize=function(){var a,b;return a=["option","option filterable-option"],this.model.get("active")&&a.push("active"),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("value")),this.model.set({title:b})},b}(a.ListItem),a.OptionList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/filter/show/filter_options",c.prototype.activeValues=[],c.prototype.childView=a.OptionListItem,c.prototype.childViewContainer="ul.selection-list",c.prototype.onRender=function(){return this.collection.length<=10&&e(".options-search-wrapper",this.$el).addClass("hidden"),e(".options-search",this.$el).on("keyup",function(){var a,b;return b=e(".options-search",this.$el).val().toLocaleLowerCase(),a=e(".filter-options-list li",this.$el).removeClass("hidden"),b.length>0?a.each(function(a,c){var d;return d=e(c).find(".option").text().toLowerCase(),-1===d.indexOf(b)?e(c).addClass("hidden"):void 0}):void 0})},c.prototype.triggers={"click .deselect-all":"filter:option:deselectall"},c}(b.Views.CompositeView),a.ActiveListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-remove":"filter:option:remove"},b.prototype.initialize=function(){var a,b,c;return c=t.gettext("Remove")+" "+t.gettext(this.model.get("key"))+" "+t.gettext("filter"),b=this.themeTag("span",{"class":"text"},this.model.get("values").join(", ")),a=this.themeTag("span",{"class":"filter-btn filterable-remove",title:c},b),this.model.set({title:a})},b}(a.ListItem),a.ActiveNewListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-add":"filter:add"},b.prototype.initialize=function(){var a;return a=this.themeTag("span",{"class":"filter-btn filterable-add"},t.gettext("Add filter")),this.model.set({title:a})},b}(a.ListItem),a.ActiveList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ActiveListItem,c.prototype.emptyView=a.ActiveNewListItem,c.prototype.className="active-list",c}(a.List),a.FilterBar=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/filters_bar",b.prototype.className="filters-active-bar",b.prototype.onRender=function(){return this.options.filters?e(".filters-active-all",this.$el).html(this.options.filters.join(", ")):void 0},b.prototype.triggers={"click .remove":"filter:remove:all"},b}(b.Views.ItemView)}),this.Kodi.module("Images",function(a,b){var c;return c={imagesPath:"images/",defaultFanartPath:"fanart_default/",defaultFanartFiles:["buds.jpg","cans.jpg","guitar.jpg","speaker.jpg","turntable.jpg"],getDefaultThumbnail:function(){return c.imagesPath+"thumbnail_default.png"},getRandomFanart:function(){var a,b,d;return d=helpers.global.getRandomInt(0,c.defaultFanartFiles.length-1),a=c.defaultFanartFiles[d],b=c.imagesPath+c.defaultFanartPath+a},parseRawPath:function(a){var b;return b=config.get("static","reverseProxy")?"image/"+encodeURIComponent(a):"/image/"+encodeURIComponent(a)},setFanartBackground:function(a,c){var d;return d=b.getRegion(c).$el,"none"!==a?(a||(a=this.getRandomFanart()),d.css("background-image","url("+a+")")):d.removeAttr("style")},getImageUrl:function(a,b){var d;if(null==b&&(b="thumbnail"),d="",null==a||""===a)switch(b){case"fanart":d=c.getRandomFanart();break;default:d=c.getDefaultThumbnail()}else d=c.parseRawPath(a);return d}},b.commands.setHandler("images:fanart:set",function(a,b){return null==b&&(b="regionFanart"),c.setFanartBackground(a,b)}),b.reqres.setHandler("images:path:get",function(a,b){return null==a&&(a=""),null==b&&(b="thumbnail"),c.getImageUrl(a,b)}),b.reqres.setHandler("images:path:entity",function(a){var b,d,e;if(null!=a.thumbnail&&(a.thumbnail=c.getImageUrl(a.thumbnail,"thumbnail")),null!=a.fanart&&(a.fanart=c.getImageUrl(a.fanart,"fanart")),null!=a.cast&&a.cast.length>0){e=a.cast;for(b in e)d=e[b],a.cast[b].thumbnail=c.getImageUrl(d.thumbnail,"thumbnail")}return a})}),this.Kodi.module("InputApp",function(a,b,c,d,e){var f;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={remote:"remotePage"},b}(b.Router.Base),f={initKeyBind:function(){return e(document).keydown(function(a){return function(b){return a.keyBind(b)}}(this))},inputController:function(){return b.request("command:kodi:controller","auto","Input")},doInput:function(a){return this.inputController().sendInput(a)},doCommand:function(a,c,d){return b.request("command:kodi:player",a,c,function(a){return function(){return a.pollingUpdate(d)}}(this))},appController:function(){return b.request("command:kodi:controller","auto","Application")},pollingUpdate:function(a){return b.request("sockets:active")?void 0:b.request("state:kodi:update",a)},toggleRemote:function(a){var c,d;return null==a&&(a="auto"),c=e("body"),d="section-remote","auto"===a&&(a=c.hasClass(d)?!0:!1),a?(b.navigate(helpers.backscroll.lastPath),helpers.backscroll.scrollToLast()):(helpers.backscroll.setLast(),b.navigate("remote",{trigger:!0}))},remotePage:function(){return this.toggleRemote(!1),b.regionContent.empty()},keyBind:function(a){var c,d;if(!e(a.target).is("input, textarea"))switch(c=b.request("state:kodi"),a.which){case 37:return this.doInput("Left");case 38:return this.doInput("Up");case 39:return this.doInput("Right");case 40:return this.doInput("Down");case 8:return this.doInput("Back");case 13:return this.doInput("Select");case 67:return this.doInput("ContextMenu");case 107:return d=c.getState("volume")+5,this.appController().setVolume(d>100?100:Math.ceil(d));case 109:return d=c.getState("volume")-5,this.appController().setVolume(0>d?0:Math.ceil(d));case 32:return this.doCommand("PlayPause","toggle");case 88:return this.doCommand("Stop");case 190:return this.doCommand("GoTo","next");case 188:return this.doCommand("GoTo","previous")}}},b.commands.setHandler("input:textbox",function(a){return b.execute("ui:textinput:show","Input required",a,function(a){return f.inputController().sendText(a),b.execute("notification:show",t.gettext("Sent text")+' "'+a+'" '+t.gettext("to Kodi"))}),b.commands.setHandler("input:textbox:close",function(){return b.execute("ui:modal:close")})}),b.commands.setHandler("input:send",function(a){return f.doInput(a)}),b.commands.setHandler("input:remote:toggle",function(){return f.toggleRemote()}),b.addInitializer(function(){var b;return b=new a.Remote.Controller,f.initKeyBind()}),b.on("before:start",function(){return new a.Router({controller:f})})}),this.Kodi.module("InputApp.Remote",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return b.vent.on("shell:ready",function(a){return function(){return a.getRemote()}}(this))},d.prototype.getRemote=function(){var c;return c=new a.Control,this.listenTo(c,"remote:input",function(a){return b.execute("input:send",a)}),this.listenTo(c,"remote:player",function(a){return b.request("command:kodi:player",a,[])}),this.listenTo(c,"remote:power",function(){var a;return a=b.request("command:kodi:controller","auto","Application"),a.quit()}),b.regionRemote.show(c),b.vent.on("state:changed",function(){var a,c,d;return d=b.request("state:current"),d.isPlayingItemChanged()?(c=d.getPlaying("item"),a=b.request("images:path:get",c.fanart,"fanart"),e("#remote-background").css("background-image","url("+c.fanart+")")):void 0})},d}(b.Controllers.Base)}),this.Kodi.module("InputApp.Remote",function(a,b,c,d,e){return a.Control=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.template="apps/input/remote/remote_control",d.prototype.events={"click .input-button":"inputClick","click .player-button":"playerClick"},d.prototype.triggers={"click .power-button":"remote:power"},d.prototype.inputClick=function(a){var b;return b=e(a.target).data("type"),this.trigger("remote:input",b)},d.prototype.playerClick=function(a){var b;return b=e(a.target).data("type"),this.trigger("remote:player",b)},a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(b.Views.ItemView),d}(b.Views.ItemView)}),this.Kodi.module("LoadingApp",function(a,b){return b.commands.setHandler("loading:show:view",function(b,c){var d;return null==c&&(c="Just a sec..."),d=new a.Show.Page({text:c}),b.show(d)}),b.commands.setHandler("loading:show:page",function(){return b.execute("loading:show:view",b.regionContent)})}),this.Kodi.module("LoadingApp.Show",function(a,b,c){return a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/loading/show/loading_page",b.prototype.onRender=function(){return this.$el.find("h2").html(this.options.text)},b}(c.Marionette.ItemView)}),this.Kodi.module("localPlaylistApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return c=a.id,d=b.request("localplaylist:entities"),this.layout=this.getLayoutView(d),this.listenTo(this.layout,"show",function(a){return function(){return a.getListsView(d),a.getItems(c)}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},d.prototype.getListsView=function(c){var d;return this.sideLayout=new a.SideLayout,d=new a.Lists({collection:c}),b.listenTo(this.sideLayout,"show",function(a){return function(){return c.length>0?a.sideLayout.regionLists.show(d):void 0}}(this)),b.listenTo(this.sideLayout,"lists:new",function(){return b.execute("localplaylist:newlist")}),this.layout.regionSidebarFirst.show(this.sideLayout)},d.prototype.getItems=function(c){var d,e;return e=b.request("localplaylist:entity",c),d=b.request("localplaylist:item:entities",c),this.itemLayout=new a.Layout({list:e}),b.listenTo(this.itemLayout,"show",function(a){return function(){var c,f;return c=e.get("media"),d.length>0?(f=b.request(""+c+":list:view",d,!0),a.itemLayout.regionListItems.show(f)):void 0}}(this)),this.bindLayout(c),this.layout.regionContent.show(this.itemLayout)},d.prototype.bindLayout=function(a){var c;return c=b.request("localplaylist:item:entities",a),b.listenTo(this.itemLayout,"list:clear",function(){return b.execute("localplaylist:clear:entities",a),b.execute("localplaylist:reload",a)
}),b.listenTo(this.itemLayout,"list:delete",function(){return b.execute("localplaylist:clear:entities",a),b.execute("localplaylist:remove:entity",a),b.navigate("playlists",{trigger:!0})}),b.listenTo(this.itemLayout,"list:play",function(){var a;return a=b.request("command:kodi:controller","audio","PlayList"),a.playCollection(c)}),b.listenTo(this.itemLayout,"list:localplay",function(){var a;return a=b.request("command:local:controller","audio","PlayList"),a.playCollection(c)})},d}(b.Controllers.Base)}),this.Kodi.module("localPlaylistApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="local-playlist-list",b}(b.Views.LayoutWithSidebarFirstView),a.SideLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist_sidebar_layout",b.prototype.tagName="div",b.prototype.className="side-inner",b.prototype.regions={regionLists:".current-lists"},b.prototype.triggers={"click .new-list":"lists:new"},b}(b.Views.LayoutView),a.List=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist",b.prototype.tagName="li",b.prototype.initialize=function(){var a,b,c;return b=helpers.url.get("playlist",this.model.get("id")),a=[],b===helpers.url.path()&&a.push("active"),c=this.themeLink(this.model.get("name"),b,{className:a.join(" ")}),this.model.set({title:c})},b}(b.Views.ItemView),a.Lists=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/localPlaylist/list/playlist_list",c.prototype.childView=a.List,c.prototype.tagName="div",c.prototype.childViewContainer="ul.lists",c.prototype.onRender=function(){return e("h3",this.$el).html(t.gettext("Playlists"))},c}(b.Views.CompositeView),a.Selection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist",b.prototype.tagName="li",b.prototype.initialize=function(){return this.model.set({title:this.model.get("name")})},b.prototype.triggers={"click .item":"item:selected"},b}(b.Views.ItemView),a.SelectionList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/localPlaylist/list/playlist_list",c.prototype.childView=a.Selection,c.prototype.tagName="div",c.prototype.className="playlist-selection-list",c.prototype.childViewContainer="ul.lists",c.prototype.onRender=function(){return e("h3",this.$el).html(t.gettext("Existing playlists"))},c}(b.Views.CompositeView),a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist_layout",b.prototype.tagName="div",b.prototype.className="local-playlist",b.prototype.regions={regionListItems:".item-container"},b.prototype.triggers={"click .local-playlist-header .clear":"list:clear","click .local-playlist-header .delete":"list:delete","click .local-playlist-header .play":"list:play","click .local-playlist-header .localplay":"list:localplay"},b.prototype.onRender=function(){return this.options&&this.options.list?e("h2",this.$el).html(this.options.list.get("name")):void 0},b}(b.Views.LayoutView)}),this.Kodi.module("localPlaylistApp",function(a,b,c,d,e,f){var g;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={playlists:"list","playlist/:id":"list"},b}(b.Router.Base),g={list:function(c){var d,e,g;return null===c&&(g=b.request("localplaylist:entities"),e=g.getRawCollection(),f.isEmpty(g)?c=0:(d=f.min(e,function(a){return a.id}),c=d.id,b.navigate(helpers.url.get("playlist",c)))),new a.List.Controller({id:c})},addToList:function(c,d){var h,i,j,k;return j=b.request("localplaylist:entities"),j&&0!==j.length?(k=new a.List.SelectionList({collection:j}),h=k.render().$el,i=e("<button>").html(t.gettext("Create a new list")).addClass("btn btn-primary"),i.on("click",function(){return function(){return f.defer(function(){return g.createNewList(c,d)})}}(this)),b.execute("ui:modal:show",t.gettext("Add to playlist"),h,i),b.listenTo(k,"childview:item:selected",function(a){return function(b,e){return a.addToExistingList(e.model.get("id"),c,d)}}(this))):this.createNewList(c,d)},addToExistingList:function(a,c,d){var e;return helpers.global.inArray(c,["albumid","artistid"])?(e=b.request("song:filtered:entities",{filter:helpers.global.paramObj(c,d)}),b.execute("when:entity:fetched",e,function(b){return function(){return b.addCollectionToList(e,a)}}(this))):"songid"===c?b.request("song:byid:entities",[d],function(b){return function(c){return b.addCollectionToList(c,a)}}(this)):"playlist"===c?(e=b.request("playlist:kodi:entities","audio"),b.execute("when:entity:fetched",e,function(b){return function(){return b.addCollectionToList(e,a)}}(this))):void 0},addCollectionToList:function(a,c){return b.request("localplaylist:item:add:entities",c,a),b.execute("ui:modal:close"),b.execute("notification:show",t.gettext("Added to your playlist"))},createNewList:function(a,c){return b.execute("ui:textinput:show",t.gettext("Add a new playlist"),t.gettext("Give your playlist a name"),function(d){return function(e){var f;return""!==e?(f=b.request("localplaylist:add:entity",e,"song"),d.addToExistingList(f,a,c)):void 0}}(this),!1)},createEmptyList:function(){return b.execute("ui:textinput:show",t.gettext("Add a new playlist"),t.gettext("Give your playlist a name"),function(){return function(a){var c;return""!==a?(c=b.request("localplaylist:add:entity",a,"song"),b.navigate("playlist/"+c,{trigger:!0})):void 0}}(this))}},b.commands.setHandler("localplaylist:addentity",function(a,b){return g.addToList(a,b)}),b.commands.setHandler("localplaylist:newlist",function(){return g.createEmptyList()}),b.commands.setHandler("localplaylist:reload",function(a){return g.list(a)}),b.on("before:start",function(){return new a.Router({controller:g})})}),this.Kodi.module("MovieApp.Edit",function(a,b){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){var a,c;return this.model=this.getOption("model"),c={title:this.model.get("title"),form:this.getSructure(),formState:this.model.attributes,config:{attributes:{"class":"edit-form"},callback:function(a){return function(b,c){return a.saveCallback(b,c)}}(this)}},a=b.request("form:popup:wrapper",c)},c.prototype.getSructure=function(){return[{title:"Information",id:"general",children:[{id:"title",title:"Title",type:"textfield",defaultValue:""},{id:"plotoutline",title:"Plot Outline",type:"textarea",defaultValue:""},{id:"plot",title:"Plot",type:"textarea",defaultValue:""},{id:"rating",title:"Rating",type:"textfield",defaultValue:""},{id:"imdbnumber",title:"Imdb",type:"textfield",defaultValue:""}]}]},c.prototype.saveCallback=function(a){var c;return a.rating=parseFloat(a.rating),c=b.request("command:kodi:controller","video","VideoLibrary"),c.setMovieDetails(this.model.get("id"),a,function(){return Kodi.execute("notification:show",t.gettext("Updated movie details"))})},c}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=11,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("movie:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("movie:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/landing/landing",b.prototype.className="movie-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added"},b}(b.Views.LayoutView)}),this.Kodi.module("MovieApp.List",function(a,b){var c;return c={getMoviesView:function(b,d){var e,f;return null==d&&(d=!1),f=d?"MoviesSet":"Movies",e=new a[f]({collection:b}),c.bindTriggers(e),e},bindTriggers:function(a){return b.listenTo(a,"childview:movie:play",function(a,c){return b.execute("movie:action","play",c)}),b.listenTo(a,"childview:movie:add",function(a,c){return b.execute("movie:action","add",c)}),b.listenTo(a,"childview:movie:localplay",function(a,c){return b.execute("movie:action","localplay",c)}),b.listenTo(a,"childview:movie:download",function(a,c){return b.execute("movie:action","download",c)}),b.listenTo(a,"childview:movie:watched",function(a,c){return a.$el.toggleClass("is-watched"),b.execute("movie:action","toggleWatched",c)}),b.listenTo(a,"childview:movie:edit",function(a,c){return b.execute("movie:action","edit",c)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("movie:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=11,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["title","year","dateadded","rating"],filter:["year","genre","writer","director","cast","set","unwatched"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getMoviesView(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("movie:list:view",function(a){return c.getMoviesView(a,!0)})}),this.Kodi.module("MovieApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.MovieTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"movie:play","click .watched":"movie:watched","click .add":"movie:add","click .localplay":"movie:localplay","click .download":"movie:download","click .edit":"movie:edit"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set({subtitle:this.model.get("year")}),this.model.set(b.request("movie:action:items"))):void 0},c.prototype.attributes=function(){var a;return a=["card"],helpers.entities.isWatched(this.model)&&a.push("is-watched"),{"class":a.join(" ")}},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="movie-empty-result",b}(b.Views.EmptyViewResults),a.Movies=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.MovieTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.VirtualListView),a.MoviesSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.MovieTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView)}),this.Kodi.module("MovieApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"movies/recent":"landing",movies:"list","movie/:id":"view"},b}(b.Router.Base),c={landing:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f,g;switch(e=c.model,f=b.request("command:kodi:controller","video","PlayList"),d=b.request("command:kodi:controller","video","Files"),g=b.request("command:kodi:controller","video","VideoLibrary"),a){case"play":return f.play("movieid",e.get("movieid"));case"add":return f.add("movieid",e.get("movieid"));case"localplay":return d.videoStream(e.get("file"));case"download":return d.downloadFile(e.get("file"));case"toggleWatched":return g.toggleWatched(e);case"edit":return b.execute("movie:edit",e)}}},b.reqres.setHandler("movie:action:items",function(){return{actions:{watched:"Watched",thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",edit:"Edit",divider:"",download:"Download",localplay:"Play in browser"}}}),b.commands.setHandler("movie:action",function(a,b){return c.action(a,b)}),b.commands.setHandler("movie:edit",function(c){var d;return d=b.request("movie:entity",c.get("id")),b.execute("when:entity:fetched",d,function(){return function(){return new a.Edit.Controller({model:d})}}(this))}),b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("MovieApp.Show",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"movie:play",function(a){return b.execute("movie:action","play",a)}),b.listenTo(a,"movie:add",function(a){return b.execute("movie:action","add",a)}),b.listenTo(a,"movie:localplay",function(a){return b.execute("movie:action","localplay",a)}),b.listenTo(a,"movie:download",function(a){return b.execute("movie:action","download",a)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d;return c=parseInt(a.id),d=b.request("movie:entity",c),b.execute("when:entity:fetched",d,function(a){return function(){return a.layout=a.getLayoutView(d),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(d),a.getContentView(d)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},e.prototype.getContentView=function(c){return this.contentLayout=new a.Content({model:c}),this.listenTo(this.contentLayout,"movie:youtube",function(){var a;return a=c.get("trailer"),b.execute("ui:modal:youtube",c.get("title")+" Trailer",a.id)}),this.listenTo(this.contentLayout,"show",function(a){return function(){return c.get("cast").length>0&&a.contentLayout.regionCast.show(a.getCast(c)),a.getSetView(c)}}(this)),this.layout.regionContent.show(this.contentLayout)},e.prototype.getCast=function(a){return b.request("cast:list:view",a.get("cast"),"movies")},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.MovieTeaser({model:b}),c.bindTriggers(f),e=new a.Details({model:b}),c.bindTriggers(e),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getSetView=function(c){var d;return""!==c.get("set")?(d=b.request("movie:entities"),b.execute("when:entity:fetched",d,function(e){return function(){var f,g;return f=new b.Entities.Filtered(d),f.filterBy("set",{set:c.get("set")}),g=new a.Set({set:c.get("set")}),b.listenTo(g,"show",function(){var a;return a=b.request("movie:list:view",f),g.regionCollection.show(a)}),e.contentLayout.regionSets.show(g)}}(this))):void 0},e}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Show",function(a,b,c,d,e){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/details_meta",b.prototype.triggers={"click .play":"movie:play","click .add":"movie:add","click .stream":"movie:localplay","click .download":"movie:download"},b}(b.Views.ItemView),a.MovieTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .play":"movie:play"},b}(b.Views.CardView),a.Content=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/content",b.prototype.className="movie-content content-sections",b.prototype.onRender=e('[data-toggle="tooltip"]',b.$el).tooltip(),b.prototype.triggers={"click .youtube":"movie:youtube"},b.prototype.regions={regionCast:".region-cast",regionSets:".region-sets"},b}(b.Views.LayoutView),a.Set=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/set",b.prototype.className="movie-set",b.prototype.onRender=function(){return this.options&&this.options.set?e("h2.set-name",this.$el).html(this.options.set):void 0},b.prototype.regions=function(){return{regionCollection:".collection-items"}},b}(b.Views.LayoutView)}),this.Kodi.module("NavMain",function(a,b){var c;return c={getNav:function(){var c;return c=b.request("navMain:entities"),new a.List({collection:c})},getNavChildren:function(c,d){var e;return null==d&&(d="default"),e=b.request("navMain:entities",c),"default"!==d&&e.set({title:d}),new a.ItemList({model:e})}},this.onStart=function(){return b.vent.on("shell:ready",function(){return function(){var a;return a=c.getNav(),b.regionNav.show(a)}}(this))},b.reqres.setHandler("navMain:children:show",function(a,b){return null==b&&(b="default"),c.getNavChildren(a,b)})}),this.Kodi.module("NavMain",function(a,b,c){return a.List=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/navMain/show/navMain",b}(c.Marionette.ItemView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/navMain/show/nav_item",b.prototype.tagName="li",b.prototype.initialize=function(){var a,b;return a=[],this.model.get("path")===helpers.url.path()&&a.push("active"),b=this.themeLink(this.model.get("title"),this.model.get("path"),{className:a.join(" ")}),this.model.set({link:b})},b}(c.Marionette.ItemView),a.ItemList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/navMain/show/nav_sub",c.prototype.childView=a.Item,c.prototype.tagName="div",c.prototype.childViewContainer="ul.items",c.prototype.className="nav-sub",c.prototype.initialize=function(){return this.collection=this.model.get("items")},c}(b.Views.CompositeView)}),this.Kodi.module("NotificationsApp",function(a,b,c,d,e){var f;return f={notificationMinTimeOut:5e3},b.commands.setHandler("notification:show",function(a,b){var c;return null==b&&(b="normal"),c=a.length<50?f.notificationMinTimeOut:100*a.length,e.snackbar({content:a,style:"type-"+b,timeout:c})})}),this.Kodi.module("PlayerApp",function(a,b,c,d,e){var f;return f={getPlayer:function(b){return new a.Show.Player({player:b})},doCommand:function(a,c,d,e){return b.request("command:"+a+":player",c,d,function(a){return function(){return a.pollingUpdate(e)}}(this))},getAppController:function(a){return b.request("command:"+a+":controller","auto","Application")},pollingUpdate:function(a){var c;return c=b.request("state:current"),"kodi"!==c.getPlayer()||b.request("sockets:active")?void 0:b.request("state:kodi:update",a)},initPlayer:function(a,c){var d,g,h,i;return this.initProgress(a),this.initVolume(a),b.vent.trigger("state:player:updated",a),i=this.getAppController(a),b.vent.on("state:initialized",function(a){return function(){var c;return c=b.request("state:kodi"),c.isPlaying()?(a.timerStop(),a.timerStart()):void 0}}(this)),b.listenTo(c,"control:play",function(b){return function(){return b.doCommand(a,"PlayPause","toggle")}}(this)),b.listenTo(c,"control:prev",function(b){return function(){return b.doCommand(a,"GoTo","previous")}}(this)),b.listenTo(c,"control:next",function(b){return function(){return b.doCommand(a,"GoTo","next")}}(this)),b.listenTo(c,"control:repeat",function(b){return function(){return b.doCommand(a,"SetRepeat","cycle")}}(this)),b.listenTo(c,"control:shuffle",function(b){return function(){return b.doCommand(a,"SetShuffle","toggle")}}(this)),b.listenTo(c,"control:mute",function(a){return function(){return i.toggleMute(function(){return a.pollingUpdate()})}}(this)),b.listenTo(c,"control:menu",function(){return b.execute("ui:playermenu","toggle")}),"kodi"===a&&b.listenTo(c,"remote:toggle",function(){return function(){return b.execute("input:remote:toggle")}}(this)),d=e("#player-"+a),g=e(".playing-progress",d),"kodi"===a?(g.on("change",function(){return f.timerStop(),f.doCommand(a,"Seek",Math.round(this.vGet()),function(){return f.timerStart()})}),g.on("slide",function(){return f.timerStop()})):g.on("change",function(){return f.doCommand(a,"Seek",Math.round(this.vGet()))}),h=e(".volume",d),h.on("change",function(){return i.setVolume(Math.round(this.vGet()),function(){return f.pollingUpdate()})})},timerStart:function(){return b.playingTimerInterval=setTimeout(function(a){return function(){return a.timerUpdate()}}(this),1e3)},timerStop:function(){return clearTimeout(b.playingTimerInterval)},timerUpdate:function(){var a,c,d,e,f;return f=b.request("state:kodi"),this.timerStop(),f.isPlaying()&&null!=f.getPlaying("time")?(a=helpers.global.timeToSec(f.getPlaying("time"))+1,d=helpers.global.timeToSec(f.getPlaying("totaltime")),e=Math.ceil(a/d*100),c=helpers.global.secToTime(a),f.setPlaying("time",c),this.setProgress("kodi",e,c),this.timerStart()):void 0},setProgress:function(a,b,c){var d,f;return null==b&&(b=0),f=e("#player-"+a),d=e(".playing-time-current",f),d.html(helpers.global.formatTime(c)),e(".playing-progress",f).val(b)},initProgress:function(a,b){var c;return null==b&&(b=0),c=e("#player-"+a),e(".playing-progress",c).noUiSlider({start:b,connect:"upper",step:1,range:{min:0,max:100}})},initVolume:function(a,b){var c;return null==b&&(b=50),c=e("#player-"+a),e(".volume",c).noUiSlider({start:b,connect:"upper",step:1,range:{min:0,max:100}})}},this.onStart=function(){return b.vent.on("shell:ready",function(){return function(){return b.kodiPlayer=f.getPlayer("kodi"),b.listenTo(b.kodiPlayer,"show",function(){return f.initPlayer("kodi",b.kodiPlayer),b.execute("player:kodi:timer","start")}),b.regionPlayerKodi.show(b.kodiPlayer),b.localPlayer=f.getPlayer("local"),b.listenTo(b.localPlayer,"show",function(){return f.initPlayer("local",b.localPlayer)}),b.regionPlayerLocal.show(b.localPlayer)}}(this)),b.commands.setHandler("player:kodi:timer",function(a){return null==a&&(a="start"),"start"===a?f.timerStart():"stop"===a?f.timerStop():"update"===a?f.timerUpdate():void 0}),b.commands.setHandler("player:local:progress:update",function(a,b){return f.setProgress("local",a,b)})}}),this.Kodi.module("PlayerApp.Show",function(a,b){return a.Player=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/player/show/player",b.prototype.regions={regionProgress:".playing-progress",regionVolume:".volume",regionThumbnail:".playing-thumb",regionTitle:".playing-title",regionSubtitle:".playing-subtitle",regionTimeCur:".playing-time-current",regionTimeDur:".playing-time-duration"},b.prototype.triggers={"click .remote-toggle":"remote:toggle","click .control-prev":"control:prev","click .control-play":"control:play","click .control-next":"control:next","click .control-stop":"control:stop","click .control-mute":"control:mute","click .control-shuffle":"control:shuffle","click .control-repeat":"control:repeat","click .control-menu":"control:menu"},b}(b.Views.ItemView)}),this.Kodi.module("PlaylistApp.List",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return b.vent.on("shell:ready",function(a){return function(){return a.getPlaylistBar()}}(this))},d.prototype.playlistController=function(a,c){return b.request("command:"+a+":controller",c,"PlayList")},d.prototype.playerCommand=function(a,c,d){return null==d&&(d=[]),b.request("command:"+a+":player",c,d,function(){return b.request("state:kodi:update")})},d.prototype.stateObj=function(){return b.request("state:current")},d.prototype.getPlaylistBar=function(){return this.layout=this.getLayout(),this.listenTo(this.layout,"show",function(a){return function(){return a.renderList("kodi","audio"),a.renderList("local","audio"),b.vent.on("state:initialized",function(){return a.changePlaylist(a.stateObj().getState("player"),a.stateObj().getState("media"))})}}(this)),this.listenTo(this.layout,"playlist:kodi:audio",function(a){return function(){return a.changePlaylist("kodi","audio")}}(this)),this.listenTo(this.layout,"playlist:kodi:video",function(a){return function(){return a.changePlaylist("kodi","video")}}(this)),this.listenTo(this.layout,"playlist:kodi",function(a){return function(){return a.stateObj().setPlayer("kodi"),a.renderList("kodi","audio")}}(this)),this.listenTo(this.layout,"playlist:local",function(a){return function(){return a.stateObj().setPlayer("local"),a.renderList("local","audio")}}(this)),this.listenTo(this.layout,"playlist:clear",function(a){return function(){return a.playlistController(a.stateObj().getPlayer(),a.stateObj().getState("media")).clear()}}(this)),this.listenTo(this.layout,"playlist:refresh",function(a){return function(){return a.renderList(a.stateObj().getPlayer(),a.stateObj().getState("media")),b.execute("notification:show",t.gettext("Playlist refreshed"))}}(this)),this.listenTo(this.layout,"playlist:party",function(a){return function(){return a.playerCommand("kodi","SetPartymode",["toggle"])}}(this)),this.listenTo(this.layout,"playlist:save",function(){return function(){return b.execute("localplaylist:addentity","playlist")}}(this)),b.regionPlaylist.show(this.layout)},d.prototype.getLayout=function(){return new a.Layout},d.prototype.getList=function(b){return new a.Items({collection:b})},d.prototype.renderList=function(a,c){var d,e;return this.layout.$el.removeClassStartsWith("media-").addClass("media-"+c),"kodi"===a?(d=b.request("playlist:list",a,c),b.execute("when:entity:fetched",d,function(e){return function(){var f;return f=e.getList(d),b.listenTo(f,"show",function(){return e.bindActions(f,a,c)}),e.layout.kodiPlayList.show(f),b.vent.trigger("state:content:updated")}}(this))):(d=b.request("localplayer:get:entities"),e=this.getList(d),b.listenTo(e,"show",function(b){return function(){return b.bindActions(e,a,c)}}(this)),this.layout.localPlayList.show(e),b.vent.trigger("state:content:updated"))},d.prototype.bindActions=function(a,b,c){var d;return d=this.playlistController(b,c),this.listenTo(a,"childview:playlist:item:remove",function(a,b){return d.remove(b.model.get("position"))}),this.listenTo(a,"childview:playlist:item:play",function(a,b){return d.playEntity("position",parseInt(b.model.get("position")))}),this.initSortable(b,c)},d.prototype.changePlaylist=function(a,b){return this.renderList(a,b)},d.prototype.initSortable=function(a,b){var c,d;return c=e("."+a+"-playlist"),d=this.playlistController(a,b),e("ul.playlist-items",c).sortable({onEnd:function(a){return d.moveItem(e(a.item).data("type"),e(a.item).data("id"),a.oldIndex,a.newIndex)}})},d}(b.Controllers.Base)}),this.Kodi.module("PlaylistApp.List",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/list/playlist_bar",b.prototype.tagName="div",b.prototype.className="playlist-bar",b.prototype.regions={kodiPlayList:".kodi-playlist",localPlayList:".local-playlist"},b.prototype.triggers={"click .kodi-playlists .media-toggle .video":"playlist:kodi:video","click .kodi-playlists .media-toggle .audio":"playlist:kodi:audio","click .player-toggle .kodi":"playlist:kodi","click .player-toggle .local":"playlist:local","click .clear-playlist":"playlist:clear","click .refresh-playlist":"playlist:refresh","click .party-mode":"playlist:party","click .save-playlist":"playlist:save"},b.prototype.events={"click .playlist-menu a":"menuClick"},b.prototype.menuClick=function(a){return a.preventDefault()},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/list/playlist_item",b.prototype.tagName="li",b.prototype.initialize=function(){var a;switch(a="",this.model.get("type")){case"song":a=this.model.get("artist")?this.model.get("artist").join(", "):"";break;default:a=""}return this.model.set({subtitle:a})},b.prototype.triggers={"click .remove":"playlist:item:remove","click .play":"playlist:item:play"},b.prototype.attributes=function(){return{"class":"item pos-"+this.model.get("position"),"data-type":this.model.get("type"),"data-id":this.model.get("id")}},b}(b.Views.ItemView),a.Items=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Item,c.prototype.tagName="ul",c.prototype.className="playlist-items",c}(b.Views.CollectionView)}),this.Kodi.module("PlaylistApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={playlist:"list"},b}(b.Router.Base),c={list:function(){return new a.Show.Controller},type:"kodi",media:"audio",setContext:function(a,b){return null==a&&(a="kodi"),null==b&&(b="audio"),this.type=a,this.media=b},getController:function(){return b.request("command:"+this.type+":controller",this.media,"PlayList")},getPlaylistItems:function(){return b.request("playlist:"+this.type+":entities",this.media)}},b.reqres.setHandler("playlist:list",function(a,b){return c.setContext(a,b),c.getPlaylistItems()}),b.on("before:start",function(){return new a.Router({controller:c})}),b.addInitializer(function(){var c;return c=new a.List.Controller,b.commands.setHandler("playlist:refresh",function(a,b){return c.renderList(a,b)})})}),this.Kodi.module("PlaylistApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return this.landing=this.getLanding(),b.regionContent.show(this.landing)
},d.prototype.getLanding=function(){return new a.Landing},d}(b.Controllers.Base)}),this.Kodi.module("PlaylistApp.Show",function(a,b){return a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/show/landing",b}(b.Views.ItemView)}),this.Kodi.module("ChannelApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c;return c=b.request("channel:entities",a.group),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.renderChannels(c),a.getSubNav()}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.Layout({collection:b})},d.prototype.renderChannels=function(c){var d;return d=new a.ChannelList({collection:c}),this.listenTo(d,"childview:channel:play",function(a,c){var d;return d=b.request("command:kodi:controller","auto","Player"),d.playEntity("channelid",c.model.get("id"),{},function(){return function(){}}(this))}),this.listenTo(d,"childview:channel:record",function(a,c){var d;return d=b.request("command:kodi:controller","auto","PVR"),d.setPVRRecord(c.model.get("id"),{record:"toggle"},function(){return function(){return b.execute("notification:show",t.gettext("Channel recording toggled"))}}(this))}),this.layout.regionContent.show(d)},d.prototype.getSubNav=function(){var a,c;return c="alltv"===this.getOption("group")?21:1,a=b.request("navMain:children:show",c,"Sections"),this.layout.regionSidebarFirst.show(a)},d}(b.Controllers.Base)}),this.Kodi.module("ChannelApp.List",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="pvr-page",b}(b.Views.LayoutWithSidebarFirstView),a.ChannelTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.triggers={"click .play":"channel:play","click .record":"channel:record"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),null!=this.model?this.model.set({subtitle:this.model.get("broadcastnow").title}):void 0},b}(b.Views.CardView),a.ChannelList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ChannelTeaser,c.prototype.tagName="ul",c.prototype.className="card-grid--square",c}(b.Views.CollectionView)}),this.Kodi.module("ChannelApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/live":"tv","music/radio":"radio"},b}(b.Router.Base),c={tv:function(){return new a.List.Controller({group:"alltv"})},radio:function(){return new a.List.Controller({group:"allradio"})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("SearchApp.List",function(a,b,c,d,e,f){return a.Controller=function(c){function d(){return this.updateProgress=__bind(this.updateProgress,this),this.getLoader=__bind(this.getLoader,this),d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){var a;return this.layout=this.getLayout(),this.processed=[],a=this.getOption("media"),this.entities="all"===a?["song","artist","album","tvshow","movie"]:[a],this.listenTo(this.layout,"show",function(a){return function(){var b,c,d,e,f;for(a.getLoader(),e=a.entities,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a.getResult(b));return f}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getLoader=function(){var a;return a=t.gettext("Searching for")+" "+helpers.global.arrayToSentence(f.difference(this.entities,this.processed)),b.execute("loading:show:view",this.layout.loadingSet,a)},d.prototype.getResult=function(c){var d,e;return e=this.getOption("query"),d="all"===this.getOption("media")?"limit":"all",b.execute(""+c+":search:entities",e,d,function(d){return function(f){var g,h;return f.length>0&&(h=b.request(""+c+":list:view",f,!0),g=new a.ListSet({entity:c,more:f.more?!0:!1,query:e}),b.listenTo(g,"show",function(){return g.regionResult.show(h)}),d.layout[""+c+"Set"].show(g)),d.updateProgress(c)}}(this))},d.prototype.updateProgress=function(a){return null!=a&&this.processed.push(a),this.getLoader(),this.processed.length===this.entities.length?this.layout.loadingSet.$el.empty():void 0},d}(b.Controllers.Base)}),this.Kodi.module("SearchApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/list/search_layout",b.prototype.className="search-page set-page",b.prototype.regions={artistSet:".entity-set-artist",albumSet:".entity-set-album",songSet:".entity-set-song",movieSet:".entity-set-movie",tvshowSet:".entity-set-tvshow",loadingSet:".entity-set-loading"},b}(b.Views.LayoutView),a.ListSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/list/search_set",b.prototype.className="search-set",b.prototype.onRender=function(){var a;return this.options&&this.options.entity&&(e("h2.set-header",this.$el).html(t.gettext(this.options.entity+"s")),this.options.more&&this.options.query)?(a=this.themeLink(t.gettext("Show more"),"search/"+this.options.entity+"/"+this.options.query),e(".more",this.$el).html(a)):void 0},b.prototype.regions={regionResult:".set-results"},b}(b.Views.LayoutView)}),this.Kodi.module("SearchApp",function(a,b,c,d,e){var f;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={search:"view","search/:media/:query":"list"},b}(b.Router.Base),f={keyUpTimeout:2e3,list:function(c,d){var f;return b.navigate("search/"+c+"/"+d),f=e("#search"),""===f.val()&&f.val(d),new a.List.Controller({query:d,media:c})},view:function(){return new a.Show.Controller},searchBind:function(){return e("#search").on("keyup",function(a){var c;return c=e("#search").val(),clearTimeout(b.searchAllTimeout),13===a.which?f.list("all",c):b.searchAllTimeout=setTimeout(function(){return f.list("all",c)},f.keyUpTimeout)})}},b.on("before:start",function(){return new a.Router({controller:f})}),b.addInitializer(function(){return b.vent.on("shell:ready",function(){return f.searchBind()})})}),this.Kodi.module("SearchApp.Show",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return this.landing=this.getLanding(),this.listenTo(this.landing,"show",function(){return function(){return e("#search").focus()}}(this)),b.regionContent.show(this.landing)},d.prototype.getLanding=function(){return new a.Landing},d}(b.Controllers.Base)}),this.Kodi.module("SearchApp.Show",function(a,b){return a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/show/landing",b}(b.Views.ItemView)}),this.Kodi.module("SettingsApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"settings/web":"local","settings/kodi":"kodi"},b}(b.Router.Base),c={subNavId:51,local:function(){return new a.Show.Local.Controller},kodi:function(){return new a.Show.Kodi.Controller},getSubNav:function(){return b.request("navMain:children:show",this.subNavId,"Sections")}},b.on("before:start",function(){return new a.Router({controller:c})}),b.reqres.setHandler("settings:subnav",function(){return c.getSubNav()})}),this.Kodi.module("SettingsApp.Show.Kodi",function(a,b){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getSubNav(),a.getForm()}}(this)),b.regionContent.show(this.layout)},c.prototype.getLayoutView=function(){return new b.SettingsApp.Show.Layout},c.prototype.getSubNav=function(){var a;return a=b.request("settings:subnav"),this.layout.regionSidebarFirst.show(a)},c.prototype.getForm=function(){var a,c;return c={form:this.getSructure(),formState:this.getState(),config:{attributes:{"class":"settings-form"}}},a=b.request("form:wrapper",c),this.layout.regionContent.show(a)},c.prototype.getSructure=function(){return[{title:"List options",id:"list",children:[{id:"ignore-article",title:"Ignore article",type:"checkbox",defaultValue:!0,description:'Ignore terms such as "The" and "a" when sorting lists'}]}]},c.prototype.getState=function(){return{"default-player":"local","jsonrpc-address":"/jsonrpc","test-checkbox":!1}},c}(b.Controllers.Base)}),this.Kodi.module("SettingsApp.Show.Local",function(a,b,c,d,e,f){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getSubNav(),a.getForm()}}(this)),b.regionContent.show(this.layout)},c.prototype.getLayoutView=function(){return new b.SettingsApp.Show.Layout},c.prototype.getSubNav=function(){var a;return a=b.request("settings:subnav"),this.layout.regionSidebarFirst.show(a)},c.prototype.getForm=function(){var a,c;return c={form:this.getStructure(),formState:this.getState(),config:{attributes:{"class":"settings-form"},callback:function(a){return function(b,c){return a.saveCallback(b,c)}}(this)}},a=b.request("form:wrapper",c),this.layout.regionContent.show(a)},c.prototype.getStructure=function(){return[{title:"General options",id:"general",children:[{id:"lang",title:t.gettext("Language"),type:"select",options:helpers.translate.getLanguages(),defaultValue:"en",description:t.gettext("Preferred language, need to refresh browser to take effect")},{id:"defaultPlayer",title:t.gettext("Default player"),type:"select",options:{auto:"Auto",kodi:"Kodi",local:"Local"},defaultValue:"auto",description:t.gettext("Which player to start with")}]},{title:"List options",id:"list",children:[{id:"ignoreArticle",title:t.gettext("Ignore article"),type:"checkbox",defaultValue:!0,description:t.gettext("Ignore articles (terms such as 'The' and 'A') when sorting lists")},{id:"albumAtristsOnly",title:t.gettext("Album artists only"),type:"checkbox",defaultValue:!0,description:t.gettext("When listing artists should we only see artists with albums or all artists found. Warning: turning this off can impact performance with large libraries")}]},{title:"Appearance",id:"appearance",children:[{id:"vibrantHeaders",title:t.gettext("Vibrant Headers"),type:"checkbox",defaultValue:!0,description:t.gettext("Use colourful headers for media pages")}]},{title:"Advanced Options",id:"advanced",children:[{id:"socketsPort",title:t.gettext("Websockets port"),type:"textfield",defaultValue:"9090",description:"9090 "+t.gettext("is the default")},{id:"socketsHost",title:t.gettext("Websockets host"),type:"textfield",defaultValue:"auto",description:t.gettext("The hostname used for websockets connection. Set to 'auto' to use the current hostname.")},{id:"pollInterval",title:t.gettext("Poll interval"),type:"select",defaultValue:"10000",options:{5000:"5 "+t.gettext("sec"),10000:"10 "+t.gettext("sec"),30000:"30 "+t.gettext("sec"),60000:"60 "+t.gettext("sec")},description:t.gettext("How often do I poll for updates from Kodi (Only applies when websockets inactive)")},{id:"reverseProxy",title:t.gettext("Reverse proxy support"),type:"checkbox",defaultValue:!1,description:t.gettext("Enable support for reverse proxying.")}]}]},c.prototype.getState=function(){return config.get("app","config:local",config["static"])},c.prototype.saveCallback=function(a){return config.set("app","config:local",a),config["static"]=f.extend(config["static"],config.get("app","config:local",config["static"])),Kodi.execute("notification:show",t.gettext("Web Settings saved."))},c}(b.Controllers.Base)}),this.Kodi.module("SettingsApp.Show",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="settings-page",b}(b.Views.LayoutWithSidebarFirstView)}),this.Kodi.module("Shell",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"":"homePage",home:"homePage"},b}(b.Router.Base),c={homePage:function(){var c;return c=new a.HomepageLayout,b.regionContent.show(c),this.setFanart(),b.vent.on("state:changed",function(a){return function(){var c;return c=b.request("state:current"),c.isPlayingItemChanged()&&""===helpers.url.arg(0)?a.setFanart():void 0}}(this)),b.listenTo(c,"destroy",function(){return function(){return b.execute("images:fanart:set","none")}}(this))},setFanart:function(){var a,c;return c=b.request("state:current"),null!=c?(a=c.getPlaying("item"),b.execute("images:fanart:set",a.fanart)):b.execute("images:fanart:set")},renderLayout:function(){var c,d;return d=new a.Layout,b.root.show(d),b.addRegions(d.regions),b.execute("loading:show:page"),c=config.get("app","shell:playlist:state","open"),"closed"===c&&this.alterRegionClasses("add","shell-playlist-closed"),b.listenTo(d,"shell:playlist:toggle",function(a){return function(){var b;return c=config.get("app","shell:playlist:state","open"),b="open"===c?"closed":"open",config.set("app","shell:playlist:state",b),a.alterRegionClasses("toggle","shell-playlist-closed")}}(this)),b.listenTo(d,"shell:audio:scan",function(){return function(){return b.request("command:kodi:controller","auto","AudioLibrary").scan()}}(this)),b.listenTo(d,"shell:video:scan",function(){return function(){return b.request("command:kodi:controller","auto","VideoLibrary").scan()}}(this)),b.listenTo(d,"shell:about",function(){return function(){}}(this))},alterRegionClasses:function(a,c,d){var e,f;return null==d&&(d="root"),e=b.getRegion(d).$el,f=""+a+"Class",e[f](c)}},b.addInitializer(function(){return b.commands.setHandler("shell:view:ready",function(){return c.renderLayout(),new a.Router({controller:c}),b.vent.trigger("shell:ready"),b.commands.setHandler("body:state",function(a,b){return c.alterRegionClasses(a,b)})})})}),this.Kodi.module("Shell",function(a,b,c){return a.Layout=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/shell/show/shell",c.prototype.regions={regionNav:"#nav-bar",regionContent:"#content",regionSidebarFirst:"#sidebar-first",regionPlaylist:"#playlist-bar",regionTitle:"#page-title .title",regionTitleContext:"#page-title .context",regionFanart:"#fanart",regionPlayerKodi:"#player-kodi",regionPlayerLocal:"#player-local",regionModal:"#modal-window",regionModalTitle:".modal-title",regionModalBody:".modal-body",regionModalFooter:".modal-footer",regionRemote:"#remote",regionSearch:"#search-region"},c.prototype.triggers={"click .playlist-toggle-open":"shell:playlist:toggle","click .audio-scan":"shell:audio:scan","click .video-scan":"shell:video:scan","click .about":"shell:about"},c.prototype.events={"click .player-menu > li":"closePlayerMenu"},c.prototype.closePlayerMenu=function(){return b.execute("ui:playermenu","close")},c}(c.Marionette.LayoutView),a.HomepageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/shell/show/homepage",b}(c.Marionette.LayoutView),b.execute("shell:view:ready")}),this.Kodi.module("SongApp.List",function(a,b,c,d,e){var f;return f={getSongsView:function(c,d){return null==d&&(d=!1),this.songsView=new a.Songs({collection:c,verbose:d}),b.listenTo(this.songsView,"childview:song:play",function(a){return function(b,c){return a.playSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:add",function(a){return function(b,c){return a.addSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:localadd",function(a){return function(b,c){return a.localAddSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:localplay",function(a){return function(b,c){return a.localPlaySong(c.model)}}(this)),b.listenTo(this.songsView,"childview:song:download",function(a){return function(b,c){return a.downloadSong(c.model)}}(this)),b.listenTo(this.songsView,"childview:song:musicvideo",function(a){return function(b,c){return a.musicVideo(c.model)}}(this)),b.listenTo(this.songsView,"show",function(){return b.vent.trigger("state:content:updated")}),this.songsView},playSong:function(a){return b.execute("command:audio:play","songid",a)},addSong:function(a){return b.execute("command:audio:add","songid",a)},localAddSong:function(a){return b.execute("localplaylist:addentity","songid",a)},localPlaySong:function(a){var c;return c=b.request("command:local:controller","audio","PlayList"),c.play(a.attributes)},downloadSong:function(a){var c;return c=b.request("command:kodi:controller","video","Files"),c.downloadFile(a.get("file"))},musicVideo:function(a){var c;return c=a.get("label")+" "+a.get("artist"),b.execute("youtube:search:view",c,function(a){var d;return d=e("<a>",{"class":"btn btn-primary",href:"https://www.youtube.com/results?search_query="+c,target:"_blank"}),d.html("More videos"),b.execute("ui:modal:show",c,a.render().$el,d)})}},b.reqres.setHandler("song:list:view",function(a,b){return null==b&&(b=!1),f.getSongsView(a,b)})}),this.Kodi.module("SongApp.List",function(a,b,c,d,e){return a.Song=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/song/list/song",c.prototype.tagName="tr",c.prototype.initialize=function(){var a,b;return a=helpers.global.secToTime(this.model.get("duration")),b={"song-localadd":"Add to playlist","song-download":"Download song","song-localplay":"Play in browser","song-musicvideo":"Music video"},this.model.set({displayDuration:helpers.global.formatTime(a),menu:b})},c.prototype.triggers={"click .play":"song:play","dblclick .song-title":"song:play","click .add":"song:add","click .song-localadd":"song:localadd","click .song-download":"song:download","click .song-localplay":"song:localplay","click .song-musicvideo":"song:musicvideo"},c.prototype.events={"click .dropdown > i":"populateMenu","click .thumbs":"toggleThumbs"},c.prototype.populateMenu=function(){var a,b,c,d;if(b="",this.model.get("menu")){d=this.model.get("menu");for(a in d)c=d[a],b+=this.themeTag("li",{"class":a},c);return this.$el.find(".dropdown-menu").html(b)}},c.prototype.toggleThumbs=function(){return b.request("thumbsup:toggle:entity",this.model),this.$el.toggleClass("thumbs-up")},c.prototype.attributes=function(){var a;return a=["song","table-row","can-play","item-"+this.model.get("uid")],b.request("thumbsup:check",this.model)&&a.push("thumbs-up"),{"class":a.join(" ")}},c.prototype.onShow=function(){return console.log(this.model),e(".dropdown",this.$el).on("show.bs.dropdown",function(a){return function(){return a.$el.addClass("menu-open")}}(this)),e(".dropdown",this.$el).on("hide.bs.dropdown",function(a){return function(){return a.$el.removeClass("menu-open")}}(this)),e(".dropdown",this.$el).on("click",function(){return e(this).removeClass("open").trigger("hide.bs.dropdown")})},c}(b.Views.ItemView),a.Songs=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Song,c.prototype.tagName="table",c.prototype.attributes=function(){var a;return a=this.options.verbose?"verbose":"basic",{"class":"songs-table table table-hover "+a}},c}(b.Views.CollectionView)}),this.Kodi.module("StateApp",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.instanceSettings={},c.prototype.state={player:"kodi",media:"audio",volume:50,lastVolume:50,muted:!1,shuffled:!1,repeat:"off"},c.prototype.playing={playing:!1,paused:!1,playState:"",item:{},media:"audio",itemChanged:!1,latPlaying:"",canrepeat:!0,canseek:!0,canshuffle:!0,partymode:!1,percentage:0,playlistid:0,position:0,speed:0,time:{hours:0,milliseconds:0,minutes:0,seconds:0},totaltime:{hours:0,milliseconds:0,minutes:0,seconds:0}},c.prototype.defaultPlayingItem={thumbnail:"",fanart:"",id:0,songid:0,episodeid:0,album:"",albumid:"",duration:0,type:"song"},c.prototype.getState=function(a){return null==a&&(a="all"),"all"===a?this.state:this.state[a]},c.prototype.setState=function(a,b){return this.state[a]=b},c.prototype.getPlaying=function(a){var b;return null==a&&(a="all"),b=this.playing,0===b.item.length&&(b.item=this.defaultPlayingItem),"all"===a?this.playing:this.playing[a]},c.prototype.setPlaying=function(a,b){return this.playing[a]=b},c.prototype.isPlaying=function(){return this.getPlaying("playing")},c.prototype.isPlayingItemChanged=function(){return this.getPlaying("itemChanged")},c.prototype.doCallback=function(a,b){return"function"==typeof a?a(b):void 0},c.prototype.getCurrentState=function(){},c.prototype.getCachedState=function(){return{state:this.state,playing:this.playing}},c.prototype.setPlayer=function(a){var c;return null==a&&(a="kodi"),c=b.getRegion("root").$el,c.removeClassStartsWith("active-player-").addClass("active-player-"+a),config.set("state","lastplayer",a)},c.prototype.getPlayer=function(){var a,c;return c="kodi",a=b.getRegion("root").$el,a.hasClass("active-player-local")&&(c="local"),c},c}(d.Object)}),this.Kodi.module("StateApp.Kodi",function(a,b,c,d,e,f){return a.State=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.playerController={},c.prototype.applicationController={},c.prototype.playlistApi={},c.prototype.initialize=function(){return this.state=f.extend({},this.state),this.playing=f.extend({},this.playing),this.setState("player","kodi"),this.playerController=b.request("command:kodi:controller","auto","Player"),this.applicationController=b.request("command:kodi:controller","auto","Application"),this.playlistApi=b.request("playlist:kodi:entity:api"),b.reqres.setHandler("state:kodi:update",function(a){return function(b){return a.getCurrentState(b)}}(this)),b.reqres.setHandler("state:kodi:get",function(a){return function(){return a.getCachedState()}}(this))},c.prototype.getCurrentState=function(a){return this.applicationController.getProperties(function(c){return function(d){return c.setState("volume",d.volume),c.setState("muted",d.muted),b.reqres.setHandler("player:kodi:timer","stop"),c.playerController.getPlaying(function(d){var e,f,g,h,i;if(d){for(c.setPlaying("playing",!0),c.setPlaying("paused",0===d.properties.speed),c.setPlaying("playState",0===d.properties.speed?"paused":"playing"),e=["canrepeat","canseek","canshuffle","partymode","percentage","playlistid","position","speed","time","totaltime"],h=0,i=e.length;i>h;h++)f=e[h],d.properties[f]&&c.setPlaying(f,d.properties[f]);c.setState("shuffled",d.properties.shuffled),c.setState("repeat",d.properties.repeat),g=c.playerController.playerIdToName(d.properties.playlistid),g&&c.setState("media",g),d.item.file!==c.getPlaying("lastPlaying")?(c.setPlaying("itemChanged",!0),b.vent.trigger("state:kodi:itemchanged",c.getCachedState())):c.setPlaying("itemChanged",!1),c.setPlaying("lastPlaying",d.item.file),c.setPlaying("item",c.parseItem(d.item,{media:g,playlistid:d.properties.playlistid})),b.reqres.setHandler("player:kodi:timer","start")}else c.setPlaying("playing",!1),c.setPlaying("paused",!1),c.setPlaying("item",c.defaultPlayingItem),c.setPlaying("lstPlaying","");return b.vent.trigger("state:kodi:changed",c.getCachedState()),b.vent.trigger("state:changed"),c.doCallback(a,c.getCachedState())})}}(this))},c.prototype.parseItem=function(a,c){return a=this.playlistApi.parseItem(a,c),a=b.request("images:path:entity",a),a.url=helpers.url.get(a.type,a.id),a.url=helpers.url.playlistUrl(a),a},c}(b.StateApp.Base)}),this.Kodi.module("StateApp.Kodi",function(a,b,c){return a.Notifications=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,a),d.prototype.wsActive=!1,d.prototype.wsObj={},d.prototype.getConnection=function(){var a,b,c,d,e;return a=config.get("static","socketsHost"),d=config.get("static","jsonRpcEndpoint"),e=config.get("static","socketsPort"),c="auto"===a?location.hostname:a,b=helpers.url.isSecureProtocol()?"wss":"ws",""+b+"://"+c+":"+e+"/"+d+"?kodi"},d.prototype.initialize=function(){var a,c;return window.WebSocket?(c=new WebSocket(this.getConnection()),c.onopen=function(a){return function(){return helpers.debug.msg("Websockets Active"),a.wsActive=!0,b.vent.trigger("sockets:available")}}(this),c.onerror=function(a){return function(c){return helpers.debug.msg(a.socketConnectionErrorMsg(),"warning",c),a.wsActive=!1,b.vent.trigger("sockets:unavailable")}}(this),c.onmessage=function(a){return function(b){return a.messageRecieved(b)}}(this),c.onclose=function(a){return function(b){return helpers.debug.msg("Websockets Closed","warning",b),a.wsActive=!1}}(this)):(a="Your browser doesn't support websockets! Get with the times and update your browser.",helpers.debug.msg(t.gettext(a),"warning",resp),b.vent.trigger("sockets:unavailable")),b.reqres.setHandler("sockets:active",function(){return this.wsActive})},d.prototype.parseResponse=function(a){return jQuery.parseJSON(a.data)},d.prototype.messageRecieved=function(a){var b;return b=this.parseResponse(a),this.onMessage(b),console.log(b)},d.prototype.socketConnectionErrorMsg=function(){var a;return a="Failed to connect to websockets",t.gettext(a)},d.prototype.refreshStateNow=function(a){return b.vent.trigger("state:kodi:changed",this.getCachedState()),setTimeout(function(){return function(){return b.request("state:kodi:update",function(b){return a?a(b):void 0})}}(this),1e3)},d.prototype.onMessage=function(a){var d,e;switch(a.method){case"Player.OnPlay":this.setPlaying("paused",!1),this.setPlaying("playState","playing"),b.execute("player:kodi:timer","start"),this.refreshStateNow();break;case"Player.OnStop":this.setPlaying("playing",!1),b.execute("player:kodi:timer","stop"),this.refreshStateNow();break;case"Player.OnPropertyChanged":this.refreshStateNow();break;case"Player.OnPause":this.setPlaying("paused",!0),this.setPlaying("playState","paused"),b.execute("player:kodi:timer","stop"),this.refreshStateNow();break;case"Player.OnSeek":b.execute("player:kodi:timer","stop"),this.refreshStateNow(function(){return b.execute("player:kodi:timer","start")});break;case"Playlist.OnClear":case"Playlist.OnAdd":case"Playlist.OnRemove":d=b.request("command:kodi:controller","auto","Player"),b.execute("playlist:refresh","kodi",d.playerIdToName(a.params.data.playlistid)),this.refreshStateNow();break;case"Application.OnVolumeChanged":this.setState("volume",a.params.data.volume),this.setState("muted",a.params.data.muted),this.refreshStateNow();break;case"VideoLibrary.OnScanStarted":b.execute("notification:show",t.gettext("Video library scan started"));break;case"VideoLibrary.OnScanFinished":b.execute("notification:show",t.gettext("Video library scan complete")),c.fetchCache.clearItem("MovieCollection"),c.fetchCache.clearItem("TVShowCollection");break;case"AudioLibrary.OnScanStarted":b.execute("notification:show",t.gettext("Audio library scan started"));break;case"AudioLibrary.OnScanFinished":b.execute("notification:show",t.gettext("Audio library scan complete")),c.fetchCache.clearItem("AlbumCollection"),c.fetchCache.clearItem("ArtistCollection");break;case"Input.OnInputRequested":b.execute("input:textbox",""),e=60,b.inputTimeout=setTimeout(function(){var a;a=e+t.gettext(" seconds ago, an input dialog opened on xbmc and it is still open! To prevent a mainframe implosion, you should probably give me some text. I don't really care what it is at this point, why not be creative? Do you have a ")+'<a href="http://goo.gl/PGE7wg" target="_blank">'+t.gettext("word of the day")+"</a>? "+t.gettext("I won't tell..."),b.execute("input:textbox",a)},1e3*e);break;case"Input.OnInputFinished":clearTimeout(b.inputTimeout),b.execute("input:textbox:close");break;case"System.OnQuit":b.execute("notification:show",t.gettext("Kodi has quit"))}},d}(b.StateApp.Base)}),this.Kodi.module("StateApp.Kodi",function(a,b){return a.Polling=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commander={},c.prototype.checkInterval=1e4,c.prototype.currentInterval="",c.prototype.timeoutObj={},c.prototype.failures=0,c.prototype.maxFailures=100,c.prototype.initialize=function(){var a;return a=config.get("static","pollInterval"),this.checkInterval=parseInt(a),this.currentInterval=this.checkInterval},c.prototype.startPolling=function(){return this.update()},c.prototype.updateState=function(){var a;return a=b.request("state:kodi"),a.getCurrentState()},c.prototype.update=function(){return b.kodiPolling.failures<b.kodiPolling.maxFailures?(b.kodiPolling.updateState(),b.kodiPolling.timeout=setTimeout(b.kodiPolling.ping,b.kodiPolling.currentInterval)):b.execute("notification:show",t.gettext("Unable to communicate with Kodi in a long time. I think it's dead Jim!"))},c.prototype.ping=function(){var a;return a=b.request("command:kodi:controller","auto","Commander"),a.setOptions({timeout:5e3,error:function(){return b.kodiPolling.failure()}}),a.onError=function(){},a.sendCommand("Ping",[],function(){return b.kodiPolling.alive()})},c.prototype.alive=function(){return b.kodiPolling.failures=0,b.kodiPolling.currentInterval=b.kodiPolling.checkInterval,b.kodiPolling.update()},c.prototype.failure=function(){return b.kodiPolling.failures++,b.kodiPolling.failures>10&&(b.kodiPolling.currentInterval=5*b.kodiPolling.checkInterval),b.kodiPolling.failures>20&&(b.kodiPolling.currentInterval=10*b.kodiPolling.checkInterval),b.kodiPolling.failures>30&&(b.kodiPolling.currentInterval=30*b.kodiPolling.checkInterval),b.kodiPolling.update()},c}(b.StateApp.Base)}),this.Kodi.module("StateApp.Local",function(a,b,c,d,e,f){return a.State=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.state=f.extend({},this.state),this.playing=f.extend({},this.playing),this.setState("player","local"),this.setState("currentPlaybackId","browser-none"),this.setState("localPlay",!1),b.reqres.setHandler("state:local:update",function(a){return function(b){return a.getCurrentState(b)}}(this)),b.reqres.setHandler("state:local:get",function(a){return function(){return a.getCachedState()}}(this))},c.prototype.getCurrentState=function(a){return this.doCallback(a,this.getCachedState())},c}(b.StateApp.Base)}),this.Kodi.module("StateApp",function(a,b,c,d,e){var f;return f={setState:function(a){return null==a&&(a="kodi"),this.setBodyClasses(a),this.setPlayingContent(a),this.setPlayerPlaying(a),this.setAppProperties(a),this.setTitle(a)},playerClass:function(a,b){return b+"-"+a},setBodyClasses:function(a){var c,d,e,f,g,h,i;for(f=b.request("state:"+a),c=b.getRegion("root").$el,c.removeClassStartsWith(a+"-"),e=[],e.push("shuffled-"+(f.getState("shuffled")?"on":"off")),e.push("partymode-"+(f.getPlaying("partymode")?"on":"off")),e.push("mute-"+(f.getState("muted")?"on":"off")),e.push("repeat-"+f.getState("repeat")),e.push("media-"+f.getState("media")),e.push(f.isPlaying()?f.getPlaying("playState"):"not-playing"),i=[],g=0,h=e.length;h>g;g++)d=e[g],i.push(c.addClass(this.playerClass(d,a)));return i},setPlayingContent:function(a){var c,d,f,g,h;return h=b.request("state:"+a),c=e(".media-"+h.getState("media")+" ."+a+"-playlist"),e(".can-play").removeClassStartsWith(a+"-row-"),e(".item",c).removeClassStartsWith("row-"),h.isPlaying()?(f=h.getPlaying("item"),g=h.getPlaying("playState"),d=".item-"+f.type+"-"+f.id,e(d).addClass(this.playerClass("row-"+g,a)),e(".pos-"+h.getPlaying("position"),c).addClass("row-"+g)):void 0
},setPlayerPlaying:function(a){var c,d,f,g,h,i,j;return j=b.request("state:"+a),f=e("#player-"+a),h=e(".playing-title",f),g=e(".playing-subtitle",f),c=e(".playing-time-duration",f),d=e(".playing-thumb",f),j.isPlaying()?(i=j.getPlaying("item"),h.html(helpers.entities.playingLink(i)),g.html(helpers.entities.getSubtitle(i)),c.html(helpers.global.formatTime(j.getPlaying("totaltime"))),d.css("background-image","url('"+i.thumbnail+"')")):(h.html(t.gettext("Nothing playing")),g.html(""),c.html("0"),d.attr("src",b.request("images:path:get")))},setAppProperties:function(a){var c,d;return d=b.request("state:"+a),c=e("#player-"+a),e(".volume",c).val(d.getState("volume"))},setTitle:function(a){var c;return"kodi"===a?(c=b.request("state:"+a),c.isPlaying()&&"playing"===c.getPlaying("playState")?helpers.global.appTitle(c.getPlaying("item")):helpers.global.appTitle()):void 0},initKodiState:function(){return b.kodiState=new a.Kodi.State,b.localState=new a.Local.State,b.kodiState.setPlayer(config.get("state","lastplayer","kodi")),b.kodiState.getCurrentState(function(){return f.setState("kodi"),b.kodiSockets=new a.Kodi.Notifications,b.kodiPolling=new a.Kodi.Polling,b.vent.on("sockets:unavailable",function(){return b.kodiPolling.startPolling()}),b.vent.on("playlist:rendered",function(){return b.request("playlist:refresh",b.kodiState.getState("player"),b.kodiState.getState("media"))}),b.vent.on("state:content:updated",function(){return f.setPlayingContent("kodi"),f.setPlayingContent("local")}),b.vent.on("state:kodi:changed",function(){return f.setState("kodi")}),b.vent.on("state:local:changed",function(){return f.setState("local")}),b.vent.on("state:player:updated",function(a){return f.setPlayerPlaying(a)}),b.vent.trigger("state:initialized")}),b.reqres.setHandler("state:kodi",function(){return b.kodiState}),b.reqres.setHandler("state:local",function(){return b.localState}),b.reqres.setHandler("state:current",function(){var a;return a="kodi"===b.kodiState.getPlayer()?b.kodiState:b.localState}),b.vent.trigger("state:changed")}},b.addInitializer(function(){return f.initKodiState()})}),this.Kodi.module("ThumbsApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){var a;return this.layout=this.getLayout(),a=["song","artist","album","tvshow","movie"],this.listenTo(this.layout,"show",function(b){return function(){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(b.getResult(c));return f}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getResult=function(c){var d,e,f,g,h;return f=this.getOption("query"),d="all"===this.getOption("media")?"limit":"all",e=b.request("thumbsup:get:entities",c),e.length>0?(h=b.request(""+c+":list:view",e,!0),g=new a.ListSet({entity:c}),b.listenTo(g,"show",function(){return function(){return g.regionResult.show(h)}}(this)),this.layout[""+c+"Set"].show(g)):void 0},d}(b.Controllers.Base)}),this.Kodi.module("ThumbsApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/thumbs/list/thumbs_layout",b.prototype.className="thumbs-page set-page",b.prototype.regions={artistSet:".entity-set-artist",albumSet:".entity-set-album",songSet:".entity-set-song",movieSet:".entity-set-movie",tvshowSet:".entity-set-tvshow"},b}(b.Views.LayoutView),a.ListSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/thumbs/list/thumbs_set",b.prototype.className="thumbs-set",b.prototype.onRender=function(){return this.options&&this.options.entity?e("h2.set-header",this.$el).html(t.gettext(this.options.entity+"s")):void 0},b.prototype.regions={regionResult:".set-results"},b}(b.Views.LayoutView)}),this.Kodi.module("ThumbsApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={thumbsup:"list"},b}(b.Router.Base),c={list:function(){return new a.List.Controller}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("TVShowApp.Episode",function(a,b){var c;return c={getEpisodeList:function(c){var d;return d=new a.Episodes({collection:c}),b.listenTo(d,"childview:episode:play",function(a,c){return b.execute("episode:action","play",c)}),b.listenTo(d,"childview:episode:add",function(a,c){return b.execute("episode:action","add",c)}),b.listenTo(d,"childview:episode:localplay",function(a,c){return b.execute("episode:action","localplay",c)}),b.listenTo(d,"childview:episode:download",function(a,c){return b.execute("episode:action","download",c)}),b.listenTo(d,"childview:episode:watched",function(a,c){return a.$el.toggleClass("is-watched"),b.execute("episode:action","toggleWatched",c)}),d},bindTriggers:function(a){return b.listenTo(a,"episode:play",function(a){return b.execute("episode:action","play",a)}),b.listenTo(a,"episode:add",function(a){return b.execute("episode:action","add",a)}),b.listenTo(a,"episode:localplay",function(a){return b.execute("episode:action","localplay",a)}),b.listenTo(a,"episode:download",function(a){return b.execute("episode:action","download",a)}),b.listenTo(a,"episode:watched",function(a){return parent.$el.toggleClass("is-watched"),b.execute("episode:action","toggleWatched",a)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d,e,f;return e=parseInt(a.id),f=parseInt(a.season),d=parseInt(a.episodeid),c=b.request("episode:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return console.log(c),a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(c),a.getContentView(c)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({tvshow:b})},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.EpisodeDetailTeaser({model:b}),e=new a.Details({model:b}),c.bindTriggers(e),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getContentView=function(c){var d;return d=new a.Content({model:c}),b.listenTo(d,"show",function(a){return function(){return c.get("cast").length>0?d.regionCast.show(a.getCast(c)):void 0}}(this)),this.layout.regionContent.show(d)},e.prototype.getCast=function(a){return b.request("cast:list:view",a.get("cast"),"tvshows")},e}(b.Controllers.Base),b.reqres.setHandler("episode:list:view",function(a){return c.getEpisodeList(a)})}),this.Kodi.module("TVShowApp.Episode",function(a,b){return a.EpisodeTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"episode:play","click .watched":"episode:watched","click .add":"episode:add","click .localplay":"episode:localplay","click .download":"episode:download"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set(this.getMeta()),this.model.set({actions:{watched:"Watched"}}),this.model.set({menu:{add:"Add to Kodi playlist",divider:"",download:"Download",localplay:"Play in browser"}})):void 0},b.prototype.attributes=function(){var a;return a=["card"],helpers.entities.isWatched(this.model)&&a.push("is-watched"),{"class":a.join(" ")}},b.prototype.getMeta=function(){var a,b,c;return a=this.themeTag("span",{"class":"ep-num"},this.model.get("season")+"x"+this.model.get("episode")+" "),b=this.themeTag("span",{"class":"ep-num-full"},t.gettext("Episode")+" "+this.model.get("episode")),c=this.themeLink(this.model.get("showtitle")+" ","tvshow/"+this.model.get("tvshowid"),{className:"show-name"}),{label:a+this.model.get("title"),subtitle:c+b}},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="episode-empty-result",b}(b.Views.EmptyViewResults),a.Episodes=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.EpisodeTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--episode",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="episode-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="episode-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/episode/details_meta",b.prototype.triggers={"click .play":"episode:play","click .add":"episode:add","click .stream":"episode:localplay","click .download":"episode:download"},b}(b.Views.ItemView),a.EpisodeDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"episode-menu:clicked"},b}(b.Views.CardView),a.Content=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/episode/content",b.prototype.className="episode-content content-sections",b.prototype.regions={regionCast:".region-cast"},b}(b.Views.LayoutView)}),this.Kodi.module("TVShowApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=21,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("episode:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("episode:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("TVShowApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/landing/landing",b.prototype.className="movie-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added"},b}(b.Views.LayoutView)}),this.Kodi.module("TVShowApp.List",function(a,b){var c;return c={getTVShowsList:function(c,d){var e,f;return null==d&&(d=!1),f=d?"TVShowsSet":"TVShows",e=new a[f]({collection:c}),b.listenTo(e,"childview:tvshow:play",function(a,c){var d;return d=b.request("command:kodi:controller","video","PlayList"),d.play("tvshowid",c.model.get("tvshowid"))}),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("tvshow:entities"),a.availableFilters=this.getAvailableFilters(),a.sectionId=21,b.request("filter:init",this.getAvailableFilters()),b.execute("when:entity:fetched",a,function(c){return function(){return c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.getFiltersView(a),c.renderList(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["title","year","dateadded","rating"],filter:["year","genre","unwatched","cast"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getTVShowsList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("tvshow:list:view",function(a){return c.getTVShowsList(a,!0)})}),this.Kodi.module("TVShowApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.TVShowTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"tvshow:play","click .menu":"tvshow-menu:clicked"},b.prototype.initialize=function(){var a;return b.__super__.initialize.apply(this,arguments),a="",a+=" "+this.model.get("rating"),this.model.set({subtitle:a})},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="tvshow-empty-result",b}(b.Views.EmptyViewResults),a.TVShows=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.TVShowTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.VirtualListView),a.TVShowsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.TVShowTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView)}),this.Kodi.module("TVShowApp.Season",function(a,b){var c;return c={getSeasonList:function(c){var d;return d=new a.Seasons({collection:c}),b.listenTo(d,"childview:season:play",function(){var a;return a=b.request("command:kodi:controller","video","PlayList")}),d}},a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d,e;return c=parseInt(a.id),d=parseInt(a.season),e=b.request("tvshow:entity",c),b.execute("when:entity:fetched",e,function(a){return function(){return a.layout=a.getLayoutView(e),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(e,d),a.getEpisodes(e,d)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({tvshow:b})},d.prototype.getDetailsLayoutView=function(c,d){var e;return e=b.request("season:entities",c.get("id")),b.execute("when:entity:fetched",e,function(b){return function(){var f,g;return g=e.findWhere({season:d}),c.set({season:d,thumbnail:g.get("thumbnail"),seasons:e}),f=new a.HeaderLayout({model:c}),b.listenTo(f,"show",function(){var b,d;return d=new a.SeasonDetailTeaser({model:c}),b=new a.Details({model:c}),f.regionSide.show(d),f.regionMeta.show(b)}),b.layout.regionHeader.show(f)}}(this))},d.prototype.getEpisodes=function(a,c){var d;return d=b.request("episode:entities",a.get("tvshowid"),c),b.execute("when:entity:fetched",d,function(a){return function(){var c;return d.sortCollection("episode","asc"),c=b.request("episode:list:view",d),a.layout.regionContent.show(c)}}(this))},d}(b.Controllers.Base),b.reqres.setHandler("season:list:view",function(a){return c.getSeasonList(a)})}),this.Kodi.module("TVShowApp.Season",function(a,b){return a.SeasonTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"season:play"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.set({label:"Season "+this.model.get("season")})},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="season-empty-result",b}(b.Views.EmptyViewResults),a.Seasons=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.SeasonTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="season-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="season-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/season/details_meta",b}(b.Views.ItemView),a.SeasonDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"season-menu:clicked"},b}(b.Views.CardView)}),this.Kodi.module("TVShowApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return c=parseInt(a.id),d=b.request("tvshow:entity",c),b.execute("when:entity:fetched",d,function(a){return function(){return a.layout=a.getLayoutView(d),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(d),a.getSeasons(d)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},d.prototype.getDetailsLayoutView=function(b){var c;return c=new a.HeaderLayout({model:b}),this.listenTo(c,"show",function(){return function(){var d,e;return e=new a.TVShowTeaser({model:b}),d=new a.Details({model:b}),c.regionSide.show(e),c.regionMeta.show(d)}}(this)),this.layout.regionHeader.show(c)},d.prototype.getSeasons=function(a){var c;return c=b.request("season:entities",a.get("tvshowid")),b.execute("when:entity:fetched",c,function(a){return function(){var d;return d=b.request("season:list:view",c),a.layout.regionContent.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("TVShowApp.Show",function(a,b){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/show/details_meta",b}(b.Views.ItemView),a.TVShowTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"tvshow-menu:clicked"},b}(b.Views.CardView)}),this.Kodi.module("TVShowApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/recent":"landing",tvshows:"list","tvshow/:tvshowid":"view","tvshow/:tvshowid/:season":"season","tvshow/:tvshowid/:season/:episodeid":"episode"},b}(b.Router.Base),c={landing:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},season:function(b,c){return new a.Season.Controller({id:b,season:c})},episode:function(b,c,d){return new a.Episode.Controller({id:b,season:c,episodeid:d})},episodeAction:function(a,c){var d,e,f,g;switch(e=c.model,f=b.request("command:kodi:controller","video","PlayList"),d=b.request("command:kodi:controller","video","Files"),g=b.request("command:kodi:controller","video","VideoLibrary"),a){case"play":return f.play("episodeid",e.get("episodeid"));case"add":return f.add("episodeid",e.get("episodeid"));case"localplay":return d.videoStream(e.get("file"));case"download":return d.downloadFile(e.get("file"));case"toggleWatched":return g.toggleWatched(e)}}},b.commands.setHandler("episode:action",function(a,b){return c.episodeAction(a,b)}),b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("UiApp",function(a,b,c,d,e){var f;return f={openModal:function(a,c,d,e){var f,g,h;return null==d&&(d=!0),null==e&&(e=""),h=b.getRegion("regionModalTitle").$el,f=b.getRegion("regionModalBody").$el,g=b.getRegion("regionModal").$el,g.removeClassStartsWith("style-"),g.addClass("style-"+e),h.html(a),f.html(c),d&&g.modal(),g.on("hidden.bs.modal",function(){return f.html("")}),g},closeModal:function(){return b.getRegion("regionModal").$el.modal("hide"),e(".modal-body").html("")},closeModalButton:function(){return f.getButton("Close","default").on("click",function(){return f.closeModal()})},getModalButtonContainer:function(){return b.getRegion("regionModalFooter").$el.empty()},getButton:function(a,b){return null==b&&(b="primary"),e("<button>").addClass("btn btn-"+b).html(a)},defaultButtons:function(a){var b;return b=f.getButton("Ok","primary").on("click",function(){return a&&a(),f.closeModal()}),f.getModalButtonContainer().append(f.closeModalButton()).append(b)},playerMenu:function(a){var b,c;switch(null==a&&(a="toggle"),b=e(".player-menu-wrapper"),c="opened",a){case"open":return b.addClass(c);case"close":return b.removeClass(c);default:return b.toggleClass(c)}}},b.commands.setHandler("ui:textinput:show",function(a,c,d,g){var h,i;return null==c&&(c=""),null==g&&(g=!0),h=e("<input>",{id:"text-input","class":"form-control",type:"text"}).on("keyup",function(a){return 13===a.keyCode&&d?(d(e("#text-input").val()),f.closeModal()):void 0}),i=e("<p>").html(c),f.defaultButtons(function(){return d(e("#text-input").val())}),f.openModal(a,i,d,g),b.getRegion("regionModalBody").$el.append(h.wrap('<div class="form-control-wrapper"></div>')).find("input").first().focus(),e.material.init()}),b.commands.setHandler("ui:modal:close",function(){return f.closeModal()}),b.commands.setHandler("ui:modal:show",function(a,b,c){return null==b&&(b=""),null==c&&(c=""),f.getModalButtonContainer().html(c),f.openModal(a,b,open)}),b.commands.setHandler("ui:modal:form:show",function(a,b){return null==b&&(b=""),f.openModal(a,b,!0,"form")}),b.commands.setHandler("ui:modal:close",function(){return f.closeModal()}),b.commands.setHandler("ui:modal:youtube",function(a,b){var c;return f.getModalButtonContainer().html(""),c='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+b+'?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe>',f.openModal(a,c,!0,"video")}),b.commands.setHandler("ui:playermenu",function(a){return f.playerMenu(a)}),b.vent.on("shell:ready",function(){return function(){return e("html").on("click",function(){return f.playerMenu("close")})}}(this))}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=eb.type(a);return"function"===c||eb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(eb.isFunction(b))return eb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return eb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(mb.test(b))return eb.filter(b,a,c);b=eb.filter(b,a)}return eb.grep(a,function(a){return eb.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ub[a]={};return eb.each(a.match(tb)||[],function(a,c){b[c]=!0}),b}function g(){ob.addEventListener?(ob.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(ob.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(ob.addEventListener||"load"===event.type||"complete"===ob.readyState)&&(g(),eb.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(zb,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:yb.test(c)?eb.parseJSON(c):c}catch(e){}eb.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!eb.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(eb.acceptData(a)){var e,f,g=eb.expando,h=a.nodeType,i=h?eb.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||eb.guid++:g),i[j]||(i[j]=h?{}:{toJSON:eb.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=eb.extend(i[j],b):i[j].data=eb.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[eb.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[eb.camelCase(b)])):e=f,e}}function l(a,b,c){if(eb.acceptData(a)){var d,e,f=a.nodeType,g=f?eb.cache:a,h=f?a[eb.expando]:eb.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){eb.isArray(b)?b=b.concat(eb.map(b,eb.camelCase)):b in d?b=[b]:(b=eb.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!eb.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?eb.cleanData([a],!0):cb.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return ob.activeElement}catch(a){}}function p(a){var b=Kb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xb?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xb?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||eb.nodeName(d,b)?f.push(d):eb.merge(f,q(d,b));return void 0===b||b&&eb.nodeName(a,b)?eb.merge([a],f):f}function r(a){Eb.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return eb.nodeName(a,"table")&&eb.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==eb.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Vb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)eb._data(c,"globalEval",!b||eb._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&eb.hasData(a)){var c,d,e,f=eb._data(a),g=eb._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)eb.event.add(b,c,h[c][d])}g.data&&(g.data=eb.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!cb.noCloneEvent&&b[eb.expando]){e=eb._data(b);for(d in e.events)eb.removeEvent(b,d,e.handle);b.removeAttribute(eb.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),cb.html5Clone&&a.innerHTML&&!eb.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Eb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=eb(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:eb.css(e[0],"display");return e.detach(),f}function z(a){var b=ob,c=_b[a];return c||(c=y(a,b),"none"!==c&&c||($b=($b||eb("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($b[0].contentWindow||$b[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$b.detach()),_b[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mc.length;e--;)if(b=mc[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=eb._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Cb(d)&&(f[g]=eb._data(d,"olddisplay",z(d.nodeName)))):(e=Cb(d),(c&&"none"!==c||!e)&&eb._data(d,"olddisplay",e?c:eb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ic.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=eb.css(a,c+Bb[f],!0,e)),d?("content"===c&&(g-=eb.css(a,"padding"+Bb[f],!0,e)),"margin"!==c&&(g-=eb.css(a,"border"+Bb[f]+"Width",!0,e))):(g+=eb.css(a,"padding"+Bb[f],!0,e),"padding"!==c&&(g+=eb.css(a,"border"+Bb[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ac(a),g=cb.boxSizing&&"border-box"===eb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=bc(a,b,f),(0>e||null==e)&&(e=a.style[b]),dc.test(e))return e;d=g&&(cb.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nc=void 0}),nc=eb.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Bb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tc[b]||[]).concat(tc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Cb(a),p=eb._data(a,"fxshow");c.queue||(h=eb._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,eb.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=eb.css(a,"display"),k="none"===j?eb._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===eb.css(a,"float")&&(cb.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",cb.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||eb.style(a,d)}else j=void 0;if(eb.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=eb._data(a,"fxshow",{}),f&&(p.hidden=!o),o?eb(a).show():l.done(function(){eb(a).hide()}),l.done(function(){var b;eb._removeData(a,"fxshow");for(b in m)eb.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))
}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=eb.camelCase(c),e=b[d],f=a[c],eb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=eb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sc.length,h=eb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nc||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:eb.extend({},b),opts:eb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nc||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=eb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=sc[f].call(j,a,k,j.opts))return d;return eb.map(k,J,j),eb.isFunction(j.opts.start)&&j.opts.start.call(a,j),eb.fx.timer(eb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(tb)||[];if(eb.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,eb.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=eb.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&eb.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(eb.isArray(b))eb.each(b,function(b,e){c||Vc.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==eb.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return eb.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},ab=_.toString,bb=_.hasOwnProperty,cb={},db="1.11.1",eb=function(a,b){return new eb.fn.init(a,b)},fb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gb=/^-ms-/,hb=/-([\da-z])/gi,ib=function(a,b){return b.toUpperCase()};eb.fn=eb.prototype={jquery:db,constructor:eb,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=eb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return eb.each(this,a,b)},map:function(a){return this.pushStack(eb.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},eb.extend=eb.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||eb.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(eb.isPlainObject(c)||(b=eb.isArray(c)))?(b?(b=!1,f=a&&eb.isArray(a)?a:[]):f=a&&eb.isPlainObject(a)?a:{},g[d]=eb.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},eb.extend({expando:"jQuery"+(db+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===eb.type(a)},isArray:Array.isArray||function(a){return"array"===eb.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!eb.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==eb.type(a)||a.nodeType||eb.isWindow(a))return!1;try{if(a.constructor&&!bb.call(a,"constructor")&&!bb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(cb.ownLast)for(b in a)return bb.call(a,b);for(b in a);return void 0===b||bb.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[ab.call(a)]||"object":typeof a},globalEval:function(b){b&&eb.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(gb,"ms-").replace(hb,ib)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?eb.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),eb.isFunction(a)?(c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||eb.guid++,d):void 0},now:function(){return+new Date},support:cb}),eb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var jb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ub,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=tb.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return _.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?bb.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):_.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return bb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,ab=Y.slice,bb=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",db="[\\x20\\t\\r\\n\\f]",eb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fb=eb.replace("w","w#"),gb="\\["+db+"*("+eb+")(?:"+db+"*([*^$|!~]?=)"+db+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fb+"))|)"+db+"*\\]",hb=":("+eb+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+gb+")*)|.*)\\)|)",ib=new RegExp("^"+db+"+|((?:^|[^\\\\])(?:\\\\.)*)"+db+"+$","g"),jb=new RegExp("^"+db+"*,"+db+"*"),kb=new RegExp("^"+db+"*([>+~]|"+db+")"+db+"*"),lb=new RegExp("="+db+"*([^\\]'\"]*?)"+db+"*\\]","g"),mb=new RegExp(hb),nb=new RegExp("^"+fb+"$"),ob={ID:new RegExp("^#("+eb+")"),CLASS:new RegExp("^\\.("+eb+")"),TAG:new RegExp("^("+eb.replace("w","w*")+")"),ATTR:new RegExp("^"+gb),PSEUDO:new RegExp("^"+hb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+db+"*(even|odd|(([+-]|)(\\d*)n|)"+db+"*(?:([+-]|)"+db+"*(\\d+)|))"+db+"*\\)|)","i"),bool:new RegExp("^(?:"+cb+")$","i"),needsContext:new RegExp("^"+db+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+db+"*((?:-\\d)?\\d*)"+db+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+db+"?|("+db+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=ab.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xb){_={apply:Y.length?function(a,b){$.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!y(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=rb.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),v.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=rb.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&J.push("[*^$]="+db+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+db+"*(?:value|"+cb+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+db+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=rb.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",hb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!v.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?bb.call(D,a)-bb.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?bb.call(D,a)-bb.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&X.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[3]||a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&mb.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+db+")"+a+"("+db+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=bb.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in w.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return _.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(cb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);eb.find=jb,eb.expr=jb.selectors,eb.expr[":"]=eb.expr.pseudos,eb.unique=jb.uniqueSort,eb.text=jb.getText,eb.isXMLDoc=jb.isXML,eb.contains=jb.contains;var kb=eb.expr.match.needsContext,lb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mb=/^.[^:#\[\.,]*$/;eb.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?eb.find.matchesSelector(d,a)?[d]:[]:eb.find.matches(a,eb.grep(b,function(a){return 1===a.nodeType}))},eb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(eb(a).filter(function(){for(b=0;e>b;b++)if(eb.contains(d[b],this))return!0}));for(b=0;e>b;b++)eb.find(a,d[b],c);return c=this.pushStack(e>1?eb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&kb.test(a)?eb(a):a||[],!1).length}});var nb,ob=a.document,pb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qb=eb.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||nb).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof eb?b[0]:b,eb.merge(this,eb.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ob,!0)),lb.test(c[1])&&eb.isPlainObject(b))for(c in b)eb.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=ob.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return nb.find(a);this.length=1,this[0]=d}return this.context=ob,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):eb.isFunction(a)?"undefined"!=typeof nb.ready?nb.ready(a):a(eb):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),eb.makeArray(a,this))};qb.prototype=eb.fn,nb=eb(ob);var rb=/^(?:parents|prev(?:Until|All))/,sb={children:!0,contents:!0,next:!0,prev:!0};eb.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!eb(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),eb.fn.extend({has:function(a){var b,c=eb(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(eb.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=kb.test(a)||"string"!=typeof a?eb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&eb.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?eb.unique(f):f)},index:function(a){return a?"string"==typeof a?eb.inArray(this[0],eb(a)):eb.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(eb.unique(eb.merge(this.get(),eb(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),eb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return eb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return eb.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return eb.dir(a,"nextSibling")},prevAll:function(a){return eb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return eb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return eb.dir(a,"previousSibling",c)},siblings:function(a){return eb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return eb.sibling(a.firstChild)},contents:function(a){return eb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:eb.merge([],a.childNodes)}},function(a,b){eb.fn[a]=function(c,d){var e=eb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=eb.filter(d,e)),this.length>1&&(sb[a]||(e=eb.unique(e)),rb.test(a)&&(e=e.reverse())),this.pushStack(e)}});var tb=/\S+/g,ub={};eb.Callbacks=function(a){a="string"==typeof a?ub[a]||f(a):eb.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&e>g;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){eb.each(b,function(b,c){var d=eb.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&eb.each(arguments,function(a,c){for(var d;(d=eb.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,g>=d&&g--)}),this},has:function(a){return a?eb.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},eb.extend({Deferred:function(a){var b=[["resolve","done",eb.Callbacks("once memory"),"resolved"],["reject","fail",eb.Callbacks("once memory"),"rejected"],["notify","progress",eb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return eb.Deferred(function(c){eb.each(b,function(b,f){var g=eb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&eb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?eb.extend(a,d):d}},e={};return d.pipe=d.then,eb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&eb.isFunction(a.promise)?g:0,i=1===h?a:eb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)
}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&eb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var vb;eb.fn.ready=function(a){return eb.ready.promise().done(a),this},eb.extend({isReady:!1,readyWait:1,holdReady:function(a){a?eb.readyWait++:eb.ready(!0)},ready:function(a){if(a===!0?!--eb.readyWait:!eb.isReady){if(!ob.body)return setTimeout(eb.ready);eb.isReady=!0,a!==!0&&--eb.readyWait>0||(vb.resolveWith(ob,[eb]),eb.fn.triggerHandler&&(eb(ob).triggerHandler("ready"),eb(ob).off("ready")))}}}),eb.ready.promise=function(b){if(!vb)if(vb=eb.Deferred(),"complete"===ob.readyState)setTimeout(eb.ready);else if(ob.addEventListener)ob.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{ob.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&ob.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!eb.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),eb.ready()}}()}return vb.promise(b)};var wb,xb="undefined";for(wb in eb(cb))break;cb.ownLast="0"!==wb,cb.inlineBlockNeedsLayout=!1,eb(function(){var a,b,c,d;c=ob.getElementsByTagName("body")[0],c&&c.style&&(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xb&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",cb.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=ob.createElement("div");if(null==cb.deleteExpando){cb.deleteExpando=!0;try{delete a.test}catch(b){cb.deleteExpando=!1}}a=null}(),eb.acceptData=function(a){var b=eb.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var yb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,zb=/([A-Z])/g;eb.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?eb.cache[a[eb.expando]]:a[eb.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),eb.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=eb.data(f),1===f.nodeType&&!eb._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=eb.camelCase(d.slice(5)),i(f,d,e[d])));eb._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){eb.data(this,a)}):arguments.length>1?this.each(function(){eb.data(this,a,b)}):f?i(f,a,eb.data(f,a)):void 0},removeData:function(a){return this.each(function(){eb.removeData(this,a)})}}),eb.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=eb._data(a,b),c&&(!d||eb.isArray(c)?d=eb._data(a,b,eb.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=eb.queue(a,b),d=c.length,e=c.shift(),f=eb._queueHooks(a,b),g=function(){eb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return eb._data(a,c)||eb._data(a,c,{empty:eb.Callbacks("once memory").add(function(){eb._removeData(a,b+"queue"),eb._removeData(a,c)})})}}),eb.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?eb.queue(this[0],a):void 0===b?this:this.each(function(){var c=eb.queue(this,a,b);eb._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&eb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){eb.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=eb.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=eb._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Ab=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bb=["Top","Right","Bottom","Left"],Cb=function(a,b){return a=b||a,"none"===eb.css(a,"display")||!eb.contains(a.ownerDocument,a)},Db=eb.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===eb.type(c)){e=!0;for(h in c)eb.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,eb.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(eb(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Eb=/^(?:checkbox|radio)$/i;!function(){var a=ob.createElement("input"),b=ob.createElement("div"),c=ob.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",cb.leadingWhitespace=3===b.firstChild.nodeType,cb.tbody=!b.getElementsByTagName("tbody").length,cb.htmlSerialize=!!b.getElementsByTagName("link").length,cb.html5Clone="<:nav></:nav>"!==ob.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),cb.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",cb.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",cb.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,cb.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){cb.noCloneEvent=!1}),b.cloneNode(!0).click()),null==cb.deleteExpando){cb.deleteExpando=!0;try{delete b.test}catch(d){cb.deleteExpando=!1}}}(),function(){var b,c,d=ob.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(cb[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),cb[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fb=/^(?:input|select|textarea)$/i,Gb=/^key/,Hb=/^(?:mouse|pointer|contextmenu)|click/,Ib=/^(?:focusinfocus|focusoutblur)$/,Jb=/^([^.]*)(?:\.(.+)|)$/;eb.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=eb._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=eb.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof eb===xb||a&&eb.event.triggered===a.type?void 0:eb.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(tb)||[""],h=b.length;h--;)f=Jb.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=eb.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=eb.event.special[n]||{},l=eb.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&eb.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),eb.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=eb.hasData(a)&&eb._data(a);if(q&&(k=q.events)){for(b=(b||"").match(tb)||[""],j=b.length;j--;)if(h=Jb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=eb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||eb.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)eb.event.remove(a,n+b[j],c,d,!0);eb.isEmptyObject(k)&&(delete q.handle,eb._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ob],n=bb.call(b,"type")?b.type:b,o=bb.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||ob,3!==d.nodeType&&8!==d.nodeType&&!Ib.test(n+eb.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[eb.expando]?b:new eb.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:eb.makeArray(c,[b]),j=eb.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!eb.isWindow(d)){for(i=j.delegateType||n,Ib.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||ob)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(eb._data(h,"events")||{})[b.type]&&eb._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&eb.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&eb.acceptData(d)&&g&&d[n]&&!eb.isWindow(d)){k=d[g],k&&(d[g]=null),eb.event.triggered=n;try{d[n]()}catch(p){}eb.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=eb.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(eb._data(this,"events")||{})[a.type]||[],j=eb.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=eb.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((eb.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?eb(c,this).index(i)>=0:eb.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[eb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Hb.test(e)?this.mouseHooks:Gb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new eb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||ob),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||ob,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===o()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return eb.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return eb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=eb.extend(new eb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?eb.event.trigger(e,null,b):eb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},eb.removeEvent=ob.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xb&&(a[d]=null),a.detachEvent(d,c))},eb.Event=function(a,b){return this instanceof eb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&eb.extend(this,b),this.timeStamp=a&&a.timeStamp||eb.now(),void(this[eb.expando]=!0)):new eb.Event(a,b)},eb.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},eb.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){eb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!eb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),cb.submitBubbles||(eb.event.special.submit={setup:function(){return eb.nodeName(this,"form")?!1:void eb.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=eb.nodeName(b,"input")||eb.nodeName(b,"button")?b.form:void 0;c&&!eb._data(c,"submitBubbles")&&(eb.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),eb._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&eb.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return eb.nodeName(this,"form")?!1:void eb.event.remove(this,"._submit")}}),cb.changeBubbles||(eb.event.special.change={setup:function(){return Fb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(eb.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),eb.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),eb.event.simulate("change",this,a,!0)})),!1):void eb.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fb.test(b.nodeName)&&!eb._data(b,"changeBubbles")&&(eb.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||eb.event.simulate("change",this.parentNode,a,!0)}),eb._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return eb.event.remove(this,"._change"),!Fb.test(this.nodeName)}}),cb.focusinBubbles||eb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){eb.event.simulate(b,a.target,eb.event.fix(a),!0)};eb.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=eb._data(d,b);e||d.addEventListener(a,c,!0),eb._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=eb._data(d,b)-1;e?eb._data(d,b,e):(d.removeEventListener(a,c,!0),eb._removeData(d,b))}}}),eb.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return eb().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=eb.guid++)),this.each(function(){eb.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,eb(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=n),this.each(function(){eb.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){eb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?eb.event.trigger(a,b,c,!0):void 0}});var Kb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Lb=/ jQuery\d+="(?:null|\d+)"/g,Mb=new RegExp("<(?:"+Kb+")[\\s/>]","i"),Nb=/^\s+/,Ob=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pb=/<([\w:]+)/,Qb=/<tbody/i,Rb=/<|&#?\w+;/,Sb=/<(?:script|style|link)/i,Tb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ub=/^$|\/(?:java|ecma)script/i,Vb=/^true\/(.*)/,Wb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:cb.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yb=p(ob),Zb=Yb.appendChild(ob.createElement("div"));Xb.optgroup=Xb.option,Xb.tbody=Xb.tfoot=Xb.colgroup=Xb.caption=Xb.thead,Xb.th=Xb.td,eb.extend({clone:function(a,b,c){var d,e,f,g,h,i=eb.contains(a.ownerDocument,a);if(cb.html5Clone||eb.isXMLDoc(a)||!Mb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Zb.innerHTML=a.outerHTML,Zb.removeChild(f=Zb.firstChild)),!(cb.noCloneEvent&&cb.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||eb.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===eb.type(f))eb.merge(n,f.nodeType?[f]:f);else if(Rb.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pb.exec(f)||["",""])[1].toLowerCase(),k=Xb[i]||Xb._default,h.innerHTML=k[1]+f.replace(Ob,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!cb.leadingWhitespace&&Nb.test(f)&&n.push(b.createTextNode(Nb.exec(f)[0])),!cb.tbody)for(f="table"!==i||Qb.test(f)?"<table>"!==k[1]||Qb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)eb.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(eb.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),cb.appendChecked||eb.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||-1===eb.inArray(f,d))&&(g=eb.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ub.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=eb.expando,i=eb.cache,j=cb.deleteExpando,k=eb.event.special;null!=(c=a[g]);g++)if((b||eb.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?eb.event.remove(c,d):eb.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xb?c.removeAttribute(h):c[h]=null,W.push(e))}}}),eb.fn.extend({text:function(a){return Db(this,function(a){return void 0===a?eb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ob).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?eb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||eb.cleanData(q(c)),c.parentNode&&(b&&eb.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&eb.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&eb.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return eb.clone(this,a,b)})},html:function(a){return Db(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Lb,""):void 0;if(!("string"!=typeof a||Sb.test(a)||!cb.htmlSerialize&&Mb.test(a)||!cb.leadingWhitespace&&Nb.test(a)||Xb[(Pb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ob,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(eb.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,eb.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=eb.isFunction(m);if(n||j>1&&"string"==typeof m&&!cb.checkClone&&Tb.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=eb.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=eb.map(q(h,"script"),t),e=f.length;j>i;i++)d=h,i!==l&&(d=eb.clone(d,!0,!0),e&&eb.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,eb.map(f,u),i=0;e>i;i++)d=f[i],Ub.test(d.type||"")&&!eb._data(d,"globalEval")&&eb.contains(g,d)&&(d.src?eb._evalUrl&&eb._evalUrl(d.src):eb.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wb,"")));h=c=null}return this}}),eb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){eb.fn[a]=function(a){for(var c,d=0,e=[],f=eb(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),eb(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $b,_b={};!function(){var a;cb.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=ob.getElementsByTagName("body")[0],c&&c.style?(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xb&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(ob.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ac,bc,cc=/^margin/,dc=new RegExp("^("+Ab+")(?!px)[a-z%]+$","i"),ec=/^(top|right|bottom|left)$/;a.getComputedStyle?(ac=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},bc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ac(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||eb.contains(a.ownerDocument,a)||(g=eb.style(a,b)),dc.test(g)&&cc.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):ob.documentElement.currentStyle&&(ac=function(a){return a.currentStyle},bc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ac(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),dc.test(g)&&!ec.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=ob.getElementsByTagName("body")[0],c&&c.style&&(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(ob.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=ob.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",cb.opacity="0.5"===d.opacity,cb.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",cb.clearCloneStyle="content-box"===c.style.backgroundClip,cb.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,eb.extend(cb,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),eb.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fc=/alpha\([^)]*\)/i,gc=/opacity\s*=\s*([^)]*)/,hc=/^(none|table(?!-c[ea]).+)/,ic=new RegExp("^("+Ab+")(.*)$","i"),jc=new RegExp("^([+-])=("+Ab+")","i"),kc={position:"absolute",visibility:"hidden",display:"block"},lc={letterSpacing:"0",fontWeight:"400"},mc=["Webkit","O","Moz","ms"];eb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":cb.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=eb.camelCase(b),i=a.style;if(b=eb.cssProps[h]||(eb.cssProps[h]=B(i,h)),g=eb.cssHooks[b]||eb.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(eb.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||eb.cssNumber[h]||(c+="px"),cb.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=eb.camelCase(b);return b=eb.cssProps[h]||(eb.cssProps[h]=B(a.style,h)),g=eb.cssHooks[b]||eb.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bc(a,b,d)),"normal"===f&&b in lc&&(f=lc[b]),""===c||c?(e=parseFloat(f),c===!0||eb.isNumeric(e)?e||0:f):f}}),eb.each(["height","width"],function(a,b){eb.cssHooks[b]={get:function(a,c,d){return c?hc.test(eb.css(a,"display"))&&0===a.offsetWidth?eb.swap(a,kc,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e=d&&ac(a);return D(a,c,d?E(a,b,d,cb.boxSizing&&"border-box"===eb.css(a,"boxSizing",!1,e),e):0)}}}),cb.opacity||(eb.cssHooks.opacity={get:function(a,b){return gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=eb.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===eb.trim(f.replace(fc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fc.test(f)?f.replace(fc,e):f+" "+e)}}),eb.cssHooks.marginRight=A(cb.reliableMarginRight,function(a,b){return b?eb.swap(a,{display:"inline-block"},bc,[a,"marginRight"]):void 0}),eb.each({margin:"",padding:"",border:"Width"},function(a,b){eb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Bb[d]+b]=f[d]||f[d-2]||f[0];return e}},cc.test(a)||(eb.cssHooks[a+b].set=D)}),eb.fn.extend({css:function(a,b){return Db(this,function(a,b,c){var d,e,f={},g=0;if(eb.isArray(b)){for(d=ac(a),e=b.length;e>g;g++)f[b[g]]=eb.css(a,b[g],!1,d);return f}return void 0!==c?eb.style(a,b,c):eb.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Cb(this)?eb(this).show():eb(this).hide()})}}),eb.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(eb.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.pos=b=this.options.duration?eb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=eb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){eb.fx.step[a.prop]?eb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[eb.cssProps[a.prop]]||eb.cssHooks[a.prop])?eb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},eb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},eb.fx=G.prototype.init,eb.fx.step={};var nc,oc,pc=/^(?:toggle|show|hide)$/,qc=new RegExp("^(?:([+-])=|)("+Ab+")([a-z%]*)$","i"),rc=/queueHooks$/,sc=[K],tc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qc.exec(b),f=e&&e[3]||(eb.cssNumber[a]?"":"px"),g=(eb.cssNumber[a]||"px"!==f&&+d)&&qc.exec(eb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,eb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};eb.Animation=eb.extend(M,{tweener:function(a,b){eb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],tc[c]=tc[c]||[],tc[c].unshift(b)},prefilter:function(a,b){b?sc.unshift(a):sc.push(a)}}),eb.speed=function(a,b,c){var d=a&&"object"==typeof a?eb.extend({},a):{complete:c||!c&&b||eb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!eb.isFunction(b)&&b};return d.duration=eb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in eb.fx.speeds?eb.fx.speeds[d.duration]:eb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){eb.isFunction(d.old)&&d.old.call(this),d.queue&&eb.dequeue(this,d.queue)},d},eb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Cb).css("opacity",0).show().end().animate({opacity:b},a,c,d)
},animate:function(a,b,c,d){var e=eb.isEmptyObject(a),f=eb.speed(b,c,d),g=function(){var b=M(this,eb.extend({},a),f);(e||eb._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=eb.timers,g=eb._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&eb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=eb._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=eb.timers,g=d?d.length:0;for(c.finish=!0,eb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),eb.each(["toggle","show","hide"],function(a,b){var c=eb.fn[b];eb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),eb.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){eb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),eb.timers=[],eb.fx.tick=function(){var a,b=eb.timers,c=0;for(nc=eb.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||eb.fx.stop(),nc=void 0},eb.fx.timer=function(a){eb.timers.push(a),a()?eb.fx.start():eb.timers.pop()},eb.fx.interval=13,eb.fx.start=function(){oc||(oc=setInterval(eb.fx.tick,eb.fx.interval))},eb.fx.stop=function(){clearInterval(oc),oc=null},eb.fx.speeds={slow:600,fast:200,_default:400},eb.fn.delay=function(a,b){return a=eb.fx?eb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=ob.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=ob.createElement("select"),e=c.appendChild(ob.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",cb.getSetAttribute="t"!==b.className,cb.style=/top/.test(d.getAttribute("style")),cb.hrefNormalized="/a"===d.getAttribute("href"),cb.checkOn=!!a.value,cb.optSelected=e.selected,cb.enctype=!!ob.createElement("form").enctype,c.disabled=!0,cb.optDisabled=!e.disabled,a=ob.createElement("input"),a.setAttribute("value",""),cb.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),cb.radioValue="t"===a.value}();var uc=/\r/g;eb.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=eb.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,eb(this).val()):a,null==e?e="":"number"==typeof e?e+="":eb.isArray(e)&&(e=eb.map(e,function(a){return null==a?"":a+""})),b=eb.valHooks[this.type]||eb.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=eb.valHooks[e.type]||eb.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(uc,""):null==c?"":c)}}}),eb.extend({valHooks:{option:{get:function(a){var b=eb.find.attr(a,"value");return null!=b?b:eb.trim(eb.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(cb.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&eb.nodeName(c.parentNode,"optgroup"))){if(b=eb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=eb.makeArray(b),g=e.length;g--;)if(d=e[g],eb.inArray(eb.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),eb.each(["radio","checkbox"],function(){eb.valHooks[this]={set:function(a,b){return eb.isArray(b)?a.checked=eb.inArray(eb(a).val(),b)>=0:void 0}},cb.checkOn||(eb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vc,wc,xc=eb.expr.attrHandle,yc=/^(?:checked|selected)$/i,zc=cb.getSetAttribute,Ac=cb.input;eb.fn.extend({attr:function(a,b){return Db(this,eb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){eb.removeAttr(this,a)})}}),eb.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xb?eb.prop(a,b,c):(1===f&&eb.isXMLDoc(a)||(b=b.toLowerCase(),d=eb.attrHooks[b]||(eb.expr.match.bool.test(b)?wc:vc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=eb.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void eb.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(tb);if(f&&1===a.nodeType)for(;c=f[e++];)d=eb.propFix[c]||c,eb.expr.match.bool.test(c)?Ac&&zc||!yc.test(c)?a[d]=!1:a[eb.camelCase("default-"+c)]=a[d]=!1:eb.attr(a,c,""),a.removeAttribute(zc?c:d)},attrHooks:{type:{set:function(a,b){if(!cb.radioValue&&"radio"===b&&eb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wc={set:function(a,b,c){return b===!1?eb.removeAttr(a,c):Ac&&zc||!yc.test(c)?a.setAttribute(!zc&&eb.propFix[c]||c,c):a[eb.camelCase("default-"+c)]=a[c]=!0,c}},eb.each(eb.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xc[b]||eb.find.attr;xc[b]=Ac&&zc||!yc.test(b)?function(a,b,d){var e,f;return d||(f=xc[b],xc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xc[b]=f),e}:function(a,b,c){return c?void 0:a[eb.camelCase("default-"+b)]?b.toLowerCase():null}}),Ac&&zc||(eb.attrHooks.value={set:function(a,b,c){return eb.nodeName(a,"input")?void(a.defaultValue=b):vc&&vc.set(a,b,c)}}),zc||(vc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},xc.id=xc.name=xc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},eb.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:vc.set},eb.attrHooks.contenteditable={set:function(a,b,c){vc.set(a,""===b?!1:b,c)}},eb.each(["width","height"],function(a,b){eb.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),cb.style||(eb.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bc=/^(?:input|select|textarea|button|object)$/i,Cc=/^(?:a|area)$/i;eb.fn.extend({prop:function(a,b){return Db(this,eb.prop,a,b,arguments.length>1)},removeProp:function(a){return a=eb.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),eb.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!eb.isXMLDoc(a),f&&(b=eb.propFix[b]||b,e=eb.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=eb.find.attr(a,"tabindex");return b?parseInt(b,10):Bc.test(a.nodeName)||Cc.test(a.nodeName)&&a.href?0:-1}}}}),cb.hrefNormalized||eb.each(["href","src"],function(a,b){eb.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),cb.optSelected||(eb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),eb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){eb.propFix[this.toLowerCase()]=this}),cb.enctype||(eb.propFix.enctype="encoding");var Dc=/[\t\r\n\f]/g;eb.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(eb.isFunction(a))return this.each(function(b){eb(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(tb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Dc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=eb.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(eb.isFunction(a))return this.each(function(b){eb(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(tb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Dc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?eb.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(eb.isFunction(a)?function(c){eb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=eb(this),f=a.match(tb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===xb||"boolean"===c)&&(this.className&&eb._data(this,"__className__",this.className),this.className=this.className||a===!1?"":eb._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Dc," ").indexOf(b)>=0)return!0;return!1}}),eb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){eb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),eb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ec=eb.now(),Fc=/\?/,Gc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;eb.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=eb.trim(b+"");return e&&!eb.trim(e.replace(Gc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():eb.error("Invalid JSON: "+b)},eb.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||eb.error("Invalid XML: "+b),c};var Hc,Ic,Jc=/#.*$/,Kc=/([?&])_=[^&]*/,Lc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nc=/^(?:GET|HEAD)$/,Oc=/^\/\//,Pc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qc={},Rc={},Sc="*/".concat("*");try{Ic=location.href}catch(Tc){Ic=ob.createElement("a"),Ic.href="",Ic=Ic.href}Hc=Pc.exec(Ic.toLowerCase())||[],eb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ic,type:"GET",isLocal:Mc.test(Hc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":eb.parseJSON,"text xml":eb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,eb.ajaxSettings),b):P(eb.ajaxSettings,a)},ajaxPrefilter:N(Qc),ajaxTransport:N(Rc),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(eb.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(eb.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--eb.active||eb.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=eb.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?eb(m):eb.event,o=eb.Deferred(),p=eb.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lc.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ic)+"").replace(Jc,"").replace(Oc,Hc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=eb.trim(l.dataType||"*").toLowerCase().match(tb)||[""],null==l.crossDomain&&(d=Pc.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hc[1]&&d[2]===Hc[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hc[3]||("http:"===Hc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=eb.param(l.data,l.traditional)),O(Qc,l,b,v),2===t)return v;i=l.global,i&&0===eb.active++&&eb.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nc.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fc.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kc.test(f)?f.replace(Kc,"$1_="+Ec++):f+(Fc.test(f)?"&":"?")+"_="+Ec++)),l.ifModified&&(eb.lastModified[f]&&v.setRequestHeader("If-Modified-Since",eb.lastModified[f]),eb.etag[f]&&v.setRequestHeader("If-None-Match",eb.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sc+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rc,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return eb.get(a,b,c,"json")},getScript:function(a,b){return eb.get(a,void 0,b,"script")}}),eb.each(["get","post"],function(a,b){eb[b]=function(a,c,d,e){return eb.isFunction(c)&&(e=e||d,d=c,c=void 0),eb.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),eb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){eb.fn[b]=function(a){return this.on(b,a)}}),eb._evalUrl=function(a){return eb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},eb.fn.extend({wrapAll:function(a){if(eb.isFunction(a))return this.each(function(b){eb(this).wrapAll(a.call(this,b))});if(this[0]){var b=eb(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(eb.isFunction(a)?function(b){eb(this).wrapInner(a.call(this,b))}:function(){var b=eb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=eb.isFunction(a);return this.each(function(c){eb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){eb.nodeName(this,"body")||eb(this).replaceWith(this.childNodes)}).end()}}),eb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!cb.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||eb.css(a,"display"))},eb.expr.filters.visible=function(a){return!eb.expr.filters.hidden(a)};var Uc=/%20/g,Vc=/\[\]$/,Wc=/\r?\n/g,Xc=/^(?:submit|button|image|reset|file)$/i,Yc=/^(?:input|select|textarea|keygen)/i;eb.param=function(a,b){var c,d=[],e=function(a,b){b=eb.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=eb.ajaxSettings&&eb.ajaxSettings.traditional),eb.isArray(a)||a.jquery&&!eb.isPlainObject(a))eb.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Uc,"+")},eb.fn.extend({serialize:function(){return eb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=eb.prop(this,"elements");return a?eb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!eb(this).is(":disabled")&&Yc.test(this.nodeName)&&!Xc.test(a)&&(this.checked||!Eb.test(a))}).map(function(a,b){var c=eb(this).val();return null==c?null:eb.isArray(c)?eb.map(c,function(a){return{name:b.name,value:a.replace(Wc,"\r\n")}}):{name:b.name,value:c.replace(Wc,"\r\n")}}).get()}}),eb.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zc=0,$c={},_c=eb.ajaxSettings.xhr();a.ActiveXObject&&eb(a).on("unload",function(){for(var a in $c)$c[a](void 0,!0)}),cb.cors=!!_c&&"withCredentials"in _c,_c=cb.ajax=!!_c,_c&&eb.ajaxTransport(function(a){if(!a.crossDomain||cb.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $c[g],b=void 0,f.onreadystatechange=eb.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$c[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),eb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return eb.globalEval(a),a}}}),eb.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),eb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=ob.head||eb("head")[0]||ob.documentElement;return{send:function(d,e){b=ob.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;eb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||eb.expando+"_"+Ec++;return this[a]=!0,a}}),eb.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=eb.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(Fc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||eb.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&eb.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),eb.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||ob;var d=lb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=eb.buildFragment([a],b,e),e&&e.length&&eb(e).remove(),eb.merge([],d.childNodes))};var cd=eb.fn.load;eb.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=eb.trim(a.slice(h,a.length)),a=a.slice(0,h)),eb.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&eb.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?eb("<div>").append(eb.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},eb.expr.filters.animated=function(a){return eb.grep(eb.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;eb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=eb.css(a,"position"),l=eb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=eb.css(a,"top"),i=eb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&eb.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),eb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},eb.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){eb.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,eb.contains(b,e)?(typeof e.getBoundingClientRect!==xb&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===eb.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),eb.nodeName(a[0],"html")||(c=a.offset()),c.top+=eb.css(a[0],"borderTopWidth",!0),c.left+=eb.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-eb.css(d,"marginTop",!0),left:b.left-c.left-eb.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dd;a&&!eb.nodeName(a,"html")&&"static"===eb.css(a,"position");)a=a.offsetParent;return a||dd})}}),eb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);eb.fn[a]=function(d){return Db(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?eb(f).scrollLeft():e,c?e:eb(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),eb.each(["top","left"],function(a,b){eb.cssHooks[b]=A(cb.pixelPosition,function(a,c){return c?(c=bc(a,b),dc.test(c)?eb(a).position()[b]+"px":c):void 0})}),eb.each({Height:"height",Width:"width"},function(a,b){eb.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){eb.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Db(this,function(b,c,d){var e;return eb.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?eb.css(b,c,g):eb.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),eb.fn.size=function(){return this.length},eb.fn.andSelf=eb.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return eb});var ed=a.jQuery,fd=a.$;return eb.noConflict=function(b){return a.$===eb&&(a.$=fd),b&&a.jQuery===eb&&(a.jQuery=ed),eb},typeof b===xb&&(a.jQuery=a.$=eb),eb}),function(){function a(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||"undefined"==typeof a&&d)return 1;if(b>a||!d||"undefined"==typeof b&&c)return-1}return 0}function b(a,b,c){if(b!==b)return m(a,c);for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function c(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function d(a){return"string"==typeof a?a:null==a?"":a+""}function e(a){return a.charCodeAt(0)}function f(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function g(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function h(b,c){return a(b.criteria,c.criteria)||b.index-c.index}function i(b,c){for(var d=-1,e=b.criteria,f=c.criteria,g=e.length;++d<g;){var h=a(e[d],f[d]);if(h)return h}return b.index-c.index}function j(a){return Mb[a]}function k(a){return Nb[a]}function l(a){return"\\"+Qb[a]}function m(a,b,c){for(var d=a.length,e=c?b||d:(b||0)-1;c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function n(a){return a&&"object"==typeof a||!1}function o(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function p(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=O,f[++e]=c);return f}function q(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function r(a){for(var b=-1,c=a.length;++b<c&&o(a.charCodeAt(b)););return b}function s(a){for(var b=a.length;b--&&o(a.charCodeAt(b)););return b}function t(a){return Ob[a]}function u(o){function V(a){if(n(a)&&!Ph(a)){if(a instanceof Z)return a;if(Tg.call(a,"__wrapped__"))return new Z(a.__wrapped__,a.__chain__,Zb(a.__actions__))}return new Z(a)}function Z(a,b,c){this.__actions__=c||[],this.__chain__=!!b,this.__wrapped__=a}function _(a){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=vh,this.views=null,this.wrapped=a}function Mb(){var a=this.actions,b=this.iteratees,c=this.views,d=new _(this.wrapped);return d.actions=a?Zb(a):null,d.dir=this.dir,d.dropCount=this.dropCount,d.filtered=this.filtered,d.iteratees=b?Zb(b):null,d.takeCount=this.takeCount,d.views=c?Zb(c):null,d}function Nb(){var a=this.filtered,b=a?new _(this):this.clone();return b.dir=-1*this.dir,b.filtered=a,b}function Ob(){var a=this.wrapped.value();if(!Ph(a))return Uc(a,this.actions);var b=this.dir,c=0>b,d=a.length,e=pd(0,d,this.views),f=e.start,g=e.end,h=this.dropCount,i=ph(g-f,this.takeCount-h),j=c?g:f-1,k=this.iteratees,l=k?k.length:0,m=0,n=[];a:for(;d--&&i>m;){j+=b;for(var o=-1,p=a[j];++o<l;){var q=k[o],r=q.iteratee,s=r(p,j,a),t=q.type;if(t==L)p=s;else if(!s){if(t==K)continue a;break a}}h?h--:n[m++]=p}return c?n.reverse():n}function Pb(){this.__data__={}}function Qb(a){return this.has(a)&&delete this.__data__[a]}function Sb(a){return"__proto__"==a?v:this.__data__[a]}function Tb(a){return"__proto__"!=a&&Tg.call(this.__data__,a)}function Ub(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Vb(a){var b=a?a.length:0;for(this.data={hash:lh(null),set:new eh};b--;)this.push(a[b])}function Xb(a,b){var c=a.data,d="string"==typeof b||uf(b)?c.set.has(b):c.hash[b];return d?0:-1}function Yb(a){var b=this.data;"string"==typeof a||uf(a)?b.set.add(a):b.hash[a]=!0}function Zb(a,b){var c=-1,d=a.length;for(b||(b=Eg(d));++c<d;)b[c]=a[c];return b}function $b(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function _b(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function ac(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function bc(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function cc(a,b){for(var c=-1,d=a.length,e=Eg(d);++c<d;)e[c]=b(a[c],c,a);return e}function dc(a){for(var b=-1,c=a.length,d=uh;++b<c;){var e=a[b];e>d&&(d=e)}return d}function ec(a){for(var b=-1,c=a.length,d=vh;++b<c;){var e=a[b];d>e&&(d=e)}return d}function fc(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function gc(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function hc(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function ic(a,b){return"undefined"==typeof a?b:a}function jc(a,b,c,d){return"undefined"!=typeof a&&Tg.call(d,c)?a:b}function kc(a,b,c){var d=Th(b);if(!c)return mc(b,a,d);for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&("undefined"!=typeof h||g in a)||(a[g]=i)}return a}function lc(a,b){for(var c=-1,d=a.length,e=wd(d),f=b.length,g=Eg(f);++c<f;){var h=b[c];e?(h=parseFloat(h),g[c]=ud(h,d)?a[h]:v):g[c]=a[h]}return g}function mc(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}function nc(a,b){for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=id(a[e],x,a)}return a}function oc(a,b,c){var e=typeof a;return"function"==e?"undefined"!=typeof b&&td(a)?Xc(a,b,c):a:null==a?ug:"object"==e?Jc(a,!c):Mc(c?d(a):a)}function pc(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),"undefined"!=typeof h)return h;if(!uf(a))return a;var i=Ph(a);if(i){if(h=qd(a),!b)return Zb(a,h)}else{var j=Vg.call(a),k=j==U;if(j!=X&&j!=P&&(!k||e))return Kb[j]?sd(a,j,b):e?a:{};if(h=rd(k?{}:a),!b)return mc(a,h,Th(a))}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?$b:Bc)(a,function(d,e){h[e]=pc(d,b,c,e,a,f,g)}),h}function qc(a,b,c,d){if(!tf(a))throw new Ng(N);return fh(function(){a.apply(v,Qc(c,d))},b)}function rc(a,c){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=od(),h=g==b,i=h&&c.length>=200&&Fh(c),j=c.length;i&&(g=Xb,h=!1,c=i);a:for(;++f<d;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(c[l]===k)continue a;e.push(k)}else g(c,k)<0&&e.push(k)}return e}function sc(a,b){var c=a?a.length:0;if(!wd(c))return Bc(a,b);for(var d=-1,e=Fd(a);++d<c&&b(e[d],d,e)!==!1;);return a}function tc(a,b){var c=a?a.length:0;if(!wd(c))return Cc(a,b);for(var d=Fd(a);c--&&b(d[c],c,d)!==!1;);return a}function uc(a,b){var c=!0;return sc(a,function(a,d,e){return c=!!b(a,d,e)}),c}function vc(a,b){var c=[];return sc(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function wc(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function xc(a,b,c,d){for(var e=(d||0)-1,f=a.length,g=-1,h=[];++e<f;){var i=a[e];if(n(i)&&wd(i.length)&&(Ph(i)||mf(i))){b&&(i=xc(i,b,c));var j=-1,k=i.length;for(h.length+=k;++j<k;)h[++g]=i[j]}else c||(h[++g]=i)}return h}function yc(a,b,c){for(var d=-1,e=Fd(a),f=c(a),g=f.length;++d<g;){var h=f[d];if(b(e[h],h,e)===!1)break}return a}function zc(a,b,c){for(var d=Fd(a),e=c(a),f=e.length;f--;){var g=e[f];if(b(d[g],g,d)===!1)break}return a}function Ac(a,b){return yc(a,b,Rf)}function Bc(a,b){return yc(a,b,Th)}function Cc(a,b){return zc(a,b,Th)}function Dc(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];tf(a[g])&&(f[++e]=g)}return f}function Ec(a,b,c){var d=-1,e="function"==typeof b,f=a?a.length:0,g=wd(f)?Eg(f):[];return sc(a,function(a){var f=e?b:null!=a&&a[b];g[++d]=f?f.apply(a,c):v}),g}function Fc(a,b,c,d,e,f){if(a===b)return 0!==a||1/a==1/b;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:Gc(a,b,Fc,c,d,e,f)}function Gc(a,b,c,d,e,f,g){var h=Ph(a),i=Ph(b),j=Q,k=Q;h||(j=Vg.call(a),j==P?j=X:j!=X&&(h=Cf(a))),i||(k=Vg.call(b),k==P?k=X:k!=X&&(i=Cf(b)));var l=j==X,m=k==X,n=j==k;if(n&&!h&&!l)return kd(a,b,j);var o=l&&Tg.call(a,"__wrapped__"),p=m&&Tg.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g);if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;
f.push(a),g.push(b);var r=(h?jd:ld)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Hc(a,b,c,d,e){var f=b.length;if(null==a)return!f;for(var g=-1,h=!e;++g<f;)if(h&&d[g]?c[g]!==a[b[g]]:!Tg.call(a,b[g]))return!1;for(g=-1;++g<f;){var i=b[g];if(h&&d[g])var j=Tg.call(a,i);else{var k=a[i],l=c[g];j=e?e(k,l,i):v,"undefined"==typeof j&&(j=Fc(l,k,e,!0))}if(!j)return!1}return!0}function Ic(a,b){var c=[];return sc(a,function(a,d,e){c.push(b(a,d,e))}),c}function Jc(a,b){var c=Th(a),d=c.length;if(1==d){var e=c[0],f=a[e];if(xd(f))return function(a){return null!=a&&f===a[e]&&Tg.call(a,e)}}b&&(a=pc(a,!0));for(var g=Eg(d),h=Eg(d);d--;)f=a[c[d]],g[d]=f,h[d]=xd(f);return function(a){return Hc(a,c,g,h)}}function Kc(a,b,c,d,e){var f=wd(b.length)&&(Ph(b)||Cf(b));return(f?$b:Bc)(b,function(b,g,h){if(n(b))return d||(d=[]),e||(e=[]),Lc(a,h,g,Kc,c,d,e);var i=a[g],j=c?c(i,b,g,a,h):v,k="undefined"==typeof j;k&&(j=b),!f&&"undefined"==typeof j||!k&&(j===j?j===i:i!==i)||(a[g]=j)}),a}function Lc(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):v,l="undefined"==typeof k;l&&(k=i,wd(i.length)&&(Ph(i)||Cf(i))?k=Ph(j)?j:j?Zb(j):[]:(Rh(i)||mf(i))&&(k=mf(j)?Ff(j):Rh(j)?j:{})),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Mc(a){return function(b){return null==b?v:b[a]}}function Nc(b,c){var d=c.length,e=lc(b,c);for(c.sort(a);d--;){var f=parseFloat(c[d]);if(f!=g&&ud(f)){var g=f;gh.call(b,f,1)}}return e}function Oc(a,b){return a+ah(th()*(b-a+1))}function Pc(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Qc(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c="undefined"==typeof c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b;for(var f=Eg(e);++d<e;)f[d]=a[d+b];return f}function Rc(a,b){var c;return sc(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Sc(a,c){var d=-1,e=od(),f=a.length,g=e==b,h=g&&f>=200,i=h&&Fh(),j=[];i?(e=Xb,g=!1):(h=!1,i=c?[]:j);a:for(;++d<f;){var k=a[d],l=c?c(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;c&&i.push(l),j.push(k)}else e(i,l)<0&&((c||h)&&i.push(l),j.push(k))}return j}function Tc(a,b){for(var c=-1,d=b.length,e=Eg(d);++c<d;)e[c]=a[b[c]];return e}function Uc(a,b){var c=a;c instanceof _&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=[c],g=b[d];ch.apply(f,g.args),c=g.func.apply(g.thisArg,f)}return c}function Vc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&yh>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return Wc(a,b,ug,c)}function Wc(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h="undefined"==typeof b;f>e;){var i=ah((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||"undefined"!=typeof j):d?b>=j:b>j;l?e=i+1:f=i}return ph(f,xh)}function Xc(a,b,c){if("function"!=typeof a)return ug;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function Yc(a){return Zg.call(a,0)}function Zc(a,b,c){for(var d=c.length,e=-1,f=oh(a.length-d,0),g=-1,h=b.length,i=Eg(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function $c(a,b,c){for(var d=-1,e=c.length,f=-1,g=oh(a.length-e,0),h=-1,i=b.length,j=Eg(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function _c(a,b){return function(c,d,e){var f=b?b():{};if(d=nd(d,e,3),Ph(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else sc(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ad(a){return function(){var b=arguments.length,c=arguments[0];if(2>b||null==c)return c;if(b>3&&vd(arguments[1],arguments[2],arguments[3])&&(b=2),b>3&&"function"==typeof arguments[b-2])var d=Xc(arguments[--b-1],arguments[b--],5);else b>2&&"function"==typeof arguments[b-1]&&(d=arguments[--b]);for(var e=0;++e<b;){var f=arguments[e];f&&a(c,f,d)}return c}}function bd(a,b){function c(){return(this instanceof c?d:a).apply(b,arguments)}var d=dd(a);return c}function cd(a){return function(b){for(var c=-1,d=qg(ag(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function dd(a){return function(){var b=Dh(a.prototype),c=a.apply(b,arguments);return uf(c)?c:b}}function ed(a,b){return function(c,d,f){f&&vd(c,d,f)&&(d=null);var g=nd(),h=null==d;if(g===oc&&h||(h=!1,d=g(d,f,3)),h){var i=Ph(c);if(i||!Bf(c))return a(i?c:Ed(c));d=e}return md(c,d,b)}}function fd(a,b,c,d,e,f,g,h,i,j){function k(){for(var u=arguments.length,v=u,w=Eg(u);v--;)w[v]=arguments[v];if(d&&(w=Zc(w,d,e)),f&&(w=$c(w,f,g)),o||r){var z=k.placeholder,A=p(w,z);if(u-=A.length,j>u){var B=h?Zb(h):null,E=oh(j-u,0),F=o?A:null,G=o?null:A,H=o?w:null,I=o?null:w;b|=o?C:D,b&=~(o?D:C),q||(b&=~(x|y));var J=fd(a,b,c,H,F,I,G,B,i,E);return J.placeholder=z,J}}var K=m?c:this;return n&&(a=K[t]),h&&(w=Bd(w,h)),l&&i<w.length&&(w.length=i),(this instanceof k?s||dd(a):a).apply(K,w)}var l=b&F,m=b&x,n=b&y,o=b&A,q=b&z,r=b&B,s=!n&&dd(a),t=a;return k}function gd(a,b,c){var e=a.length;if(b=+b,e>=b||!mh(b))return"";var f=b-e;return c=null==c?" ":d(c),ig(c,$g(f/c.length)).slice(0,f)}function hd(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Eg(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this instanceof e?g:a).apply(f?c:this,k)}var f=b&x,g=dd(a);return e}function id(a,b,c,d,e,f,g,h){var i=b&y;if(!i&&!tf(a))throw new Ng(N);var j=d?d.length:0;if(j||(b&=~(C|D),d=e=null),j-=e?e.length:0,b&D){var k=d,l=e;d=e=null}var m=!i&&Gh(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&m!==!0&&(yd(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:oh(h-j,0)||0,b==x)var o=bd(n[0],n[2]);else o=b!=C&&b!=(x|C)||n[4].length?fd.apply(null,n):hd.apply(null,n);var p=m?Eh:Hh;return p(o,n)}function jd(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=v,d&&(k=e?d(m,l,h):d(l,m,h)),"undefined"==typeof k)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function kd(a,b,c){switch(c){case R:case S:return+a==+b;case T:return a.name==b.name&&a.message==b.message;case W:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Y:case $:return a==d(b)}return!1}function ld(a,b,c,d,e,f,g){var h=Th(a),i=h.length,j=Th(b),k=j.length;if(i!=k&&!e)return!1;for(var l,m=-1;++m<i;){var n=h[m],o=Tg.call(b,n);if(o){var p=a[n],q=b[n];o=v,d&&(o=e?d(q,p,n):d(p,q,n)),"undefined"==typeof o&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function md(a,b,c){var d=c?vh:uh,e=d,f=e;return sc(a,function(a,g,h){var i=b(a,g,h);((c?e>i:i>e)||i===d&&i===f)&&(e=i,f=a)}),f}function nd(a,b,c){var d=V.callback||sg;return d=d===sg?oc:d,c?d(a,b,c):d}function od(a,c,d){var e=V.indexOf||Sd;return e=e===Sd?b:e,a?e(a,c,d):e}function pd(a,b,c){for(var d=-1,e=c?c.length:0;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=ph(b,a+g);break;case"takeRight":a=oh(a,b-g)}}return{start:a,end:b}}function qd(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Tg.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function rd(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Kg),new b}function sd(a,b,c){var d=a.constructor;switch(b){case ab:return Yc(a);case R:case S:return new d(+a);case bb:case cb:case db:case eb:case fb:case gb:case hb:case ib:case jb:var e=a.buffer;return new d(c?Yc(e):e,a.byteOffset,a.length);case W:case $:return new d(a);case Y:var f=new d(a.source,vb.exec(a));f.lastIndex=a.lastIndex}return f}function td(a){var b=V.support,c=!(b.funcNames?a.name:b.funcDecomp);if(!c){var d=Rg.call(a);b.funcNames||(c=!wb.test(d)),c||(c=Db.test(d)||xf(a),Eh(a,c))}return c}function ud(a,b){return a=+a,b=null==b?Ah:b,a>-1&&a%1==0&&b>a}function vd(a,b,c){if(!uf(c))return!1;var d=typeof b;if("number"==d)var e=c.length,f=wd(e)&&ud(b,e);else f="string"==d&&b in a;return f&&c[b]===a}function wd(a){return"number"==typeof a&&a>-1&&a%1==0&&Ah>=a}function xd(a){return a===a&&(0===a?1/a>0:!uf(a))}function yd(a,b){var c=a[1],d=b[1],e=c|d,f=F|E,g=x|y,h=f|g|z|B,i=c&F&&!(d&F),j=c&E&&!(d&E),k=(j?a:b)[7],l=(i?a:b)[8],m=!(c>=E&&d>g||c>g&&d>=E),n=e>=f&&h>=e&&(E>c||(j||i)&&k.length<=l);if(!m&&!n)return a;d&x&&(a[2]=b[2],e|=c&x?0:z);var o=b[3];if(o){var q=a[3];a[3]=q?Zc(q,o,b[4]):Zb(o),a[4]=q?p(a[3],O):Zb(b[4])}return o=b[5],o&&(q=a[5],a[5]=q?$c(q,o,b[6]):Zb(o),a[6]=q?p(a[5],O):Zb(b[6])),o=b[7],o&&(a[7]=Zb(o)),d&F&&(a[8]=null==a[8]?b[8]:ph(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function zd(a,b){a=Fd(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Ad(a,b){var c={};return Ac(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Bd(a,b){for(var c=a.length,d=ph(b.length,c),e=Zb(a);d--;){var f=b[d];a[d]=ud(f,c)?e[f]:v}return a}function Cd(a){{var b;V.support}if(!n(a)||Vg.call(a)!=X||!Tg.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return Ac(a,function(a,b){c=b}),"undefined"==typeof c||Tg.call(a,c)}function Dd(a){for(var b=Rf(a),c=b.length,d=c&&a.length,e=V.support,f=d&&wd(d)&&(Ph(a)||e.nonEnumArgs&&mf(a)),g=-1,h=[];++g<c;){var i=b[g];(f&&ud(i,d)||Tg.call(a,i))&&h.push(i)}return h}function Ed(a){return null==a?[]:wd(a.length)?uf(a)?a:Kg(a):Yf(a)}function Fd(a){return uf(a)?a:Kg(a)}function Gd(a,b,c){b=(c?vd(a,b,c):null==b)?1:oh(+b||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Eg($g(e/b));e>d;)g[++f]=Qc(a,d,d+=b);return g}function Hd(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function Id(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Ph(c)||mf(c))break}return rc(c,xc(arguments,!1,!0,++a))}function Jd(a,b,c){var d=a?a.length:0;return d?((c?vd(a,b,c):null==b)&&(b=1),Qc(a,0>b?0:b)):[]}function Kd(a,b,c){var d=a?a.length:0;return d?((c?vd(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qc(a,0,0>b?0:b)):[]}function Ld(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nd(b,c,3);d--&&b(a[d],d,a););return Qc(a,0,d+1)}function Md(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nd(b,c,3);++e<d&&b(a[e],e,a););return Qc(a,e)}function Nd(a,b,c){var d=-1,e=a?a.length:0;for(b=nd(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function Od(a,b,c){var d=a?a.length:0;for(b=nd(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function Pd(a){return a?a[0]:v}function Qd(a,b,c){var d=a?a.length:0;return c&&vd(a,b,c)&&(b=!1),d?xc(a,b):[]}function Rd(a){var b=a?a.length:0;return b?xc(a,!0):[]}function Sd(a,c,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?oh(e+d,0):d||0;else if(d){var f=Vc(a,c),g=a[f];return(c===c?c===g:g!==g)?f:-1}return b(a,c,d)}function Td(a){return Kd(a,1)}function Ud(){for(var a=[],c=-1,d=arguments.length,e=[],f=od(),g=f==b;++c<d;){var h=arguments[c];(Ph(h)||mf(h))&&(a.push(h),e.push(g&&h.length>=120&&Fh(c&&h)))}d=a.length;var i=a[0],j=-1,k=i?i.length:0,l=[],m=e[0];a:for(;++j<k;)if(h=i[j],(m?Xb(m,h):f(l,h))<0){for(c=d;--c;){var n=e[c];if((n?Xb(n,h):f(a[c],h))<0)continue a}m&&m.push(h),l.push(h)}return l}function Vd(a){var b=a?a.length:0;return b?a[b-1]:v}function Wd(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?oh(d+c,0):ph(c||0,d-1))+1;else if(c){e=Vc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return m(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Xd(){var a=arguments[0];if(!a||!a.length)return a;for(var b=0,c=od(),d=arguments.length;++b<d;)for(var e=0,f=arguments[b];(e=c(a,f,e))>-1;)gh.call(a,e,1);return a}function Yd(a){return Nc(a||[],xc(arguments,!1,!1,1))}function Zd(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=nd(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),gh.call(a,d--,1),e--)}return f}function $d(a){return Jd(a,1)}function _d(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&vd(a,b,c)&&(b=0,c=d),Qc(a,b,c)):[]}function ae(a,b,c,d){var e=nd(c);return e===oc&&null==c?Vc(a,b):Wc(a,b,e(c,d,1))}function be(a,b,c,d){var e=nd(c);return e===oc&&null==c?Vc(a,b,!0):Wc(a,b,e(c,d,1),!0)}function ce(a,b,c){var d=a?a.length:0;return d?((c?vd(a,b,c):null==b)&&(b=1),Qc(a,0,0>b?0:b)):[]}function de(a,b,c){var d=a?a.length:0;return d?((c?vd(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qc(a,0>b?0:b)):[]}function ee(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nd(b,c,3);d--&&b(a[d],d,a););return Qc(a,d+1)}function fe(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nd(b,c,3);++e<d&&b(a[e],e,a););return Qc(a,0,e)}function ge(){return Sc(xc(arguments,!1,!0))}function he(a,c,d,e){var f=a?a.length:0;if(!f)return[];"boolean"!=typeof c&&null!=c&&(e=d,d=vd(a,c,e)?null:c,c=!1);var g=nd();return(g!==oc||null!=d)&&(d=g(d,e,3)),c&&od()==b?q(a,d):Sc(a,d)}function ie(a){for(var b=-1,c=(a&&a.length&&dc(cc(a,Sg)))>>>0,d=Eg(c);++b<c;)d[b]=cc(a,Mc(b));return d}function je(a){return rc(a,Qc(arguments,1))}function ke(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Ph(c)||mf(c))var d=d?rc(d,c).concat(rc(c,d)):c}return d?Sc(d):[]}function le(){for(var a=arguments.length,b=Eg(a);a--;)b[a]=arguments[a];return ie(b)}function me(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Ph(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function ne(a){var b=V(a);return b.__chain__=!0,b}function oe(a,b,c){return b.call(c,a),a}function pe(a,b,c){return b.call(c,a)}function qe(){return ne(this)}function re(){var a=this.__wrapped__;return a instanceof _?new Z(a.reverse()):this.thru(function(a){return a.reverse()})}function se(){return this.value()+""}function te(){return Uc(this.__wrapped__,this.__actions__)}function ue(a){var b=a?a.length:0;return wd(b)&&(a=Ed(a)),lc(a,xc(arguments,!1,!1,1))}function ve(a,b,c){var d=a?a.length:0;return wd(d)||(a=Yf(a),d=a.length),d?(c="number"==typeof c?0>c?oh(d+c,0):c||0:0,"string"==typeof a||!Ph(a)&&Bf(a)?d>c&&a.indexOf(b,c)>-1:od(a,b,c)>-1):!1}function we(a,b,c){var d=Ph(a)?ac:uc;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nd(b,c,3)),d(a,b)}function xe(a,b,c){var d=Ph(a)?bc:vc;return b=nd(b,c,3),d(a,b)}function ye(a,b,c){if(Ph(a)){var d=Nd(a,b,c);return d>-1?a[d]:v}return b=nd(b,c,3),wc(a,b,sc)}function ze(a,b,c){return b=nd(b,c,3),wc(a,b,tc)}function Ae(a,b){return ye(a,vg(b))}function Be(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Ph(a)?$b(a,b):sc(a,Xc(b,c,3))}function Ce(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Ph(a)?_b(a,b):tc(a,Xc(b,c,3))}function De(a,b){return Ec(a,b,Qc(arguments,2))}function Ee(a,b,c){var d=Ph(a)?cc:Ic;return b=nd(b,c,3),d(a,b)}function Fe(a,b){return Ee(a,zg(b))}function Ge(a,b,c,d){var e=Ph(a)?fc:Pc;return e(a,nd(b,d,4),c,arguments.length<3,sc)}function He(a,b,c,d){var e=Ph(a)?gc:Pc;return e(a,nd(b,d,4),c,arguments.length<3,tc)}function Ie(a,b,c){var d=Ph(a)?bc:vc;return b=nd(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Je(a,b,c){if(c?vd(a,b,c):null==b){a=Ed(a);var d=a.length;return d>0?a[Oc(0,d-1)]:v}var e=Ke(a);return e.length=ph(0>b?0:+b||0,e.length),e}function Ke(a){a=Ed(a);for(var b=-1,c=a.length,d=Eg(c);++b<c;){var e=Oc(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function Le(a){var b=a?a.length:0;return wd(b)?b:Th(a).length}function Me(a,b,c){var d=Ph(a)?hc:Rc;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nd(b,c,3)),d(a,b)}function Ne(a,b,d){var e=-1,f=a?a.length:0,g=wd(f)?Eg(f):[];return d&&vd(a,b,d)&&(b=null),b=nd(b,d,3),sc(a,function(a,c,d){g[++e]={criteria:b(a,c,d),index:e,value:a}}),c(g,h)}function Oe(a){var b=arguments;b.length>3&&vd(b[1],b[2],b[3])&&(b=[a,b[1]]);var d=-1,e=a?a.length:0,f=xc(b,!1,!1,1),g=wd(e)?Eg(e):[];return sc(a,function(a){for(var b=f.length,c=Eg(b);b--;)c[b]=null==a?v:a[f[b]];g[++d]={criteria:c,index:d,value:a}}),c(g,i)}function Pe(a,b){return xe(a,vg(b))}function Qe(a,b){if(!tf(b)){if(!tf(a))throw new Ng(N);var c=a;a=b,b=c}return a=mh(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function Re(a,b,c){return c&&vd(a,b,c)&&(b=null),b=a&&null==b?a.length:oh(+b||0,0),id(a,F,null,null,null,null,b)}function Se(a,b){var c;if(!tf(b)){if(!tf(a))throw new Ng(N);var d=a;a=b,b=d}return function(){return--a>0?c=b.apply(this,arguments):b=null,c}}function Te(a,b){var c=x;if(arguments.length>2){var d=Qc(arguments,2),e=p(d,Te.placeholder);c|=C}return id(a,c,b,d,e)}function Ue(a){return nc(a,arguments.length>1?xc(arguments,!1,!1,1):Of(a))}function Ve(a,b){var c=x|y;if(arguments.length>2){var d=Qc(arguments,2),e=p(d,Ve.placeholder);c|=C}return id(b,c,a,d,e)}function We(a,b,c){c&&vd(a,b,c)&&(b=null);var d=id(a,A,null,null,null,null,null,b);return d.placeholder=We.placeholder,d}function Xe(a,b,c){c&&vd(a,b,c)&&(b=null);var d=id(a,B,null,null,null,null,null,b);return d.placeholder=Xe.placeholder,d}function Ye(a,b,c){function d(){m&&_g(m),i&&_g(i),i=m=n=v}function e(){var c=b-(Oh()-k);if(0>=c||c>b){i&&_g(i);var d=n;i=m=n=v,d&&(o=Oh(),j=a.apply(l,h),m||i||(h=l=null))}else m=fh(e,c)}function f(){m&&_g(m),i=m=n=v,(q||p!==b)&&(o=Oh(),j=a.apply(l,h),m||i||(h=l=null))}function g(){if(h=arguments,k=Oh(),l=this,n=q&&(m||!r),p===!1)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=_g(i)),o=k,j=a.apply(l,h)):i||(i=fh(f,d))}return g&&m?m=_g(m):m||b===p||(m=fh(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=null),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if(!tf(a))throw new Ng(N);if(b=0>b?0:b,c===!0){var r=!0;q=!1}else uf(c)&&(r=c.leading,p="maxWait"in c&&oh(+c.maxWait||0,b),q="trailing"in c?c.trailing:q);return g.cancel=d,g}function Ze(a){return qc(a,1,arguments,1)}function $e(a,b){return qc(a,b,arguments,2)}function _e(){var a=arguments,b=a.length;if(!b)return function(){};if(!ac(a,tf))throw new Ng(N);return function(){for(var c=0,d=a[c].apply(this,arguments);++c<b;)d=a[c].call(this,d);return d}}function af(){var a=arguments,b=a.length-1;if(0>b)return function(){};if(!ac(a,tf))throw new Ng(N);return function(){for(var c=b,d=a[c].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function bf(a,b){if(!tf(a)||b&&!tf(b))throw new Ng(N);var c=function(){var d=c.cache,e=b?b.apply(this,arguments):arguments[0];if(d.has(e))return d.get(e);var f=a.apply(this,arguments);return d.set(e,f),f};return c.cache=new bf.Cache,c}function cf(a){if(!tf(a))throw new Ng(N);return function(){return!a.apply(this,arguments)}}function df(a){return Se(a,2)}function ef(a){var b=Qc(arguments,1),c=p(b,ef.placeholder);return id(a,C,null,b,c)}function ff(a){var b=Qc(arguments,1),c=p(b,ff.placeholder);return id(a,D,null,b,c)}function gf(a){var b=xc(arguments,!1,!1,1);return id(a,E,null,null,null,b)}function hf(a,b,c){var d=!0,e=!0;if(!tf(a))throw new Ng(N);return c===!1?d=!1:uf(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Lb.leading=d,Lb.maxWait=+b,Lb.trailing=e,Ye(a,b,Lb)}function jf(a,b){return b=null==b?ug:b,id(b,C,null,[a],[])}function kf(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=vd(a,b,d)?null:b,b=!1),c="function"==typeof c&&Xc(c,d,1),pc(a,b,c)}function lf(a,b,c){return b="function"==typeof b&&Xc(b,c,1),pc(a,!0,b)}function mf(a){var b=n(a)?a.length:v;return wd(b)&&Vg.call(a)==P||!1}function nf(a){return a===!0||a===!1||n(a)&&Vg.call(a)==R||!1}function of(a){return n(a)&&Vg.call(a)==S||!1}function pf(a){return a&&1===a.nodeType&&n(a)&&Vg.call(a).indexOf("Element")>-1||!1}function qf(a){if(null==a)return!0;var b=a.length;return wd(b)&&(Ph(a)||Bf(a)||mf(a)||n(a)&&tf(a.splice))?!b:!Th(a).length}function rf(a,b,c,d){if(c="function"==typeof c&&Xc(c,d,3),!c&&xd(a)&&xd(b))return a===b;var e=c?c(a,b):v;return"undefined"==typeof e?Fc(a,b,c):!!e}function sf(a){return n(a)&&"string"==typeof a.message&&Vg.call(a)==T||!1}function tf(a){return"function"==typeof a||!1}function uf(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function vf(a,b,c,d){var e=Th(b),f=e.length;if(c="function"==typeof c&&Xc(c,d,3),!c&&1==f){var g=e[0],h=b[g];if(xd(h))return null!=a&&h===a[g]&&Tg.call(a,g)}for(var i=Eg(f),j=Eg(f);f--;)h=i[f]=b[e[f]],j[f]=xd(h);return Hc(a,e,i,j,c)}function wf(a){return zf(a)&&a!=+a}function xf(a){return null==a?!1:Vg.call(a)==U?Xg.test(Rg.call(a)):n(a)&&yb.test(a)||!1}function yf(a){return null===a}function zf(a){return"number"==typeof a||n(a)&&Vg.call(a)==W||!1}function Af(a){return n(a)&&Vg.call(a)==Y||!1}function Bf(a){return"string"==typeof a||n(a)&&Vg.call(a)==$||!1}function Cf(a){return n(a)&&wd(a.length)&&Jb[Vg.call(a)]||!1}function Df(a){return"undefined"==typeof a}function Ef(a){var b=a?a.length:0;return wd(b)?b?Zb(a):[]:Yf(a)}function Ff(a){return mc(a,Rf(a))}function Gf(a,b,c){var d=Dh(a);return c&&vd(a,b,c)&&(b=null),b?mc(b,d,Th(b)):d}function Hf(a){if(null==a)return a;var b=Zb(arguments);return b.push(ic),Sh.apply(v,b)}function If(a,b,c){return b=nd(b,c,3),wc(a,b,Bc,!0)}function Jf(a,b,c){return b=nd(b,c,3),wc(a,b,Cc,!0)}function Kf(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xc(b,c,3)),yc(a,b,Rf)}function Lf(a,b,c){return b=Xc(b,c,3),zc(a,b,Rf)}function Mf(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xc(b,c,3)),Bc(a,b)}function Nf(a,b,c){return b=Xc(b,c,3),zc(a,b,Th)}function Of(a){return Dc(a,Rf(a))}function Pf(a,b){return a?Tg.call(a,b):!1}function Qf(a,b,c){c&&vd(a,b,c)&&(b=null);for(var d=-1,e=Th(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?Tg.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function Rf(a){if(null==a)return[];uf(a)||(a=Kg(a));var b=a.length;b=b&&wd(b)&&(Ph(a)||Ch.nonEnumArgs&&mf(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype==a,f=Eg(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&ud(h,b)||"constructor"==h&&(e||!Tg.call(a,h))||f.push(h);return f}function Sf(a,b,c){var d={};return b=nd(b,c,3),Bc(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Tf(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=cc(xc(arguments,!1,!1,1),Mg);return zd(a,rc(Rf(a),d))}return b=Xc(b,c,3),Ad(a,function(a,c,d){return!b(a,c,d)})}function Uf(a){for(var b=-1,c=Th(a),d=c.length,e=Eg(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Vf(a,b,c){return null==a?{}:"function"==typeof b?Ad(a,Xc(b,c,3)):zd(a,xc(arguments,!1,!1,1))}function Wf(a,b,c){var d=null==a?v:a[b];return"undefined"==typeof d&&(d=c),tf(d)?d.call(a):d}function Xf(a,b,c,d){var e=Ph(a)||Cf(a);if(b=nd(b,d,4),null==c)if(e||uf(a)){var f=a.constructor;c=e?Ph(a)?new f:[]:Dh("function"==typeof f&&f.prototype)}else c={};return(e?$b:Bc)(a,function(a,d,e){return b(c,a,d,e)}),c}function Yf(a){return Tc(a,Th(a))}function Zf(a){return Tc(a,Rf(a))}function $f(a,b,c){c&&vd(a,b,c)&&(b=c=null);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=th();return ph(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Oc(a,b)}function _f(a){return a=d(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function ag(a){return a=d(a),a&&a.replace(zb,j)}function bg(a,b,c){a=d(a),b+="";var e=a.length;return c=("undefined"==typeof c?e:ph(0>c?0:+c||0,e))-b.length,c>=0&&a.indexOf(b,c)==c}function cg(a){return a=d(a),a&&qb.test(a)?a.replace(ob,k):a}function dg(a){return a=d(a),a&&Cb.test(a)?a.replace(Bb,"\\$&"):a}function eg(a,b,c){a=d(a),b=+b;var e=a.length;if(e>=b||!mh(b))return a;var f=(b-e)/2,g=ah(f),h=$g(f);return c=gd("",h,c),c.slice(0,g)+a+c}function fg(a,b,c){return a=d(a),a&&gd(a,b,c)+a}function gg(a,b,c){return a=d(a),a&&a+gd(a,b,c)}function hg(a,b,c){return c&&vd(a,b,c)&&(b=0),sh(a,b)}function ig(a,b){var c="";if(a=d(a),b=+b,1>b||!a||!mh(b))return c;do b%2&&(c+=a),b=ah(b/2),a+=a;while(b);return c}function jg(a,b,c){return a=d(a),c=null==c?0:ph(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function kg(a,b,c){var e=V.templateSettings;c&&vd(a,b,c)&&(b=c=null),a=d(a),b=kc(kc({},c||b),e,jc);var f,g,h=kc(kc({},b.imports),e.imports,jc),i=Th(h),j=Tc(h,i),k=0,m=b.interpolate||Ab,n="__p += '",o=Lg((b.escape||Ab).source+"|"+m.source+"|"+(m===tb?ub:Ab).source+"|"+(b.evaluate||Ab).source+"|$","g"),p="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Ib+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(k,i).replace(Eb,l),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),n+="';\n";var q=b.variable;q||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(kb,""):n).replace(lb,"$1").replace(mb,"$1;"),n="function("+(q||"obj")+") {\n"+(q?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var r=rg(function(){return Hg(i,p+"return "+n).apply(v,j)});if(r.source=n,sf(r))throw r;return r}function lg(a,b,c){var e=a;return(a=d(a))?(c?vd(e,b,c):null==b)?a.slice(r(a),s(a)+1):(b=d(b),a.slice(f(a,b),g(a,b)+1)):a}function mg(a,b,c){var e=a;return a=d(a),a?a.slice((c?vd(e,b,c):null==b)?r(a):f(a,d(b))):a}function ng(a,b,c){var e=a;return a=d(a),a?(c?vd(e,b,c):null==b)?a.slice(0,s(a)+1):a.slice(0,g(a,d(b))+1):a}function og(a,b,c){c&&vd(a,b,c)&&(b=null);var e=G,f=H;if(null!=b)if(uf(b)){var g="separator"in b?b.separator:g;e="length"in b?+b.length||0:e,f="omission"in b?d(b.omission):f}else e=+b||0;if(a=d(a),e>=a.length)return a;var h=e-f.length;if(1>h)return f;var i=a.slice(0,h);if(null==g)return i+f;if(Af(g)){if(a.slice(h).search(g)){var j,k,l=a.slice(0,h);for(g.global||(g=Lg(g.source,(vb.exec(g)||"")+"g")),g.lastIndex=0;j=g.exec(l);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(a.indexOf(g,h)!=h){var m=i.lastIndexOf(g);m>-1&&(i=i.slice(0,m))}return i+f}function pg(a){return a=d(a),a&&pb.test(a)?a.replace(nb,t):a}function qg(a,b,c){return c&&vd(a,b,c)&&(b=null),a=d(a),a.match(b||Fb)||[]}function rg(a){try{return a()}catch(b){return sf(b)?b:Gg(b)}}function sg(a,b,c){return c&&vd(a,b,c)&&(b=null),oc(a,b)}function tg(a){return function(){return a}}function ug(a){return a}function vg(a){return Jc(a,!0)}function wg(a,b,c){if(null==c){var d=uf(b),e=d&&Th(b),f=e&&e.length&&Dc(b,e);(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Dc(b,Th(b)));var g=!0,h=-1,i=tf(a),j=f.length;c===!1?g=!1:uf(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=Zb(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}var e=[this.value()];return ch.apply(e,arguments),b.apply(a,e)}}(l))}return a}function xg(){return o._=Wg,this}function yg(){}function zg(a){return Mc(a+"")}function Ag(a){return function(b){return null==a?v:a[b]}}function Bg(a,b,c){c&&vd(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=oh($g((b-a)/(c||1)),0),f=Eg(e);++d<e;)f[d]=a,a+=c;return f}function Cg(a,b,c){if(a=+a,1>a||!mh(a))return[];var d=-1,e=Eg(ph(a,wh));for(b=Xc(b,c,1);++d<a;)wh>d?e[d]=b(d):b(d);return e}function Dg(a){var b=++Ug;return d(a)+b}o=o?Wb.defaults(Rb.Object(),o,Wb.pick(Rb,Hb)):Rb;var Eg=o.Array,Fg=o.Date,Gg=o.Error,Hg=o.Function,Ig=o.Math,Jg=o.Number,Kg=o.Object,Lg=o.RegExp,Mg=o.String,Ng=o.TypeError,Og=Eg.prototype,Pg=Kg.prototype,Qg=(Qg=o.window)&&Qg.document,Rg=Hg.prototype.toString,Sg=Mc("length"),Tg=Pg.hasOwnProperty,Ug=0,Vg=Pg.toString,Wg=o._,Xg=Lg("^"+dg(Vg).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yg=xf(Yg=o.ArrayBuffer)&&Yg,Zg=xf(Zg=Yg&&new Yg(0).slice)&&Zg,$g=Ig.ceil,_g=o.clearTimeout,ah=Ig.floor,bh=xf(bh=Kg.getPrototypeOf)&&bh,ch=Og.push,dh=Pg.propertyIsEnumerable,eh=xf(eh=o.Set)&&eh,fh=o.setTimeout,gh=Og.splice,hh=xf(hh=o.Uint8Array)&&hh,ih=(Og.unshift,xf(ih=o.WeakMap)&&ih),jh=function(){try{var a=xf(a=o.Float64Array)&&a,b=new a(new Yg(10),0,1)&&a}catch(c){}return b}(),kh=xf(kh=Eg.isArray)&&kh,lh=xf(lh=Kg.create)&&lh,mh=o.isFinite,nh=xf(nh=Kg.keys)&&nh,oh=Ig.max,ph=Ig.min,qh=xf(qh=Fg.now)&&qh,rh=xf(rh=Jg.isFinite)&&rh,sh=o.parseInt,th=Ig.random,uh=Jg.NEGATIVE_INFINITY,vh=Jg.POSITIVE_INFINITY,wh=Ig.pow(2,32)-1,xh=wh-1,yh=wh>>>1,zh=jh?jh.BYTES_PER_ELEMENT:0,Ah=Ig.pow(2,53)-1,Bh=ih&&new ih,Ch=V.support={};!function(){Ch.funcDecomp=!xf(o.WinRTError)&&Db.test(u),Ch.funcNames="string"==typeof Hg.name;try{Ch.dom=11===Qg.createDocumentFragment().nodeType}catch(a){Ch.dom=!1}try{Ch.nonEnumArgs=!dh.call(arguments,1)}catch(a){Ch.nonEnumArgs=!0}}(0,0),V.templateSettings={escape:rb,evaluate:sb,interpolate:tb,variable:"",imports:{_:V}};var Dh=function(){function a(){}return function(b){if(uf(b)){a.prototype=b;var c=new a;a.prototype=null}return c||o.Object()}}(),Eh=Bh?function(a,b){return Bh.set(a,b),a}:ug;Zg||(Yc=Yg&&hh?function(a){var b=a.byteLength,c=jh?ah(b/zh):0,d=c*zh,e=new Yg(b);if(c){var f=new jh(e,0,c);f.set(new jh(a,0,c))}return b!=d&&(f=new hh(e,d),f.set(new hh(a,d))),e}:tg(null));var Fh=lh&&eh?function(a){return new Vb(a)}:tg(null),Gh=Bh?function(a){return Bh.get(a)}:yg,Hh=function(){var a=0,b=0;return function(c,d){var e=Oh(),f=J-(e-b);if(b=e,f>0){if(++a>=I)return c}else a=0;return Eh(c,d)}}(),Ih=_c(function(a,b,c){Tg.call(a,c)?++a[c]:a[c]=1}),Jh=_c(function(a,b,c){Tg.call(a,c)?a[c].push(b):a[c]=[b]}),Kh=_c(function(a,b,c){a[c]=b}),Lh=ed(dc),Mh=ed(ec,!0),Nh=_c(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Oh=qh||function(){return(new Fg).getTime()},Ph=kh||function(a){return n(a)&&wd(a.length)&&Vg.call(a)==Q||!1};Ch.dom||(pf=function(a){return a&&1===a.nodeType&&n(a)&&!Rh(a)||!1});var Qh=rh||function(a){return"number"==typeof a&&mh(a)};(tf(/x/)||hh&&!tf(hh))&&(tf=function(a){return Vg.call(a)==U});var Rh=bh?function(a){if(!a||Vg.call(a)!=X)return!1;var b=a.valueOf,c=xf(b)&&(c=bh(b))&&bh(c);return c?a==c||bh(a)==c:Cd(a)}:Cd,Sh=ad(kc),Th=nh?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&wd(c)?Dd(a):uf(a)?nh(a):[]}:Dd,Uh=ad(Kc),Vh=cd(function(a,b,c){return b=b.toLowerCase(),c?a+b.charAt(0).toUpperCase()+b.slice(1):b}),Wh=cd(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});8!=sh(Gb+"08")&&(hg=function(a,b,c){return(c?vd(a,b,c):null==b)?b=0:b&&(b=+b),a=lg(a),sh(a,b||(xb.test(a)?16:10))});var Xh=cd(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});return Z.prototype=V.prototype,Pb.prototype["delete"]=Qb,Pb.prototype.get=Sb,Pb.prototype.has=Tb,Pb.prototype.set=Ub,Vb.prototype.push=Yb,bf.Cache=Pb,V.after=Qe,V.ary=Re,V.assign=Sh,V.at=ue,V.before=Se,V.bind=Te,V.bindAll=Ue,V.bindKey=Ve,V.callback=sg,V.chain=ne,V.chunk=Gd,V.compact=Hd,V.constant=tg,V.countBy=Ih,V.create=Gf,V.curry=We,V.curryRight=Xe,V.debounce=Ye,V.defaults=Hf,V.defer=Ze,V.delay=$e,V.difference=Id,V.drop=Jd,V.dropRight=Kd,V.dropRightWhile=Ld,V.dropWhile=Md,V.filter=xe,V.flatten=Qd,V.flattenDeep=Rd,V.flow=_e,V.flowRight=af,V.forEach=Be,V.forEachRight=Ce,V.forIn=Kf,V.forInRight=Lf,V.forOwn=Mf,V.forOwnRight=Nf,V.functions=Of,V.groupBy=Jh,V.indexBy=Kh,V.initial=Td,V.intersection=Ud,V.invert=Qf,V.invoke=De,V.keys=Th,V.keysIn=Rf,V.map=Ee,V.mapValues=Sf,V.matches=vg,V.memoize=bf,V.merge=Uh,V.mixin=wg,V.negate=cf,V.omit=Tf,V.once=df,V.pairs=Uf,V.partial=ef,V.partialRight=ff,V.partition=Nh,V.pick=Vf,V.pluck=Fe,V.property=zg,V.propertyOf=Ag,V.pull=Xd,V.pullAt=Yd,V.range=Bg,V.rearg=gf,V.reject=Ie,V.remove=Zd,V.rest=$d,V.shuffle=Ke,V.slice=_d,V.sortBy=Ne,V.sortByAll=Oe,V.take=ce,V.takeRight=de,V.takeRightWhile=ee,V.takeWhile=fe,V.tap=oe,V.throttle=hf,V.thru=pe,V.times=Cg,V.toArray=Ef,V.toPlainObject=Ff,V.transform=Xf,V.union=ge,V.uniq=he,V.unzip=ie,V.values=Yf,V.valuesIn=Zf,V.where=Pe,V.without=je,V.wrap=jf,V.xor=ke,V.zip=le,V.zipObject=me,V.backflow=af,V.collect=Ee,V.compose=af,V.each=Be,V.eachRight=Ce,V.extend=Sh,V.iteratee=sg,V.methods=Of,V.object=me,V.select=xe,V.tail=$d,V.unique=he,wg(V,V),V.attempt=rg,V.camelCase=Vh,V.capitalize=_f,V.clone=kf,V.cloneDeep=lf,V.deburr=ag,V.endsWith=bg,V.escape=cg,V.escapeRegExp=dg,V.every=we,V.find=ye,V.findIndex=Nd,V.findKey=If,V.findLast=ze,V.findLastIndex=Od,V.findLastKey=Jf,V.findWhere=Ae,V.first=Pd,V.has=Pf,V.identity=ug,V.includes=ve,V.indexOf=Sd,V.isArguments=mf,V.isArray=Ph,V.isBoolean=nf,V.isDate=of,V.isElement=pf,V.isEmpty=qf,V.isEqual=rf,V.isError=sf,V.isFinite=Qh,V.isFunction=tf,V.isMatch=vf,V.isNaN=wf,V.isNative=xf,V.isNull=yf,V.isNumber=zf,V.isObject=uf,V.isPlainObject=Rh,V.isRegExp=Af,V.isString=Bf,V.isTypedArray=Cf,V.isUndefined=Df,V.kebabCase=Wh,V.last=Vd,V.lastIndexOf=Wd,V.max=Lh,V.min=Mh,V.noConflict=xg,V.noop=yg,V.now=Oh,V.pad=eg,V.padLeft=fg,V.padRight=gg,V.parseInt=hg,V.random=$f,V.reduce=Ge,V.reduceRight=He,V.repeat=ig,V.result=Wf,V.runInContext=u,V.size=Le,V.snakeCase=Xh,V.some=Me,V.sortedIndex=ae,V.sortedLastIndex=be,V.startsWith=jg,V.template=kg,V.trim=lg,V.trimLeft=mg,V.trimRight=ng,V.trunc=og,V.unescape=pg,V.uniqueId=Dg,V.words=qg,V.all=we,V.any=Me,V.contains=ve,V.detect=ye,V.foldl=Ge,V.foldr=He,V.head=Pd,V.include=ve,V.inject=Ge,wg(V,function(){var a={};
return Bc(V,function(b,c){V.prototype[c]||(a[c]=b)}),a}(),!1),V.sample=Je,V.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Je(b,a)}):Je(this.value())},V.VERSION=w,$b(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){V[a].placeholder=V}),$b(["filter","map","takeWhile"],function(a,b){var c=b==K;_.prototype[a]=function(a,d){var e=this.clone(),f=e.filtered,g=e.iteratees||(e.iteratees=[]);return e.filtered=f||c||b==M&&e.dir<0,g.push({iteratee:nd(a,d,3),type:b}),e}}),$b(["drop","take"],function(a,b){var c=a+"Count",d=a+"While";_.prototype[a]=function(d){d=null==d?1:oh(+d||0,0);var e=this.clone();if(e.filtered){var f=e[c];e[c]=b?ph(f,d):f+d}else{var g=e.views||(e.views=[]);g.push({size:d,type:a+(e.dir<0?"Right":"")})}return e},_.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},_.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[d](a,b).reverse()}}),$b(["first","last"],function(a,b){var c="take"+(b?"Right":"");_.prototype[a]=function(){return this[c](1).value()[0]}}),$b(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");_.prototype[a]=function(){return this[c](1)}}),$b(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?vg:zg;_.prototype[a]=function(a){return this[c](d(a))}}),_.prototype.dropWhile=function(a,b){var c,d,e=this.dir<0;return a=nd(a,b,3),this.filter(function(b,f,g){return c=c&&(e?d>f:f>d),d=f,c||(c=!a(b,f,g))})},_.prototype.reject=function(a,b){return a=nd(a,b,3),this.filter(function(b,c,d){return!a(b,c,d)})},_.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=0>a?this.takeRight(-a):this.drop(a);return"undefined"!=typeof b&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Bc(_.prototype,function(a,b){var c=/^(?:first|last)$/.test(b);V.prototype[b]=function(){var d=this.__wrapped__,e=arguments,f=this.__chain__,g=!!this.__actions__.length,h=d instanceof _,i=h&&!g;if(c&&!f)return i?a.call(d):V[b](this.value());var j=function(a){var c=[a];return ch.apply(c,e),V[b].apply(V,c)};if(h||Ph(d)){var k=i?d:new _(this),l=a.apply(k,e);if(!c&&(g||l.actions)){var m=l.actions||(l.actions=[]);m.push({func:pe,args:[j],thisArg:V})}return new Z(l,f)}return this.thru(j)}}),$b(["concat","join","pop","push","shift","sort","splice","unshift"],function(a){var b=Og[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|shift)$/.test(a);V.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),_.prototype.clone=Mb,_.prototype.reverse=Nb,_.prototype.value=Ob,V.prototype.chain=qe,V.prototype.reverse=re,V.prototype.toString=se,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=te,V.prototype.collect=V.prototype.map,V.prototype.head=V.prototype.first,V.prototype.select=V.prototype.filter,V.prototype.tail=V.prototype.rest,V}var v,w="3.0.0",x=1,y=2,z=4,A=8,B=16,C=32,D=64,E=128,F=256,G=30,H="...",I=150,J=16,K=0,L=1,M=2,N="Expected a function",O="__lodash_placeholder__",P="[object Arguments]",Q="[object Array]",R="[object Boolean]",S="[object Date]",T="[object Error]",U="[object Function]",V="[object Map]",W="[object Number]",X="[object Object]",Y="[object RegExp]",Z="[object Set]",$="[object String]",_="[object WeakMap]",ab="[object ArrayBuffer]",bb="[object Float32Array]",cb="[object Float64Array]",db="[object Int8Array]",eb="[object Int16Array]",fb="[object Int32Array]",gb="[object Uint8Array]",hb="[object Uint8ClampedArray]",ib="[object Uint16Array]",jb="[object Uint32Array]",kb=/\b__p \+= '';/g,lb=/\b(__p \+=) '' \+/g,mb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nb=/&(?:amp|lt|gt|quot|#39|#96);/g,ob=/[&<>"'`]/g,pb=RegExp(nb.source),qb=RegExp(ob.source),rb=/<%-([\s\S]+?)%>/g,sb=/<%([\s\S]+?)%>/g,tb=/<%=([\s\S]+?)%>/g,ub=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vb=/\w*$/,wb=/^\s*function[ \n\r\t]+\w/,xb=/^0[xX]/,yb=/^\[object .+?Constructor\]$/,zb=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ab=/($^)/,Bb=/[.*+?^${}()|[\]\/\\]/g,Cb=RegExp(Bb.source),Db=/\bthis\b/,Eb=/['\n\r\u2028\u2029\\]/g,Fb=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"{2,}(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Gb=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Hb=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Ib=-1,Jb={};Jb[bb]=Jb[cb]=Jb[db]=Jb[eb]=Jb[fb]=Jb[gb]=Jb[hb]=Jb[ib]=Jb[jb]=!0,Jb[P]=Jb[Q]=Jb[ab]=Jb[R]=Jb[S]=Jb[T]=Jb[U]=Jb[V]=Jb[W]=Jb[X]=Jb[Y]=Jb[Z]=Jb[$]=Jb[_]=!1;var Kb={};Kb[P]=Kb[Q]=Kb[ab]=Kb[R]=Kb[S]=Kb[bb]=Kb[cb]=Kb[db]=Kb[eb]=Kb[fb]=Kb[W]=Kb[X]=Kb[Y]=Kb[$]=Kb[gb]=Kb[hb]=Kb[ib]=Kb[jb]=!0,Kb[T]=Kb[U]=Kb[V]=Kb[Z]=Kb[_]=!1;var Lb={leading:!1,maxWait:0,trailing:!1},Mb={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Nb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ob={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Pb={"function":!0,object:!0},Qb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rb=Pb[typeof window]&&window!==(this&&this.window)?window:this,Sb=Pb[typeof exports]&&exports&&!exports.nodeType&&exports,Tb=Pb[typeof module]&&module&&!module.nodeType&&module,Ub=Sb&&Tb&&"object"==typeof global&&global;!Ub||Ub.global!==Ub&&Ub.window!==Ub&&Ub.self!==Ub||(Rb=Ub);var Vb=Tb&&Tb.exports===Sb&&Sb,Wb=u();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Rb._=Wb,define(function(){return Wb})):Sb&&Tb?Vb?(Tb.exports=Wb)._=Wb:Sb._=Wb:Rb._=Wb}.call(this),function(a,b){if("function"==typeof define&&define.amd)define(["../../.","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a){"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=a(require("underscore")):"function"==typeof define?define(["underscore"],a):this.Cocktail=a(_)}(function(a){var b={};b.mixins={},b.mixin=function(c){var d=a.chain(arguments).toArray().rest().flatten().value(),e=c.prototype||c,f={};return a.each(d,function(c){a.isString(c)&&(c=b.mixins[c]),a.each(c,function(b,c){if(a.isFunction(b)){if(e[c]===b)return;e[c]&&(f[c]=f.hasOwnProperty(c)?f[c]:[e[c]],f[c].push(b)),e[c]=b}else a.isArray(b)?e[c]=a.union(b,e[c]||[]):a.isObject(b)?e[c]=a.extend({},b,e[c]||{}):c in e||(e[c]=b)})}),a.each(f,function(b,c){e[c]=function(){var c,d=this,e=arguments;return a.each(b,function(b){var f=a.isFunction(b)?b.apply(d,e):b;c="undefined"==typeof f?c:f}),c}}),c};var c;return b.patch=function(d){c=d.Model.extend;var e=function(a,d){var e=c.call(this,a,d),f=e.prototype.mixins;return f&&e.prototype.hasOwnProperty("mixins")&&b.mixin(e,f),e};a.each([d.Model,d.Collection,d.Router,d.View],function(c){c.mixin=function(){b.mixin(this,a.toArray(arguments))},c.extend=e})},b.unpatch=function(b){a.each([b.Model,b.Collection,b.Router,b.View],function(a){a.mixin=void 0,a.extend=c})},b}),function(a,b){if("object"==typeof exports)module.exports=b(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],b);else{for(var c="FilteredCollection",d=c.split("."),e=a,f=0;f<d.length-1;f++)void 0===e[d[f]]&&(e[d[f]]={}),e=e[d[f]];e[d[d.length-1]]=b(a._,a.Backbone)}}(this,function(a,b){function c(c){return{underscore:a,backbone:b}[c]}var d=function(){function a(b){var c=a.cache[b];if(!c){var d={};c=a.cache[b]={id:b,exports:d},a.modules[b].call(d,c,d)}return c.exports}return a.cache=[],a.modules=[function(b){function d(){this._filterResultCache={}}function e(a){for(var b in this._filterResultCache)this._filterResultCache.hasOwnProperty(b)&&delete this._filterResultCache[b][a]}function f(a,b){this._filters[a]&&e.call(this,a),this._filters[a]=b,this.trigger("filtered:add",a)}function g(a){delete this._filters[a],e.call(this,a),this.trigger("filtered:remove",a)}function h(a){this._filterResultCache[a.cid]||(this._filterResultCache[a.cid]={});var b=this._filterResultCache[a.cid];for(var c in this._filters)if(this._filters.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=this._filters[c].fn(a)),!b[c]))return!1;return!0}function i(){var a=[];this._superset&&(a=this._superset.filter(o.bind(h,this))),this._collection.reset(a),this.length=this._collection.length}function j(a){if(this._filterResultCache[a.cid]={},h.call(this,a)){if(!this._collection.get(a.cid)){for(var b=this.superset().indexOf(a),c=null,d=b-1;d>=0;d-=1)if(this.contains(this.superset().at(d))){c=this.indexOf(this.superset().at(d))+1;break}c=c||0,this._collection.add(a,{at:c})}}else this._collection.get(a.cid)&&this._collection.remove(a);this.length=this._collection.length}function k(a){this._filterResultCache[a.cid]={},h.call(this,a)||this._collection.get(a.cid)&&this._collection.remove(a)}function l(a){"change:"===a.slice(0,7)&&k.call(this,arguments[1])}function m(a){this.contains(a)&&this._collection.remove(a),this.length=this._collection.length}function n(a){this._superset=a,this._collection=new p.Collection(a.toArray()),q(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset sort",i),this.listenTo(this._superset,"add change",j),this.listenTo(this._superset,"remove",m),this.listenTo(this._superset,"all",l)}var o=c("underscore"),p=c("backbone"),q=a(1),r=a(2),s={defaultFilterName:"__default",filterBy:function(a,b){return b||(b=a,a=this.defaultFilterName),f.call(this,a,r(b)),i.call(this),this
},removeFilter:function(a){return a||(a=this.defaultFilterName),g.call(this,a),i.call(this),this},resetFilters:function(){return this._filters={},d.call(this),this.trigger("filtered:reset"),i.call(this),this},superset:function(){return this._superset},refilter:function(a){return"object"==typeof a&&a.cid?j.call(this,a):(d.call(this),i.call(this)),this},getFilters:function(){return o.keys(this._filters)},hasFilter:function(a){return o.contains(this.getFilters(),a)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};o.extend(n.prototype,s,p.Events),b.exports=n},function(a){function b(a,b){function c(){b.length=a.length}function h(c){var e=d.toArray(arguments),f="change"===c||"change:"===c.slice(0,7);"reset"===c&&(b.models=a.models),d.contains(g,c)?(d.contains(["add","remove","destroy"],c)?e[2]=b:d.contains(["reset","sort"],c)&&(e[1]=b),b.trigger.apply(this,e)):f&&b.contains(e[1])&&b.trigger.apply(this,e)}var i={};return d.each(d.functions(e.Collection.prototype),function(b){d.contains(f,b)||(i[b]=function(){return a[b].apply(a,arguments)})}),d.extend(b,e.Events,i),b.listenTo(a,"all",c),b.listenTo(a,"all",h),b.models=a.models,c(),b}var d=c("underscore"),e=c("backbone"),f=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],g=["add","remove","reset","sort","destroy","sync","request","error"];a.exports=b},function(a){function b(a,b){return function(c){return c.get(a)===b}}function d(a,b){return function(c){return b(c.get(a))}}function e(a,b){return h.isArray(b)||(b=null),{fn:a,keys:b}}function f(a){var c=h.keys(a),f=h.map(c,function(c){var e=a[c];return h.isFunction(e)?d(c,e):b(c,e)}),g=function(a){for(var b=0;b<f.length;b++)if(!f[b](a))return!1;return!0};return e(g,c)}function g(a,b){return h.isFunction(a)?e(a,b):h.isObject(a)?f(a):void 0}var h=c("underscore");a.exports=g}],a(0)}();return d}),function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";var c=a.ChildViewContainer;return a.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;return a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(a,b),a.ChildViewContainer.VERSION="0.1.6",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer}),function(a,b){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery"],function(c,d,e){return a.Backbone=b(c,d,e)}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=b(require("underscore"),require("backbone"),require("jquery")):a.Backbone=b(a._,a.Backbone,a.jQuery)}(this,function(a,b,c){function d(b,d){if(b&&a.isObject(b)){if(a.isFunction(b.getCacheKey))return b.getCacheKey(d);b=d&&d.url?d.url:a.isFunction(b.url)?b.url():b.url}else if(a.isFunction(b))return b(d);return d&&d.data?"string"==typeof d.data?b+"?"+d.data:b+"?"+c.param(d.data):b}function e(a,c,d){c=c||{};var e=b.fetchCache.getCacheKey(a,c),f=!1,g=c.lastSync||(new Date).getTime(),h=!1;e&&c.cache!==!1&&(c.cache||c.prefill)&&(c.expires!==!1&&(f=(new Date).getTime()+1e3*(c.expires||300)),c.prefillExpires!==!1&&(h=(new Date).getTime()+1e3*(c.prefillExpires||300)),b.fetchCache._cache[e]={expires:f,lastSync:g,prefillExpires:h,value:d},b.fetchCache.setLocalStorage())}function f(c,e){return a.isFunction(c)?c=c():c&&a.isObject(c)&&(c=d(c,e)),b.fetchCache._cache[c]}function g(a){return f(a).lastSync}function h(c,e){a.isFunction(c)?c=c():c&&a.isObject(c)&&(c=d(c,e)),delete b.fetchCache._cache[c],b.fetchCache.setLocalStorage()}function i(){if(m&&b.fetchCache.localStorage)try{localStorage.setItem(b.fetchCache.getLocalStorageKey(),JSON.stringify(b.fetchCache._cache))}catch(a){var c=a.code||a.number||a.message;if(22!==c&&1014!==c)throw a;this._deleteCacheWithPriority()}}function j(){if(m&&b.fetchCache.localStorage){var a=localStorage.getItem(b.fetchCache.getLocalStorageKey())||"{}";b.fetchCache._cache=JSON.parse(a)}}function k(a){return window.setTimeout(a,0)}var l={modelFetch:b.Model.prototype.fetch,modelSync:b.Model.prototype.sync,collectionFetch:b.Collection.prototype.fetch},m=function(){var a="undefined"!=typeof window.localStorage;if(a)try{localStorage.setItem("test_support","test_support"),localStorage.removeItem("test_support")}catch(b){a=!1}return a}();return b.fetchCache=b.fetchCache||{},b.fetchCache._cache=b.fetchCache._cache||{},b.fetchCache.enabled=!0,b.fetchCache.priorityFn=function(a,b){return a&&a.expires&&b&&b.expires?a.expires-b.expires:a},b.fetchCache._prioritize=function(){var b=a.values(this._cache).sort(this.priorityFn),c=a.indexOf(a.values(this._cache),b[0]);return a.keys(this._cache)[c]},b.fetchCache._deleteCacheWithPriority=function(){b.fetchCache._cache[this._prioritize()]=null,delete b.fetchCache._cache[this._prioritize()],b.fetchCache.setLocalStorage()},b.fetchCache.getLocalStorageKey=function(){return"backboneCache"},"undefined"==typeof b.fetchCache.localStorage&&(b.fetchCache.localStorage=!0),b.Model.prototype.fetch=function(d){function e(){return d.prefill&&(!d.prefillExpires||m)}function g(){d.parse&&(n=p.parse(n,d)),p.set(n,d),a.isFunction(d.prefillSuccess)&&d.prefillSuccess(p,n,d),p.trigger("cachesync",p,n,d),p.trigger("sync",p,n,d),e()?o.notify(p):(a.isFunction(d.success)&&d.success(p,n,d),o.resolve(p))}if(!b.fetchCache.enabled)return l.modelFetch.apply(this,arguments);d=a.defaults(d||{},{parse:!0});var h=b.fetchCache.getCacheKey(this,d),i=f(h),j=!1,m=!1,n=!1,o=new c.Deferred,p=this;if(i&&(j=i.expires,j=j&&i.expires<(new Date).getTime(),m=i.prefillExpires,m=m&&i.prefillExpires<(new Date).getTime(),n=i.value),!j&&(d.cache||d.prefill)&&n&&(null==d.async&&(d.async=!0),d.async?k(g):g(),!e()))return o;var q=l.modelFetch.apply(this,arguments);return q.done(a.bind(o.resolve,this,this)).done(a.bind(b.fetchCache.setCache,null,this,d)).fail(a.bind(o.reject,this,this)),o.abort=q.abort,o},b.Model.prototype.sync=function(a,c,d){if("read"===a||!b.fetchCache.enabled)return l.modelSync.apply(this,arguments);var e,f,g=c.collection,i=[];for(i.push(b.fetchCache.getCacheKey(c,d)),g&&i.push(b.fetchCache.getCacheKey(g)),e=0,f=i.length;f>e;e++)h(i[e]);return l.modelSync.apply(this,arguments)},b.Collection.prototype.fetch=function(d){function e(){return d.prefill&&(!d.prefillExpires||m)}function g(){p[d.reset?"reset":"set"](n,d),a.isFunction(d.prefillSuccess)&&d.prefillSuccess(p),p.trigger("cachesync",p,n,d),p.trigger("sync",p,n,d),e()?o.notify(p):(a.isFunction(d.success)&&d.success(p,n,d),o.resolve(p))}if(!b.fetchCache.enabled)return l.collectionFetch.apply(this,arguments);d=a.defaults(d||{},{parse:!0});var h=b.fetchCache.getCacheKey(this,d),i=f(h),j=!1,m=!1,n=!1,o=new c.Deferred,p=this;if(i&&(j=i.expires,j=j&&i.expires<(new Date).getTime(),m=i.prefillExpires,m=m&&i.prefillExpires<(new Date).getTime(),n=i.value),!j&&(d.cache||d.prefill)&&n&&(null==d.async&&(d.async=!0),d.async?k(g):g(),!e()))return o;var q=l.collectionFetch.apply(this,arguments);return q.done(a.bind(o.resolve,this,this)).done(a.bind(b.fetchCache.setCache,null,this,d)).fail(a.bind(o.reject,this,this)),o.abort=q.abort,o},j(),b.fetchCache._superMethods=l,b.fetchCache.setCache=e,b.fetchCache.getCache=f,b.fetchCache.getCacheKey=d,b.fetchCache.getLastSync=g,b.fetchCache.clearItem=h,b.fetchCache.setLocalStorage=i,b.fetchCache.getLocalStorage=j,b}),function(a,b){"object"==typeof exports&&"function"==typeof require?module.exports=b(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(c){return b(c||a.Backbone)}):b(Backbone)}(this,function(a){function b(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function c(){return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}function d(a){return a===Object(a)}function e(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}function f(a,b){for(var c in b)a[c]=b[c];return a}function g(a,b){if(null==a)return void 0;var c=a[b];return"function"==typeof c?a[b]():c}return a.LocalStorage=window.Store=function(a,b){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=a,this.serializer=b||{serialize:function(a){return d(a)?JSON.stringify(a):a},deserialize:function(a){return a&&JSON.parse(a)}};var c=this.localStorage().getItem(this.name);this.records=c&&c.split(",")||[]},f(a.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(a){return a.id||0===a.id||(a.id=c(),a.set(a.idAttribute,a.id)),this.localStorage().setItem(this._itemName(a.id),this.serializer.serialize(a)),this.records.push(a.id.toString()),this.save(),this.find(a)},update:function(a){this.localStorage().setItem(this._itemName(a.id),this.serializer.serialize(a));var b=a.id.toString();return e(this.records,b)||(this.records.push(b),this.save()),this.find(a)},find:function(a){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(a.id)))},findAll:function(){for(var a,b,c=[],d=0;d<this.records.length;d++)a=this.records[d],b=this.serializer.deserialize(this.localStorage().getItem(this._itemName(a))),null!=b&&c.push(b);return c},destroy:function(a){this.localStorage().removeItem(this._itemName(a.id));for(var b=a.id.toString(),c=0;c<this.records.length;c++)this.records[c]===b&&this.records.splice(c,1);return this.save(),a},localStorage:function(){return localStorage},_clear:function(){var a=this.localStorage(),b=new RegExp("^"+this.name+"-");a.removeItem(this.name);for(var c in a)b.test(c)&&a.removeItem(c);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(a){return this.name+"-"+a}}),a.LocalStorage.sync=window.Store.sync=a.localSync=function(b,c,d){var e,f,h=g(c,"localStorage")||g(c.collection,"localStorage"),i=a.$?a.$.Deferred&&a.$.Deferred():a.Deferred&&a.Deferred();try{switch(b){case"read":e=void 0!=c.id?h.find(c):h.findAll();break;case"create":e=h.create(c);break;case"update":e=h.update(c);break;case"delete":e=h.destroy(c)}}catch(j){f=22===j.code&&0===h._storageSize()?"Private browsing is unsupported":j.message}return e?(d&&d.success&&("0.9.10"===a.VERSION?d.success(c,e,d):d.success(e)),i&&i.resolve(e)):(f=f?f:"Record Not Found",d&&d.error&&("0.9.10"===a.VERSION?d.error(c,f,d):d.error(f)),i&&i.reject(f)),d&&d.complete&&d.complete(e),i&&i.promise()},a.ajaxSync=a.sync,a.getSyncMethod=function(b,c){var d=c&&c.ajaxSync;return d||!g(b,"localStorage")&&!g(b.collection,"localStorage")?a.ajaxSync:a.localSync},a.sync=function(b,c,d){return a.getSyncMethod(c,d).apply(this,[b,c,d])},a.LocalStorage}),function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(c,d){return a.Marionette=a.Mn=b(a,c,d)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(a,c,d)}else a.Marionette=a.Mn=b(a,a.Backbone,a._)}(this,function(a,b,c){"use strict";!function(a,b){var c=a.ChildViewContainer;return a.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;return a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(a,b),a.ChildViewContainer.VERSION="0.1.5",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer}(b,c),function(a,b){var c=a.Wreqr,d=a.Wreqr={};return a.Wreqr.VERSION="1.3.1",a.Wreqr.noConflict=function(){return a.Wreqr=c,this},d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,b),d.CommandStorage=function(){var c=function(a){this.options=a,this._commands={},b.isFunction(this.initialize)&&this.initialize(a)};return b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),c}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,c,d){var e=this.storage.getCommands(a);b.each(e.instances,function(a){c.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var c,d=a.storageType||this.storageType;c=b.isFunction(d)?new d:d,this.storage=c}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.hasHandler(a)?this.getHandler(a).apply(this,b):void 0}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,b),d.Channel=function(){var c=function(b){this.vent=new a.Wreqr.EventAggregator,this.reqres=new a.Wreqr.RequestResponse,this.commands=new a.Wreqr.Commands,this.channelName=b};return b.extend(c.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(a,b){return this._connect("vent",a,b),this},connectCommands:function(a,b){return this._connect("commands",a,b),this},connectRequests:function(a,b){return this._connect("reqres",a,b),this},_connect:function(a,c,d){if(c){d=d||this;var e="vent"===a?"on":"setHandler";b.each(c,function(c,f){this[a][e](f,b.bind(c,d))},this)}}}),c}(d),d.radio=function(a){var c=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw new Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(b){var c=this._channels[b];return c||(c=new a.Channel(b),this._channels[b]=c),c},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(d[a],function(b){this[a][b]=e(this,a,b)},this)},this)}});var d={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},e=function(a,b,c){return function(d){var e=a._getChannel(d)[b],f=Array.prototype.slice.call(arguments,1);return e[c].apply(e,f)}};return new c}(d),a.Wreqr}(b,c);var d=a.Marionette,e=b.Marionette={};e.VERSION="2.3.1",e.noConflict=function(){return a.Marionette=d,this},b.Marionette=e,e.Deferred=b.$.Deferred,e.extend=b.Model.extend,e.isNodeAttached=function(a){return b.$.contains(document.documentElement,a)},e.getOption=function(a,b){return a&&b?a.options&&void 0!==a.options[b]?a.options[b]:a[b]:void 0},e.proxyGetOption=function(a){return e.getOption(this,a)},e._getValue=function(a,b,d){return c.isFunction(a)&&(a=a.apply(b,d)),a},e.normalizeMethods=function(a){return c.reduce(a,function(a,b,d){return c.isFunction(b)||(b=this[b]),b&&(a[d]=b),a},{},this)},e.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)]})},e.normalizeUIKeys=function(a,b){return c.reduce(a,function(a,c,d){var f=e.normalizeUIString(d,b);return a[f]=c,a},{})},e.normalizeUIValues=function(a,b){return c.each(a,function(d,f){c.isString(d)&&(a[f]=e.normalizeUIString(d,b))}),a},e.actAsCollection=function(a,b){var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];c.each(d,function(d){a[d]=function(){var a=c.values(c.result(this,b)),e=[a].concat(c.toArray(arguments));return c[d].apply(c,e)}})};var f=e.deprecate=function(a,b){c.isObject(a)&&(a=a.prev+" is going to be removed in the future. Please use "+a.next+" instead."+(a.url?" See: "+a.url:"")),void 0!==b&&b||f._cache[a]||(f._warn("Deprecation warning: "+a),f._cache[a]=!0)};f._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},f._cache={},e._triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi;return function(d,e,f){var g=arguments.length<3;g&&(f=e,e=f[0]);var h,i="on"+e.replace(b,a),j=d[i];return c.isFunction(j)&&(h=j.apply(d,g?c.rest(f):f)),c.isFunction(d.trigger)&&(g+f.length>1?d.trigger.apply(d,g?f:[e].concat(c.rest(f,0))):d.trigger(e)),h}}(),e.triggerMethod=function(){return e._triggerMethod(this,arguments)},e.triggerMethodOn=function(a){var b=c.isFunction(a.triggerMethod)?a.triggerMethod:e.triggerMethod;return b.apply(a,c.rest(arguments))},e.MonitorDOMRefresh=function(a){function b(){a._isShown=!0,f()}function d(){a._isRendered=!0,f()}function f(){a._isShown&&a._isRendered&&e.isNodeAttached(a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}a.on({show:b,render:d})},function(a){function b(b,d,e,f){var g=f.split(/\s+/);c.each(g,function(c){var f=b[c];if(!f)throw new a.Error('Method "'+c+'" was configured as an event handler, but does not exist.');b.listenTo(d,e,f)})}function d(a,b,c,d){a.listenTo(b,c,d)}function e(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e)})}function f(a,b,c,d){a.stopListening(b,c,d)}function g(b,d,e,f,g){if(d&&e){if(!c.isObject(e))throw new a.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});e=a._getValue(e,b),c.each(e,function(a,e){c.isFunction(a)?f(b,d,e,a):g(b,d,e,a)})}}a.bindEntityEvents=function(a,c,e){g(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){g(a,b,c,f,e)},a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c)},a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c)}}(e);var g=["description","fileName","lineNumber","name","message","number"];return e.Error=e.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+e.VERSION+"/",constructor:function(a,b){c.isObject(a)?(b=a,a=b.message):b||(b={});var d=Error.call(this,a);c.extend(this,c.pick(d,g),c.pick(b,g)),this.captureStackTrace(),b.url&&(this.url=this.urlRoot+b.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,e.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),e.Error.extend=e.extend,e.Callbacks=function(){this._deferred=e.Deferred(),this._callbacks=[]},c.extend(e.Callbacks.prototype,{add:function(a,b){var d=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b}),d.then(function(c){b&&(c.context=b),a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=e.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),e.Controller=function(a){this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},e.Controller.extend=e.extend,c.extend(e.Controller.prototype,b.Events,{destroy:function(){return e._triggerMethod(this,"before:destroy",arguments),e._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption}),e.Object=function(a){this.options=c.extend({},c.result(this,"options"),a),this.initialize.apply(this,arguments)},e.Object.extend=e.extend,c.extend(e.Object.prototype,b.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents}),e.Region=e.Object.extend({constructor:function(a){if(this.options=a||{},this.el=this.getOption("el"),this.el=this.el instanceof b.$?this.el[0]:this.el,!this.el)throw new e.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),e.Object.call(this,a)},show:function(a,b){if(this._ensureElement()){this._ensureViewIsIntact(a);var c=b||{},d=a!==this.currentView,f=!!c.preventDestroy,g=!!c.forceShow,h=!!this.currentView,i=d&&!f,j=d||g;if(h&&this.triggerMethod("before:swapOut",this.currentView,this,b),this.currentView&&delete this.currentView._parent,i?this.empty():h&&j&&this.currentView.off("destroy",this.empty,this),j){a.once("destroy",this.empty,this),a.render(),a._parent=this,h&&this.triggerMethod("before:swap",a,this,b),this.triggerMethod("before:show",a,this,b),e.triggerMethodOn(a,"before:show",a,this,b),h&&this.triggerMethod("swapOut",this.currentView,this,b);var k=e.isNodeAttached(this.el),l=[],m=c.triggerBeforeAttach||this.triggerBeforeAttach,n=c.triggerAttach||this.triggerAttach;return k&&m&&(l=this._displayedViews(a),this._triggerAttach(l,"before:")),this.attachHtml(a),this.currentView=a,k&&n&&(l=this._displayedViews(a),this._triggerAttach(l)),h&&this.triggerMethod("swap",a,this,b),this.triggerMethod("show",a,this,b),e.triggerMethodOn(a,"show",a,this,b),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(a,b){var d=(b||"")+"attach";c.each(a,function(a){e.triggerMethodOn(a,d,a,this)},this)},_displayedViews:function(a){return c.union([a],c.result(a,"_getNestedViews")||[])},_ensureElement:function(){if(c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new e.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(a){if(!a)throw new e.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a.isDestroyed)throw new e.Error({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'})},getEl:function(a){return b.$(a,e._getValue(this.options.parentEl,this))},attachHtml:function(a){this.$el.contents().detach(),this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return a.off("destroy",this.empty,this),this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&(a.remove(),a.isDestroyed=!0)},attachView:function(a){return this.currentView=a,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);throw new e.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var d=a.regionClass||b,e=c.omit(a,"selector","regionClass");return a.selector&&!e.el&&(e.el=a.selector),new d(e)},_buildRegionFromRegionClass:function(a){return new a}}),e.RegionManager=e.Controller.extend({constructor:function(a){this._regions={},e.Controller.call(this,a),this.addRegions(this.getOption("regions"))},addRegions:function(a,b){return a=e._getValue(a,this,arguments),c.reduce(a,function(a,d,e){return c.isString(d)&&(d={selector:d}),d.selector&&(d=c.defaults({},d,b)),a[e]=this.addRegion(e,d),a},{},this)},addRegion:function(a,b){var c;return c=b instanceof e.Region?b:e.Region.buildRegion(b,e.Region),this.triggerMethod("before:add:region",a,c),c._parent=this,this._store(a,c),this.triggerMethod("add:region",a,c),c},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];return this._remove(a,b),b},removeRegions:function(){var a=this.getRegions();return c.each(this._regions,function(a,b){this._remove(b,a)},this),a},emptyRegions:function(){var a=this.getRegions();return c.invoke(a,"empty"),a},destroy:function(){return this.removeRegions(),e.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b),b.empty(),b.stopListening(),delete b._parent,delete this._regions[a],this._setLength(),this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),e.actAsCollection(e.RegionManager.prototype,"_regions"),e.TemplateCache=function(a){this.templateId=a},c.extend(e.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new e.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=c.toArray(arguments),d=b.length;if(d>0)for(a=0;d>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(e.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var c=b.$(a).html();if(!c||0===c.length)throw new e.Error({name:"NoTemplateError",message:'Could not find template: "'+a+'"'});return c},compileTemplate:function(a){return c.template(a)}}),e.Renderer={render:function(a,b){if(!a)throw new e.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var d=c.isFunction(a)?a:e.TemplateCache.get(a);return d(b)}},e.View=b.View.extend({isDestroyed:!1,constructor:function(a){c.bindAll(this,"render"),a=e._getValue(a,this),this.options=c.extend({},c.result(this,"options"),a),this._behaviors=e.Behaviors(this),b.View.apply(this,arguments),e.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,c.rest(arguments))},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");return b=e._getValue(b,this),c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"_uiBindings");return e.normalizeUIKeys(a,b||c.result(this,"ui"))},normalizeUIValues:function(a){var b=c.result(this,"ui"),d=c.result(this,"_uiBindings");return e.normalizeUIValues(a,d||b)},configureTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return c.reduce(a,function(a,b,c){return a[c]=this._buildViewTrigger(b),a},{},this)}},delegateEvents:function(a){return this._delegateDOMEvents(a),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),c.each(this._behaviors,function(a){a.bindEntityEvents(this.model,a.getOption("modelEvents")),a.bindEntityEvents(this.collection,a.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(a){var d=e._getValue(a||this.events,this);d=this.normalizeUIKeys(d),c.isUndefined(a)&&(this.events=d);var f={},g=c.result(this,"behaviorEvents")||{},h=this.configureTriggers(),i=c.result(this,"behaviorTriggers")||{};c.extend(f,g,d,h,i),b.View.prototype.delegateEvents.call(this,f)},undelegateEvents:function(){return b.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),c.each(this._behaviors,function(a){a.unbindEntityEvents(this.model,a.getOption("modelEvents")),a.unbindEntityEvents(this.collection,a.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new e.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var a=c.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(a)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(a)),this.unbindUIElements(),this.remove(),c.invoke(this._behaviors,"destroy",a),this}},bindUIElements:function(){this._bindUIElements(),c.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);
var a=c.result(this,"_uiBindings");this.ui={},c.each(a,function(a,b){this.ui[b]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements(),c.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(a){var b=c.isObject(a),d=c.defaults({},b?a:{},{preventDefault:!0,stopPropagation:!0}),e=b?d.event:a;return function(a){a&&(a.preventDefault&&d.preventDefault&&a.preventDefault(),a.stopPropagation&&d.stopPropagation&&a.stopPropagation());var b={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,b)}},setElement:function(){var a=b.View.prototype.setElement.apply(this,arguments);return c.invoke(this._behaviors,"proxyViewProperties",this),a},triggerMethod:function(){for(var a=e._triggerMethod,b=a(this,arguments),c=this._behaviors,d=0,f=c&&c.length;f>d;d++)a(c[d],arguments);return b},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var a=this._getImmediateChildren();return a.length?c.reduce(a,function(a,b){return b._getNestedViews?a.concat(b._getNestedViews()):a},a):a},normalizeMethods:e.normalizeMethods,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents}),e.ItemView=e.View.extend({constructor:function(){e.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var a=[this.model||this.collection];return arguments.length&&a.push.apply(a,arguments),this.model?this.serializeModel.apply(this,a):{items:this.serializeCollection.apply(this,a)}},serializeCollection:function(a){return a.toJSON.apply(a,c.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var a=this.getTemplate();if(a!==!1){if(!a)throw new e.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var b=this.serializeData();b=this.mixinTemplateHelpers(b);var c=e.Renderer.render(a,b,this);return this.attachElContent(c),this}},attachElContent:function(a){return this.$el.html(a),this}}),e.CollectionView=e.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};c.isUndefined(this.sort)&&(this.sort=c.isUndefined(b.sort)?!0:b.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),e.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.each(this._bufferedChildren,c.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,c.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(a,b){e.triggerMethodOn(b,a)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},onShowCalled:function(){this.children.each(c.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var a=this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this);a&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getChildView(b),this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var c=new b.Model;this.addEmptyView(c,a),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,b){var d=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(d)&&(d=d.call(this,a,this._emptyViewIndex));var f=this.buildChildView(a,b,d);f._parent=this,this.proxyChildEvents(f),this._isShown&&e.triggerMethodOn(f,"before:show"),this.children.add(f),this.renderChildView(f,this._emptyViewIndex),this._isShown&&e.triggerMethodOn(f,"show")},getChildView:function(){var a=this.getOption("childView");if(!a)throw new e.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return a},addChild:function(a,b,c){var d=this.getOption("childViewOptions");d=e._getValue(d,this,[a,c]);var f=this.buildChildView(a,b,d);return this._updateIndices(f,!0,c),this._addChildView(f,c),f._parent=this,f},_updateIndices:function(a,b,c){this.sort&&(b&&(a._index=c),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1)}))},_addChildView:function(a,b){this.proxyChildEvents(a),this.triggerMethod("before:add:child",a),this.children.add(a),this.renderChildView(a,b),this._isShown&&!this.isBuffering&&e.triggerMethodOn(a,"show"),this.triggerMethod("add:child",a)},renderChildView:function(a,b){return a.render(),this.attachHtml(this,a,b),a},buildChildView:function(a,b,d){var e=c.extend({model:a},d);return new b(e)},removeChildView:function(a){return a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),delete a._parent,this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1)),a},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c,d=this.sort&&b<this.children.length-1;return d&&(c=this.children.find(function(a){return a._index===b+1})),c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},destroy:function(){return this.isDestroyed?void 0:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),e.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var a=this.children.map(c.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=c.toArray(arguments),e=d[0],f=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+e,d.splice(1,0,a),"undefined"!=typeof f&&c.isFunction(f[e])&&f[e].apply(this,d.slice(1)),this.triggerMethod.apply(this,d)},this)},_getImmediateChildren:function(){return c.values(this.children._views)}}),e.CompositeView=e.CollectionView.extend({constructor:function(){e.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(){var a=this.getOption("childView")||this.constructor;return a},serializeData:function(){var a={};return this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments)),a},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&e.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a),this.triggerMethod("before:render:template");var b=this.getTemplate(),c=e.Renderer.render(b,a,this);this.attachElContent(c),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(a){return this.$el.html(a),this},attachBuffer:function(a,b){var c=this.getChildViewContainer(a);c.append(b)},_insertAfter:function(a){var b=this.getChildViewContainer(this,a);b.append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b,c=e.getOption(a,"childViewContainer");if(c){var d=e._getValue(c,a);if(b="@"===d.charAt(0)&&a.ui?a.ui[d.substr(4)]:a.$(d),b.length<=0)throw new e.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer})}else b=a.$el;return a.$childViewContainer=b,b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),e.LayoutView=e.ItemView.extend({regionClass:e.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),e.ItemView.call(this,a)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),e.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),e.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b={regionClass:this.getOption("regionClass"),parentEl:c.partial(c.result,this,"el")};return this.regionManager.addRegions(a,b)},_initializeRegions:function(a){var b;this._initRegionManager(),b=e._getValue(this.regions,this,[a])||{};var d=this.getOption.call(a,"regions");d=e._getValue(d,this,[a]),c.extend(b,d),b=this.normalizeUIValues(b),this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new e.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)}),this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b,this.triggerMethod("add:region",a,b)}),this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)}),this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a],this.triggerMethod("remove:region",a,b)})},_getImmediateChildren:function(){return c.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),e.Behavior=e.Object.extend({constructor:function(a,b){this.view=b,this.defaults=c.result(this,"defaults")||{},this.options=c.extend({},this.defaults,a),e.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(a){this.$el=a.$el,this.el=a.el}}),e.Behaviors=function(a,b){function c(a,d){return b.isObject(a.behaviors)?(d=c.parseBehaviors(a,d||b.result(a,"behaviors")),c.wrap(a,d,b.keys(f)),d):{}}function d(a,c){this._view=a,this._viewUI=b.result(a,"ui"),this._behaviors=c,this._triggers={}}var e=/^(\S+)\s*(.*)$/,f={behaviorTriggers:function(a,b){var c=new d(this,b);return c.buildBehaviorTriggers()},behaviorEvents:function(c,d){var f={},g=this._uiBindings||b.result(this,"ui");return b.each(d,function(c,d){var h={},i=b.clone(b.result(c,"events"))||{},j=c._uiBindings||b.result(c,"ui"),k=b.extend({},g,j);i=a.normalizeUIKeys(i,k);var l=0;b.each(i,function(a,f){var g=f.match(e),i=g[1]+"."+[this.cid,d,l++," "].join(""),j=g[2],k=i+j,m=b.isFunction(a)?a:c[a];h[k]=b.bind(m,c)},this),f=b.extend(f,h)},this),f}};return b.extend(c,{behaviorsLookup:function(){throw new a.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(b,d){return b.behaviorClass?b.behaviorClass:a._getValue(c.behaviorsLookup,this,[b,d])[d]},parseBehaviors:function(a,d){return b.chain(d).map(function(d,e){var f=c.getBehaviorClass(d,e),g=new f(d,a),h=c.parseBehaviors(a,b.result(g,"behaviors"));return[g].concat(h)}).flatten().value()},wrap:function(a,c,d){b.each(d,function(d){a[d]=b.partial(f[d],a[d],c)})}}),b.extend(d.prototype,{buildBehaviorTriggers:function(){return b.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(c,d){var e=b.extend({},this._viewUI,b.result(c,"ui")),f=b.clone(b.result(c,"triggers"))||{};f=a.normalizeUIKeys(f,e),b.each(f,b.bind(this._setHandlerForBehavior,this,c,d))},_setHandlerForBehavior:function(a,b,c,d){var e=d.replace(/^\S+/,function(a){return a+".behaviortriggers"+b});this._triggers[e]=this._view._buildViewTrigger(c)}}),c}(e,c),e.AppRouter=b.Router.extend({constructor:function(a){this.options=a||{},b.Router.apply(this,arguments);var c=this.getOption("appRoutes"),d=this._getController();this.processAppRoutes(d,c),this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){if(c.isFunction(this.onRoute)){var d=c.invert(this.getOption("appRoutes"))[a];this.onRoute(a,d,b)}},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(a,b,d){var f=a[d];if(!f)throw new e.Error('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(f,a))},getOption:e.proxyGetOption,triggerMethod:e.triggerMethod,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents}),e.Application=e.Object.extend({constructor:function(a){this._initializeRegions(a),this._initCallbacks=new e.Callbacks,this.submodules={},c.extend(this,a),this._initChannel(),e.Object.call(this,a)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("before:start",a),this._initCallbacks.run(a,this),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var d=e.Module.getClass(b),f=c.toArray(arguments);return f.unshift(this),d.create.apply(d,f)},getRegionManager:function(){return new e.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var d=e.getOption(a,"regions");return c.isFunction(d)&&(d=d.call(this,a)),c.extend(b,d),this.addRegions(b),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){e._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b,e._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){e._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(a){delete this[a],e._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global",this.channel=c.result(this,"channel")||b.Wreqr.radio.channel(this.channelName),this.vent=c.result(this,"vent")||this.channel.vent,this.commands=c.result(this,"commands")||this.channel.commands,this.reqres=c.result(this,"reqres")||this.channel.reqres}}),e.Module=function(a,b,d){this.moduleName=a,this.options=c.extend({},this.options,d),this.initialize=d.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,c.isFunction(this.initialize)&&this.initialize(a,b,this.options)},e.Module.extend=e.extend,c.extend(e.Module.prototype,b.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),c.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var f=c.flatten([this,this.app,b,e,b.$,c,d]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new e.Callbacks,this._finalizerCallbacks=new e.Callbacks},triggerMethod:e.triggerMethod}),c.extend(e.Module,{create:function(a,b,d){var e=a,f=c.rest(arguments,3);b=b.split(".");var g=b.length,h=[];return h[g-1]=d,c.each(b,function(b,c){var g=e;e=this._getModule(g,b,a,d),this._addModuleDefinition(g,e,h[c],f)},this),e},_getModule:function(a,b,d,e){var f=c.extend({},e),g=this.getClass(e),h=a[b];return h||(h=new g(b,d,f),a[b]=h,a.submodules[b]=h),h},getClass:function(a){var b=e.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c),f=this._getStartWithParent(c,b);e&&b.addDefinition(e,d),this._addStartWithParent(a,b,f)},_getStartWithParent:function(a,b){var d;return c.isFunction(a)&&a.prototype instanceof e.Module?(d=b.constructor.prototype.startWithParent,c.isUndefined(d)?!0:d):c.isObject(a)?(d=a.startWithParent,c.isUndefined(d)?!0:d):!0},_getDefine:function(a){return!c.isFunction(a)||a.prototype instanceof e.Module?c.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),e}),function(a){"function"==typeof define&&define.amd?define(["backbone","underscore"],a):"object"==typeof exports?module.exports=a(require("backbone"),require("underscore")):a(window.Backbone,window._)}(function(a,b){var c=a.Router.prototype.route,d=function(){};b.extend(a.Router.prototype,{before:d,after:d,route:function(a,e,f){f||(f=this[e]);var g=b.bind(function(){var c,e=[a,b.toArray(arguments)];if(c=b.isFunction(this.before)?this.before:"undefined"!=typeof this.before[a]?this.before[a]:d,c.apply(this,e)!==!1){f&&f.apply(this,arguments);var g;g=b.isFunction(this.after)?this.after:"undefined"!=typeof this.after[a]?this.after[a]:d,g.apply(this,e)}},this);return c.call(this,a,e,g)}})}),function(a,b,c,d,e,f,g){"use strict";"object"==typeof d?e.exports=f(c("underscore"),c("backbone"),c("jquery")):"function"==typeof b&&b.amd?b(["underscore","backbone","jquery"],function(b,c,d){return b=b===g?a._:b,c=c===g?a.Backbone:c,d=d===g?a.$:d,a.Backbone=f(b,c,d)}):a.returnExportsGlobal=f(a._,a.Backbone,a.$)}(this,this.define,this.require,this.exports,this.module,function(a,b,c,d){"use strict";var e=function(b){this.options=b!==d?b:{},this.namespaceDelimiter=b!==d&&b.namespaceDelimiter!==d?b.namespaceDelimiter:this.namespaceDelimiter,this.contentType=b!==d&&b.contentType!==d?b.contentType:this.contentType,a.bindAll(this)},f=b.Model.prototype.constructor,g=b.sync,h={};return e.prototype={options:{},charset:"iso-8859-1",namespace:"",namespaceDelimiter:"/",contentType:"application/json",url:null,responseID:null,exceptions:{404:{code:-1,message:"404"},500:{code:-2,message:"500"},typeMissmatch:{code:-3,message:"Type missmatch"},badResponseId:{code:-4,message:"Bad response ID"},noResponse:{code:-5,message:"No response"},noDefError:{code:-6,message:"No error defined"},renderError:function(a,b){return{code:b!==d?-7:b,message:a?"No error defined":a}}},onSuccess:function(b,c,e){if(a.isFunction(b)===!0){if(null===e||e===d)return this.handleExceptions(this.exceptions.noResponse),this;null!==e&&c!==String(e.id)&&this.handleExceptions(this.exceptions.badResponseId),b.apply(this,[e.result,e.error])}else this.onError(e)},onError:function(a,b){return null===b||b===d?(this.handleExceptions(this.exceptions.noResponse),this):void this.handleExceptions(null!==b.error&&d!==b.error?b.error:this.exceptions.noDefError)},query:function(b,e,f){var g=String((new Date).getTime()),h=null;return this.responseID=g,h=a.isArray(e)&&a.isString(b)?c.ajax({contentType:this.contentType+"; charset="+this.charset,type:"POST",dataType:"json",url:this.url,data:JSON.stringify({jsonrpc:"2.0",method:this.namespace+this.namespaceDelimiter+b,id:g,params:e}),statusCode:{404:a.bind(function(){this.handleExceptions(this.exceptions[404])},this),500:a.bind(function(){this.handleExceptions(this.exceptions[500])},this)},success:a.bind(function(a,b,c){null!==a&&a.error!==d?this.onError(f,a,b,c):this.onSuccess(f,g,a,b,c)},this),error:a.bind(function(a,b,c){404!==a.status&&500!==a.status&&this.onError(f,a,b,c)},this)}):this.handleExceptions(this.exceptions.typeMissmatch)},checkMethods:function(c,e,f,g,i,j,k){var l=null,m=!1,n=null,o=[],p={},q=null;return g="delete"===g?"remove":g,a.isArray(f.methods[g])||a.isFunction(f.methods[g])?(a.isFunction(f.methods[g])?(a.isString(h[f.get("_rpcId")])||a.each(h[f.get("_rpcId")],function(a,b){f.get(b)!==a&&(p[b]=!0)}),h[f.get("_rpcId")]=f.toJSON(),l=a.bind(f.methods[g],f)(p,i)):l=f.methods[g],a.isArray(l[0])&&(m=!0),m!==!0?(q=a.clone(l),n=q.shift(),q.length>0?a.each(q,function(c){""===c?o.push(""):f instanceof b.Collection?f[c]!==d?o.push(a.isFunction(f[c])?f[c]():f[c]):i[c]!==d&&o.push(i[c]):f.get(c)!==d?o.push(f.get(c)):i[c]!==d&&o.push(i[c])}):o=[],c(n,o,j,k)):(a.each(l,function(b){var d=a.clone(b);return n=null,o=[],n=d.shift(),a.each(d,function(a){o.push(f.get(a))}),c(n,o,j,k)}),null)):this.handleExceptions(this.exceptions.typeMissmatch)},invoke:function(c,e,f){var g={success:function(b){e.trigger("called:"+c,e,b),f!==d&&a.isFunction(f.success)&&f.success(e,b)},error:function(b,e){b.trigger("error",b,e),b.trigger("error:"+c,b,e),f!==d&&a.isFunction(f.error)&&f.error(b,e)}};return b.sync(c,e,g),this},defaultExceptionHandler:function(a){throw"Error code: "+a.code+" - message: "+a.message},handleExceptions:function(b){var c=a.isFunction(this.options.exceptionHandler)?this.options.exceptionHandler:this.defaultExceptionHandler;return c.call(this,b),this}},b.Rpc=e,b.Model=b.Model.extend({constructor:function(){this.rpc!==d&&a.isFunction(this.rpc.invoke)===!0&&this.methods!==d&&a.each(this.methods,a.bind(function(b,c){1!=={read:1,create:1,remove:1,update:1}[c]&&(this[c]=a.bind(function(a){return this.rpc.invoke(c,this,a),this},this))},this)),f.apply(this,arguments)}}),b.sync=function(c){var e=null,f=function(g,i,j){var k=function(c,e){return null!==e&&e!==d?(j.error(i,e),this):(i instanceof b.Collection&&c!==d&&null!==c&&("object"==typeof c[0]?a.each(c,function(b,d){b._rpcId=a.uniqueId("rpc_"),c[d]=b,h[b._rpcId]=b}):a.each(c,function(a,b){h[b]=a})),i instanceof b.Model&&c!==d&&null!==c&&(c._rpcId=a.uniqueId("rpc_"),h[c._rpcId]=c),(c===d||null===c)&&(c=[]),i.parsers!==d&&i.parsers[g]!==d&&a.isFunction(i.parsers[g])&&i.parsers[g].apply(i,[c]),void j.success(c))},l=function(a){j.error(i,a)};if(i.rpc instanceof c){if(e=i.rpc,e.url=a.isFunction(i.url)?i.url():i.url,a.isString(i.namespace)===!0&&(e.namespace=i.namespace),i.methods===d)throw"Backbone.Rpc Error: No Method(s) given!";return"object"!=typeof i.params&&(i.params={}),e.checkMethods(e.query,i.params,i,g,j,k,l)}return f.previous.apply(i,arguments)};return f.previous=g,f}(e),b}),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","backbone","jquery"],function(a,c,d){return b(a,c,d)});else if("undefined"!=typeof exports){var c=require("underscore"),d=require("backbone"),e=require("jquery");module.exports=b(c,d,e)}else b(a._,a.Backbone,a.jQuery)}(this,function(a,b,c){"use strict";var d=b.Syphon,e=b.Syphon={};e.VERSION="0.5.0",e.noConflict=function(){return b.Syphon=d,this},e.ignoredTypes=["button","submit","reset","fieldset"],e.serialize=function(b,d){var e={},h=i(d),k=f(b,h);return a.each(k,function(a){var b=c(a),d=g(b),f=h.keyExtractors.get(d),i=f(b),k=h.inputReaders.get(d),l=k(b),m=h.keyAssignmentValidators.get(d);if(m(b,i,l)){var n=h.keySplitter(i);e=j(e,n,l)}}),e},e.deserialize=function(b,d,e){var h=i(e),j=f(b,h),l=k(h,d);a.each(j,function(a){var b=c(a),d=g(b),e=h.keyExtractors.get(d),f=e(b),i=h.inputWriters.get(d),j=l[f];i(b,j)})};var f=function(b,d){var e=h(b),f=e.elements;return f=a.reject(f,function(b){var e,f=g(b),h=d.keyExtractors.get(f),i=h(c(b)),j=a.include(d.ignoredTypes,f),k=a.include(d.include,i),l=a.include(d.exclude,i);return e=k?!1:d.include?!0:l||j})},g=function(a){var b,d=c(a),e=d[0].tagName,f=e;return"input"===e.toLowerCase()&&(b=d.attr("type"),f=b?b:"text"),f.toLowerCase()},h=function(b){return a.isUndefined(b.$el)&&"form"===b.tagName.toLowerCase()?b:b.$el.is("form")?b.el:b.$("form")[0]},i=function(b){var c=a.clone(b)||{};return c.ignoredTypes=a.clone(e.ignoredTypes),c.inputReaders=c.inputReaders||e.InputReaders,c.inputWriters=c.inputWriters||e.InputWriters,c.keyExtractors=c.keyExtractors||e.KeyExtractors,c.keySplitter=c.keySplitter||e.KeySplitter,c.keyJoiner=c.keyJoiner||e.KeyJoiner,c.keyAssignmentValidators=c.keyAssignmentValidators||e.KeyAssignmentValidators,c},j=function(b,c,d){if(!c)return b;var e=c.shift();return b[e]||(b[e]=a.isArray(e)?[]:{}),0===c.length&&(a.isArray(b[e])?b[e].push(d):b[e]=d),c.length>0&&j(b[e],c,d),b},k=function(b,c,d){var e={};return a.each(c,function(c,f){var g={};d&&(f=b.keyJoiner(d,f)),a.isArray(c)?(f+="[]",g[f]=c):a.isObject(c)?g=k(b,c,f):g[f]=c,a.extend(e,g)}),e},l=e.TypeRegistry=function(){this.registeredTypes={}};l.extend=b.Model.extend,a.extend(l.prototype,{get:function(a){return this.registeredTypes[a]||this.registeredTypes["default"]},register:function(a,b){this.registeredTypes[a]=b},registerDefault:function(a){this.registeredTypes["default"]=a},unregister:function(a){this.registeredTypes[a]&&delete this.registeredTypes[a]}});var m=e.KeyExtractorSet=l.extend(),n=e.KeyExtractors=new m;n.registerDefault(function(a){return a.prop("name")||""});var o=e.InputReaderSet=l.extend(),p=e.InputReaders=new o;p.registerDefault(function(a){return a.val()}),p.register("checkbox",function(a){return a.prop("checked")});var q=e.InputWriterSet=l.extend(),r=e.InputWriters=new q;r.registerDefault(function(a,b){a.val(b)}),r.register("checkbox",function(a,b){a.prop("checked",b)}),r.register("radio",function(a,b){a.prop("checked",a.val()===b.toString())});var s=e.KeyAssignmentValidatorSet=l.extend(),t=e.KeyAssignmentValidators=new s;return t.registerDefault(function(){return!0}),t.register("radio",function(a){return a.prop("checked")}),e.KeySplitter=function(a){var b,c=a.match(/[^\[\]]+/g);return a.indexOf("[]")===a.length-2&&(b=c.pop(),c.push([b])),c},e.KeyJoiner=function(a,b){return a+"["+b+"]"},b.Syphon}),function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";var c=a.Wreqr,d=a.Wreqr={};return a.Wreqr.VERSION="1.3.2",a.Wreqr.noConflict=function(){return a.Wreqr=c,this},d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){return b.callback.apply(b.context,arguments)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,b),d.CommandStorage=function(){var c=function(a){this.options=a,this._commands={},b.isFunction(this.initialize)&&this.initialize(a)};return b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),c}(),d.Commands=function(a,b){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),a.Handlers.prototype.constructor.apply(this,arguments)},execute:function(a){a=arguments[0];var c=b.rest(arguments);this.hasHandler(a)?this.getHandler(a).apply(this,c):this.storage.addCommand(a,c)},_executeCommands:function(a,c,d){var e=this.storage.getCommands(a);b.each(e.instances,function(a){c.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var c,d=a.storageType||this.storageType;c=b.isFunction(d)?new d:d,this.storage=c}})}(d,b),d.RequestResponse=function(a,b){return a.Handlers.extend({request:function(a){return this.hasHandler(a)?this.getHandler(a).apply(this,b.rest(arguments)):void 0}})}(d,b),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,b),d.Channel=function(){var c=function(b){this.vent=new a.Wreqr.EventAggregator,this.reqres=new a.Wreqr.RequestResponse,this.commands=new a.Wreqr.Commands,this.channelName=b};return b.extend(c.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(a,b){return this._connect("vent",a,b),this},connectCommands:function(a,b){return this._connect("commands",a,b),this},connectRequests:function(a,b){return this._connect("reqres",a,b),this},_connect:function(a,c,d){if(c){d=d||this;var e="vent"===a?"on":"setHandler";b.each(c,function(c,f){this[a][e](f,b.bind(c,d))
},this)}}}),c}(d),d.radio=function(a,b){var c=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw new Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(b){var c=this._channels[b];return c||(c=new a.Channel(b),this._channels[b]=c),c},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(d[a],function(b){this[a][b]=e(this,a,b)},this)},this)}});var d={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},e=function(a,c,d){return function(e){var f=a._getChannel(e)[c];return f[d].apply(f,b.rest(arguments))}};return new c}(d,b),a.Wreqr}),function(a){var b={onBeforeRender:function(){this._isRendering=!0},onRender:function(){this.footerElement=this.footer?this.$el.find(this.footer)[0]:null,delete this._isRendering},appendHtml:function(a,b,c){function d(b){for(var c=1,d=e(b+1);!d&&b+c+1<a.collection.length-1;)c+=1,d=e(b+c);return d}function e(b){if(!(b>=a.collection.length)){var c=a.children.findByModel(a.collection.at(b));return c}}var f=this.footerElement,g=a.itemViewContainer||a.el,h=a.itemViewContainer?$(a.itemViewContainer):a.$el;if(this._isRendering)return void(f?b.$el.insertBefore(f):h.append(b.el));var i;return 0===c?(i=d(0),void(i?b.$el.insertBefore(i.el):f?b.$el.insertBefore(f):b.$el.appendTo(g))):c==a.collection.length-1?void(f?b.$el.insertBefore(f):b.$el.appendTo(g)):(i=e(c-1),void(i?b.$el.insertAfter(i.$el):(i=d(c),i?b.$el.insertBefore(i.el):f?b.$el.insertBefore(f):b.$el.appendTo(g))))}};return a.SortedMixin=b,"function"==typeof define&&define.amd&&define([],function(){return b}),b}(window),function(a,b){function c(a){return l.PF.compile(a||"nplurals=2; plural=(n != 1);")}function d(a,b){this._key=a,this._i18n=b}var e=Array.prototype,f=Object.prototype,g=e.slice,h=f.hasOwnProperty,i=e.forEach,j={},k={forEach:function(a,b,c){var d,e,f;if(null!==a)if(i&&a.forEach===i)a.forEach(b,c);else if(a.length===+a.length){for(d=0,e=a.length;e>d;d++)if(d in a&&b.call(c,a[d],d,a)===j)return}else for(f in a)if(h.call(a,f)&&b.call(c,a[f],f,a)===j)return},extend:function(a){return this.forEach(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a}},l=function(a){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=k.extend({},this.defaults,a),this.textdomain(this.options.domain),a.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+a.domain+"`")};l.context_delimiter=String.fromCharCode(4),k.extend(d.prototype,{onDomain:function(a){return this._domain=a,this},withContext:function(a){return this._context=a,this},ifPlural:function(a,b){return this._val=a,this._pkey=b,this},fetch:function(a){return"[object Array]"!={}.toString.call(a)&&(a=[].slice.call(arguments,0)),(a&&a.length?l.sprintf:function(a){return a})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),a)}}),k.extend(l.prototype,{translate:function(a){return new d(a,this)},textdomain:function(a){return a?void(this._textdomain=a):this._textdomain},gettext:function(a){return this.dcnpgettext.call(this,b,b,a)},dgettext:function(a,c){return this.dcnpgettext.call(this,a,b,c)},dcgettext:function(a,c){return this.dcnpgettext.call(this,a,b,c)},ngettext:function(a,c,d){return this.dcnpgettext.call(this,b,b,a,c,d)},dngettext:function(a,c,d,e){return this.dcnpgettext.call(this,a,b,c,d,e)},dcngettext:function(a,c,d,e){return this.dcnpgettext.call(this,a,b,c,d,e)},pgettext:function(a,c){return this.dcnpgettext.call(this,b,a,c)},dpgettext:function(a,b,c){return this.dcnpgettext.call(this,a,b,c)},dcpgettext:function(a,b,c){return this.dcnpgettext.call(this,a,b,c)},npgettext:function(a,c,d,e){return this.dcnpgettext.call(this,b,a,c,d,e)},dnpgettext:function(a,b,c,d,e){return this.dcnpgettext.call(this,a,b,c,d,e)},dcnpgettext:function(a,b,d,e,f){e=e||d,a=a||this._textdomain;var g;if(!this.options)return g=new l,g.dcnpgettext.call(g,void 0,void 0,d,e,f);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[a])throw new Error("Domain `"+a+"` was not found.");if(!this.options.locale_data[a][""])throw new Error("No locale meta information provided.");if(!d)throw new Error("No translation key found.");var h,i,j,k=b?b+l.context_delimiter+d:d,m=this.options.locale_data,n=m[a],o=(m.messages||this.defaults.locale_data.messages)[""],p=n[""].plural_forms||n[""]["Plural-Forms"]||n[""]["plural-forms"]||o.plural_forms||o["Plural-Forms"]||o["plural-forms"];if(void 0===f)j=0;else{if("number"!=typeof f&&(f=parseInt(f,10),isNaN(f)))throw new Error("The number that was passed in is not a number.");j=c(p)(f)}if(!n)throw new Error("No domain named `"+a+"` could be found.");return h=n[k],!h||j>h.length?(this.options.missing_key_callback&&this.options.missing_key_callback(k,a),i=[d,e],this.options.debug===!0&&console.log(i[c(p)(f)]),i[c()(f)]):(i=h[j],i?i:(i=[d,e],i[c()(f)]))}});var m=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,f,g,h,i,j,k,l=1,n=c.length,o="",p=[];for(f=0;n>f;f++)if(o=a(c[f]),"string"===o)p.push(c[f]);else if("array"===o){if(h=c[f],h[2])for(e=d[l],g=0;g<h[2].length;g++){if(!e.hasOwnProperty(h[2][g]))throw m('[sprintf] property "%s" does not exist',h[2][g]);e=e[h[2][g]]}else e=h[1]?d[h[1]]:d[l++];if(/[^s]/.test(h[8])&&"number"!=a(e))throw m("[sprintf] expecting number but found %s",a(e));switch(("undefined"==typeof e||null===e)&&(e=""),h[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=h[7]?e.toExponential(h[7]):e.toExponential();break;case"f":e=h[7]?parseFloat(e).toFixed(h[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&h[7]?e.substring(0,h[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(h[8])&&h[3]&&e>=0?"+"+e:e,j=h[4]?"0"==h[4]?"0":h[4].charAt(1):" ",k=h[6]-String(e).length,i=h[6]?b(j,k):"",p.push(h[5]?e+i:i+e)}return p.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),n=function(a,b){return b.unshift(a),m.apply(null,b)};l.parse_plural=function(a,b){return a=a.replace(/n/g,b),l.parse_expression(a)},l.sprintf=function(a,b){return"[object Array]"=={}.toString.call(b)?n(a,[].slice.call(b)):m.apply(this,[].slice.call(arguments))},l.prototype.sprintf=function(){return l.sprintf.apply(this,arguments)},l.PF={},l.PF.parse=function(a){var b=l.PF.extractPluralExpr(a);return l.PF.parser.parse.call(l.PF.parser,b)},l.PF.compile=function(a){function b(a){return a===!0?1:a?a:0}var c=l.PF.parse(a);return function(a){return b(l.PF.interpreter(c)(a))}},l.PF.interpreter=function(a){return function(b){switch(a.type){case"GROUP":return l.PF.interpreter(a.expr)(b);case"TERNARY":return l.PF.interpreter(a.expr)(b)?l.PF.interpreter(a.truthy)(b):l.PF.interpreter(a.falsey)(b);case"OR":return l.PF.interpreter(a.left)(b)||l.PF.interpreter(a.right)(b);case"AND":return l.PF.interpreter(a.left)(b)&&l.PF.interpreter(a.right)(b);case"LT":return l.PF.interpreter(a.left)(b)<l.PF.interpreter(a.right)(b);case"GT":return l.PF.interpreter(a.left)(b)>l.PF.interpreter(a.right)(b);case"LTE":return l.PF.interpreter(a.left)(b)<=l.PF.interpreter(a.right)(b);case"GTE":return l.PF.interpreter(a.left)(b)>=l.PF.interpreter(a.right)(b);case"EQ":return l.PF.interpreter(a.left)(b)==l.PF.interpreter(a.right)(b);case"NEQ":return l.PF.interpreter(a.left)(b)!=l.PF.interpreter(a.right)(b);case"MOD":return l.PF.interpreter(a.left)(b)%l.PF.interpreter(a.right)(b);case"VAR":return b;case"NUM":return a.val;default:throw new Error("Invalid Token found.")}}},l.PF.extractPluralExpr=function(a){a=a.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(a)||(a=a.concat(";"));var b,c=/nplurals\=(\d+);/,d=/plural\=(.*);/,e=a.match(c),f={};if(!(e.length>1))throw new Error("nplurals not found in plural_forms string: "+a);if(f.nplurals=e[1],a=a.replace(c,""),b=a.match(d),!(b&&b.length>1))throw new Error("`plural` expression not found: "+a);return b[1]},l.PF.parser=function(){var a={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return{type:"GROUP",expr:f[g-1]};case 2:this.$={type:"TERNARY",expr:f[g-4],truthy:f[g-2],falsey:f[g]};break;case 3:this.$={type:"OR",left:f[g-2],right:f[g]};break;case 4:this.$={type:"AND",left:f[g-2],right:f[g]};break;case 5:this.$={type:"LT",left:f[g-2],right:f[g]};break;case 6:this.$={type:"LTE",left:f[g-2],right:f[g]};break;case 7:this.$={type:"GT",left:f[g-2],right:f[g]};break;case 8:this.$={type:"GTE",left:f[g-2],right:f[g]};break;case 9:this.$={type:"NEQ",left:f[g-2],right:f[g]};break;case 10:this.$={type:"EQ",left:f[g-2],right:f[g]};break;case 11:this.$={type:"MOD",left:f[g-2],right:f[g]};break;case 12:this.$={type:"GROUP",expr:f[g-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(a)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(a){throw new Error(a)},parse:function(a){function b(a){e.length=e.length-2*a,f.length=f.length-a,g.length=g.length-a}function c(){var a;return a=d.lexer.lex()||1,"number"!=typeof a&&(a=d.symbols_[a]||a),a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var o=this.lexer.yylloc;g.push(o),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,q,r,s,t,u,v,w,x,y={};;){if(r=e[e.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(null==p&&(p=c()),s=h[r]&&h[r][p]),"undefined"==typeof s||!s.length||!s[0]){if(!l){x=[];for(u in h[r])this.terminals_[u]&&u>2&&x.push("'"+this.terminals_[u]+"'");var z="";z=this.lexer.showPosition?"Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+this.terminals_[p]+"'":"Parse error on line "+(j+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(z,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:o,expected:x})}if(3==l){if(p==n)throw new Error(z||"Parsing halted.");k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,p=c()}for(;;){if(m.toString()in h[r])break;if(0==r)throw new Error(z||"Parsing halted.");b(1),r=e[e.length-1]}q=p,p=m,r=e[e.length-1],s=h[r]&&h[r][m],l=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:e.push(p),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(s[1]),p=null,q?(p=q,q=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,l>0&&l--);break;case 2:if(v=this.productions_[s[1]][1],y.$=f[f.length-v],y._$={first_line:g[g.length-(v||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(v||1)].first_column,last_column:g[g.length-1].last_column},t=this.performAction.call(y,i,k,j,this.yy,s[1],f,g),"undefined"!=typeof t)return t;v&&(e=e.slice(0,-1*v*2),f=f.slice(0,-1*v),g=g.slice(0,-1*v)),e.push(this.productions_[s[1]][0]),f.push(y.$),g.push(y._$),w=h[e[e.length-2]][e[e.length-1]],e.push(w);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parseError)throw new Error(a);this.yy.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),e=0;e<d.length;e++)if(b=this._input.match(this.rules[d[e]]))return c=b[0].match(/\n.*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,d[e],this.conditionStack[this.conditionStack.length-1]),a?a:void 0;return""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.performAction=function(a,b,c,d){switch(c){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},a.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],a.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},a}();return a.lexer=b,a}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports.Jed=l):("function"==typeof define&&define.amd&&define(function(){return l}),a.Jed=l)}(this),function(a){function b(a){return{jsonrpc:"2.0",method:a.method||"",params:a.params||{},id:g++}}function c(c){var d=a.isArray(c)?c.map(b):b(c);return JSON.stringify(d)}function d(a){return a.sort(e)}function e(a,b){return a.id<b.id?-1:1}function f(b,e){var f=new a.Deferred;e=e||{};var g=e.success||h,i=e.error||h;delete e.success,delete e.error;var j=a.isArray(b),k=a.extend({url:(j?b[0].url:b.url)||a.jsonrpc.defaultUrl,contentType:"application/json",dataType:"text",dataFilter:function(a){return JSON.parse(a)},type:"POST",processData:!1,data:c(b),success:function(a){if(j){var b=d(a);return g(b),void f.resolve(b)}if(a.hasOwnProperty("error"))return i(a.error),void f.reject(a.error);if(a.hasOwnProperty("result"))return g(a.result),void f.resolve(a.result);throw"Invalid response returned"},error:function(a,b,c){var d=null;if("timeout"===c)d={status:b,code:-32e3,message:"Request Timeout",data:null};else try{var e=JSON.parse(a.responseText);d=e.error}catch(g){d={status:b,code:-32603,message:c,data:a.responseText}}i(d),f.reject(d)}},e);return a.ajax(k),f.promise()}var g=1,h=function(){};a.extend({jsonrpc:f}),a.jsonrpc.defaultUrl="/jsonrpc"}(jQuery),!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document),function(a){"use strict";function b(a,b){return Math.round(a/b)*b}function c(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function d(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function e(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function f(a){return Math.max(Math.min(a,100),0)}function g(b){return a.isArray(b)?b:[b]}function h(a){var b=a.split(".");return b.length>1?b[1].length:0}function i(a,b){return 100/(b-a)}function j(a,b){return 100*b/(a[1]-a[0])}function k(a,b){return j(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function l(a,b){return b*(a[1]-a[0])/100+a[0]}function m(a,b){for(var c=1;a>=b[c];)c+=1;return c}function n(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=m(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+k([d,e],c)/i(f,g)}function o(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=m(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],l([d,e],(c-f)*i(f,g))}function p(a,c,d,e){if(100===e)return e;var f,g,h=m(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):c[h-1]?a[h-1]+b(e-a[h-1],c[h-1]):e}function q(a,b,d){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!c(e)||!c(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");d.xPct.push(e),d.xVal.push(b[0]),e?d.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(d.xSteps[0]=b[1])}function r(a,b,c){return b?void(c.xSteps[a]=j([c.xVal[a],c.xVal[a+1]],b)/i(c.xPct[a],c.xPct[a+1])):!0}function s(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)q(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)r(e,this.xNumSteps[e],this)}function t(a,b){if(!c(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function u(b,c){if("object"!=typeof c||a.isArray(c))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new s(c,b.snap,b.dir,b.singleStep)}function v(b,c){if(c=g(c),!a.isArray(c)||!c.length||c.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");b.handles=c.length,b.start=c}function w(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function x(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function y(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function z(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function A(a,b){if(!c(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function B(a,b){if(!c(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function C(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function D(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function E(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function F(b){var c,d={margin:0,limit:0,animate:!0,format:V};return c={step:{r:!1,t:t},start:{r:!0,t:v},connect:{r:!0,t:y},direction:{r:!0,t:C},snap:{r:!1,t:w},animate:{r:!1,t:x},range:{r:!0,t:u},orientation:{r:!1,t:z},margin:{r:!1,t:A},limit:{r:!1,t:B},behaviour:{r:!0,t:D},format:{r:!1,t:E}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(c,function(a,c){if(void 0===b[a]){if(c.r)throw new Error("noUiSlider: '"+a+"' is required.");return!0}c.t(d,b[a])}),d.style=d.ort?"top":"left",d}function G(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[f(d),f(e)]):[d,e]}function H(a){a.preventDefault();var b,c,d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(f=!0),a.originalEvent&&(a=a.originalEvent),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(f||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e,g}function I(b,c){var d=a("<div><div/></div>").addClass(U[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(U[3]+" "+U[3]+e[c]),d}function J(a,b,c){switch(a){case 1:b.addClass(U[7]),c[0].addClass(U[6]);break;case 3:c[1].addClass(U[6]);case 2:c[0].addClass(U[7]);case 0:b.addClass(U[6])}}function K(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(I(b,d).appendTo(c));return e}function L(b,c,d){return d.addClass([U[0],U[8+b],U[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(U[1])}function M(b,c,d){function i(){return C[["width","height"][c.ort]]()}function j(a){var b,c=[E.val()];for(b=0;b<a.length;b+=1)E.trigger(a[b],c)}function k(a){return 1===a.length?a[0]:c.dir?a.reverse():a}function l(a){return function(b,c){E.val([a?null:c,a?c:null],!0)}}function m(b){var c=a.inArray(b,N);E[0].linkAPI&&E[0].linkAPI[b]&&E[0].linkAPI[b].change(M[c],D[c].children(),E)}function n(b,d){var e=a.inArray(b,N);return d&&d.appendTo(D[e].children()),c.dir&&c.handles>1&&(e=1===e?0:1),l(e)}function o(){var a,b;for(a=0;a<N.length;a+=1)this.linkAPI&&this.linkAPI[b=N[a]]&&this.linkAPI[b].reconfirm(b)}function p(a,b,d,e){return a=a.replace(/\s/g,S+" ")+S,b.on(a,function(a){return E.attr("disabled")?!1:E.hasClass(U[14])?!1:(a=H(a),a.calcPoint=a.points[c.ort],void d(a,e))})}function q(a,b){var c,d=b.handles||D,e=!1,f=100*(a.calcPoint-b.start)/i(),g=d[0][0]!==D[0][0]?1:0;c=G(f,b.positions,d.length>1),e=v(d[0],c[g],1===d.length),d.length>1&&(e=v(d[1],c[g?0:1],!1)||e),e&&j(["slide"])}function r(b){a("."+U[15]).removeClass(U[15]),b.cursor&&a("body").css("cursor","").off(S),Q.off(S),E.removeClass(U[12]),j(["set","change"])}function s(b,c){1===c.handles.length&&c.handles[0].children().addClass(U[15]),b.stopPropagation(),p(T.move,Q,q,{start:b.calcPoint,handles:c.handles,positions:[F[0],F[D.length-1]]}),p(T.end,Q,r,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),D.length>1&&E.addClass(U[12]),a("body").on("selectstart"+S,!1))}function t(b){var d,f=b.calcPoint,g=0;b.stopPropagation(),a.each(D,function(){g+=this.offset()[c.style]}),g=g/2>f||1===D.length?0:1,f-=C.offset()[c.style],d=100*f/i(),c.events.snap||e(E,U[14],300),v(D[g],d),j(["slide","set","change"]),c.events.snap&&s(b,{handles:[D[g]]})}function u(a){var b,c;if(!a.fixed)for(b=0;b<D.length;b+=1)p(T.start,D[b].children(),s,{handles:[D[b]]});a.tap&&p(T.start,C,t,{handles:D}),a.drag&&(c=C.find("."+U[7]).addClass(U[10]),a.fixed&&(c=c.add(C.children().not(c).children())),p(T.start,c,s,{handles:D}))}function v(a,b,d){var e=a[0]!==D[0][0]?1:0,g=F[0]+c.margin,h=F[1]-c.margin,i=F[0]+c.limit,j=F[1]-c.limit;return D.length>1&&(b=e?Math.max(b,g):Math.min(b,h)),d!==!1&&c.limit&&D.length>1&&(b=e?Math.min(b,i):Math.max(b,j)),b=I.getStep(b),b=f(parseFloat(b.toFixed(7))),b===F[e]?!1:(a.css(c.style,b+"%"),a.is(":first-child")&&a.toggleClass(U[17],b>50),F[e]=b,M[e]=I.fromStepping(b),m(N[e]),!0)}function w(a,b){var d,e,f;for(c.limit&&(a+=1),d=0;a>d;d+=1)e=d%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=c.format.from(f),(f===!1||isNaN(f)||v(D[e],I.toStepping(f),d===3-c.dir)===!1)&&m(N[e]))}function x(a){if(E[0].LinkIsEmitting)return this;var b,d=g(a);return c.dir&&c.handles>1&&d.reverse(),c.animate&&-1!==F[0]&&e(E,U[14],300),b=D.length>1?3:1,1===d.length&&(b=1),w(b,d),j(["set"]),this}function y(){var a,b=[];for(a=0;a<c.handles;a+=1)b[a]=c.format.to(M[a]);return k(b)}function z(){return a(this).off(S).removeClass(U.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,d}function A(){var b=a.map(F,function(a,b){var c=I.getApplicableStep(a),d=h(String(c[2])),e=M[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),i=0===a?null:g>=c[1]?c[2]:c[0]||!1;
return[[i,f]]});return k(b)}function B(){return d}var C,D,E=a(b),F=[-1,-1],I=c.spectrum,M=[],N=["lower","upper"].slice(0,c.handles);if(c.dir&&N.reverse(),b.LinkUpdate=m,b.LinkConfirm=n,b.LinkDefaultFormatter=c.format,b.LinkDefaultFlag="lower",b.reappend=o,E.hasClass(U[0]))throw new Error("Slider was already initialized.");C=L(c.dir,c.ort,E),D=K(c.handles,c.dir,C),J(c.connect,E,D),u(c.events),b.vSet=x,b.vGet=y,b.destroy=z,b.getCurrentStep=A,b.getOriginalOptions=B,b.getInfo=function(){return[I,c.style,c.ort]},E.val(c.start)}function N(a){var b=F(a,this);return this.each(function(){M(this,b,a)})}function O(b){return this.each(function(){if(!this.destroy)return void a(this).noUiSlider(b);var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)})}function P(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var Q=a(document),R=a.fn.val,S=".nui",T=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},U=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];s.prototype.getMargin=function(a){return 2===this.xPct.length?j(this.xVal,a):!1},s.prototype.toStepping=function(a){return a=n(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},s.prototype.fromStepping=function(a){return this.direction&&(a=100-a),d(o(this.xVal,this.xPct,a))},s.prototype.getStep=function(a){return this.direction&&(a=100-a),a=p(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},s.prototype.getApplicableStep=function(a){var b=m(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},s.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var V={to:function(a){return a.toFixed(2)},from:Number};a.fn.val=function(b){function c(a){return a.hasClass(U[0])?P:R}if(!arguments.length){var d=a(this[0]);return c(d).call(d)}var e=a.isFunction(b);return this.each(function(d){var f=b,g=a(this);e&&(f=b.call(this,d,g.val())),c(g).call(g,f)})},a.fn.noUiSlider=function(a,b){switch(a){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(b?O:N).call(this,a)}}(window.jQuery||window.Zepto),function(a){var b=a(window);a.fn.visible=function(a,c,d){if(!(this.length<1)){var e=this.length>1?this.eq(0):this,f=e.get(0),g=b.width(),h=b.height(),d=d?d:"both",i=c===!0?f.offsetWidth*f.offsetHeight:!0;if("function"==typeof f.getBoundingClientRect){var j=f.getBoundingClientRect(),k=j.top>=0&&j.top<h,l=j.bottom>0&&j.bottom<=h,m=j.left>=0&&j.left<g,n=j.right>0&&j.right<=g,o=a?k||l:k&&l,p=a?m||n:m&&n;if("both"===d)return i&&o&&p;if("vertical"===d)return i&&o;if("horizontal"===d)return i&&p}else{var q=b.scrollTop(),r=q+h,s=b.scrollLeft(),t=s+g,u=e.offset(),v=u.top,w=v+e.height(),x=u.left,y=x+e.width(),z=a===!0?w:v,A=a===!0?v:w,B=a===!0?y:x,C=a===!0?x:y;if("both"===d)return!!i&&r>=A&&z>=q&&t>=C&&B>=s;if("vertical"===d)return!!i&&r>=A&&z>=q;if("horizontal"===d)return!!i&&t>=C&&B>=s}}}}(jQuery),window.JST||(window.JST={}),function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){this.el=a,this.options=b=b||{};var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1};for(var e in d)!(e in b)&&(b[e]=d[e]);var g=b.group;g&&"object"==typeof g||(g=b.group={name:g}),["pull","put"].forEach(function(a){a in g||(g[a]=!0)}),M.forEach(function(d){b[d]=c(this,b[d]||N),f(a,d.substr(2).toLowerCase(),b[d])},this),b.groups=" "+g.name+(g.put.join?" "+g.put.join(" "):"")+" ",a[F]=b;for(var h in this)"_"===h.charAt(0)&&(this[h]=c(this,this[h]));f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"dragover",this),f(a,"dragenter",this),Q.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){s&&s.state!==a&&(i(s,"display",a?"none":""),!a&&s.state&&t.insertBefore(s,q),s.state=a)}function c(a,b){var c=P.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(P.call(arguments)))}}function d(a,b,c){if(a){c=c||H,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function e(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,!1)}function g(a,b,c){a.removeEventListener(b,c,!1)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return H.defaultView&&H.defaultView.getComputedStyle?c=H.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function k(a){a.draggable=!1}function l(){K=!1}function m(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function n(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function o(a){for(var b=0;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function p(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E={},F="Sortable"+(new Date).getTime(),G=window,H=G.document,I=G.parseInt,J=!!("draggable"in H.createElement("div")),K=!1,L=function(a,b,c,d,e,f){var g=H.createEvent("Event");g.initEvent(b,!0,!0),g.item=c||a,g.from=d||a,g.clone=s,g.oldIndex=e,g.newIndex=f,a.dispatchEvent(g)},M="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),N=function(){},O=Math.abs,P=[].slice,Q=[],R=p(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(w!==c&&(v=b.scroll,w=c,v===!0)){v=c;do if(v.offsetWidth<v.scrollWidth||v.offsetHeight<v.scrollHeight)break;while(v=v.parentNode)}v&&(d=v,e=v.getBoundingClientRect(),f=(O(e.right-j)<=h)-(O(e.left-j)<=h),g=(O(e.bottom-k)<=h)-(O(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=G)),(E.vx!==f||E.vy!==g||E.el!==d)&&(E.el=d,E.vx=f,E.vy=g,clearInterval(E.pid),d&&(E.pid=setInterval(function(){d===G?G.scrollTo(G.scrollX+f*i,G.scrollY+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30);return a.prototype={constructor:a,_dragStarted:function(){t&&q&&(h(q,this.options.ghostClass,!0),a.active=this,L(t,"start",q,t,z))},_onTapStart:function(a){var b=a.type,c=a.touches&&a.touches[0],e=(c||a).target,g=e,h=this.options,i=this.el,l=h.filter;if(!("mousedown"===b&&0!==a.button||h.disabled)&&(e=d(e,h.draggable,i))){if(z=o(e),"function"==typeof l){if(l.call(this,a,e,this))return L(g,"filter",e,i,z),void a.preventDefault()}else if(l&&(l=l.split(",").some(function(a){return a=d(g,a.trim(),i),a?(L(a,"filter",e,i,z),!0):void 0})))return void a.preventDefault();if((!h.handle||d(g,h.handle,i))&&e&&!q&&e.parentNode===i){C=a,t=this.el,q=e,u=q.nextSibling,B=this.options.group,q.draggable=!0,h.ignore.split(",").forEach(function(a){j(e,a.trim(),k)}),c&&(C={target:e,clientX:c.clientX,clientY:c.clientY},this._onDragStart(C,"touch"),a.preventDefault()),f(H,"mouseup",this._onDrop),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop),f(q,"dragend",this),f(t,"dragstart",this._onDragStart),J||this._onDragStart(C,!0);try{H.selection?H.selection.empty():window.getSelection().removeAllRanges()}catch(m){}}}},_emulateDragOver:function(){if(D){i(r,"display","none");var a=H.elementFromPoint(D.clientX,D.clientY),b=a,c=" "+this.options.group.name,d=Q.length;if(b)do{if(b[F]&&b[F].groups.indexOf(c)>-1){for(;d--;)Q[d]({clientX:D.clientX,clientY:D.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);i(r,"display","")}},_onTouchMove:function(a){if(C){var b=a.touches?a.touches[0]:a,c=b.clientX-C.clientX,d=b.clientY-C.clientY,e=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";D=b,i(r,"webkitTransform",e),i(r,"mozTransform",e),i(r,"msTransform",e),i(r,"transform",e),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),"clone"==B.pull&&(s=q.cloneNode(!0),i(s,"display","none"),t.insertBefore(s,q)),b){var e,g=q.getBoundingClientRect(),h=i(q);r=q.cloneNode(!0),i(r,"top",g.top-I(h.marginTop,10)),i(r,"left",g.left-I(h.marginLeft,10)),i(r,"width",g.width),i(r,"height",g.height),i(r,"opacity","0.8"),i(r,"position","fixed"),i(r,"zIndex","100000"),t.appendChild(r),e=r.getBoundingClientRect(),i(r,"width",2*g.width-e.width),i(r,"height",2*g.height-e.height),"touch"===b?(f(H,"touchmove",this._onTouchMove),f(H,"touchend",this._onDrop),f(H,"touchcancel",this._onDrop)):(f(H,"mousemove",this._onTouchMove),f(H,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,q)),f(H,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(a){var c,e,f,g=this.el,h=this.options,j=h.group,k=j.put,n=B===j,o=h.sort;if(q&&(void 0!==a.preventDefault&&(a.preventDefault(),!h.dragoverBubble&&a.stopPropagation()),B&&!h.disabled&&(n?o||(f=!t.contains(q)):B.pull&&k&&(B.name===j.name||k.indexOf&&~k.indexOf(B.name)))&&(void 0===a.rootEl||a.rootEl===this.el))){if(R(a,h,this.el),K)return;if(c=d(a.target,h.draggable,g),e=q.getBoundingClientRect(),f)return b(!0),void(s||u?t.insertBefore(q,s||u):o||t.appendChild(q));if(0===g.children.length||g.children[0]===r||g===a.target&&(c=m(g,a))){if(c){if(c.animated)return;v=c.getBoundingClientRect()}b(n),g.appendChild(q),this._animate(e,q),c&&this._animate(v,c)}else if(c&&!c.animated&&c!==q&&void 0!==c.parentNode[F]){x!==c&&(x=c,y=i(c));var p,v=c.getBoundingClientRect(),w=v.right-v.left,z=v.bottom-v.top,A=/left|right|inline/.test(y.cssFloat+y.display),C=c.offsetWidth>q.offsetWidth,D=c.offsetHeight>q.offsetHeight,E=(A?(a.clientX-v.left)/w:(a.clientY-v.top)/z)>.5,G=c.nextElementSibling;K=!0,setTimeout(l,30),b(n),p=A?c.previousElementSibling===q&&!C||E&&C:G!==q&&!D||E&&D,p&&!G?g.appendChild(q):c.parentNode.insertBefore(q,p?G:c),this._animate(e,q),this._animate(v,c)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){g(H,"mouseup",this._onDrop),g(H,"touchmove",this._onTouchMove),g(H,"touchend",this._onDrop),g(H,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(E.pid),g(H,"drop",this),g(H,"mousemove",this._onTouchMove),g(c,"dragstart",this._onDragStart),this._offUpEvents(),b&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation(),r&&r.parentNode.removeChild(r),q&&(g(q,"dragend",this),k(q),h(q,this.options.ghostClass,!1),t!==q.parentNode?(A=o(q),L(q.parentNode,"sort",q,t,z,A),L(t,"sort",q,t,z,A),L(q,"add",q,t,z,A),L(t,"remove",q,t,z,A)):(s&&s.parentNode.removeChild(s),q.nextSibling!==u&&(A=o(q),L(t,"update",q,t,z,A),L(t,"sort",q,t,z,A))),a.active&&L(t,"end",q,t,z,A)),t=q=r=u=s=v=w=C=D=x=y=B=a.active=null,this.save())},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?(this._onDragOver(a),e(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,e=0,f=c.length;f>e;e++)a=c[e],d(a,this.options.draggable,this.el)&&b.push(a.getAttribute("data-id")||n(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];d(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return d(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b)},destroy:function(){var a=this.el,b=this.options;M.forEach(function(c){g(a,c.substr(2).toLowerCase(),b[c])}),g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"dragover",this),g(a,"dragenter",this),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),Q.splice(Q.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:f,off:g,css:i,find:j,bind:c,is:function(a,b){return!!d(a,b,a)},throttle:p,closest:d,toggleClass:h,dispatchEvent:L,index:o},a.version="1.1.1",a.create=function(b,c){return new a(b,c)},a}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";a.fn.sortable=function(b){var c;return this.each(function(){var d=a(this),e=d.data("sortable");if(e||!(b instanceof Object)&&b||(e=new Sortable(this,b),d.data("sortable",e)),e){if("widget"===b)return e;"destroy"===b?(e.destroy(),d.removeData("sortable")):b in e&&(c=e[e].apply(e,[].slice.call(arguments,1)))}}),void 0===c?this:c}}),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.1",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=i?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a("body").height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.1",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.1",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c="prev"==a?-1:1,d=this.getItemIndex(b),e=(d+c)%this.$items.length;return this.$items.eq(e)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(!f.length){if(!this.options.wrap)return;f=this.$element.find(".item")[i]()}if(f.hasClass("active"))return this.sliding=!1;var k=f[0],l=a.Event("slide.bs.carousel",{relatedTarget:k,direction:h});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var m=a(this.$indicators.children()[this.getItemIndex(f)]);m&&m.addClass("active")}var n=a.Event("slid.bs.carousel",{relatedTarget:k,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger(n)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(n)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a(this.options.trigger).filter('[href="#'+b.id+'"], [data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.1",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":a.extend({},e.data(),{trigger:this});c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.1",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()
})}b.VERSION="3.3.1",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.tooltip",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.popover",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.1",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),function(a){function b(a){return"undefined"==typeof a.which?!0:"number"==typeof a.which&&a.which>0?!a.ctrlKey&&!a.metaKey&&!a.altKey&&8!=a.which:!1}a.expr[":"].notmdproc=function(b){return a(b).data("mdproc")?!1:!0},a.material={options:{input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!0,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(b){a(b?b:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=ripple></span><span class=check></span>")},togglebutton:function(b){a(b?b:this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class=toggle></span>")},radio:function(b){a(b?b:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=circle></span><span class=check></span>")},input:function(c){a(c?c:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var b=a(this);if(b.wrap("<div class=form-control-wrapper></div>"),b.after("<span class=material-input></span>"),b.hasClass("floating-label")){var c=b.attr("placeholder");b.attr("placeholder",null).removeClass("floating-label"),b.after("<div class=floating-label>"+c+"</div>")}if(b.attr("data-hint")&&b.after("<div class=hint>"+b.attr("data-hint")+"</div>"),(null===b.val()||"undefined"==b.val()||""===b.val())&&b.addClass("empty"),b.parent().next().is("[type=file]")){b.parent().addClass("fileinput");var d=b.parent().next().detach();b.after(d)}}),a(document).on("change",".checkbox input[type=checkbox]",function(){a(this).blur()}).on("keydown paste",".form-control",function(c){b(c)&&a(this).removeClass("empty")}).on("keyup change",".form-control",function(){var b=a(this);""===b.val()&&b[0].checkValidity()?b.addClass("empty"):b.removeClass("empty")}).on("focus",".form-control-wrapper.fileinput",function(){a(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){a(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var b="";a.each(a(this)[0].files,function(a,c){console.log(c),b+=c.name+", "}),b=b.substring(0,b.length-2),b?a(this).prev().removeClass("empty"):a(this).prev().addClass("empty"),a(this).prev().val(b)})},ripples:function(b){a(b?b:this.options.withRipples).ripples()},autofill:function(){var b=setInterval(function(){a("input[type!=checkbox]").each(function(){a(this).val()&&a(this).val()!==a(this).attr("value")&&a(this).trigger("change")})},100);setTimeout(function(){clearInterval(b)},1e4);var c;a(document).on("focus","input",function(){var b=a(this).parents("form").find("input").not("[type=file]");c=setInterval(function(){b.each(function(){a(this).val()!==a(this).attr("value")&&a(this).trigger("change")})},100)}).on("blur","input",function(){clearInterval(c)})},init:function(){a.ripples&&this.options.ripples&&this.ripples(),this.options.input&&this.input(),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&this.autofill(),document.arrive&&this.options.arrive&&(a(document).arrive(this.options.inputElements,function(){a.material.input(a(this))}),a(document).arrive(this.options.checkboxElements,function(){a.material.checkbox(a(this))}),a(document).arrive(this.options.radioElements,function(){a.material.radio(a(this))}),a(document).arrive(this.options.togglebuttonElements,function(){a.material.togglebutton(a(this))}))}}}(jQuery),function(a,b,c,d){"use strict";function e(b,c){g=this,this.element=a(b),this.options=a.extend({},h,c),this._defaults=h,this._name=f,this.init()}var f="ripples",g=null,h={};e.prototype.init=function(){var c=this.element;c.on("mousedown touchstart",function(d){if(g.isTouch()&&"mousedown"===d.type)return!1;c.find(".ripple-wrapper").length||c.append('<div class="ripple-wrapper"></div>');var e=c.children(".ripple-wrapper"),f=g.getRelY(e,d),h=g.getRelX(e,d);if(f||h){var i=g.getRipplesColor(),j=a("<div></div>");j.addClass("ripple").css({left:h,top:f,"background-color":i}),e.append(j),function(){return b.getComputedStyle(j[0]).opacity}(),g.rippleOn(j),setTimeout(function(){g.rippleEnd(j)},500),c.on("mouseup mouseleave touchend",function(){j.data("mousedown","off"),"off"===j.data("animating")&&g.rippleOut(j)})}})},e.prototype.getNewSize=function(a){var b=this.element;return Math.max(b.outerWidth(),b.outerHeight())/a.outerWidth()*2.5},e.prototype.getRelX=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1!==b.touches.length?b.touches[0].pageX-c.left:!1):b.pageX-c.left},e.prototype.getRelY=function(a,b){var c=a.offset();return g.isTouch()?(b=b.originalEvent,1!==b.touches.length?b.touches[0].pageY-c.top:!1):b.pageY-c.top},e.prototype.getRipplesColor=function(){var a,c=this.element;return a=this.options&&this.options.color?this.options.color:c.data("ripple-color")?c.data("ripple-color"):b.getComputedStyle(c[0]).color},e.prototype.hasTransitionSupport=function(){var a=c.body||c.documentElement,b=a.style,e=b.transition!==d||b.WebkitTransition!==d||b.MozTransition!==d||b.MsTransition!==d||b.OTransition!==d;return e},e.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.prototype.rippleEnd=function(a){a.data("animating","off"),"off"===a.data("mousedown")&&g.rippleOut(a)},e.prototype.rippleOut=function(a){a.off(),g.hasTransitionSupport()?a.addClass("ripple-out"):a.animate({opacity:0},100,function(){a.trigger("transitionend")}),a.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.remove()})},e.prototype.rippleOn=function(a){var b=g.getNewSize(a),c=this.element;g.hasTransitionSupport()?a.css({"-ms-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-webkit-transform":"scale("+b+")",transform:"scale("+b+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):a.animate({width:2*Math.max(c.outerWidth(),c.outerHeight()),height:2*Math.max(c.outerWidth(),c.outerHeight()),"margin-left":-1*Math.max(c.outerWidth(),c.outerHeight()),"margin-top":-1*Math.max(c.outerWidth(),c.outerHeight()),opacity:.2},500,function(){a.trigger("transitionend")})},a.fn.ripples=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),function(a){function b(a){return"undefined"!=typeof a&&null!==a?!0:!1}a(document).ready(function(){a("body").append("<div id=snackbar-container/>")}),a(document).on("click","[data-toggle=snackbar]",function(){a(this).snackbar("toggle")}).on("click","#snackbar-container .snackbar",function(){a(this).snackbar("hide")}),a.snackbar=function(c){if(b(c)&&c===Object(c)){var d;d=b(c.id)?a("#"+c.id):a("<div/>").attr("id","snackbar"+Date.now()).attr("class","snackbar");var e=d.hasClass("snackbar-opened");b(c.style)?d.attr("class","snackbar "+c.style):d.attr("class","snackbar"),c.timeout=b(c.timeout)?c.timeout:3e3,b(c.content)&&(d.find(".snackbar-content").length?d.find(".snackbar-content").text(c.content):d.prepend("<span class=snackbar-content>"+c.content+"</span>")),b(c.id)?d.insertAfter("#snackbar-container .snackbar:last-child"):d.appendTo("#snackbar-container"),b(c.action)&&"toggle"==c.action&&(c.action=e?"hide":"show");var f=Date.now();d.data("animationId1",f),setTimeout(function(){d.data("animationId1")===f&&(b(c.action)&&"show"!=c.action?b(c.action)&&"hide"==c.action&&d.removeClass("snackbar-opened"):d.addClass("snackbar-opened"))},50);var g=Date.now();return d.data("animationId2",g),0!==c.timeout&&setTimeout(function(){d.data("animationId2")===g&&d.removeClass("snackbar-opened")},c.timeout),d}return!1},a.fn.snackbar=function(c){var d={};if(this.hasClass("snackbar"))return d.id=this.attr("id"),("show"===c||"hide"===c||"toggle"==c)&&(d.action=c),a.snackbar(d);b(c)&&"show"!==c&&"hide"!==c&&"toggle"!=c||(d={content:a(this).attr("data-content"),style:a(this).attr("data-style"),timeout:a(this).attr("data-timeout")}),b(c)&&(d.id=this.attr("data-snackbar-id"),("show"===c||"hide"===c||"toggle"==c)&&(d.action=c));var e=a.snackbar(d);return this.attr("data-snackbar-id",e.attr("id")),e}}(jQuery),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){if(!c)var c={map:function(a,b){var c={};return b?a.map(function(a,d){return c.index=d,b.call(c,a)}):a.slice()},naturalOrder:function(a,b){return b>a?-1:a>b?1:0},sum:function(a,b){var c={};return a.reduce(b?function(a,d,e){return c.index=e,a+b.call(c,d)}:function(a,b){return a+b},0)},max:function(a,b){return Math.max.apply(null,b?c.map(a,b):a)}};var d=function(){function a(a,b,c){return(a<<2*j)+(b<<j)+c}function b(a){function b(){c.sort(a),d=!0}var c=[],d=!1;return{push:function(a){c.push(a),d=!1},peek:function(a){return d||b(),void 0===a&&(a=c.length-1),c[a]},pop:function(){return d||b(),c.pop()},size:function(){return c.length},map:function(a){return c.map(a)},debug:function(){return d||b(),c}}}function d(a,b,c,d,e,f,g){var h=this;h.r1=a,h.r2=b,h.g1=c,h.g2=d,h.b1=e,h.b2=f,h.histo=g}function e(){this.vboxes=new b(function(a,b){return c.naturalOrder(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())})}function f(b){var c,d,e,f,g=1<<3*j,h=new Array(g);return b.forEach(function(b){d=b[0]>>k,e=b[1]>>k,f=b[2]>>k,c=a(d,e,f),h[c]=(h[c]||0)+1}),h}function g(a,b){var c,e,f,g=1e6,h=0,i=1e6,j=0,l=1e6,m=0;return a.forEach(function(a){c=a[0]>>k,e=a[1]>>k,f=a[2]>>k,g>c?g=c:c>h&&(h=c),i>e?i=e:e>j&&(j=e),l>f?l=f:f>m&&(m=f)}),new d(g,h,i,j,l,m,b)}function h(b,d){function e(a){var b,c,e,f,g,h=a+"1",i=a+"2",k=0;for(j=d[h];j<=d[i];j++)if(p[j]>o/2){for(e=d.copy(),f=d.copy(),b=j-d[h],c=d[i]-j,g=c>=b?Math.min(d[i]-1,~~(j+c/2)):Math.max(d[h],~~(j-1-b/2));!p[g];)g++;for(k=q[g];!k&&p[g-1];)k=q[--g];return e[i]=g,f[h]=e[i]+1,[e,f]}}if(d.count()){var f=d.r2-d.r1+1,g=d.g2-d.g1+1,h=d.b2-d.b1+1,i=c.max([f,g,h]);if(1==d.count())return[d.copy()];var j,k,l,m,n,o=0,p=[],q=[];if(i==f)for(j=d.r1;j<=d.r2;j++){for(m=0,k=d.g1;k<=d.g2;k++)for(l=d.b1;l<=d.b2;l++)n=a(j,k,l),m+=b[n]||0;o+=m,p[j]=o}else if(i==g)for(j=d.g1;j<=d.g2;j++){for(m=0,k=d.r1;k<=d.r2;k++)for(l=d.b1;l<=d.b2;l++)n=a(k,j,l),m+=b[n]||0;o+=m,p[j]=o}else for(j=d.b1;j<=d.b2;j++){for(m=0,k=d.r1;k<=d.r2;k++)for(l=d.g1;l<=d.g2;l++)n=a(k,l,j),m+=b[n]||0;o+=m,p[j]=o}return p.forEach(function(a,b){q[b]=o-a}),e(i==f?"r":i==g?"g":"b")}}function i(a,d){function i(a,b){for(var c,d=1,e=0;l>e;)if(c=a.pop(),c.count()){var f=h(j,c),g=f[0],i=f[1];if(!g)return;if(a.push(g),i&&(a.push(i),d++),d>=b)return;if(e++>l)return}else a.push(c),e++}if(!a.length||2>d||d>256)return!1;var j=f(a),k=0;j.forEach(function(){k++});var n=g(a,j),o=new b(function(a,b){return c.naturalOrder(a.count(),b.count())});o.push(n),i(o,m*d);for(var p=new b(function(a,b){return c.naturalOrder(a.count()*a.volume(),b.count()*b.volume())});o.size();)p.push(o.pop());i(p,d-p.size());for(var q=new e;p.size();)q.push(p.pop());return q}var j=5,k=8-j,l=1e3,m=.75;return d.prototype={volume:function(a){var b=this;return(!b._volume||a)&&(b._volume=(b.r2-b.r1+1)*(b.g2-b.g1+1)*(b.b2-b.b1+1)),b._volume},count:function(b){var c=this,d=c.histo;if(!c._count_set||b){var e,f,g,h=0;for(e=c.r1;e<=c.r2;e++)for(f=c.g1;f<=c.g2;f++)for(g=c.b1;g<=c.b2;g++)index=a(e,f,g),h+=d[index]||0;c._count=h,c._count_set=!0}return c._count},copy:function(){var a=this;return new d(a.r1,a.r2,a.g1,a.g2,a.b1,a.b2,a.histo)},avg:function(b){var c=this,d=c.histo;if(!c._avg||b){var e,f,g,h,i,k=0,l=1<<8-j,m=0,n=0,o=0;for(f=c.r1;f<=c.r2;f++)for(g=c.g1;g<=c.g2;g++)for(h=c.b1;h<=c.b2;h++)i=a(f,g,h),e=d[i]||0,k+=e,m+=e*(f+.5)*l,n+=e*(g+.5)*l,o+=e*(h+.5)*l;c._avg=k?[~~(m/k),~~(n/k),~~(o/k)]:[~~(l*(c.r1+c.r2+1)/2),~~(l*(c.g1+c.g2+1)/2),~~(l*(c.b1+c.b2+1)/2)]}return c._avg},contains:function(a){var b=this,c=a[0]>>k;return gval=a[1]>>k,bval=a[2]>>k,c>=b.r1&&c<=b.r2&&gval>=b.g1&&gval<=b.g2&&bval>=b.b1&&bval<=b.b2}},e.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var b=this.vboxes,c=0;c<b.size();c++)if(b.peek(c).vbox.contains(a))return b.peek(c).color;return this.nearest(a)},nearest:function(a){for(var b,c,d,e=this.vboxes,f=0;f<e.size();f++)c=Math.sqrt(Math.pow(a[0]-e.peek(f).color[0],2)+Math.pow(a[1]-e.peek(f).color[1],2)+Math.pow(a[2]-e.peek(f).color[2],2)),(b>c||void 0===b)&&(b=c,d=e.peek(f).color);return d},forcebw:function(){var a=this.vboxes;a.sort(function(a,b){return c.naturalOrder(c.sum(a.color),c.sum(b.color))});var b=a[0].color;b[0]<5&&b[1]<5&&b[2]<5&&(a[0].color=[0,0,0]);var d=a.length-1,e=a[d].color;e[0]>251&&e[1]>251&&e[2]>251&&(a[d].color=[255,255,255])}},{quantize:i}}();b.exports=d.quantize},{}],2:[function(a){(function(){var b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=[].slice;window.Swatch=c=function(){function a(a,b){this.rgb=a,this.population=b}return a.prototype.hsl=void 0,a.prototype.rgb=void 0,a.prototype.population=1,a.yiq=0,a.prototype.getHsl=function(){return this.hsl?this.hsl:this.hsl=d.rgbToHsl(this.rgb[0],this.rgb[1],this.rgb[2])},a.prototype.getPopulation=function(){return this.population},a.prototype.getRgb=function(){return this.rgb},a.prototype.getHex=function(){return"#"+((1<<24)+(this.rgb[0]<<16)+(this.rgb[1]<<8)+this.rgb[2]).toString(16).slice(1,7)},a.prototype.getTitleTextColor=function(){return this._ensureTextColors(),this.yiq<200?"#fff":"#000"},a.prototype.getBodyTextColor=function(){return this._ensureTextColors(),this.yiq<150?"#fff":"#000"},a.prototype._ensureTextColors=function(){return this.yiq?void 0:this.yiq=(299*this.rgb[0]+587*this.rgb[1]+114*this.rgb[2])/1e3},a}(),window.Vibrant=d=function(){function d(a,d,f){this.swatches=e(this.swatches,this);var g,h,i,j,k,l,m,n,o,p,q,r;for("undefined"==typeof d&&(d=64),"undefined"==typeof f&&(f=5),m=new b(a),n=m.getImageData(),q=n.data,p=m.getPixelCount(),h=[],l=0;p>l;)o=4*l,r=q[o+0],k=q[o+1],i=q[o+2],g=q[o+3],g>=125&&(r>250&&k>250&&i>250||h.push([r,k,i])),l+=f;
j=this.quantize(h,d),this._swatches=j.vboxes.map(function(){return function(a){return new c(a.color,a.vbox.count())}}(this)),this.maxPopulation=this.findMaxPopulation,this.generateVarationColors(),this.generateEmptySwatches(),m.removeCanvas()}return d.prototype.quantize=a("quantize"),d.prototype._swatches=[],d.prototype.TARGET_DARK_LUMA=.26,d.prototype.MAX_DARK_LUMA=.45,d.prototype.MIN_LIGHT_LUMA=.55,d.prototype.TARGET_LIGHT_LUMA=.74,d.prototype.MIN_NORMAL_LUMA=.3,d.prototype.TARGET_NORMAL_LUMA=.5,d.prototype.MAX_NORMAL_LUMA=.7,d.prototype.TARGET_MUTED_SATURATION=.3,d.prototype.MAX_MUTED_SATURATION=.4,d.prototype.TARGET_VIBRANT_SATURATION=1,d.prototype.MIN_VIBRANT_SATURATION=.35,d.prototype.WEIGHT_SATURATION=3,d.prototype.WEIGHT_LUMA=6,d.prototype.WEIGHT_POPULATION=1,d.prototype.VibrantSwatch=void 0,d.prototype.MutedSwatch=void 0,d.prototype.DarkVibrantSwatch=void 0,d.prototype.DarkMutedSwatch=void 0,d.prototype.LightVibrantSwatch=void 0,d.prototype.LightMutedSwatch=void 0,d.prototype.HighestPopulation=0,d.prototype.generateVarationColors=function(){return this.VibrantSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.LightVibrantSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.DarkVibrantSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1),this.MutedSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION),this.LightMutedSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION),this.DarkMutedSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION)},d.prototype.generateEmptySwatches=function(){var a;return void 0===this.VibrantSwatch&&void 0!==this.DarkVibrantSwatch&&(a=this.DarkVibrantSwatch.getHsl(),a[2]=this.TARGET_NORMAL_LUMA,this.VibrantSwatch=new c(d.hslToRgb(a[0],a[1],a[2]),0)),void 0===this.DarkVibrantSwatch&&void 0!==this.VibrantSwatch?(a=this.VibrantSwatch.getHsl(),a[2]=this.TARGET_DARK_LUMA,this.DarkVibrantSwatch=new c(d.hslToRgb(a[0],a[1],a[2]),0)):void 0},d.prototype.findMaxPopulation=function(){var a,b,c,d,e;for(c=0,d=this._swatches,a=0,b=d.length;b>a;a++)e=d[a],c=Math.max(c,e.getPopulation());return c},d.prototype.findColorVariation=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;for(j=void 0,k=0,l=this._swatches,g=0,h=l.length;h>g;g++)n=l[g],m=n.getHsl()[1],i=n.getHsl()[2],m>=e&&f>=m&&i>=b&&c>=i&&!this.isAlreadySelected(n)&&(o=this.createComparisonValue(m,d,i,a,n.getPopulation(),this.HighestPopulation),(void 0===j||o>k)&&(j=n,k=o));return j},d.prototype.createComparisonValue=function(a,b,c,d,e,f){return this.weightedMean(this.invertDiff(a,b),this.WEIGHT_SATURATION,this.invertDiff(c,d),this.WEIGHT_LUMA,e/f,this.WEIGHT_POPULATION)},d.prototype.invertDiff=function(a,b){return 1-Math.abs(a-b)},d.prototype.weightedMean=function(){var a,b,c,d,e,g;for(e=1<=arguments.length?f.call(arguments,0):[],b=0,c=0,a=0;a<e.length;)d=e[a],g=e[a+1],b+=d*g,c+=g,a+=2;return b/c},d.prototype.swatches=function(){return{Vibrant:this.VibrantSwatch,Muted:this.MutedSwatch,DarkVibrant:this.DarkVibrantSwatch,DarkMuted:this.DarkMutedSwatch,LightVibrant:this.LightVibrantSwatch,LightMuted:this.LightMuted}},d.prototype.isAlreadySelected=function(a){return this.VibrantSwatch===a||this.DarkVibrantSwatch===a||this.LightVibrantSwatch===a||this.MutedSwatch===a||this.DarkMutedSwatch===a||this.LightMutedSwatch===a},d.rgbToHsl=function(a,b,c){var d,e,f,g,h,i;if(a/=255,b/=255,c/=255,g=Math.max(a,b,c),h=Math.min(a,b,c),e=void 0,i=void 0,f=(g+h)/2,g===h)e=i=0;else{switch(d=g-h,i=f>.5?d/(2-g-h):d/(g+h),g){case a:e=(b-c)/d+(c>b?6:0);break;case b:e=(c-a)/d+2;break;case c:e=(a-b)/d+4}e/=6}return[e,i,f]},d.hslToRgb=function(a,b,c){var d,e,f,g,h,i;return i=void 0,e=void 0,d=void 0,f=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a},0===b?i=e=d=c:(h=.5>c?c*(1+b):c+b-c*b,g=2*c-h,i=f(g,h,a+1/3),e=f(g,h,a),d=f(g,h,a-1/3)),[255*i,255*e,255*d]},d}(),window.CanvasImage=b=function(){function a(a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=a.width,this.height=this.canvas.height=a.height,this.context.drawImage(a,0,0,this.width,this.height)}return a.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height)},a.prototype.update=function(a){return this.context.putImageData(a,0,0)},a.prototype.getPixelCount=function(){return this.width*this.height},a.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},a.prototype.removeCanvas=function(){return this.canvas.parentNode.removeChild(this.canvas)},a}()}).call(this)},{quantize:1}]},{},[2]),function(a,b){"use strict";function c(c,d){function e(a){return qb.preferFlash&&jb&&!qb.ignoreFlash&&qb.flash[a]!==b&&qb.flash[a]}function f(a){return function(b){var c,d=this._s;return d&&d._a?c=a.call(this,b):(qb._wD(d&&d.id?d.id+": Ignoring "+b.type:vb+"Ignoring "+b.type),c=null),c}}this.setupOptions={url:c||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb=this,rb=null,sb=null,tb="soundManager",ub=tb+": ",vb="HTML5::",wb=navigator.userAgent,xb=a.location.href.toString(),yb=document,zb=[],Ab=!0,Bb=!1,Cb=!1,Db=!1,Eb=!1,Fb=!1,Gb=0,Hb=["log","info","warn","error"],Ib=8,Jb=null,Kb=null,Lb=!1,Mb=!1,Nb=0,Ob=null,Pb=[],Qb=null,Rb=Array.prototype.slice,Sb=!1,Tb=0,Ub=wb.match(/(ipad|iphone|ipod)/i),Vb=wb.match(/android/i),Wb=wb.match(/msie/i),Xb=wb.match(/webkit/i),Yb=wb.match(/safari/i)&&!wb.match(/chrome/i),Zb=wb.match(/opera/i),$b=wb.match(/(mobile|pre\/|xoom)/i)||Ub||Vb,_b=!xb.match(/usehtml5audio/i)&&!xb.match(/sm2\-ignorebadua/i)&&Yb&&!wb.match(/silk/i)&&wb.match(/OS X 10_6_([3-7])/i),ac=a.console!==b&&console.log!==b,bc=yb.hasFocus!==b?yb.hasFocus():null,cc=Yb&&(yb.hasFocus===b||!yb.hasFocus()),dc=!cc,ec=/(mp3|mp4|mpa|m4a|m4b)/i,fc=1e3,gc="about:blank",hc="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ic=yb.location?yb.location.protocol.match(/http/i):null,jc=ic?"":"http://",kc=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,lc=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],mc=new RegExp("\\.("+lc.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ic,R={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==b&&(Zb&&opera!==b&&opera.version()<10?new Audio(null):new Audio).canPlayType!==b}catch(a){return!1}}(),this.setup=function(a){var c=!qb.url;return a!==b&&Db&&Qb&&qb.ok()&&(a.flashVersion!==b||a.url!==b||a.html5Test!==b)&&V(O("setupLate")),q(a),a&&(c&&F&&a.url!==b&&qb.beginDelayedInit(),F||a.url===b||"complete"!==yb.readyState||setTimeout(D,1)),qb},this.ok=function(){return Qb?Db&&!Eb:qb.useHTML5Audio&&qb.hasHTML5},this.supported=this.ok,this.getMovie=function(b){return h(b)||yb[b]||a[b]},this.createSound=function(a,c){function d(){return h=T(h),qb.sounds[h.id]=new g(h),qb.soundIDs.push(h.id),qb.sounds[h.id]}var e,f,h,i=null;if(e=tb+".createSound(): ",f=e+O(Db?"notOK":"notReady"),!Db||!qb.ok())return V(f),!1;if(c!==b&&(a={id:a,url:c}),h=p(a),h.url=$(h.url),void 0===h.id&&(h.id=qb.setupOptions.idPrefix+Tb++),h.id.toString().charAt(0).match(/^[0-9]$/)&&qb._wD(e+O("badID",h.id),2),qb._wD(e+h.id+(h.url?" ("+h.url+")":""),1),W(h.id,!0))return qb._wD(e+h.id+" exists",1),qb.sounds[h.id];if(bb(h))i=d(),qb._wD(h.id+": Using HTML5"),i._setup_html5(h);else{if(qb.html5Only)return qb._wD(h.id+": No HTML5 support for this sound, and no Flash. Exiting."),d();if(qb.html5.usingFlash&&h.url&&h.url.match(/data\:/i))return qb._wD(h.id+": data: URIs not supported via Flash. Exiting."),d();l>8&&(null===h.isMovieStar&&(h.isMovieStar=!!(h.serverURL||(h.type?h.type.match(kc):!1)||h.url&&h.url.match(mc))),h.isMovieStar&&(qb._wD(e+"using MovieStar handling"),h.loops>1&&n("noNSLoop"))),h=U(h,e),i=d(),8===l?sb._createSound(h.id,h.loops||1,h.usePolicyFile):(sb._createSound(h.id,h.url,h.usePeakData,h.useWaveformData,h.useEQData,h.isMovieStar,h.isMovieStar?h.bufferTime:!1,h.loops||1,h.serverURL,h.duration||null,h.autoPlay,!0,h.autoLoad,h.usePolicyFile),h.serverURL||(i.connected=!0,h.onconnect&&h.onconnect.apply(i))),h.serverURL||!h.autoLoad&&!h.autoPlay||i.load(h)}return!h.serverURL&&h.autoPlay&&i.play(),i},this.destroySound=function(a,b){if(!W(a))return!1;var c,d=qb.sounds[a];for(d._iO={},d.stop(),d.unload(),c=0;c<qb.soundIDs.length;c++)if(qb.soundIDs[c]===a){qb.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete qb.sounds[a],!0},this.load=function(a,b){return W(a)?qb.sounds[a].load(b):!1},this.unload=function(a){return W(a)?qb.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return W(a)?qb.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return W(a)?qb.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!Db||!qb.ok())return V(tb+".play(): "+O(Db?"notOK":"notReady")),!1;if(W(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b}),b&&b.url&&(qb._wD(tb+'.play(): Attempting to create "'+a+'"',1),b.id=a,c=qb.createSound(b).play())}return null===c&&(c=qb.sounds[a].play(b)),c},this.start=this.play,this.setPosition=function(a,b){return W(a)?qb.sounds[a].setPosition(b):!1},this.stop=function(a){return W(a)?(qb._wD(tb+".stop("+a+")",1),qb.sounds[a].stop()):!1},this.stopAll=function(){var a;qb._wD(tb+".stopAll()",1);for(a in qb.sounds)qb.sounds.hasOwnProperty(a)&&qb.sounds[a].stop()},this.pause=function(a){return W(a)?qb.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=qb.soundIDs.length-1;a>=0;a--)qb.sounds[qb.soundIDs[a]].pause()},this.resume=function(a){return W(a)?qb.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=qb.soundIDs.length-1;a>=0;a--)qb.sounds[qb.soundIDs[a]].resume()},this.togglePause=function(a){return W(a)?qb.sounds[a].togglePause():!1},this.setPan=function(a,b){return W(a)?qb.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return W(a)?qb.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;if(a instanceof String&&(a=null),a)return W(a)?(qb._wD(tb+'.mute(): Muting "'+a+'"'),qb.sounds[a].mute()):!1;for(qb._wD(tb+".mute(): Muting all sounds"),b=qb.soundIDs.length-1;b>=0;b--)qb.sounds[qb.soundIDs[b]].mute();return qb.muted=!0,!0},this.muteAll=function(){qb.mute()},this.unmute=function(a){var b;if(a instanceof String&&(a=null),a)return W(a)?(qb._wD(tb+'.unmute(): Unmuting "'+a+'"'),qb.sounds[a].unmute()):!1;for(qb._wD(tb+".unmute(): Unmuting all sounds"),b=qb.soundIDs.length-1;b>=0;b--)qb.sounds[qb.soundIDs[b]].unmute();return qb.muted=!1,!0},this.unmuteAll=function(){qb.unmute()},this.toggleMute=function(a){return W(a)?qb.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return sb&&8!==l&&(a=parseInt(sb._getMemoryUse(),10)),a},this.disable=function(c){var d;if(c===b&&(c=!1),Eb)return!1;for(Eb=!0,n("shutdown",1),d=qb.soundIDs.length-1;d>=0;d--)L(qb.sounds[qb.soundIDs[d]]);return o(c),hb.remove(a,"load",u),!0},this.canPlayMIME=function(a){var b;return qb.hasHTML5&&(b=cb({type:a})),!b&&Qb&&(b=a&&qb.ok()?!!((l>8?a.match(kc):null)||a.match(qb.mimePattern)):null),b},this.canPlayURL=function(a){var b;return qb.hasHTML5&&(b=cb({url:a})),!b&&Qb&&(b=a&&qb.ok()?!!a.match(qb.filePattern):null),b},this.canPlayLink=function(a){return a.type!==b&&a.type&&qb.canPlayMIME(a.type)?!0:qb.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)return null;var c=qb.sounds[a];return c||b||qb._wD(tb+'.getSoundById(): Sound "'+a+'" not found.',2),c},this.onready=function(b,c){var d="onready",e=!1;if("function"!=typeof b)throw O("needFunction",d);return Db&&qb._wD(O("queue",d)),c||(c=a),s(d,b,c),t(),e=!0,e},this.ontimeout=function(b,c){var d="ontimeout",e=!1;if("function"!=typeof b)throw O("needFunction",d);return Db&&qb._wD(O("queue",d)),c||(c=a),s(d,b,c),t({type:d}),e=!0,e},this._writeDebug=function(a,c){var d,e,f="soundmanager-debug";return qb.debugMode?ac&&qb.useConsole&&(c&&"object"==typeof c?console.log(a,c):Hb[c]!==b?console[Hb[c]](a):console.log(a),qb.consoleOnly)?!0:(d=h(f))?(e=yb.createElement("div"),++Gb%2===0&&(e.className="sm2-alt"),c=c===b?0:parseInt(c,10),e.appendChild(yb.createTextNode(a)),c&&(c>=2&&(e.style.fontWeight="bold"),3===c&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild),d=null,!0):!1:!1},-1!==xb.indexOf("sm2-debug=alert")&&(this._writeDebug=function(b){a.alert(b)}),this._wD=this._writeDebug,this._debug=function(){var a,b;for(n("currentObj",1),a=0,b=qb.soundIDs.length;b>a;a++)qb.sounds[qb.soundIDs[a]]._debug()},this.reboot=function(b,c){qb.soundIDs.length&&qb._wD("Destroying "+qb.soundIDs.length+" SMSound object"+(1!==qb.soundIDs.length?"s":"")+"...");var d,e,f;for(d=qb.soundIDs.length-1;d>=0;d--)qb.sounds[qb.soundIDs[d]].destruct();if(sb)try{Wb&&(Kb=sb.innerHTML),Jb=sb.parentNode.removeChild(sb)}catch(g){n("badRemove",2)}if(Kb=Jb=Qb=sb=null,qb.enabled=F=Db=Lb=Mb=Bb=Cb=Eb=Sb=qb.swfLoaded=!1,qb.soundIDs=[],qb.sounds={},Tb=0,b)zb=[];else for(d in zb)if(zb.hasOwnProperty(d))for(e=0,f=zb[d].length;f>e;e++)zb[d][e].fired=!1;return c||qb._wD(tb+": Rebooting..."),qb.html5={usingFlash:null},qb.flash={},qb.html5Only=!1,qb.ignoreFlash=!1,a.setTimeout(function(){C(),c||qb.beginDelayedInit()},20),qb},this.reset=function(){return n("reset"),qb.reboot(!0,!0)},this.getMoviePercent=function(){return sb&&"PercentLoaded"in sb?sb.PercentLoaded():null},this.beginDelayedInit=function(){Fb=!0,D(),setTimeout(function(){return Mb?!1:(H(),B(),Mb=!0,!0)},20),v()},this.destruct=function(){qb._wD(tb+".destruct()"),qb.disable(!0)},g=function(a){var c,d,e,f,g,h,i,j,k,o,q=this,r=!1,s=[],t=0,u=null;k={duration:null,time:null},this.id=a.id,this.sID=this.id,this.url=a.url,this.options=p(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,o=this.url?!1:!0,this.id3={},this._debug=function(){qb._wD(q.id+": Merged options:",q.options)},this.load=function(a){var c,d=null;if(a!==b?q._iO=p(a,q.options):(a=q.options,q._iO=a,u&&u!==q.url&&(n("manURL"),q._iO.url=q.url,q.url=null)),q._iO.url||(q._iO.url=q.url),q._iO.url=$(q._iO.url),q.instanceOptions=q._iO,c=q._iO,qb._wD(q.id+": load ("+c.url+")"),!c.url&&!q.url)return qb._wD(q.id+": load(): url is unassigned. Exiting.",2),q;if(q.isHTML5||8!==l||q.url||c.autoPlay||qb._wD(q.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),c.url===q.url&&0!==q.readyState&&2!==q.readyState)return n("onURL",1),3===q.readyState&&c.onload&&pb(q,function(){c.onload.apply(q,[!!q.duration])}),q;if(q.loaded=!1,q.readyState=1,q.playState=0,q.id3={},bb(c))d=q._setup_html5(c),d._called_load?qb._wD(q.id+": Ignoring request to load again"):(q._html5_canplay=!1,q.url!==c.url&&(qb._wD(n("manURL")+": "+c.url),q._a.src=c.url,q.setPosition(0)),q._a.autobuffer="auto",q._a.preload="auto",q._a._called_load=!0);else{if(qb.html5Only)return qb._wD(q.id+": No flash support. Exiting."),q;if(q._iO.url&&q._iO.url.match(/data\:/i))return qb._wD(q.id+": data: URIs not supported via Flash. Exiting."),q;try{q.isHTML5=!1,q._iO=U(T(c)),q._iO.autoPlay&&(q._iO.position||q._iO.from)&&(qb._wD(q.id+": Disabling autoPlay because of non-zero offset case"),q._iO.autoPlay=!1),c=q._iO,8===l?sb._load(q.id,c.url,c.stream,c.autoPlay,c.usePolicyFile):sb._load(q.id,c.url,!!c.stream,!!c.autoPlay,c.loops||1,!!c.autoLoad,c.usePolicyFile)}catch(e){n("smError",2),m("onload",!1),I({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return q.url=c.url,q},this.unload=function(){return 0!==q.readyState&&(qb._wD(q.id+": unload()"),q.isHTML5?(f(),q._a&&(q._a.pause(),u=eb(q._a))):8===l?sb._unload(q.id,gc):sb._unload(q.id),c()),q},this.destruct=function(a){qb._wD(q.id+": Destruct"),q.isHTML5?(f(),q._a&&(q._a.pause(),eb(q._a),Sb||e(),q._a._s=null,q._a=null)):(q._iO.onfailure=null,sb._destroySound(q.id)),a||qb.destroySound(q.id,!0)},this.play=function(a,c){var d,e,f,i,k,m,n,s=!0,t=null;if(d=q.id+": play(): ",c=c===b?!0:c,a||(a={}),q.url&&(q._iO.url=q.url),q._iO=p(q._iO,q.options),q._iO=p(a,q._iO),q._iO.url=$(q._iO.url),q.instanceOptions=q._iO,!q.isHTML5&&q._iO.serverURL&&!q.connected)return q.getAutoPlay()||(qb._wD(d+" Netstream not connected yet - setting autoPlay"),q.setAutoPlay(!0)),q;if(bb(q._iO)&&(q._setup_html5(q._iO),g()),1!==q.playState||q.paused||(e=q._iO.multiShot,e?qb._wD(d+"Already playing (multi-shot)",1):(qb._wD(d+"Already playing (one-shot)",1),q.isHTML5&&q.setPosition(q._iO.position),t=q)),null!==t)return t;if(a.url&&a.url!==q.url&&(q.readyState||q.isHTML5||8!==l||!o?q.load(q._iO):o=!1),q.loaded?qb._wD(d.substr(0,d.lastIndexOf(":"))):0===q.readyState?(qb._wD(d+"Attempting to load"),q.isHTML5||qb.html5Only?q.isHTML5?q.load(q._iO):(qb._wD(d+"Unsupported type. Exiting."),t=q):(q._iO.autoPlay=!0,q.load(q._iO)),q.instanceOptions=q._iO):2===q.readyState?(qb._wD(d+"Could not load - exiting",2),t=q):qb._wD(d+"Loading - attempting to play..."),null!==t)return t;if(!q.isHTML5&&9===l&&q.position>0&&q.position===q.duration&&(qb._wD(d+"Sound at end, resetting to position:0"),a.position=0),q.paused&&q.position>=0&&(!q._iO.serverURL||q.position>0))qb._wD(d+"Resuming from paused state",1),q.resume();else{if(q._iO=p(a,q._iO),(!q.isHTML5&&null!==q._iO.position&&q._iO.position>0||null!==q._iO.from&&q._iO.from>0||null!==q._iO.to)&&0===q.instanceCount&&0===q.playState&&!q._iO.serverURL){if(i=function(){q._iO=p(a,q._iO),q.play(q._iO)},q.isHTML5&&!q._html5_canplay?(qb._wD(d+"Beginning load for non-zero offset case"),q.load({_oncanplay:i}),t=!1):q.isHTML5||q.loaded||q.readyState&&2===q.readyState||(qb._wD(d+"Preloading for non-zero offset case"),q.load({onload:i}),t=!1),null!==t)return t;q._iO=j()}(!q.instanceCount||q._iO.multiShotEvents||q.isHTML5&&q._iO.multiShot&&!Sb||!q.isHTML5&&l>8&&!q.getAutoPlay())&&q.instanceCount++,q._iO.onposition&&0===q.playState&&h(q),q.playState=1,q.paused=!1,q.position=q._iO.position===b||isNaN(q._iO.position)?0:q._iO.position,q.isHTML5||(q._iO=U(T(q._iO))),q._iO.onplay&&c&&(q._iO.onplay.apply(q),r=!0),q.setVolume(q._iO.volume,!0),q.setPan(q._iO.pan,!0),q.isHTML5?q.instanceCount<2?(g(),f=q._setup_html5(),q.setPosition(q._iO.position),f.play()):(qb._wD(q.id+": Cloning Audio() for instance #"+q.instanceCount+"..."),k=new Audio(q._iO.url),m=function(){hb.remove(k,"ended",m),q._onfinish(q),eb(k),k=null},n=function(){hb.remove(k,"canplay",n);try{k.currentTime=q._iO.position/fc}catch(a){V(q.id+": multiShot play() failed to apply position of "+q._iO.position/fc)}k.play()},hb.add(k,"ended",m),void 0!==q._iO.volume&&(k.volume=Math.max(0,Math.min(1,q._iO.volume/100))),q.muted&&(k.muted=!0),q._iO.position?hb.add(k,"canplay",n):k.play()):(s=sb._start(q.id,q._iO.loops||1,9===l?q.position:q.position/fc,q._iO.multiShot||!1),9!==l||s||(qb._wD(d+"No sound hardware, or 32-sound ceiling hit",2),q._iO.onplayerror&&q._iO.onplayerror.apply(q)))}return q},this.start=this.play,this.stop=function(a){var b,c=q._iO;return 1===q.playState&&(qb._wD(q.id+": stop()"),q._onbufferchange(0),q._resetOnPosition(0),q.paused=!1,q.isHTML5||(q.playState=0),i(),c.to&&q.clearOnPosition(c.to),q.isHTML5?q._a&&(b=q.position,q.setPosition(0),q.position=b,q._a.pause(),q.playState=0,q._onTimer(),f()):(sb._stop(q.id,a),c.serverURL&&q.unload()),q.instanceCount=0,q._iO={},c.onstop&&c.onstop.apply(q)),q},this.setAutoPlay=function(a){qb._wD(q.id+": Autoplay turned "+(a?"on":"off")),q._iO.autoPlay=a,q.isHTML5||(sb._setAutoPlay(q.id,a),a&&(q.instanceCount||1!==q.readyState||(q.instanceCount++,qb._wD(q.id+": Incremented instance count to "+q.instanceCount))))},this.getAutoPlay=function(){return q._iO.autoPlay},this.setPosition=function(a){a===b&&(a=0);var c,d,e=q.isHTML5?Math.max(a,0):Math.min(q.duration||q._iO.duration,Math.max(a,0));if(q.position=e,d=q.position/fc,q._resetOnPosition(q.position),q._iO.position=e,q.isHTML5){if(q._a){if(q._html5_canplay){if(q._a.currentTime!==d){qb._wD(q.id+": setPosition("+d+")");try{q._a.currentTime=d,(0===q.playState||q.paused)&&q._a.pause()}catch(f){qb._wD(q.id+": setPosition("+d+") failed: "+f.message,2)}}}else if(d)return qb._wD(q.id+": setPosition("+d+"): Cannot seek yet, sound not ready",2),q;q.paused&&q._onTimer(!0)}}else c=9===l?q.position:d,q.readyState&&2!==q.readyState&&sb._setPosition(q.id,c,q.paused||!q.playState,q._iO.multiShot);return q},this.pause=function(a){return q.paused||0===q.playState&&1!==q.readyState?q:(qb._wD(q.id+": pause()"),q.paused=!0,q.isHTML5?(q._setup_html5().pause(),f()):(a||a===b)&&sb._pause(q.id,q._iO.multiShot),q._iO.onpause&&q._iO.onpause.apply(q),q)},this.resume=function(){var a=q._iO;return q.paused?(qb._wD(q.id+": resume()"),q.paused=!1,q.playState=1,q.isHTML5?(q._setup_html5().play(),g()):(a.isMovieStar&&!a.serverURL&&q.setPosition(q.position),sb._pause(q.id,a.multiShot)),!r&&a.onplay?(a.onplay.apply(q),r=!0):a.onresume&&a.onresume.apply(q),q):q},this.togglePause=function(){return qb._wD(q.id+": togglePause()"),0===q.playState?(q.play({position:9!==l||q.isHTML5?q.position/fc:q.position}),q):(q.paused?q.resume():q.pause(),q)},this.setPan=function(a,c){return a===b&&(a=0),c===b&&(c=!1),q.isHTML5||sb._setPan(q.id,a),q._iO.pan=a,c||(q.pan=a,q.options.pan=a),q},this.setVolume=function(a,c){return a===b&&(a=100),c===b&&(c=!1),q.isHTML5?q._a&&(qb.muted&&!q.muted&&(q.muted=!0,q._a.muted=!0),q._a.volume=Math.max(0,Math.min(1,a/100))):sb._setVolume(q.id,qb.muted&&!q.muted||q.muted?0:a),q._iO.volume=a,c||(q.volume=a,q.options.volume=a),q},this.mute=function(){return q.muted=!0,q.isHTML5?q._a&&(q._a.muted=!0):sb._setVolume(q.id,0),q},this.unmute=function(){q.muted=!1;var a=q._iO.volume!==b;return q.isHTML5?q._a&&(q._a.muted=!1):sb._setVolume(q.id,a?q._iO.volume:q.options.volume),q},this.toggleMute=function(){return q.muted?q.unmute():q.mute()},this.onPosition=function(a,c,d){return s.push({position:parseInt(a,10),method:c,scope:d!==b?d:q,fired:!1}),q},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<s.length;c++)a===s[c].position&&(b&&b!==s[c].method||(s[c].fired&&t--,s.splice(c,1)))},this._processOnPosition=function(){var a,b,c=s.length;if(!c||!q.playState||t>=c)return!1;for(a=c-1;a>=0;a--)b=s[a],!b.fired&&q.position>=b.position&&(b.fired=!0,t++,b.method.apply(b.scope,[b.position]),c=s.length);return!0},this._resetOnPosition=function(a){var b,c,d=s.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=s[b],c.fired&&a<=c.position&&(c.fired=!1,t--);return!0},j=function(){var a,b,c=q._iO,d=c.from,e=c.to;return b=function(){qb._wD(q.id+': "To" time of '+e+" reached."),q.clearOnPosition(e,b),q.stop()},a=function(){qb._wD(q.id+': Playing "from" '+d),null===e||isNaN(e)||q.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},h=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.onPosition(parseInt(a,10),b[a])},i=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.clearOnPosition(parseInt(a,10))},g=function(){q.isHTML5&&X(q)},f=function(){q.isHTML5&&Y(q)},c=function(a){a||(s=[],t=0),r=!1,q._hasTimer=null,q._a=null,q._html5_canplay=!1,q.bytesLoaded=null,q.bytesTotal=null,q.duration=q._iO&&q._iO.duration?q._iO.duration:null,q.durationEstimate=null,q.buffered=[],q.eqData=[],q.eqData.left=[],q.eqData.right=[],q.failures=0,q.isBuffering=!1,q.instanceOptions={},q.instanceCount=0,q.loaded=!1,q.metadata={},q.readyState=0,q.muted=!1,q.paused=!1,q.peakData={left:0,right:0},q.waveformData={left:[],right:[]},q.playState=0,q.position=null,q.id3={}},c(),this._onTimer=function(a){var b,c,d=!1,e={};return q._hasTimer||a?(q._a&&(a||(q.playState>0||1===q.readyState)&&!q.paused)&&(b=q._get_html5_duration(),b!==k.duration&&(k.duration=b,q.duration=b,d=!0),q.durationEstimate=q.duration,c=q._a.currentTime*fc||0,c!==k.time&&(k.time=c,d=!0),(d||a)&&q._whileplaying(c,e,e,e,e)),d):void 0},this._get_html5_duration=function(){var a=q._iO,b=q._a&&q._a.duration?q._a.duration*fc:a&&a.duration?a.duration:null,c=b&&!isNaN(b)&&1/0!==b?b:null;return c},this._apply_loop=function(a,b){!a.loop&&b>1&&qb._wD("Note: Native HTML5 looping is infinite.",1),a.loop=b>1?"loop":""},this._setup_html5=function(a){var b,e=p(q._iO,a),f=Sb?rb:q._a,g=decodeURI(e.url);if(Sb?g===decodeURI(ib)&&(b=!0):g===decodeURI(u)&&(b=!0),f){if(f._s)if(Sb)f._s&&f._s.playState&&!b&&f._s.stop();else if(!Sb&&g===decodeURI(u))return q._apply_loop(f,e.loops),f;b||(u&&c(!1),f.src=e.url,q.url=e.url,u=e.url,ib=e.url,f._called_load=!1)}else e.autoLoad||e.autoPlay?(q._a=new Audio(e.url),q._a.load()):q._a=Zb&&opera.version()<10?new Audio(null):new Audio,f=q._a,f._called_load=!1,Sb&&(rb=f);return q.isHTML5=!0,q._a=f,f._s=q,d(),q._apply_loop(f,e.loops),e.autoLoad||e.autoPlay?q.load():(f.autobuffer=!1,f.preload="auto"),f},d=function(){function a(a,b,c){return q._a?q._a.addEventListener(a,b,c||!1):null}if(q._a._added_events)return!1;var b;q._a._added_events=!0;for(b in mb)mb.hasOwnProperty(b)&&a(b,mb[b]);return!0},e=function(){function a(a,b,c){return q._a?q._a.removeEventListener(a,b,c||!1):null}var b;qb._wD(q.id+": Removing event listeners"),q._a._added_events=!1;for(b in mb)mb.hasOwnProperty(b)&&a(b,mb[b])},this._onload=function(a){var b,c=!!a||!q.isHTML5&&8===l&&q.duration;return b=q.id+": ",qb._wD(b+(c?"onload()":"Failed to load / invalid sound?"+(q.duration?" -":" Zero-length duration reported.")+" ("+q.url+")"),c?1:2),c||q.isHTML5||(qb.sandbox.noRemote===!0&&qb._wD(b+O("noNet"),1),qb.sandbox.noLocal===!0&&qb._wD(b+O("noLocal"),1)),q.loaded=c,q.readyState=c?3:2,q._onbufferchange(0),q._iO.onload&&pb(q,function(){q._iO.onload.apply(q,[c])}),!0},this._onbufferchange=function(a){return 0===q.playState?!1:a&&q.isBuffering||!a&&!q.isBuffering?!1:(q.isBuffering=1===a,q._iO.onbufferchange&&(qb._wD(q.id+": Buffer state change: "+a),q._iO.onbufferchange.apply(q,[a])),!0)},this._onsuspend=function(){return q._iO.onsuspend&&(qb._wD(q.id+": Playback suspended"),q._iO.onsuspend.apply(q)),!0},this._onfailure=function(a,b,c){q.failures++,qb._wD(q.id+": Failure ("+q.failures+"): "+a),q._iO.onfailure&&1===q.failures?q._iO.onfailure(a,b,c):qb._wD(q.id+": Ignoring failure")},this._onwarning=function(a,b,c){q._iO.onwarning&&q._iO.onwarning(a,b,c)},this._onfinish=function(){var a=q._iO.onfinish;q._onbufferchange(0),q._resetOnPosition(0),q.instanceCount&&(q.instanceCount--,q.instanceCount||(i(),q.playState=0,q.paused=!1,q.instanceCount=0,q.instanceOptions={},q._iO={},f(),q.isHTML5&&(q.position=0)),(!q.instanceCount||q._iO.multiShotEvents)&&a&&(qb._wD(q.id+": onfinish()"),pb(q,function(){a.apply(q)})))},this._whileloading=function(a,b,c,d){var e=q._iO;q.bytesLoaded=a,q.bytesTotal=b,q.duration=Math.floor(c),q.bufferLength=d,q.durationEstimate=q.isHTML5||e.isMovieStar?q.duration:e.duration?q.duration>e.duration?q.duration:e.duration:parseInt(q.bytesTotal/q.bytesLoaded*q.duration,10),q.isHTML5||(q.buffered=[{start:0,end:q.duration}]),(3!==q.readyState||q.isHTML5)&&e.whileloading&&e.whileloading.apply(q)},this._whileplaying=function(a,c,d,e,f){var g,h=q._iO;return isNaN(a)||null===a?!1:(q.position=Math.max(0,a),q._processOnPosition(),!q.isHTML5&&l>8&&(h.usePeakData&&c!==b&&c&&(q.peakData={left:c.leftPeak,right:c.rightPeak}),h.useWaveformData&&d!==b&&d&&(q.waveformData={left:d.split(","),right:e.split(",")}),h.useEQData&&f!==b&&f&&f.leftEQ&&(g=f.leftEQ.split(","),q.eqData=g,q.eqData.left=g,f.rightEQ!==b&&f.rightEQ&&(q.eqData.right=f.rightEQ.split(",")))),1===q.playState&&(q.isHTML5||8!==l||q.position||!q.isBuffering||q._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(q)),!0)},this._oncaptiondata=function(a){qb._wD(q.id+": Caption data received."),q.captiondata=a,q._iO.oncaptiondata&&q._iO.oncaptiondata.apply(q,[a])},this._onmetadata=function(a,b){qb._wD(q.id+": Metadata received.");var c,d,e={};for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];q.metadata=e,console.log("updated metadata",q.metadata),q._iO.onmetadata&&q._iO.onmetadata.call(q,q.metadata)},this._onid3=function(a,b){qb._wD(q.id+": ID3 data received.");var c,d,e=[];for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];q.id3=p(q.id3,e),q._iO.onid3&&q._iO.onid3.apply(q)},this._onconnect=function(a){a=1===a,qb._wD(q.id+": "+(a?"Connected.":"Failed to connect? - "+q.url),a?1:2),q.connected=a,a&&(q.failures=0,W(q.id)&&(q.getAutoPlay()?q.play(b,q.getAutoPlay()):q._iO.autoLoad&&q.load()),q._iO.onconnect&&q._iO.onconnect.apply(q,[a]))},this._ondataerror=function(a){q.playState>0&&(qb._wD(q.id+": Data error: "+a),q._iO.ondataerror&&q._iO.ondataerror.apply(q))},this._debug()},G=function(){return yb.body||yb.getElementsByTagName("div")[0]},h=function(a){return yb.getElementById(a)},p=function(a,c){var d,e,f=a||{};d=c===b?qb.defaultOptions:c;for(e in d)d.hasOwnProperty(e)&&f[e]===b&&(f[e]="object"!=typeof d[e]||null===d[e]?d[e]:p(f[e],d[e]));return f},pb=function(b,c){b.isHTML5||8!==l?c():a.setTimeout(c,0)},r={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},q=function(a,c){var d,e=!0,f=c!==b,g=qb.setupOptions,h=r;if(a===b){e=[];for(d in g)g.hasOwnProperty(d)&&e.push(d);
for(d in h)h.hasOwnProperty(d)&&e.push("object"==typeof qb[d]?d+": {...}":qb[d]instanceof Function?d+": function() {...}":d);return qb._wD(O("setup",e.join(", "))),!1}for(d in a)if(a.hasOwnProperty(d))if("object"!=typeof a[d]||null===a[d]||a[d]instanceof Array||a[d]instanceof RegExp)f&&h[c]!==b?qb[c][d]=a[d]:g[d]!==b?(qb.setupOptions[d]=a[d],qb[d]=a[d]):h[d]===b?(V(O(qb[d]===b?"setupUndef":"setupError",d),2),e=!1):qb[d]instanceof Function?qb[d].apply(qb,a[d]instanceof Array?a[d]:[a[d]]):qb[d]=a[d];else{if(h[d]!==b)return q(a[d],d);V(O(qb[d]===b?"setupUndef":"setupError",d),2),e=!1}return e},hb=function(){function b(a){var b=Rb.call(a),c=b.length;return f?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function c(a,b){var c=a.shift(),d=[g[b]];f?c[d](a[0],a[1]):c[d].apply(c,a)}function d(){c(b(arguments),"add")}function e(){c(b(arguments),"remove")}var f=a.attachEvent,g={add:f?"attachEvent":"addEventListener",remove:f?"detachEvent":"removeEventListener"};return{add:d,remove:e}}(),mb={abort:f(function(){qb._wD(this._s.id+": abort")}),canplay:f(function(){var a,c=this._s;if(c._html5_canplay)return!0;if(c._html5_canplay=!0,qb._wD(c.id+": canplay"),c._onbufferchange(0),a=c._iO.position===b||isNaN(c._iO.position)?null:c._iO.position/fc,this.currentTime!==a){qb._wD(c.id+": canplay: Setting position to "+a);try{this.currentTime=a}catch(d){qb._wD(c.id+": canplay: Setting position of "+a+" failed: "+d.message,2)}}c._iO._oncanplay&&c._iO._oncanplay()}),canplaythrough:f(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),durationchange:f(function(){var a,b=this._s;a=b._get_html5_duration(),isNaN(a)||a===b.duration||(qb._wD(this._s.id+": durationchange ("+a+")"+(b.duration?", previously "+b.duration:"")),b.durationEstimate=b.duration=a)}),ended:f(function(){var a=this._s;qb._wD(a.id+": ended"),a._onfinish()}),error:f(function(){qb._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:f(function(){var a=this._s;qb._wD(a.id+": loadeddata"),a._loaded||Yb||(a.duration=a._get_html5_duration())}),loadedmetadata:f(function(){qb._wD(this._s.id+": loadedmetadata")}),loadstart:f(function(){qb._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:f(function(){this._s._onbufferchange(0)}),playing:f(function(){qb._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:f(function(a){var b,c,d,e=this._s,f=0,g="progress"===a.type,h=a.target.buffered,i=a.loaded||0,j=a.total||1;if(e.buffered=[],h&&h.length){for(b=0,c=h.length;c>b;b++)e.buffered.push({start:h.start(b)*fc,end:h.end(b)*fc});if(f=(h.end(0)-h.start(0))*fc,i=Math.min(1,f/(a.target.duration*fc)),g&&h.length>1){for(d=[],c=h.length,b=0;c>b;b++)d.push(a.target.buffered.start(b)*fc+"-"+a.target.buffered.end(b)*fc);qb._wD(this._s.id+": progress, timeRanges: "+d.join(", "))}g&&!isNaN(i)&&qb._wD(this._s.id+": progress, "+Math.floor(100*i)+"% loaded")}isNaN(i)||(e._whileloading(i,j,e._get_html5_duration()),i&&j&&i===j&&mb.canplaythrough.call(this,a))}),ratechange:f(function(){qb._wD(this._s.id+": ratechange")}),suspend:f(function(a){var b=this._s;qb._wD(this._s.id+": suspend"),mb.progress.call(this,a),b._onsuspend()}),stalled:f(function(){qb._wD(this._s.id+": stalled")}),timeupdate:f(function(){this._s._onTimer()}),waiting:f(function(){var a=this._s;qb._wD(this._s.id+": waiting"),a._onbufferchange(1)})},bb=function(a){var b;return b=a&&(a.type||a.url||a.serverURL)?a.serverURL||a.type&&e(a.type)?!1:a.type?cb({type:a.type}):cb({url:a.url})||qb.html5Only||a.url.match(/data\:/i):!1},eb=function(a){var b;return a&&(b=Yb?gc:qb.html5.canPlayType("audio/wav")?hc:gc,a.src=b,void 0!==a._called_unload&&(a._called_load=!1)),Sb&&(ib=null),b},cb=function(a){if(!qb.useHTML5Audio||!qb.hasHTML5)return!1;var c,d,f,g,h=a.url||null,i=a.type||null,j=qb.audioFormats;if(i&&qb.html5[i]!==b)return qb.html5[i]&&!e(i);if(!db){db=[];for(g in j)j.hasOwnProperty(g)&&(db.push(g),j[g].related&&(db=db.concat(j[g].related)));db=new RegExp("\\.("+db.join("|")+")(\\?.*)?$","i")}return f=h?h.toLowerCase().match(db):null,f&&f.length?f=f[1]:i?(d=i.indexOf(";"),f=(-1!==d?i.substr(0,d):i).substr(6)):c=!1,f&&qb.html5[f]!==b?c=qb.html5[f]&&!e(f):(i="audio/"+f,c=qb.html5.canPlayType({type:i}),qb.html5[f]=c,c=c&&qb.html5[i]&&!e(i)),c},gb=function(){function a(a){var b,c,d=!1,e=!1;if(!g||"function"!=typeof g.canPlayType)return d;if(a instanceof Array){for(f=0,c=a.length;c>f;f++)(qb.html5[a[f]]||g.canPlayType(a[f]).match(qb.html5Test))&&(e=!0,qb.html5[a[f]]=!0,qb.flash[a[f]]=!!a[f].match(ec));d=e}else b=g&&"function"==typeof g.canPlayType?g.canPlayType(a):!1,d=!(!b||!b.match(qb.html5Test));return d}if(!qb.useHTML5Audio||!qb.hasHTML5)return qb.html5.usingFlash=!0,Qb=!0,!1;var c,d,e,f,g=Audio!==b?Zb&&opera.version()<10?new Audio(null):new Audio:null,h={};e=qb.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d="audio/"+c,h[c]=a(e[c].type),h[d]=h[c],c.match(ec)?(qb.flash[c]=!0,qb.flash[d]=!0):(qb.flash[c]=!1,qb.flash[d]=!1),e[c]&&e[c].related))for(f=e[c].related.length-1;f>=0;f--)h["audio/"+e[c].related[f]]=h[c],qb.html5[e[c].related[f]]=h[c],qb.flash[e[c].related[f]]=h[c];return h.canPlayType=g?a:null,qb.html5=p(qb.html5,h),qb.html5.usingFlash=ab(),Qb=qb.html5.usingFlash,!0},A={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:tb+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:ub+"Verify that %s is a valid path.",tryDebug:"Try "+tb+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:ub+"Non-HTTP page ("+yb.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, e.g. c:/sm2/ or /users/me/sm2/",waitFocus:ub+"Special case: Waiting for SWF to load with window focus...",waitForever:ub+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:ub+"Waiting for 100% SWF load...",needFunction:ub+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:ub+"_debug(): Current sound objects",waitOnload:ub+"Waiting for window.onload()",docLoaded:ub+"Document already loaded",onload:ub+"initComplete(): calling soundManager.onload()",onloadOK:tb+".onload() complete",didInit:ub+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:ub+"Failed to remove Flash node.",shutdown:tb+".disable(): Shutting down",queue:ub+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+R.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:ub+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:tb+".load(): current URL already assigned.",badFV:tb+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:ub+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:ub+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:tb+".setup(): allowed parameters: %s",setupError:tb+'.setup(): "%s" cannot be assigned with this method.',setupUndef:tb+'.setup(): Could not find option "%s"',setupLate:tb+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:ub+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:tb+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},O=function(){var a,b,c,d,e;if(a=Rb.call(arguments),d=a.shift(),e=A&&A[d]?A[d]:"",e&&a&&a.length)for(b=0,c=a.length;c>b;b++)e=e.replace("%s",a[b]);return e},T=function(a){return 8===l&&a.loops>1&&a.stream&&(n("as2loop"),a.stream=!1),a},U=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(qb._wD((b||"")+O("policy")),a.usePolicyFile=!0),a},V=function(a){ac&&console.warn!==b?console.warn(a):qb._wD(a)},i=function(){return!1},L=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=i);b=null},M=function(a){a===b&&(a=!1),(Eb||a)&&qb.disable(a)},N=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+qb.movieURL,qb.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},y=function(){l=parseInt(qb.flashVersion,10),8!==l&&9!==l&&(qb._wD(O("badFV",l,Ib)),qb.flashVersion=l=Ib);var a=qb.debugMode||qb.debugFlash?"_debug.swf":".swf";qb.useHTML5Audio&&!qb.html5Only&&qb.audioFormats.mp4.required&&9>l&&(qb._wD(O("needfl9")),qb.flashVersion=l=9),qb.version=qb.versionNumber+(qb.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(qb.defaultOptions=p(qb.defaultOptions,qb.flash9Options),qb.features.buffering=!0,qb.defaultOptions=p(qb.defaultOptions,qb.movieStarOptions),qb.filePatterns.flash9=new RegExp("\\.(mp3|"+lc.join("|")+")(\\?.*)?$","i"),qb.features.movieStar=!0):qb.features.movieStar=!1,qb.filePattern=qb.filePatterns[8!==l?"flash9":"flash8"],qb.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),qb.features.peakData=qb.features.waveformData=qb.features.eqData=l>8},J=function(a,b){return sb?void sb._setPolling(a,b):!1},K=function(){if(qb.debugURLParam.test(xb)&&(qb.debugMode=!0),h(qb.debugID))return!1;var a,b,c,d,e;if(!(!qb.debugMode||h(qb.debugID)||ac&&qb.useConsole&&qb.consoleOnly)){a=yb.createElement("div"),a.id=qb.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(yb.createTextNode("-")),a.onclick=S,a.title="Toggle SM2 debug console",wb.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=yb.createElement("div"),b.id=qb.debugID,b.style.display=qb.debugMode?"block":"none",qb.debugMode&&!h(a.id)){try{c=G(),c.appendChild(a)}catch(f){throw new Error(O("domError")+" \n"+f.toString())}c.appendChild(b)}}c=null},W=this.getSoundById,n=function(a,b){return a?qb._wD(O(a),b):""},S=function(){var a=h(qb.debugID),b=h(qb.debugID+"-toggle");return a?(Ab?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),void(Ab=!Ab)):!1},m=function(c,d,e){if(a.sm2Debugger!==b)try{sm2Debugger.handleEvent(c,d,e)}catch(f){return!1}return!0},Q=function(){var a=[];return qb.debugMode&&a.push(R.sm2Debug),qb.debugFlash&&a.push(R.flashDebug),qb.useHighPerformance&&a.push(R.highPerf),a.join(" ")},P=function(){var a=O("fbHandler"),b=qb.getMoviePercent(),c=R,d={type:"FLASHBLOCK"};return qb.html5Only?!1:void(qb.ok()?(qb.didFlashBlock&&qb._wD(a+": Unblocked"),qb.oMC&&(qb.oMC.className=[Q(),c.swfDefault,c.swfLoaded+(qb.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(Qb&&(qb.oMC.className=Q()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),qb._wD(a+": "+O("fbTimeout")+(b?" ("+O("fbLoaded")+")":""))),qb.didFlashBlock=!0,t({type:"ontimeout",ignoreInit:!0,error:d}),I(d)))},s=function(a,c,d){zb[a]===b&&(zb[a]=[]),zb[a].push({method:c,scope:d||null,fired:!1})},t=function(a){if(a||(a={type:qb.ok()?"onready":"ontimeout"}),!Db&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(qb.ok()||Eb&&!a.ignoreInit))return!1;var b,c,d={success:a&&a.ignoreInit?qb.ok():!Eb},e=a&&a.type?zb[a.type]||[]:[],f=[],g=[d],h=Qb&&!qb.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;c>b;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(b=0,c=f.length;c>b;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},u=function(){a.setTimeout(function(){qb.useFlashBlock&&P(),t(),"function"==typeof qb.onload&&(n("onload",1),qb.onload.apply(a),n("onloadOK",1)),qb.waitForWindowLoad&&hb.add(a,"load",u)},1)},kb=function(){if(jb!==b)return jb;var c,d,e,f=!1,g=navigator,h=g.plugins,i=a.ActiveXObject;if(h&&h.length)d="application/x-shockwave-flash",e=g.mimeTypes,e&&e[d]&&e[d].enabledPlugin&&e[d].enabledPlugin.description&&(f=!0);else if(i!==b&&!wb.match(/MSAppHost/i)){try{c=new i("ShockwaveFlash.ShockwaveFlash")}catch(j){c=null}f=!!c,c=null}return jb=f,f},ab=function(){var a,b,c=qb.audioFormats,d=Ub&&!!wb.match(/os (1|2|3_0|3_1)\s/i);if(d?(qb.hasHTML5=!1,qb.html5Only=!0,qb.oMC&&(qb.oMC.style.display="none")):qb.useHTML5Audio&&(qb.html5&&qb.html5.canPlayType||(qb._wD("SoundManager: No HTML5 Audio() support detected."),qb.hasHTML5=!1),_b&&qb._wD(ub+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(jb?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),qb.useHTML5Audio&&qb.hasHTML5){_=!0;for(b in c)c.hasOwnProperty(b)&&c[b].required&&(qb.html5.canPlayType(c[b].type)?qb.preferFlash&&(qb.flash[b]||qb.flash[c[b].type])&&(a=!0):(_=!1,a=!0))}return qb.ignoreFlash&&(a=!1,_=!0),qb.html5Only=qb.hasHTML5&&qb.useHTML5Audio&&!a,!qb.html5Only},$=function(a){var b,c,d,e=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(qb.canPlayMIME(a[b].type)){e=b;break}}else if(qb.canPlayURL(a[b])){e=b;break}a[e].url&&(a[e]=a[e].url),d=a[e]}else d=a;return d},X=function(a){a._hasTimer||(a._hasTimer=!0,!$b&&qb.html5PollingInterval&&(null===Ob&&0===Nb&&(Ob=setInterval(Z,qb.html5PollingInterval)),Nb++))},Y=function(a){a._hasTimer&&(a._hasTimer=!1,!$b&&qb.html5PollingInterval&&Nb--)},Z=function(){var a;if(null!==Ob&&!Nb)return clearInterval(Ob),Ob=null,!1;for(a=qb.soundIDs.length-1;a>=0;a--)qb.sounds[qb.soundIDs[a]].isHTML5&&qb.sounds[qb.soundIDs[a]]._hasTimer&&qb.sounds[qb.soundIDs[a]]._onTimer()},I=function(c){c=c!==b?c:{},"function"==typeof qb.onerror&&qb.onerror.apply(a,[{type:c.type!==b?c.type:null}]),c.fatal!==b&&c.fatal&&qb.disable()},lb=function(){if(!_b||!kb())return!1;var a,b,c=qb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(qb._wD(tb+": Using flash fallback for "+b+" format"),qb.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length-1;a>=0;a--)qb.html5[c[b].related[a]]=!1},this._setSandboxType=function(a){var c=qb.sandbox;c.type=a,c.description=c.types[c.types[a]!==b?a:"unknown"],"localWithFile"===c.type?(c.noRemote=!0,c.noLocal=!1,n("secNote",2)):"localWithNetwork"===c.type?(c.noRemote=!1,c.noLocal=!0):"localTrusted"===c.type&&(c.noRemote=!1,c.noLocal=!1)},this._externalInterfaceOK=function(a){if(qb.swfLoaded)return!1;var b;return m("swf",!0),m("flashtojs",!0),qb.swfLoaded=!0,cc=!1,_b&&lb(),a&&a.replace(/\+dev/i,"")===qb.versionNumber.replace(/\+dev/i,"")?void setTimeout(k,Wb?100:1):(b=tb+': Fatal: JavaScript file build "'+qb.versionNumber+'" does not match Flash SWF build "'+a+'" at '+qb.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(b)},0),!1)},H=function(a,c){function d(){var a,b=[],c=[],d=" + ";a="SoundManager "+qb.version+(!qb.html5Only&&qb.useHTML5Audio?qb.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),qb.html5Only?qb.html5PollingInterval&&b.push("html5PollingInterval ("+qb.html5PollingInterval+"ms)"):(qb.preferFlash&&b.push("preferFlash"),qb.useHighPerformance&&b.push("useHighPerformance"),qb.flashPollingInterval&&b.push("flashPollingInterval ("+qb.flashPollingInterval+"ms)"),qb.html5PollingInterval&&b.push("html5PollingInterval ("+qb.html5PollingInterval+"ms)"),qb.wmode&&b.push("wmode ("+qb.wmode+")"),qb.debugFlash&&b.push("debugFlash"),qb.useFlashBlock&&b.push("flashBlock")),b.length&&(c=c.concat([b.join(d)])),qb._wD(a+(c.length?d+c.join(", "):""),1),nb()}function e(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(Bb&&Cb)return!1;if(qb.html5Only)return y(),d(),qb.oMC=h(qb.movieID),k(),Bb=!0,Cb=!0,!1;var f,g,i,j,l,m,n,o,p=c||qb.url,q=qb.altURL||p,r="JS/Flash audio component (SoundManager 2)",s=G(),t=Q(),u=null,v=yb.getElementsByTagName("html")[0];if(u=v&&v.dir&&v.dir.match(/rtl/i),a=a===b?qb.id:a,y(),qb.url=N(ic?p:q),c=qb.url,qb.wmode=!qb.wmode&&qb.useHighPerformance?"transparent":qb.wmode,null!==qb.wmode&&(wb.match(/msie 8/i)||!Wb&&!qb.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Pb.push(A.spcWmode),qb.wmode=null),f={name:a,id:a,src:c,quality:"high",allowScriptAccess:qb.allowScriptAccess,bgcolor:qb.bgColor,pluginspage:jc+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:qb.wmode,hasPriority:"true"},qb.debugFlash&&(f.FlashVars="debug=1"),qb.wmode||delete f.wmode,Wb)g=yb.createElement("div"),j=['<object id="'+a+'" data="'+c+'" type="'+f.type+'" title="'+f.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+jc+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',e("movie",c),e("AllowScriptAccess",qb.allowScriptAccess),e("quality",f.quality),qb.wmode?e("wmode",qb.wmode):"",e("bgcolor",qb.bgColor),e("hasPriority","true"),qb.debugFlash?e("FlashVars",f.FlashVars):"","</object>"].join("");else{g=yb.createElement("embed");for(i in f)f.hasOwnProperty(i)&&g.setAttribute(i,f[i])}if(K(),t=Q(),s=G())if(qb.oMC=h(qb.movieID)||yb.createElement("div"),qb.oMC.id)o=qb.oMC.className,qb.oMC.className=(o?o+" ":R.swfDefault)+(t?" "+t:""),qb.oMC.appendChild(g),Wb&&(l=qb.oMC.appendChild(yb.createElement("div")),l.className=R.swfBox,l.innerHTML=j),Cb=!0;else{if(qb.oMC.id=qb.movieID,qb.oMC.className=R.swfDefault+" "+t,m=null,l=null,qb.useFlashBlock||(qb.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},u&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Xb&&(qb.oMC.style.zIndex=1e4),!qb.debugFlash)for(n in m)m.hasOwnProperty(n)&&(qb.oMC.style[n]=m[n]);try{Wb||qb.oMC.appendChild(g),s.appendChild(qb.oMC),Wb&&(l=qb.oMC.appendChild(yb.createElement("div")),l.className=R.swfBox,l.innerHTML=j),Cb=!0}catch(w){throw new Error(O("domError")+" \n"+w.toString())}}return Bb=!0,d(),!0},B=function(){return qb.html5Only?(H(),!1):sb?!1:qb.url?(sb=qb.getMovie(qb.id),sb||(Jb?(Wb?qb.oMC.innerHTML=Kb:qb.oMC.appendChild(Jb),Jb=null,Bb=!0):H(qb.id,qb.url),sb=qb.getMovie(qb.id)),"function"==typeof qb.oninitmovie&&setTimeout(qb.oninitmovie,1),ob(),!0):(n("noURL"),!1)},v=function(){setTimeout(w,1e3)},x=function(){a.setTimeout(function(){V(ub+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),qb.setup({preferFlash:!1}).reboot(),qb.didFlashBlock=!0,qb.beginDelayedInit()},1)},w=function(){var b,c=!1;return qb.url?Lb?!1:(Lb=!0,hb.remove(a,"load",v),jb&&cc&&!bc?(n("waitFocus"),!1):(Db||(b=qb.getMoviePercent(),b>0&&100>b&&(c=!0)),void setTimeout(function(){return b=qb.getMoviePercent(),c?(Lb=!1,qb._wD(O("waitSWF")),a.setTimeout(v,1),!1):(Db||(qb._wD(tb+": No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(qb.debugFlash?" "+O("checkSWF"):""),2),!ic&&b&&(n("localFail",2),qb.debugFlash||n("tryDebug",2)),0===b&&qb._wD(O("swf404",qb.url),1),m("flashtojs",!1," (Check flash security or flash blockers)")),void(!Db&&dc&&(null===b?qb.useFlashBlock||0===qb.flashLoadTimeout?(qb.useFlashBlock&&P(),n("waitForever")):!qb.useFlashBlock&&_?x():(n("waitForever"),t({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===qb.flashLoadTimeout?n("waitForever"):!qb.useFlashBlock&&_?x():M(!0))))},qb.flashLoadTimeout))):!1},z=function(){function b(){hb.remove(a,"focus",z)}return bc||!cc?(b(),!0):(dc=!0,bc=!0,n("gotFocus"),Lb=!1,v(),b(),!0)},ob=function(){Pb.length&&(qb._wD("SoundManager 2: "+Pb.join(" "),1),Pb=[])},nb=function(){ob();var a,b=[];if(qb.useHTML5Audio&&qb.hasHTML5){for(a in qb.audioFormats)qb.audioFormats.hasOwnProperty(a)&&b.push(a+" = "+qb.html5[a]+(!qb.html5[a]&&Qb&&qb.flash[a]?" (using flash)":qb.preferFlash&&qb.flash[a]&&Qb?" (preferring flash)":qb.html5[a]?"":" ("+(qb.audioFormats[a].required?"required, ":"")+"and no flash support)"));qb._wD("SoundManager 2 HTML5 support: "+b.join(", "),1)}},o=function(b){if(Db)return!1;if(qb.html5Only)return n("sm2Loaded",1),Db=!0,u(),m("onload",!0),!0;var c,d=qb.useFlashBlock&&qb.flashLoadTimeout&&!qb.getMoviePercent(),e=!0;return d||(Db=!0),c={type:!jb&&Qb?"NO_FLASH":"INIT_TIMEOUT"},qb._wD("SoundManager 2 "+(Eb?"failed to load":"loaded")+" ("+(Eb?"Flash security/load error":"OK")+") "+String.fromCharCode(Eb?10006:10003),Eb?2:1),Eb||b?(qb.useFlashBlock&&qb.oMC&&(qb.oMC.className=Q()+" "+(null===qb.getMoviePercent()?R.swfTimedout:R.swfError)),t({type:"ontimeout",error:c,ignoreInit:!0}),m("onload",!1),I(c),e=!1):m("onload",!0),Eb||(qb.waitForWindowLoad&&!Fb?(n("waitOnload"),hb.add(a,"load",u)):(qb.waitForWindowLoad&&Fb&&n("docLoaded"),u())),e},j=function(){var a,c=qb.setupOptions;for(a in c)c.hasOwnProperty(a)&&(qb[a]===b?qb[a]=c[a]:qb[a]!==c[a]&&(qb.setupOptions[a]=qb[a]))},k=function(){function b(){hb.remove(a,"load",qb.beginDelayedInit)}if(Db)return n("didInit"),!1;if(qb.html5Only)return Db||(b(),qb.enabled=!0,o()),!0;B();try{sb._externalInterfaceTest(!1),J(!0,qb.flashPollingInterval||(qb.useHighPerformance?10:50)),qb.debugMode||sb._disableDebug(),qb.enabled=!0,m("jstoflash",!0),qb.html5Only||hb.add(a,"unload",i)}catch(c){return qb._wD("js/flash exception: "+c.toString()),m("jstoflash",!1),I({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),M(!0),o(),!1}return o(),b(),!0},D=function(){return F?!1:(F=!0,j(),K(),function(){var a="sm2-usehtml5audio=",b="sm2-preferflash=",c=null,d=null,e=xb.toLowerCase();-1!==e.indexOf(a)&&(c="1"===e.charAt(e.indexOf(a)+a.length),ac&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),qb.setup({useHTML5Audio:c})),-1!==e.indexOf(b)&&(d="1"===e.charAt(e.indexOf(b)+b.length),ac&&console.log((d?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),qb.setup({preferFlash:d}))}(),!jb&&qb.hasHTML5&&(qb._wD("SoundManager 2: No Flash detected"+(qb.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),qb.setup({useHTML5Audio:!0,preferFlash:!1})),gb(),!jb&&Qb&&(Pb.push(A.needFlash),qb.setup({flashLoadTimeout:1})),yb.removeEventListener&&yb.removeEventListener("DOMContentLoaded",D,!1),B(),!0)},fb=function(){return"complete"===yb.readyState&&(D(),yb.detachEvent("onreadystatechange",fb)),!0},E=function(){Fb=!0,D(),hb.remove(a,"load",E)},C=function(){$b&&((!qb.setupOptions.useHTML5Audio||qb.setupOptions.preferFlash)&&Pb.push(A.mobileUA),qb.setupOptions.useHTML5Audio=!0,qb.setupOptions.preferFlash=!1,(Ub||Vb&&!wb.match(/android\s2\.3/i))&&(Pb.push(A.globalHTML5),Ub&&(qb.ignoreFlash=!0),Sb=!0))},C(),kb(),hb.add(a,"focus",z),hb.add(a,"load",v),hb.add(a,"load",E),yb.addEventListener?yb.addEventListener("DOMContentLoaded",D,!1):yb.attachEvent?yb.attachEvent("onreadystatechange",fb):(m("onload",!1),I({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!a||!a.document)throw new Error("SoundManager requires a browser with window and document objects.");var d=null;void 0!==a.SM2_DEFER&&SM2_DEFER||(d=new c),"object"==typeof module&&module&&"object"==typeof module.exports?(a.soundManager=d,module.exports.SoundManager=c,module.exports.soundManager=d):"function"==typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:c,soundManager:d}}):(a.SoundManager=c,a.soundManager=d)}(window),window.JST["apps/album/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div>\n<h3>')),d(t.gettext("Recently played")),d(b('</h3>\n<div class="landing-section region-recently-played"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/album/show/tpl/album_with_songs.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="album album--with-songs">\n    <div class="region-album-side">\n        <div class="region-album-meta"></div>\n    </div>\n    <div class="region-album-content">\n        <div class="region-album-songs"></div>\n    </div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/album/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-title">\n    <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n</div>\n\n\n\n<div class="region-details-meta-below">\n\n    <div class="artist"><a href="#music/artist/')),d(this.artistid),d(b('">')),d(this.artist),d(b("</a></div>\n\n    ")),this.genre.length>0&&(d(b('\n    <div class="album-genres">\n        ')),d(b(helpers.url.filterLinks("music/albums","genre",this.genre))),d(b("\n    </div>\n    "))),d(b('\n\n    <div class="description">')),d(this.description),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/artist/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-title">\n    <h2>')),d(this.label),d(b(' <span class="sub">')),d(this.formed),d(b('</span></h2>\n</div>\n\n\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="artist-genres">\n            ')),d(b(helpers.url.filterLinks("music/artists","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <div class="description">')),d(this.description),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/back_button.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<i class="mdi thumb"></i><div class="title">')),d(t.gettext("Back")),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/file.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="thumb" style="background-image: url(\'')),d(this.thumbnail),d(b('\')"><div class="mdi play"></div></div>\n<div class="title">')),d(this.label),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/folder_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="folder-layout">\n    <div class="loading-bar"><div class="inner"><span>')),d(t.gettext("Loading folder...")),d(b('</span></div></div>\n    <div class="path"></div>\n    <div class="folder-container">\n        <div class="files">\n        </div>\n        <div class="folders-pane">\n            <div class="back"></div>\n            <div class="folders">\n                <div class="intro">\n                    <h3><span class="mdi-navigation-arrow-back text-dim"></span> ')),d(t.gettext("Browse Files and AddOns")),d(b("</h3>\n                    <p>")),d(t.gettext("This is where you can browse all Kodi content, not just what is in the library. Browse by source or addon.")),d(b("</p>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/path.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="title">')),d(this.label),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/source.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="source source-')),d(this.media),d(b('">\n    ')),d(this.label),d(b("\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/source_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(this.label),d(b('</h3>\n<ul class="sources"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/cast/list/tpl/cast.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<a href="#')),d(this.origin),d(b("?cast=")),d(this.name),d(b('" title="')),d(this.name),d(b(" (")),d(this.role),d(b(')">\n    <div class="thumb">\n        <img src="')),d(this.thumbnail),d(b('" />\n    </div>\n    <div class="meta">\n        <strong>')),d(this.name),d(b('</strong>\n        <span title="')),d(this.role),d(b('">')),d(this.role),d(b('</span>\n    </div>\n</a>\n<ul class="actions">\n    <li class="imdb"></li>\n    <li class="google"></li>\n</ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/epg/list/tpl/programmes.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("\n<div ")),this.isactive&&d(b(' class="airing" ')),d(b(" ><strong>")),d(this.label),d(b("</strong>")),this.hastimer&&d(b('<span class="hastimer"></span>')),d(b("</div>\n<div><strong>")),d(t.gettext("Start")),d(b(":</strong> ")),d(helpers.global.epgDateTimeToJS(this.starttime).toLocaleString()),d(b("</div>\n<div><strong>")),d(t.gettext("End")),d(b(":</strong> ")),d(helpers.global.epgDateTimeToJS(this.endtime).toLocaleString()),d(b("</div>\n<div><strong> ")),d(t.gettext("Runtime")),d(b(":</strong> ")),d(this.runtime),d(b(" </div>\n<div>")),d(this.plot),d(b('</div>\n<div class="programme-progress"><div class="current-progress" style="width: ')),d(this.progresspercentage),d(b('%" title="')),d(Math.round(this.progresspercentage)),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/external/youtube/tpl/youtube.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<img src="')),d(this.thumbnail),d(b('" class="thumb" />\n<h3>')),d(this.title),d(b('</h3>\n<span class="play-kodi flat-btn action">Play in Kodi</span>\n<span class="play-local flat-btn action">Play in Browser</span>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filter_options.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="options-search-wrapper">\n    <input class="options-search" value="" />\n</div>\n<div class="deselect-all">')),d(t.gettext("Deselect all")),d(b('</div>\n<ul class="selection-list"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filters_bar.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<span class="filters-active-all">')),d(this.filters),d(b('</span><i class="remove"></i>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filters_ui.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="filters-container">\n\n    <div class="filters-current filter-pane">\n        <div class="nav-section"></div>\n\n        <h3 class="open-filters">')),d(t.gettext("Filters")),d(b('<i></i></h3>\n        <div class="filters-active"></div>\n\n        <h3>')),d(t.gettext("Sort")),d(b('</h3>\n        <div class="list sort-options"></div>\n    </div>\n\n    <div class="filters-page filter-pane">\n        <h3 class="close-filters">')),d(t.gettext("Select a filter")),d(b('</h3>\n        <div class="list filters-list"></div>\n    </div>\n\n    <div class="filters-options filter-pane">\n        <h3 class="close-options">')),d(t.gettext("Select an option")),d(b('</h3>\n        <div class="list filter-options-list"></div>\n    </div>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/list_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(this.title))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/input/remote/tpl/remote_control.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="remote-background"></div>\n<div class="remote kodi-remote">\n    <div class="toggle-visibility"></div>\n    <div class="playing-area">\n\n    </div>\n    <div class="main-controls">\n        <div class="direction">\n            <div class="pad">\n                <div class="ibut mdi-hardware-keyboard-arrow-left left input-button" data-type="Left"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-up up input-button" data-type="Up"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-down down input-button" data-type="Down"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-right right input-button" data-type="Right"></div>\n                <div class="ibut mdi-image-brightness-1 ok input-button" data-type="Select"></div>\n            </div>\n        </div>\n        <div class="buttons">\n            <div class="ibut mdi-action-settings-power power-button"></div>\n            <div class="ibut mdi-navigation-more-vert input-button" data-type="ContextMenu"></div>\n            <div class="ibut mdi-action-info input-button" data-type="Info"></div>\n        </div>\n    </div>\n    <div class="secondary-controls">\n        <div class="ibut mdi-hardware-keyboard-return input-button" data-type="Back"></div>\n        <div class="ibut mdi-av-stop player-button" data-type="Stop"></div>\n        <div class="ibut mdi-maps-store-mall-directory input-button" data-type="Home"></div>\n    </div>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/loading/show/tpl/loading_page.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="loading-page">\n    <div class="spinner-double-section-far"></div>\n    <h2>')),d(t.gettext("Just a sec...")),d(b("</h2>\n</div>\n\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<span class="item">')),d(b(this.title)),d(b("</span>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="local-playlist-header">\n    <h2></h2>\n    <div class="dropdown">\n        <i data-toggle="dropdown"></i>\n        <ul class="dropdown-menu">\n            <li class="play">Play in Kodi</li>\n            <li class="localplay">Play in browser</li>\n            <li class="lsit">Export list</li>\n            <div class="divider"></div>\n            <li class="clear">Clear playlist</li>\n            <li class="delete">Delete playlist</li>\n        </ul>\n    </div>\n</div>\n<div class="item-container">\n    <div class="empty-content">')),d(t.gettext("Empty playlist, you should probably add something to it?")),d(b("</div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_list.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h3></h3>\n<ul class="lists"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_sidebar_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="current-lists"></div>\n<div class="new-list">New Playlist</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/content.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('\n<div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n\n<div class="section-content">\n    <h2>')),d(t.gettext("Synopsis")),d(b("</h2>\n    ")),"youtube"===this.trailer.source&&(d(b('\n        <div class="trailer ')),d(this.trailer.source),d(b('">\n            <img src="')),d(b(this.trailer.img)),d(b('" />\n        </div>\n    '))),d(b("\n    <p>")),d(this.plot),d(b('</p>\n    <ul class="inline-links">\n        <li>')),d(b(helpers.url.imdbUrl(this.imdbnumber,"View on imdb"))),d(b("</li>\n    </ul>\n</div>\n\n")),this.cast.length>0&&(d(b('\n    <div class="section-content">\n        <h2>')),d(t.gettext("Full cast")),d(b('</h2>\n        <div class="region-cast"></div>\n    </div>\n'))),d(b('\n\n<div class="region-sets section-content"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;if(d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n\n        <div class="runtime">\n            ')),d(helpers.global.formatTime(helpers.global.secToTime(this.runtime))),d(b("\n        </div>\n\n        ")),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("movies","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <div class="description">')),d(this.plotoutline),d(b('</div>\n\n    <ul class="people">\n        ')),this.director.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Director","Directors",this.director.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","director",this.director))),d(b("</span></li>\n        "))),d(b("\n        ")),this.writer.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Writer","Writers",this.writer.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","writer",this.writer))),d(b("</span></li>\n        "))),d(b("\n        ")),this.cast.length>0&&(d(b("\n            <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <ul class="streams">\n        <li><label>')),d(t.gettext("Video")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.video,"label").join(", ")),d(b("</span></li>\n        <li><label>")),d(t.gettext("Audio")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.audio,"label").join(", ")),d(b("</span></li>\n        ")),this.streamdetails.subtitle.length>0&&""!==this.streamdetails.subtitle[0].label){for(d(b("\n            <li><label>")),d(t.ngettext("Subtitle","Subtitles",this.streamdetails.subtitle.length)),d(b(':</label>\n                <span class="dropdown"><span data-toggle="dropdown">')),d(_.pluck(this.streamdetails.subtitle,"label").join(", ")),d(b('</span>\n                <ul class="dropdown-menu">\n                    ')),f=this.streamdetails.subtitle,c=0,e=f.length;e>c;c++)a=f[c],d(b("\n                        <li>")),d(a.label),d(b("</li>\n                    "));d(b("\n                </ul>\n                </span>\n            </li>\n        "))}d(b('\n    </ul>\n\n    <ul class="inline-links">\n        <li class="btn-flat-play play">')),d(t.gettext("Play")),d(b('</li>\n        <li class="btn-flat-add add">')),d(t.gettext("Queue")),d(b('</li>\n        <li class="btn-flat-stream stream">')),d(t.gettext("Stream")),d(b('</li>\n        <li class="btn-flat-download download">')),d(t.gettext("Download")),d(b("</li>\n    </ul>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="set-collection">\n    <h2 class="set-name"></h2>\n    <div class="collection-items"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/navMain.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j;for(d(b('<div id="nav-header"></div>\n<nav>\n    <ul>\n        ')),i=this.items,e=0,g=i.length;g>e;e++)if(c=i[e],"undefined"!==c.path&&0===c.parent){if(d(b('\n            <li class="')),d(c["class"]),d(b('">\n                <a href="#')),d(c.path),d(b('">\n                    <i class="')),d(c.icon),d(b('"></i>\n                    <span>')),d(c.title),d(b("</span>\n                </a>\n\n                ")),0!==c.children.length){for(d(b("\n                <ul>\n                    ")),j=c.children,f=0,h=j.length;h>f;f++)a=j[f],"undefined"!==a.path&&(d(b('\n                      <li><a href="#')),d(a.path),d(b('">')),d(a.title),d(b("</a></li>\n                    ")));d(b("\n                </ul>\n                "))}d(b("\n            </li>\n        "))}d(b("\n    </ul>\n</nav>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/nav_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(this.link))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/nav_sub.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(this.title),d(b('</h3>\n<ul class="items"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/player/show/tpl/player.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="player">\n\n    <div class="controls-primary">\n        <div class="controls-primary-buttons">\n            <div class="control control-prev"></div>\n            <div class="control control-play"></div>\n            <div class="control control-next"></div>\n        </div>\n    </div>\n\n    <div class="controls-secondary">\n        <div class="volume slider-bar"></div>\n        <div class="controls-secondary-buttons">\n            <div class="control control-mute"></div>\n            <div class="control control-repeat"></div>\n            <div class="control control-shuffle"></div>\n            <div class="control control-menu"></div>\n        </div>\n    </div>\n\n    <div class="now-playing">\n        <div class="playing-thumb thumb">\n            <div class="mdi remote-toggle"></div>\n        </div>\n        <div class="playing-info">\n            <div class="playing-progress slider-bar"></div>\n            <div class="playing-time">\n                <div class="playing-time-current">0</div>\n                <div class="playing-time-duration">0:00</div>\n            </div>\n            <div class="playing-meta">\n                <div class="playing-title">')),d(t.gettext("Nothing playing")),d(b('</div>\n                <div class="playing-subtitle"></div>\n            </div>\n        </div>\n    </div>\n\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/list/tpl/playlist_bar.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="playlist-header">\n    <ul class="player-toggle">\n        <li class="kodi">')),d(t.gettext("Kodi")),d(b('</li>\n        <li class="local">')),d(t.gettext("Local")),d(b('</li>\n    </ul>\n    <div class="playlist-menu dropdown">\n        <i data-toggle="dropdown" class="menu-toggle"></i>\n        <ul class="dropdown-menu pull-right">\n            <li class="dropdown-header">')),d(t.gettext("Current playlist")),d(b('</li>\n            <li><a href="#" class="clear-playlist">')),d(t.gettext("Clear playlist")),d(b('</a></li>\n            <li><a href="#" class="refresh-playlist">')),d(t.gettext("Refresh playlist")),d(b('</a></li>\n            <li class="dropdown-header">')),d(t.gettext("Kodi")),d(b('</li>\n            <li><a href="#" class="party-mode">')),d(t.gettext("Party mode")),d(b(' <i class="mdi-navigation-check"></i></a></li>\n            <li><a href="#" class="save-playlist">')),d(t.gettext("Save Kodi playlist")),d(b('</a></li>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="playlists-wrapper">\n    <div class="kodi-playlists">\n        <ul class="media-toggle">\n            <li class="audio">')),d(t.gettext("Audio")),d(b('</li>\n            <li class="video">')),d(t.gettext("Video")),d(b('</li>\n        </ul>\n        <div class="kodi-playlist"></div>\n    </div>\n    <div class="local-playlists">\n        <div class="local-playlist"></div>\n    </div>\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/list/tpl/playlist_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="item-inner item-')),d(this.type),d(b('">\n    <div class="artwork">\n        <div class="thumb" title="')),d(this.label),d(b('" style="background-image: url(\'')),d(this.thumbnail),d(b('\')">\n            <div class="mdi play"></div>\n        </div>\n    </div>\n    <div class="meta">\n        <div class="title"><a href="#')),d(this.url),d(b('" title="')),d(this.label),d(b('">')),d(this.label),d(b("</a></div>\n        ")),null!=this.subtitle&&(d(b('\n        <div class="subtitle">')),d(b(this.subtitle)),d(b("</div>\n        "))),d(b('\n    </div>\n    <div class="remove"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/show/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="playlist-page playlist-page__empty set-page">\n    <h3>')),d(t.gettext("Now Playing Playlists")),d(b("</h3>\n    <p>")),d(t.gettext("Switch between Kodi and local playback via the tabs. You can toggle visibility with the arrow in the top right")),d(b("</p>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/pvr/list/tpl/channel.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="play">\n    <div class="thumb">\n        <img src="')),d(this.thumbnail),d(b('" />\n    </div>\n    <div class="meta">\n        <strong>')),d(this.label),d(b("</strong>\n    </div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/list/tpl/search_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="search-inner">\n    <div class="entity-set entity-set-movie"></div>\n    <div class="entity-set entity-set-tvshow"></div>\n    <div class="entity-set entity-set-artist"></div>\n    <div class="entity-set entity-set-album"></div>\n    <div class="entity-set entity-set-song"></div>\n    <div class="entity-set entity-set-loading"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/list/tpl/search_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h2 class="set-header"></h2>\n<div class="set-results"></div>\n<div class="more"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/show/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="search-page search-page__empty set-page">\n    <h3>')),d(t.gettext("Enter your search above")),d(b("</h3>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/shell/show/tpl/homepage.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="homepage"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/shell/show/tpl/shell.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="shell">\n\n    <a id="logo" href="#"></a>\n\n    <div id="nav-bar"></div>\n\n    <div id="header">\n\n        <h1 id="page-title">\n            <span class="context"></span>\n            <span class="title"></span>\n        </h1>\n\n        <ul class="mobile-menu">\n            <li><a href="#remote" class="mobile-menu--link__remote remote-toggle"><i></i></a></li>\n            <li><a href="#search" class="mobile-menu--link__search"><i></i></a></li>\n            <li><a href="#playlist" class="mobile-menu--link__playlist"><i></i></a></li>\n        </ul>\n\n        <div id="search-region">\n            <input id="search" title="Search">\n            <span id="do-search"></span>\n        </div>\n\n    </div>\n\n    <div id="main">\n\n        <div id="sidebar-one"></div>\n\n        <div id="content">')),d(t.gettext("Loading things...")),d(b('</div>\n\n    </div>\n\n    <div id="sidebar-two">\n        <div class="playlist-toggle-open"></div>\n        <div id="playlist-summary"></div>\n        <div id="playlist-bar"></div>\n    </div>\n\n    <div id="remote"></div>\n\n    <div id="player-wrapper">\n        <footer id="player-kodi"></footer>\n        <footer id="player-local"></footer>\n    </div>\n\n    <div class="player-menu-wrapper">\n        <ul class="player-menu">\n            <li class="video-scan">')),d(t.gettext("Scan video library")),d(b('</li>\n            <li class="audio-scan">')),d(t.gettext("Scan audio library")),d(b('</li>\n            <li class="about">')),d(t.gettext("About Chorus")),d(b('</li>\n        </ul>\n    </div>\n\n</div>\n\n<div id="fanart"></div>\n<div id="fanart-overlay"></div>\n\n<div id="snackbar-container"></div>\n\n<div class="modal fade" id="modal-window">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title"></h4>\n            </div>\n            <div class="modal-body"></div>\n            <div class="modal-footer"></div>\n        </div>\n    </div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/song/list/tpl/song.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");
var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<td class="cell-first">\n    <div class="thumb" style="background-image: url(\'')),d(this.thumbnail),d(b('\')">\n    </div>\n    <div class="track">')),d(this.track),d(b('</div>\n    <div class="mdi play"></div>\n</td>\n<td class="cell-label song-title"><span class="crop">')),d(this.label),d(b('</span></td>\n<td class="cell-label song-artist"><a class="crop" href="#music/artist/')),d(this.artistid),d(b('">')),d(this.artist),d(b('</a></td>\n<td class="cell-last">\n    <li class="thumbed-up"></li>\n    <div class="duration">')),d(this.displayDuration),d(b('</div>\n    <ul class="actions">\n        <li class="mdi thumbs"></li>\n        <li class="mdi add"></li>\n        <li class="menu dropdown">\n            <i data-toggle="dropdown" class="mdi"></i>\n            <ul class="dropdown-menu pull-right"></ul>\n        </li>\n    </ul>\n</td>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/thumbs/list/tpl/thumbs_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="thumbs-inner">\n    <div class="entity-set entity-set-movie"></div>\n    <div class="entity-set entity-set-tvshow"></div>\n    <div class="entity-set entity-set-artist"></div>\n    <div class="entity-set entity-set-album"></div>\n    <div class="entity-set entity-set-song"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/thumbs/list/tpl/thumbs_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h2 class="set-header"></h2>\n<div class="set-results"></div>\n<div class="more"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/episode/tpl/content.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('\n<div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n\n<div class="section-content">\n    <h2>')),d(t.gettext("Synopsis")),d(b("</h2>\n    <p>")),d(this.plot),d(b("</p>\n</div>\n\n")),this.cast.length>0&&(d(b('\n    <div class="section-content">\n        <h2>')),d(t.gettext("Full Cast")),d(b('</h2>\n        <div class="region-cast"></div>\n    </div>\n'))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/episode/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;if(d(b('<div class="region-details-top">\n    ')),null!=this.showtitle&&d(b("\n\n    ")),d(b('\n    <div class="region-details-title">\n        <h2>\n            <span class="title">')),d(this.label),d(b('</span>\n            <span class="sub show-title"><a href="#')),d(this.url.split("/",2).join("/")),d(b('">')),d(this.showtitle),d(b('</a></span>\n            <span class="sub">S')),d(this.season),d(b(" E")),d(this.episode),d(b('</span>\n        </h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n\n        <div class="runtime">\n            ')),d(helpers.global.formatTime(helpers.global.secToTime(this.runtime))),d(b('\n        </div>\n\n    </div>\n\n\n\n\n    <ul class="people">\n        ')),this.director.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Director","Directors",this.director.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","director",this.director))),d(b("</span></li>\n        "))),d(b("\n        ")),this.writer.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Writer","Writers",this.writer.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","writer",this.writer))),d(b("</span></li>\n        "))),d(b("\n        ")),this.cast.length>0&&(d(b("\n            <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <ul class="streams">\n        <li><label>')),d(t.gettext("Video")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.video,"label").join(", ")),d(b("</span></li>\n        <li><label>")),d(t.gettext("Audio")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.audio,"label").join(", ")),d(b("</span></li>\n        ")),this.streamdetails.subtitle.length>0&&""!==this.streamdetails.subtitle[0].label){for(d(b("\n            <li><label>")),d(t.ngettext("Subtitle","Subtitles",this.streamdetails.subtitle.length)),d(b(':</label>\n                <span class="dropdown"><span data-toggle="dropdown">')),d(_.first(_.pluck(this.streamdetails.subtitle,"label"))),d(b('</span>\n                <ul class="dropdown-menu">\n                    ')),f=this.streamdetails.subtitle,c=0,e=f.length;e>c;c++)a=f[c],d(b("\n                        <li>")),d(a.label),d(b("</li>\n                    "));d(b("\n                </ul>\n                </span>\n            </li>\n        "))}d(b('\n    </ul>\n\n    <ul class="inline-links">\n        <li class="btn-flat-play play">')),d(t.gettext("Play")),d(b('</li>\n        <li class="btn-flat-add add">')),d(t.gettext("Queue")),d(b('</li>\n        <li class="btn-flat-stream stream">')),d(t.gettext("Stream")),d(b('</li>\n        <li class="btn-flat-download download">')),d(t.gettext("Download")),d(b("</li>\n    </ul>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div> '))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/season/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2>\n            <span class="title">')),d(t.gettext("Season")),d(b(" ")),d(this.season),d(b('</span>\n            <span class="sub"><a href="#tvshow/')),d(this.tvshowid),d(b('">')),d(this.label),d(b('</a></span>\n        </h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("tvshows","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <ul class="people">\n        ')),this.cast.length>0&&(d(b("\n        <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <div class="description">')),d(this.plot),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("tvshows","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <ul class="people">\n        ')),this.cast.length>0&&(d(b("\n        <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <div class="description">')),d(this.plot),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="form-inner">\n	<div class="form-content-region"></div>\n    <footer>\n        <ul class="inline-list">\n            <li>\n                <button type="submit" data-form-button="submit" class="btn btn-primary form-save">Save</button>\n            </li>\n            <li class="response">\n\n            </li>\n        </ul>\n    </footer>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.title&&(d(b('\n    <label class="control-label">')),d(this.title),d(b("</label>\n"))),d(b('\n<div class="element">\n    ')),"checkbox"!==this.type?(d(b("\n        ")),d(b(this.element)),d(b("\n    "))):(d(b('\n        <div class="togglebutton">\n            <label>')),d(b(this.element)),d(b("</label>\n        </div>\n    "))),d(b("\n    ")),this.description&&(d(b('\n        <div class="help-block description">')),d(this.description),d(b("</div>\n    "))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form_item_group.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.title&&(d(b('\n    <h3 class="group-title">')),d(this.title),d(b("</h3>\n"))),d(b('\n<div class="form-items"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/card/tpl/card.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e;if(d(b('<div class="card-')),d(this.type),d(b('">\n    <div class="artwork">\n        <a href="#')),d(this.url),d(b('" class="thumb" title="')),d(helpers.global.stripTags(this.label)),d(b('" style="background-image: url(\'')),d(this.thumbnail),d(b('\')"></a>\n        <div class="mdi play"></div>\n        ')),("channeltv"===this.type||"channelradio"===this.type)&&d(b('\n          <div class="mdi record"></div>\n        ')),d(b('\n    </div>\n    <div class="meta">\n        <div class="title"><a href="#')),d(this.url),d(b('" title="')),d(helpers.global.stripTags(this.label)),d(b('">')),d(b(this.label)),d(b("</a></div>\n        ")),null!=this.subtitle&&(d(b('\n            <div class="subtitle">')),d(b(this.subtitle)),d(b("</div>\n        "))),d(b("\n    </div>\n    ")),this.actions){d(b('\n        <ul class="actions">\n            ')),e=this.actions;for(a in e)c=e[a],d(b('<li class="mdi ')),d(a),d(b('" title="')),d(c),d(b('"></li>'));d(b("\n        </ul>\n    "))}d(b("\n    ")),this.menu&&d(b('\n        <div class="dropdown">\n            <i data-toggle="dropdown" class="mdi"></i>\n            <ul class="dropdown-menu"></ul>\n        </div>\n    ')),d(b("\n    ")),this.progress&&(d(b('\n        <div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n    '))),d(b('\n    <i class="mdi watched-tick"></i>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/card/tpl/card_placeholder.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<i></i>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/empty/tpl/empty_page.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="empty--page">\n    ')),this.title&&(d(b('\n        <h2 class="empty--page-title">')),d(title),d(b("</h2>\n    "))),d(b("\n\n    ")),this.content&&(d(b('\n        <div class="empty--page-content">')),d(this.content),d(b("</div>\n    "))),d(b("\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/empty/tpl/empty_results.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="empty-result">\n    <h2>No results found</h2>\n    <p>Have you done a library scan?</p>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_details_header.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container details-header">\n\n    <div class="region-details-side"></div>\n\n    <div class="region-details-meta-wrapper"><div class="region-details-meta">\n\n        <div class="region-details-title"><span class="title"></span> <span class="sub"></span></div>\n\n        <div class="region-details-meta-below">\n            <div class="region-details-subtext"></div>\n            <div class="description"></div>\n        </div>\n\n    </div></div>\n\n    <div class="region-details-fanart"><div class="gradient"></div></div>\n\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_with_header.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container with-header">\n\n    <header class="region-header"></header>\n\n    <section class="region-content"></section>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_with_sidebar_first.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container with-sidebar-first">\n\n    <div class="region-first-toggle"></div>\n    <section class="region-first"></section>\n\n    <section class="region-content-wrapper">\n        <div class="region-content-top"></div>\n        <div class="region-content"></div>\n    </section>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())};var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}},__slice=[].slice;this.helpers={},this.config={"static":{appTitle:"Kodi",jsonRpcEndpoint:"jsonrpc",socketsHost:location.hostname,socketsPort:9090,ajaxTimeout:5e3,hashKey:"kodi",defaultPlayer:"auto",ignoreArticle:!0,pollInterval:1e4,reverseProxy:!1,albumAtristsOnly:!0,searchIndexCacheExpiry:86400,collectionCacheExpiry:604800,addOnsLoaded:!1,vibrantHeaders:!1,lang:"en"}},this.Kodi=function(a){var b;return b=new a.Marionette.Application,b.addRegions({root:"body"}),b.on("before:start",function(){return config["static"]=_.extend(config["static"],config.get("app","config:local",config["static"]))}),b.vent.on("shell:ready",function(){return function(){return b.startHistory()}}(this)),b}(Backbone,Marionette),$(document).ready(function(){return function(){return helpers.translate.init(function(){return Kodi.start(),$.material.init()})}}(this)),helpers.backscroll={lastPath:"",lastScroll:0,setLast:function(){return this.lastPath=location.hash,this.lastScroll=document.body.scrollTop},scrollToLast:function(){var a;return a=this.lastPath===location.hash?this.lastScroll:0,window.scrollTo(0,a)}},helpers.cache={store:{},defaultExpiry:406800},helpers.cache.set=function(a,b,c){return null==c&&(c=helpers.cache.defaultExpiry),helpers.cache.store[a]={data:b,expires:c+helpers.global.time(),key:a},b},helpers.cache.get=function(a,b){return null==b&&(b=!1),null!=helpers.cache.store[a]&&helpers.cache.store[a].expires>=helpers.global.time()?helpers.cache.store[a].data:b},helpers.cache.del=function(a){return null!=helpers.cache.store[a]?delete helpers.cache.store[a]:void 0},helpers.cache.clear=function(){return helpers.cache.store={}},helpers.cache.updateCollection=function(a,b,c,d,e){var f,g,h,i;if(null!=Backbone.fetchCache._cache&&null!=Backbone.fetchCache._cache[a]&&null!=Backbone.fetchCache._cache[a].value.result&&null!=Backbone.fetchCache._cache[a].value.result[b]){h=Backbone.fetchCache._cache[a].value.result[b],i=[];for(f in h)g=h[f],i.push(g.id===c?Backbone.fetchCache._cache[a].value.result[b][parseInt(f)][d]=e:void 0);return i}},config.get=function(a,b,c,d){var e;return null==c&&(c=""),e=Kodi.request("config:"+a+":get",b,c),null!=d&&d(e),e},config.set=function(a,b,c,d){var e;return e=Kodi.request("config:"+a+":set",b,c),null!=d&&d(e),e},config.preStartGet=function(a,b){var c;return null==b&&(b=""),"undefined"!=typeof localStorage&&null!==localStorage&&null!=localStorage.getItem("config:app-config:local")&&(c=JSON.parse(localStorage.getItem("config:app-config:local")).data,null!=c[a])?c[a]:b},null==this.KodiMixins&&(this.KodiMixins={}),KodiMixins.Entities={url:function(){return helpers.url.baseKodiUrl("Mixins")},rpc:new Backbone.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),applySettings:function(){return"model"===this.entityType?this.setModelDefaultFields():void 0},entityType:"model",setEntityType:function(a){return this.entityType=a,this},entityKeys:{type:"",modelResponseProperty:"",collectionResponseProperty:"",idProperty:""},setEntityKey:function(a,b){return this.entityKeys[a]=b,this},getEntityKey:function(a){var b,c;switch(c=this.entityKeys.type,a){case"modelResponseProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"details";break;case"collectionResponseProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"s";break;case"idProperty":b=null!=this.entityKeys[a]?this.entityKeys[a]:c+"id";break;default:b=c}return b},entitiyFields:{minimal:[],small:[],full:[]},setEntityFields:function(a,b){return null==b&&(b=[]),this.entitiyFields[a]=b,this},getEntityFields:function(a){var b;return b=this.entitiyFields.minimal,"full"===a?b.concat(this.entitiyFields.small).concat(this.entitiyFields.full):"small"===a?b.concat(this.entitiyFields.small):b},modelDefaults:{id:0,fullyloaded:!1,thumbnail:"",thumbsUp:!1},setModelDefaultFields:function(a){var b,c,d,e,f;for(null==a&&(a={}),a=_.extend(this.modelDefaults,a),e=this.getEntityFields("full"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this.defaults[b]="");return f},callMethodName:"",callArgs:[],callIgnoreArticle:!0,setMethod:function(a){return this.callMethodName=a,this},setArgStatic:function(a){return this.callArgs.push(a),this},setArgHelper:function(a,b,c){var d;return d="argHelper"+a,this.callArgs.push(this[d](b,c)),this},argCheckOption:function(a,b){return null!=this.options&&null!=this.options[a]?this.options[a]:b},argHelperfields:function(a){var b;return null==a&&(a="small"),b=this.getEntityFields(a),this.argCheckOption("fields",b)},argHelpersort:function(a,b){var c;return null==b&&(b="ascending"),c={method:a,order:b,ignorearticle:this.callIgnoreArticle},this.argCheckOption("sort",c)},argHelperlimit:function(a,b){var c;return null==a&&(a=0),null==b&&(b="all"),c={start:a},"all"!==b&&(c.end=b),this.argCheckOption("limit",c)},argHelperfilter:function(a,b){var c;return c={},null!=a&&(c[a]=b),this.argCheckOption("filter",c)},buildRpcRequest:function(a){var b,c,d,e,f,g,h;for(null==a&&(a="read"),e=[this.callMethodName],h=this.callArgs,f=0,g=h.length;g>f;f++)b=h[f],c="argHelper"+b,"function"==typeof c?(d="arg"+e.length,e.push(d),this[d]=c):e.push(b);return e}},helpers.debug={verbose:!1},helpers.debug.consoleStyle=function(a){var b,c,d,e;null==a&&(a="error"),b={background:"#ccc",padding:"0 5px",color:"#444","font-weight":"bold","font-size":"110%"},e=[],c={info:"#D8FEFE",success:"#CCFECD",warning:"#FFFDD9",error:"#FFCECD"},b.background=c[a];for(d in b)e.push(d+": "+b[d]);return e.join("; ")},helpers.debug.msg=function(a,b,c){return null==b&&(b="info"),"undefined"!=typeof console&&null!==console&&(console.log("%c "+a,helpers.debug.consoleStyle(b)),null!=c)?console.log(c):void 0},helpers.debug.log=function(a,b,c,d){if(null==b&&(b="No data provided"),null==c&&(c="error"),null==d&&(d=arguments.callee.caller.toString()),null!=b[0]&&"Internal server error"===b[0].error);else if("undefined"!=typeof console&&null!==console&&(console.log("%c Error in: "+a,helpers.debug.consoleStyle(c),b),helpers.debug.verbose&&d!==!1))return console.log(d)},helpers.debug.rpcError=function(a,b){var c,d;return c={called:a},d="",b.error&&b.error.message?(d='"'+b.error.message+'"',c.error=b.error):c.error=b,helpers.debug.log("jsonRPC request - "+d,c,"error")},helpers.entities={},helpers.entities.getFields=function(a,b){var c;return null==b&&(b="small"),c=a.minimal,"full"===b?c.concat(a.small).concat(a.full):"small"===b?c.concat(a.small):c},helpers.entities.getSubtitle=function(a){var b;switch(a.type){case"song":b=a.artist.join(",");break;default:b=""}return b},helpers.entities.playingLink=function(a){return"<a href='#"+a.url+"'>"+a.label+"</a>"},helpers.entities.isWatched=function(a){var b;return b=!1,null!=a&&a.get("playcount")&&(b=a.get("playcount")>0?!0:!1),b},helpers.global={},helpers.global.shuffle=function(a){var b,c,d;for(b=a.length-1;b>0;)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d,b--;return a},helpers.global.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},helpers.global.time=function(){var a;return a=(new Date).getTime(),a/1e3},helpers.global.inArray=function(a,b){return _.indexOf(b,a)>-1},helpers.global.loading=function(a){return function(b){var c;return null==b&&(b="start"),c="start"===b?"add":"remove",null!=a.Kodi?a.Kodi.execute("body:state",c,"loading"):void 0}}(this),helpers.global.numPad=function(a,b){var c;return c="000000000"+a,c.substr(c.length-b)},helpers.global.secToTime=function(a){var b,c,d;return null==a&&(a=0),a=Math.round(a),b=parseInt(a/3600)%24,c=parseInt(a/60)%60,d=a%60,{hours:b,minutes:c,seconds:d}},helpers.global.timeToSec=function(a){var b,c;return b=3600*parseInt(a.hours),c=60*parseInt(a.minutes),parseInt(b)+parseInt(c)+parseInt(a.seconds)},helpers.global.epgDateTimeToJS=function(a){return new Date(a?a.replace(" ","t"):0)},helpers.global.formatTime=function(a){var b;return null==a?0:(b="",a.hours>0&&(a.hours<10&&(b="0"),b+=a.hours+":"),b+(a.minutes<10?"0":"")+a.minutes+":"+(a.seconds<10?"0":"")+a.seconds)},helpers.global.paramObj=function(a,b){var c;return c={},c[a]=b,c},helpers.global.regExpEscape=function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},helpers.global.stringStartsWith=function(a,b){return new RegExp("^"+helpers.global.regExpEscape(a)).test(b)},helpers.global.stringStripStartsWith=function(a,b){return b.substring(a.length)},helpers.global.arrayToSentence=function(a,b){var c,d,e,f,g;if(null==b&&(b=!0),g="",f=b?"s":"",e=a.pop(),a.length>0){for(c in a)d=a[c],g+="<strong>"+d+f+"</strong>",g+=parseInt(c)!==a.length-1?", ":"";g+=" "+t.gettext("and")+" "}return g+="<strong>"+e+f+"</strong>"},helpers.global.hash=function(a,b){return"encode"===a?encodeURIComponent(b):decodeURIComponent(b)},helpers.global.rating=function(a){return Math.round(10*a)/10},helpers.global.appTitle=function(a){var b;return null==a&&(a=!1),b="",_.isObject(a)&&null!=a.label&&(b="▶ "+a.label+" | "),document.title=b+config.get("static","appTitle")},helpers.global.localVideoPopup=function(a,b){return null==b&&(b=545),window.open(a,"_blank","toolbar=no, scrollbars=no, resizable=yes, width=925, height="+b+", top=100, left=100")},helpers.global.stripTags=function(a){return null!=a?a.replace(/(<([^>]+)>)/gi,""):""},helpers.global.hashCode=function(a){var b,c,d,e;if(c=0,0===a.length)return c;for(d=0,e=a.length;e>d;)b=a.charCodeAt(d),c=(c<<5)-c+b,c|=0,d++;return c},$.fn.removeClassRegex=function(a){return $(this).removeClass(function(b,c){return c.split(/\s+/).filter(function(b){return a.test(b)}).join(" ")})},$.fn.removeClassStartsWith=function(a){var b;return b=new RegExp("^"+a,"g"),$(this).removeClassRegex(b)},$.fn.scrollStopped=function(a){var b,c;return b=$(this),c=this,b.scroll(function(){return b.data("scrollTimeout")&&clearTimeout(b.data("scrollTimeout")),b.data("scrollTimeout",setTimeout(a,250,c))})},$.fn.resizeStopped=function(a){var b,c;return b=$(this),c=this,b.resize(function(){return b.data("resizeTimeout")&&clearTimeout(b.data("resizeTimeout")),b.data("resizeTimeout",setTimeout(a,250,c))})},$(document).ready(function(){return $(".dropdown li").on("click",function(){return $(this).closest(".dropdown").removeClass("open")}),$(".dropdown").on("click",function(){return $(this).removeClass("open").trigger("hide.bs.dropdown")})}),helpers.stream={},helpers.stream.videoSizeMap=[{min:0,max:360,label:"SD"},{min:361,max:480,label:"480"},{min:481,max:720,label:"720p"},{min:721,max:1080,label:"1080p"},{min:1081,max:1e5,label:"4K"}],helpers.stream.audioChannelMap=[{channels:6,label:"5.1"},{channels:8,label:"7.1"},{channels:2,label:"2.1"},{channels:1,label:"mono"}],helpers.stream.langMap={eng:"English",und:"Unknown",bul:"Bulgaria",ara:"Arabic",zho:"Chinese",ces:"Czech",dan:"Danish",nld:"Netherland",fin:"Finish",fra:"French",deu:"German",nor:"Norwegian",pol:"Polish",por:"Portuguese",ron:"Romanian",spa:"Spanish",swe:"Swedish",tur:"Turkish",vie:"Vietnamese"},helpers.stream.videoFormat=function(a){var b,c,d;for(b in a)d=a[b],c={label:"SD"},d.height&&d.height>0&&(c=_.find(helpers.stream.videoSizeMap,function(a){var b;return a.min<(b=d.height)&&b<=a.max?!0:!1})),a[b].label=d.codec+" "+c.label+" ("+d.width+" x "+d.height+")",a[b].shortlabel=d.codec+" "+c.label,a[b].res=c.label;return a},helpers.stream.formatLanguage=function(a){return helpers.stream.langMap[a]?helpers.stream.langMap[a]:a},helpers.stream.audioFormat=function(a){var b,c,d,e;for(c in a)e=a[c],b=_.findWhere(helpers.stream.audioChannelMap,{channels:e.channels}),b=b?b.label:e.channels,d="",""!==e.language&&(d=" ("+helpers.stream.formatLanguage(e.language)+")"),a[c].label=e.codec+" "+b+d,a[c].shortlabel=e.codec+" "+b,a[c].ch=b;return a},helpers.stream.subtitleFormat=function(a){var b,c;for(b in a)c=a[b],a[b].label=helpers.stream.formatLanguage(c.language),a[b].shortlabel=helpers.stream.formatLanguage(c.language);return a},helpers.stream.streamFormat=function(a){var b,c,d,e;for(b=["audio","video","subtitle"],d=0,e=b.length;e>d;d++)c=b[d],a[c]=a[c]&&a[c].length>0?helpers.stream[c+"Format"](a[c]):[];return a},helpers.translate={},helpers.translate.getLanguages=function(){return{en:"English",fr:"French",de:"German",nl:"Dutch"}
},helpers.translate.init=function(a){var b,c;return b=config.get("static","lang","en"),c=config.preStartGet("lang",b),$.getJSON("lang/"+c+".json",function(b){return window.t=new Jed(b),t.options.missing_key_callback=function(a){return helpers.translate.missingKeyLog(a)},a()})},helpers.translate.missingKeyLog=function(a){var b;return b='\n\nmsgctxt ""\nmsgid "'+a+'"\nmsgstr "'+a+'"\n',helpers.debug.msg(b,"warning")},helpers.ui={},helpers.ui.getSwatch=function(a,b){var c,d;return d={},c=document.createElement("img"),c.setAttribute("src",a),c.addEventListener("load",function(){var a,e,f,g;g=new Vibrant(c),f=g.swatches();for(e in f)f.hasOwnProperty(e)&&f[e]&&(a=f[e],d[e]={hex:a.getHex(),rgb:_.map(a.getRgb(),function(a){return Math.round(a)}),title:a.getTitleTextColor(),body:a.getBodyTextColor()});return b(d)})},helpers.ui.applyHeaderSwatch=function(a){var b,c,d,e;return null!=a&&null!=a.DarkVibrant&&null!=a.DarkVibrant.hex&&config.get("static","vibrantHeaders")===!0?(c=a.DarkVibrant,b=$(".details-header"),b.css("background-color",c.hex),e=c.rgb.join(","),d="linear-gradient(to right, "+c.hex+" 0%, rgba("+e+",0.9) 30%, rgba("+e+",0) 100%)",$(".region-details-fanart .gradient",b).css("background-image",d)):void 0},helpers.url={},helpers.url.map={artist:"music/artist/:id",album:"music/album/:id",song:"music/song/:id",movie:"movie/:id",tvshow:"tvshow/:id",season:"tvshow/:id",episode:"tvshow/:tvshowid/:season/:id",channeltv:"tvshows/live/:id",channelradio:"music/radio/:id",file:"browser/file/:id",playlist:"playlist/:id"},helpers.url.baseKodiUrl=function(a){var b;return null==a&&(a="Kodi"),b=config.get("static","jsonRpcEndpoint")+"?"+a,config.get("static","reverseProxy")?b:"/"+b},helpers.url.get=function(a,b,c){var d,e;null==b&&(b=""),null==c&&(c={}),d="",null!=helpers.url.map[a]&&(d=helpers.url.map[a]),c[":id"]=b;for(e in c)b=c[e],d=d.replace(e,b);return d},helpers.url.filterLinks=function(a,b,c,d){var e,f,g,h;null==d&&(d=5),e="#"+a+"?"+b+"=",h=[];for(f in c)g=c[f],d>f&&h.push('<a href="'+e+encodeURIComponent(g)+'">'+g+"</a>");return h.join(", ")},helpers.url.playlistUrl=function(a){return"song"===a.type&&(""!==a.albumid?a.url=helpers.url.get("album",a.albumid):a.url("music/albums")),a.url},helpers.url.arg=function(a){var b,c;return null==a&&(a="none"),c=location.hash,b=c.substring(1).split("/"),"none"===a?b:null!=b[a]?b[a]:""},helpers.url.params=function(a){var b,c,d,e;if(null==a&&(a="auto"),"auto"===a){if(b=document.location.href,-1===b.indexOf("?"))return{};e=b.split("?"),c=e[0],d=e[1]}return null==d&&(d=a),_.object(_.compact(_.map(d.split("&"),function(a){return a?a.split("="):void 0})))},helpers.url.buildParams=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(b+"="+encodeURIComponent(d));return"?"+c.join("&")},helpers.url.alterParams=function(a,b){var c,d,e,f,g;if(null==a&&(a={}),null==b&&(b=[]),c=helpers.url.params(),b.length>0)for(f=0,g=b.length;g>f;f++)d=b[f],delete c[d];return e=_.extend(c,a),helpers.url.path()+helpers.url.buildParams(e)},helpers.url.path=function(){var a,b,c,d;return a=document.location.hash,d=a.split("?"),b=d[0],c=d[1],b.substring(1)},helpers.url.imdbUrl=function(a,b){var c;return c="http://www.imdb.com/title/"+a+"/","<a href='"+c+"' class='imdblink' target='_blank'>"+t.gettext(b)+"</a>"},helpers.url.parseTrailerUrl=function(a){var b,c;return b={source:"",id:"",img:"",url:""},c=helpers.url.params(a),a.indexOf("youtube")>-1&&(b.source="youtube",b.id=c.videoid,b.img="http://img.youtube.com/vi/"+b.id+"/0.jpg",b.url="https://www.youtube.com/watch?v="+b.id),b},helpers.url.isSecureProtocol=function(){var a;return a="undefined"!=typeof document&&null!==document&&"https:"===document.location.protocal?!0:!1},Cocktail.patch(Backbone),function(a){var b,c;return c=a.sync,a.sync=function(a,d,e){var f;return null==e&&(e={}),_.defaults(e,{beforeSend:_.bind(b.beforeSend,d),complete:_.bind(b.complete,d)}),f=c(a,d,e),d._fetch||"read"!==a?void 0:d._fetch=f},b={beforeSend:function(){return this.trigger("sync:start",this)},complete:function(){return this.trigger("sync:stop",this)}}}(Backbone),function(a){return _.extend(a.Marionette.Application.prototype,{navigate:function(b,c){return null==c&&(c={}),a.history.navigate(b,c)},getCurrentRoute:function(){var b;return b=a.history.fragment,_.isEmpty(b)?null:b},startHistory:function(){return a.history?a.history.start():void 0},register:function(a,b){return null==this._registry&&(this._registry={}),this._registry[b]=a},unregister:function(a,b){return delete this._registry[b]},resetRegistry:function(){var a,b,c,d,e;d=this.getRegistrySize(),e=this._registry;for(b in e)a=e[b],a.region.close();return c="There were "+d+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(c,this._registry):console.log(c)},getRegistrySize:function(){return _.size(this._registry)}})}(Backbone),function(a){return _.extend(a.Renderer,{extension:[".jst"],render:function(a,b){var c;if(c=this.getTemplate(a),!c)throw"Template "+a+" not found!";return c(b)},getTemplate:function(a){var b;return b=this.insertAt(a.split("/"),-1,"tpl").join("/"),b+=this.extension,JST[b]?JST[b]:void 0},insertAt:function(a,b,c){return a.splice(b,0,c),a}})}(Marionette),this.Kodi.module("Entities",function(a,b,c){return a.Collection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.getRawCollection=function(){var a,b,c,d,e;if(b=[],this.models.length>0)for(e=this.models,c=0,d=e.length;d>c;c++)a=e[c],b.push(a.attributes);return b},b.prototype.getCacheKey=function(){var a;return a=this.constructor.name},b.prototype.autoSort=function(a){var b;return a.sort?(b=a.order?a.order:"asc",this.sortCollection(a.sort,b)):void 0},b.prototype.sortCollection=function(a,b){null==b&&(b="asc"),this.comparator=function(b){return function(c){return b.ignoreArticleParse(c.get(a))}}(this),"desc"===b&&(this.comparator=this.reverseSortBy(this.comparator)),this.sort()},b.prototype.reverseSortBy=function(a){return function(b,c){var d,e;return d=a(b),e=a(c),void 0===d?-1:void 0===e?1:e>d?1:d>e?-1:0}},b.prototype.ignoreArticleParse=function(a){var b,c,d,e,f;if(b=["'",'"',"the ","a "],"string"==typeof a&&config.get("static","ignoreArticle",!0))for(a=a.toLowerCase(),c=!1,e=0,f=b.length;f>e;e++)d=b[e],c||helpers.global.stringStartsWith(d,a)&&(a=helpers.global.stringStripStartsWith(d,a),c=!0);return a},b}(c.Collection)}),this.Kodi.module("Entities",function(a,b,c,d,e,f){return a.Filtered=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.filterByMultiple=function(a,b){return null==b&&(b=[]),this.filterBy(a,function(c){return helpers.global.inArray(c.get(a),b)})},b.prototype.filterByMultipleArray=function(a,b){return null==b&&(b=[]),this.filterBy(a,function(c){var d,e,f,g,h;for(d=!1,h=c.get(a),f=0,g=h.length;g>f;f++)e=h[f],helpers.global.inArray(e,b)&&(d=!0);return d})},b.prototype.filterByMultipleObject=function(a,b,c){return null==c&&(c=[]),this.filterBy(a,function(d){var e,g,h,i,j;for(g=!1,e=f.pluck(d.get(a),b),i=0,j=e.length;j>i;i++)h=e[i],helpers.global.inArray(h,c)&&(g=!0);return g})},b.prototype.filterByUnwatched=function(){return this.filterBy("unwatched",function(a){var b;return b=1,"tvshow"===a.get("type")?b=a.get("episode")-a.get("watchedepisodes"):("movie"===a.get("type")||"episode"===a.get("type"))&&(b=a.get("playcount")>0?0:1),b>0})},b.prototype.filterByString=function(a,b){return this.filterBy("search",function(c){var d;return b.length<3?!1:(d=c.get(a).toLowerCase(),d.indexOf(b.toLowerCase())>-1)})},b}(FilteredCollection)}),this.Kodi.module("Entities",function(a,b,c,d,e,f){return a.Model=function(a){function b(){return this.saveError=__bind(this.saveError,this),this.saveSuccess=__bind(this.saveSuccess,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.getCacheKey=function(){var a;return a=this.constructor.name},b.prototype.destroy=function(a){return null==a&&(a={}),f.defaults(a,{wait:!0}),this.set({_destroy:!0}),b.__super__.destroy.call(this,a)},b.prototype.isDestroyed=function(){return this.get("_destroy")},b.prototype.save=function(a,c){var d;return null==c&&(c={}),d=this.isNew(),f.defaults(c,{wait:!0,success:f.bind(this.saveSuccess,this,d,c.collection),error:f.bind(this.saveError,this)}),this.unset("_errors"),b.__super__.save.call(this,a,c)},b.prototype.saveSuccess=function(a,b){return a?(b&&b.add(this),b&&b.trigger("model:created",this),this.trigger("created",this)):(null==b&&(b=this.collection),b&&b.trigger("model:updated",this),this.trigger("updated",this))},b.prototype.saveError=function(a,b){var c;return 500!==b.status&&404!==b.status?this.set({_errors:null!=(c=e.parseJSON(b.responseText))?c.errors:void 0}):void 0},b}(c.Model)}),this.Kodi.module("Entities",function(a,b,c){var d;return d={storageKey:"config:app",getCollection:function(){var b;return b=new a.ConfigAppCollection,b.fetch(),b},getConfig:function(a,b){return null==b&&(b=d.getCollection()),b.find({id:a})}},a.ConfigApp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={data:{}},b}(a.Model),a.ConfigAppCollection=function(b){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,b),e.prototype.model=a.ConfigApp,e.prototype.localStorage=new c.LocalStorage(d.storageKey),e}(a.Collection),b.reqres.setHandler("config:app:get",function(a,b){var c;return c=d.getConfig(a),null!=c?c.get("data"):b}),b.reqres.setHandler("config:app:set",function(a,b){var c,e;return c=d.getCollection(),e=d.getConfig(a,c),null!=e?e.save({data:b}):(c.create({id:a,data:b}),b)}),b.reqres.setHandler("config:static:get",function(a,b){var c;return c=null!=config["static"][a]?config["static"][a]:b}),b.reqres.setHandler("config:static:set",function(a,b){return config["static"][a]=b,b})}),this.Kodi.module("Entities",function(a,b,c){var d;return d={apiKey:"AIzaSyBxvaR6mCnUWN8cv2TiPRmuEh0FykBTAH0",searchUrl:"https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoDefinition=any&videoEmbeddable=true&order=relevance&safeSearch=none",getSearchUrl:function(){return this.searchUrl+"&key="+this.apiKey},parseItems:function(a){var b,c,d,e,f;d=[],f=a.items;for(b in f)c=f[b],e={id:c.id.videoId,title:c.snippet.title,desc:c.snippet.description,thumbnail:c.snippet.thumbnails["default"].url},d.push(e);return d}},a.youtubeItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:"",title:"",desc:"",thumbnail:""},b}(a.Model),a.youtubeCollection=function(b){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,b),e.prototype.model=a.youtubeItem,e.prototype.url=d.getSearchUrl(),e.prototype.sync=function(a,b,d){return d.dataType="jsonp",d.timeout=5e3,c.sync(a,b,d)},e.prototype.parse=function(a){return d.parseItems(a)},e}(a.Collection),b.commands.setHandler("youtube:search:entities",function(b,c){var d;return d=new a.youtubeCollection,d.fetch({data:{q:b},success:function(a){return c(a)},error:function(a){return helpers.debug.log("Youtube search error","error",a)}})})}),this.Kodi.module("Entities",function(a,b){return a.Filter=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={alias:"",type:"string",key:"",sortOrder:"asc",title:"",active:!1},b}(a.Model),a.FilterCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Filter,c}(a.Collection),a.FilterOption=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={key:"",value:"",title:""},b}(a.Model),a.FilterOptionCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Filter,c}(a.Collection),a.FilterSort=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={alias:"",type:"string",defaultSort:!1,defaultOrder:"asc",key:"",active:!1,order:"asc",title:""},b}(a.Model),a.FilterSortCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FilterSort,c}(a.Collection),a.FilterActive=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={key:"",values:[],title:""},b}(a.Model),a.FilterActiveCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FilterActive,c}(a.Collection),b.reqres.setHandler("filter:filters:entities",function(b){return new a.FilterCollection(b)}),b.reqres.setHandler("filter:filters:options:entities",function(b){return new a.FilterOptionCollection(b)}),b.reqres.setHandler("filter:sort:entities",function(b){return new a.FilterSortCollection(b)}),b.reqres.setHandler("filter:active:entities",function(b){return new a.FilterActiveCollection(b)})}),this.Kodi.module("Entities",function(a,b){var c;return a.FormItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,title:"",type:"",element:"",options:[],defaultValue:"",description:"",children:[],attributes:{}},b}(a.Model),a.Form=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.FormItem,c}(a.Collection),c={applyState:function(a,b){return null!=b[a.id]&&(a.defaultValue=b[a.id],a.defaultsApplied=!0),a},processItems:function(a,b,d){var e,f,g,h;for(null==b&&(b={}),null==d&&(d=!1),e=[],g=0,h=a.length;h>g;g++)f=a[g],f=this.applyState(f,b),f.children&&f.children.length>0&&(f.children=c.processItems(f.children,b,!0)),e.push(f);return e},toCollection:function(b){var c,d,e;for(d in b)e=b[d],e.children&&e.children.length>0&&(c=new a.Form(e.children),b[d].children=c);return new a.Form(b)}},b.reqres.setHandler("form:item:entites",function(a,b){return null==a&&(a=[]),null==b&&(b={}),c.toCollection(c.processItems(a,b))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={cacheSynced:function(a,b){return a.on("cachesync",function(){return b(),helpers.global.loading("end")})},xhrsFetch:function(a,b){var c;return c=f.chain([a]).flatten().pluck("_fetch").value(),e.when.apply(e,c).done(function(){return b(),helpers.global.loading("end")})}},b.commands.setHandler("when:entity:fetched",function(a,b){return helpers.global.loading("start"),a.params?g.xhrsFetch(a,b):g.cacheSynced(a,b)})}),this.Kodi.module("KodiEntities",function(a,b,c){return c.fetchCache.localStorage=!1,a.Collection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url=function(){return helpers.url.baseKodiUrl("Collection")},b.prototype.rpc=new c.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),b.prototype.sync=function(a,b,d){return"read"===a&&(this.options=d),c.sync(a,b,d)},b.prototype.getCacheKey=function(a){var b,c,d,e,f,g,h,i;for(this.options=a,c=this.constructor.name,h=["filter","sort","limit","file"],f=0,g=h.length;g>f;f++)if(b=h[f],a[b]){i=a[b];for(d in i)e=i[d],c+=":"+d+":"+e}return c},b.prototype.getResult=function(a,b){var c;return c=a.jsonrpc&&a.result?a.result:a,c[b]},b.prototype.argCheckOption=function(a,b){return null!=this.options&&null!=this.options[a]?this.options[a]:b},b.prototype.argSort=function(a,b){var c;return null==b&&(b="ascending"),c={method:a,order:b,ignorearticle:this.isIgnoreArticle()},this.argCheckOption("sort",c)},b.prototype.argLimit=function(a,b){var c;return null==a&&(a=0),null==b&&(b="all"),c={start:a},"all"!==b&&(c.end=b),this.argCheckOption("limit",c)},b.prototype.argFilter=function(a,b){var c;return c={},null!=a&&(c[a]=b),this.argCheckOption("filter",c)},b.prototype.isIgnoreArticle=function(){return config.get("static","ignoreArticle",!0)},b}(b.Entities.Collection)}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){return a.Model=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,a),d.prototype.url=function(){return helpers.url.baseKodiUrl("Model")},d.prototype.rpc=new c.Rpc({useNamedParameters:!0,namespaceDelimiter:""}),d.prototype.modelDefaults={fullyloaded:!1,thumbnail:"",thumbsUp:!1,parsed:!1},d.prototype.parseModel=function(a,c,d){return c.parsed||("mixed"!==d&&(c.id=d),c.rating&&(c.rating=helpers.global.rating(c.rating)),c.streamdetails&&f.isObject(c.streamdetails)&&(c.streamdetails=helpers.stream.streamFormat(c.streamdetails)),c.resume&&(c.progress=0===c.resume.position?0:Math.round(c.resume.position/c.resume.total*100)),c.trailer&&(c.trailer=helpers.url.parseTrailerUrl(c.trailer)),"episode"===a?c.url=helpers.url.get(a,d,{":tvshowid":c.tvshowid,":season":c.season}):"channel"===a?(a="tv"===c.channeltype?"channeltv":"channelradio",c.url=helpers.url.get(a,d)):c.url=helpers.url.get(a,d),c=b.request("images:path:entity",c),c.type=a,c.uid=this.getUniqueId(c,a),c.parsed=!0),c},d.prototype.parseFieldsToDefaults=function(a,b){var c,d,e;for(null==b&&(b={}),d=0,e=a.length;e>d;d++)c=a[d],b[c]="";return b},d.prototype.getUniqueId=function(a,b){var c,d,e;return b=b?b:a.type,d=a.id,e="none","number"==typeof d?e=d:(c=a.file,c&&(e="file-"+helpers.global.hashCode(c))),b+"-"+e},d}(b.Entities.Model)}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={getAlbumFields:function(a){var b,c,d;return null==a&&(a="small"),b=["thumbnail","playcount","artistid","artist","genre","albumlabel","year"],c=["fanart","style","mood","description","genreid","rating"],"full"===a?d=b.concat(c):b},getAlbum:function(a,c){var d;return d=new b.KodiEntities.Album,d.set({albumid:parseInt(a),properties:g.getAlbumFields("full")}),d.fetch(c),d},getAlbums:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.AlbumCollection,c.fetch(b),c},getRecentlyAddedAlbums:function(b){var c;return c=new a.AlbumRecentlyAddedCollection,c.fetch(b),c},getRecentlyPlayedAlbums:function(b){var c;return c=new a.AlbumRecentlyPlayedCollection,c.fetch(b),c}},a.Album=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{albumid:1,album:""}),this.parseFieldsToDefaults(g.getAlbumFields("full"),a)},b.prototype.methods={read:["AudioLibrary.GetAlbumDetails","albumid","properties"]},b.prototype.arg2=g.getAlbumFields("full"),b.prototype.parse=function(a){var b;return b=null!=a.albumdetails?a.albumdetails:a,null!=a.albumdetails&&(b.fullyloaded=!0),this.parseModel("album",b,b.albumid)},b}(b.KodiEntities.Model),a.AlbumCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetAlbums","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.arg3=function(){return this.argFilter()},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),a.AlbumRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetRecentlyAddedAlbums","arg1","arg2"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit(0,21)},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),a.AlbumRecentlyPlayedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Album,c.prototype.methods={read:["AudioLibrary.GetRecentlyPlayedAlbums","arg1","arg2"]},c.prototype.arg1=function(){return g.getAlbumFields("small")},c.prototype.arg2=function(){return this.argLimit(0,21)},c.prototype.parse=function(a){return this.getResult(a,"albums")},c}(b.KodiEntities.Collection),b.reqres.setHandler("album:entity",function(a,b){return null==b&&(b={}),g.getAlbum(a,b)}),b.reqres.setHandler("album:entities",function(a){return null==a&&(a={}),g.getAlbums(a)}),b.reqres.setHandler("album:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedAlbums(a)}),b.reqres.setHandler("album:recentlyplayed:entities",function(a){return null==a&&(a={}),g.getRecentlyPlayedAlbums(a)}),b.commands.setHandler("album:search:entities",function(a,c,d){var e;return e=g.getAlbums({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={getArtistFields:function(a){var b,c,d;return null==a&&(a="small"),b=["thumbnail","mood","genre","style"],c=["fanart","born","formed","description"],"full"===a?d=b.concat(c):b},getArtist:function(a,c){var d;return d=new b.KodiEntities.Artist,d.set({artistid:parseInt(a),properties:g.getArtistFields("full")}),d.fetch(c),d},getArtists:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=helpers.cache.get("artist:entities"),(c===!1||b.reset===!0)&&(c=new a.ArtistCollection,c.fetch(b)),helpers.cache.set("artist:entities",c),c}},a.Artist=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{artistid:1,artist:""}),this.parseFieldsToDefaults(g.getArtistFields("full"),a)},b.prototype.methods={read:["AudioLibrary.GetArtistDetails","artistid","properties"]},b.prototype.arg2=g.getArtistFields("full"),b.prototype.parse=function(a){var b;return b=null!=a.artistdetails?a.artistdetails:a,null!=a.artistdetails&&(b.fullyloaded=!0),this.parseModel("artist",b,b.artistid)},b}(b.KodiEntities.Model),a.ArtistCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Artist,c.prototype.methods={read:["AudioLibrary.GetArtists","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return config.get("static","albumAtristsOnly",!0)},c.prototype.arg2=function(){return g.getArtistFields("small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("artist","ascending")},c.prototype.parse=function(a){return this.getResult(a,"artists")},c}(b.KodiEntities.Collection),b.reqres.setHandler("artist:entity",function(a,b){return null==b&&(b={}),g.getArtist(a,b)}),b.reqres.setHandler("artist:entities",function(a){return null==a&&(a={}),g.getArtists(a)}),b.commands.setHandler("artist:search:entities",function(a,c,d){var e;return e=g.getArtists({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b){var c;return c={fields:{minimal:["name"],small:["order","role","thumbnail","origin","url"],full:[]},getCollection:function(b,c){var d,e,f;for(e in b)f=b[e],b[e].origin=c;return d=new a.CastCollection(b)}},a.Cast=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="order",b.prototype.defaults=function(){return this.parseFieldsToDefaults(helpers.entities.getFields(c.fields,"small"),{})},b.prototype.parse=function(a){return a.url="?cast="+a.name,a},b}(b.KodiEntities.Model),a.CastCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Cast,c}(b.KodiEntities.Collection),b.reqres.setHandler("cast:entities",function(a,b){return c.getCollection(a,b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:[],small:["title","runtime","starttime","endtime","genre"],full:["plot","progress","progresspercentage","episodename","episodenum","episodepart","firstaired","hastimer","isactive","parentalrating","wasactive","thumbnail"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Broadcast,d.set({channelid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c;return c=new a.BroadcastCollection,c.fetch(b),c}},a.Broadcast=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{channelid:1,channel:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["PVR.GetBroadcasts","channelid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.broadcasts?a.broadcasts:a,null!=a.broadcasts&&(b.fullyloaded=!0),this.parseModel("broadcast",b,b.channelid)},b}(b.KodiEntities.Model),a.BroadcastCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Broadcast,c.prototype.methods={read:["PVR.GetBroadcasts","arg1","arg2","arg3"]},c.prototype.arg1=function(){return parseInt(this.argCheckOption("channelid",0))},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"full")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"broadcasts")},c}(b.KodiEntities.Collection),b.reqres.setHandler("broadcast:entity",function(a,b){return g.getEntity(a,b)}),b.reqres.setHandler("broadcast:entities",function(a,b){return null==b&&(b={}),b.channelid=a,g.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","episode","season","rating","file","cast","showtitle","tvshowid","uniqueid","resume"],full:["fanart","plot","firstaired","director","writer","runtime","streamdetails"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Episode,d.set({episodeid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!1,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.EpisodeCollection,c.fetch(b),c},getRecentlyAddedCollection:function(b){var c;return c=new a.EpisodeRecentlyAddedCollection,c.fetch(b),c}},a.Episode=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{episodeid:1,episode:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetEpisodeDetails","episodeid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.episodedetails?a.episodedetails:a,null!=a.episodedetails&&(b.fullyloaded=!0),b.unwatched=b.playcount>0?0:1,this.parseModel("episode",b,b.episodeid)},b}(b.KodiEntities.Model),a.EpisodeCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Episode,c.prototype.methods={read:["VideoLibrary.GetEpisodes","arg1","arg2","arg3"]},c.prototype.arg1=function(){return this.argCheckOption("tvshowid",0)},c.prototype.arg2=function(){return this.argCheckOption("season",0)},c.prototype.arg3=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg4=function(){return this.argLimit()},c.prototype.arg5=function(){return this.argSort("episode","ascending")},c.prototype.parse=function(a){return this.getResult(a,"episodes")},c}(b.KodiEntities.Collection),a.EpisodeRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Episode,c.prototype.methods={read:["VideoLibrary.GetRecentlyAddedEpisodes","arg1","arg2"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"episodes")},c}(b.KodiEntities.Collection),b.reqres.setHandler("episode:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("episode:entities",function(a,b,c){return null==c&&(c={}),c.tvshowid=a,c.season=b,g.getCollection(c)}),b.reqres.setHandler("episode:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedCollection(a)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title","file","mimetype"],small:["thumbnail"],full:["fanart","streamdetails"]},addonFields:["path","name"],sources:[{media:"video",label:"Video",type:"source",provides:"video"},{media:"music",label:"Music",type:"source",provides:"audio"},{media:"music",label:"Audio Addons",type:"addon",provides:"audio",addonType:"xbmc.addon.audio",content:"unknown"},{media:"video",label:"Video Addons",type:"addon",provides:"files",addonType:"xbmc.addon.video",content:"unknown"}],directorySeperator:"/",getEntity:function(a,c){var d;return d=new b.KodiEntities.File,d.set({file:a,properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b,c){var d,e;return e={cache:!0},c=f.extend(e,c),d="sources"===b?new a.SourceCollection:new a.FileCollection,d.fetch(c),d},parseToFilesAndFolders:function(b){var c,d;return c=b.getRawCollection(),d={},d.file=new a.FileCustomCollection(f.where(c,{filetype:"file"})),d.directory=new a.FileCustomCollection(f.where(c,{filetype:"directory"})),d},getSources:function(){var c,d,e,f,g,h,i;for(d=b.request("command:kodi:controller","auto","Commander"),e=[],c=new a.SourceCollection,i=this.sources,g=0,h=i.length;h>g;g++)f=i[g],"source"===f.type&&e.push({method:"Files.GetSources",params:[f.media]}),"addon"===f.type&&e.push({method:"Addons.GetAddons",params:[f.addonType,f.content,!0,this.addonFields]});return d.multipleCommands(e,function(a){return function(b){var d,e,g,h,i,j,k;for(d in b)if(e=b[d],f=a.sources[d],h=f.type+"s",e[h])for(k=e[h],i=0,j=k.length;j>i;i++)g=k[i],g.media=f.media,g.sourcetype=f.type,"addon"===f.type&&(g.file=a.createAddonFile(g),g.label=g.name),g.url=a.createFileUrl(f.media,g.file),c.add(g);return c.trigger("cachesync")}}(this)),c},parseSourceCollection:function(b){var c,d,e,g,h,i;for(c=b.getRawCollection(),b=[],i=this.sources,g=0,h=i.length;h>g;g++)e=i[g],d=f.where(c,{media:e.media}),d.length>0&&"source"===e.type&&(e.sources=new a.SourceCollection(d),e.url="browser/"+e.media,b.push(e));return new a.SourceSetCollection(b)},createFileUrl:function(a,b){return"browser/"+a+"/"+helpers.global.hash("encode",b)},createAddonFile:function(a){return"plugin://"+a.addonid},parseFiles:function(a,c){var d,e;for(d in a)e=a[d],e.parsed||(e=b.request("images:path:entity",e),a[d]=this.correctFileType(e),a[d].media=c,a[d].player=this.getPlayer(c),a[d].url=this.createFileUrl(c,e.file),a[d].parsed=!0);return a},correctFileType:function(a){var b;return b=["x-directory/normal"],a.mimetype&&helpers.global.inArray(a.mimetype,b)&&(a.filetype="directory"),a},createPathCollection:function(b,c){var d,e,f,g,h,i,j,k,l,m,n;for(f=[],g={},d=c.getRawCollection(),k=0,m=d.length;m>k;k++)j=d[k],g.file||helpers.global.stringStartsWith(j.file,b)&&(g=j);if(g.file)for(f.push(g),e=g.file,i=helpers.global.stringStripStartsWith(g.file,b).split(this.directorySeperator),l=0,n=i.length;n>l;l++)h=i[l],""!==h&&(e+=h+this.directorySeperator,f.push(this.createPathModel(g.media,h,e)));return new a.FileCustomCollection(f)},createPathModel:function(a,b,c){var d;return d={label:b,file:c,media:a,url:this.createFileUrl(a,c)}},getPlayer:function(a){return a}},a.EmptyFile=function(a){function b(){return b.__super__.constructor.apply(this,arguments)
}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{filetype:"directory",media:"",label:"",url:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b}(b.KodiEntities.Model),a.File=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["Files.GetFileDetails","file","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.filedetails?a.filedetails:a,null!=a.filedetails&&(b.fullyloaded=!0),b},b}(a.EmptyFile),a.FileCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.File,c.prototype.methods={read:["Files.GetDirectory","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return this.argCheckOption("file","")},c.prototype.arg2=function(){return this.argCheckOption("media","")},c.prototype.arg3=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg4=function(){return this.argSort("label","ascending")},c.prototype.parse=function(a){var b;return b=this.getResult(a,"files"),g.parseFiles(b,this.options.media)},c}(b.KodiEntities.Collection),a.FileCustomCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.File,c}(b.KodiEntities.Collection),a.Source=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults={label:"",file:"",media:"",url:""},b}(b.KodiEntities.Model),a.SourceCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Source,c}(b.KodiEntities.Collection),a.SourceSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="file",b.prototype.defaults={label:"",sources:""},b}(b.KodiEntities.Model),a.SourceSetCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Source,c}(b.KodiEntities.Collection),b.reqres.setHandler("file:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("file:url:entity",function(b,c){var d;return d=helpers.global.hash("decode",c),new a.EmptyFile({media:b,file:d,url:g.createFileUrl(b,d)})}),b.reqres.setHandler("file:entities",function(a){return null==a&&(a={}),g.getCollection("files",a)}),b.reqres.setHandler("file:path:entities",function(a,b){return g.createPathCollection(a,b)}),b.reqres.setHandler("file:parsed:entities",function(a){return g.parseToFilesAndFolders(a)}),b.reqres.setHandler("file:source:entities",function(){return g.getSources()}),b.reqres.setHandler("file:source:media:entities",function(a){return g.parseSourceCollection(a)}),b.reqres.setHandler("file:source:mediatypes",function(){return g.availableSources})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","resume","rating","year","file","genre","writer","director","cast","set"],full:["fanart","plotoutline","studio","mpaa","imdbnumber","runtime","streamdetails","plot","trailer"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.Movie,d.set({movieid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.MovieCollection,c.fetch(b),c},getRecentlyAddedCollection:function(b){var c;return c=new a.MovieRecentlyAddedCollection,c.fetch(b),c},getFilteredCollection:function(b){var c;return c=new a.MovieFilteredCollection,c.fetch(b),c}},a.Movie=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{movieid:1,movie:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetMovieDetails","movieid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.moviedetails?a.moviedetails:a,null!=a.moviedetails&&(b.fullyloaded=!0),b.unwatched=b.playcount>0?0:1,this.parseModel("movie",b,b.movieid)},b}(b.KodiEntities.Model),a.MovieCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Movie,c.prototype.methods={read:["VideoLibrary.GetMovies","arg1","arg2","arg3"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.parse=function(a){return this.getResult(a,"movies")},c}(b.KodiEntities.Collection),a.MovieRecentlyAddedCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Movie,c.prototype.methods={read:["VideoLibrary.GetRecentlyAddedMovies","arg1","arg2"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.parse=function(a){return this.getResult(a,"movies")},c}(b.KodiEntities.Collection),a.MovieFilteredCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["VideoLibrary.GetMovies","arg1","arg2","arg3","arg4"]},b.prototype.arg4=function(){return this.argFilter()},b}(a.MovieCollection),b.reqres.setHandler("movie:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("movie:entities",function(a){return null==a&&(a={}),g.getCollection(a)}),b.reqres.setHandler("movie:filtered:entities",function(a){return null==a&&(a={}),g.getFilteredCollection(a)}),b.reqres.setHandler("movie:recentlyadded:entities",function(a){return null==a&&(a={}),g.getRecentlyAddedCollection(a)}),b.commands.setHandler("movie:search:entities",function(a,c,d){var e;return e=g.getCollection({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title","thumbnail","file"],small:["artist","genre","year","rating","album","track","duration","playcount","dateadded","episode","artistid","albumid","tvshowid"],full:["fanart"]},getCollection:function(b){var c,d;return d={cache:!1},b=f.extend(d,b),c=new a.PlaylistCollection,c.fetch(b),c},getType:function(a,b){var c;return c="file",void 0!==a.id&&""!==a.id&&("audio"===b?c="song":"video"===b&&(c=""!==a.episode?"episode":"movie")),c},parseItems:function(a,b){var c,d;for(c in a)d=a[c],d.position=parseInt(c),a[c]=this.parseItem(d,b);return a},parseItem:function(a,b){return a.playlistid=b.playlistid,a.media=b.media,a.player="kodi",a.type&&"unknown"!==a.type||(a.type=g.getType(a,b.media)),"file"===a.type&&(a.id=a.file),a}},a.PlaylistItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="position",b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{position:0}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.parse=function(a){var b;return a.fullyloaded=!0,b=this.parseModel(a.type,a,a.id),b.url=helpers.url.playlistUrl(b),b},b}(b.KodiEntities.Model),a.PlaylistCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.PlaylistItem,c.prototype.methods={read:["Playlist.GetItems","arg1","arg2","arg3"]},c.prototype.arg1=function(){return this.argCheckOption("playlistid",0)},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("position","ascending")},c.prototype.parse=function(a){var b;return b=this.getResult(a,"items"),g.parseItems(b,this.options)},c}(b.KodiEntities.Collection),b.reqres.setHandler("playlist:kodi:entities",function(a){var c,d,e;return null==a&&(a="audio"),e=b.request("command:kodi:controller",a,"PlayList"),d={},d.media=a,d.playlistid=e.getPlayer(),c=g.getCollection(d),c.sortCollection("position","asc"),c}),b.reqres.setHandler("playlist:kodi:entity:api",function(){return g})}),this.Kodi.module("KodiEntities",function(a,b){var c;return c={fields:{minimal:["thumbnail"],small:["channeltype","hidden","locked","channel","lastplayed","broadcastnow"],full:[]},getEntity:function(a,b){return a.findWhere({channel:b})},getCollection:function(b){var c;return c=new a.ChannelCollection,c.fetch(b),c}},a.Channel=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return this.parseFieldsToDefaults(helpers.entities.getFields(c.fields,"full"),{})},b.prototype.parse=function(a){return a.fullyloaded=!0,this.parseModel("channel",a,a.channelid)},b}(b.KodiEntities.Model),a.ChannelCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.Channel,d.prototype.methods={read:["PVR.GetChannels","arg1","arg2","arg3"]},d.prototype.arg1=function(){return this.argCheckOption("group",0)},d.prototype.arg2=function(){return helpers.entities.getFields(c.fields,"small")},d.prototype.arg3=function(){return this.argLimit()},d.prototype.parse=function(a){return this.getResult(a,"channels")},d}(b.KodiEntities.Collection),b.reqres.setHandler("channel:entity",function(a,b){return c.getEntity(a,b)}),b.reqres.setHandler("channel:entities",function(a,b){return null==a&&(a="alltv"),null==b&&(b={}),b.group=a,c.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["season"],small:["showtitle","playcount","thumbnail","tvshowid","episode","watchedepisodes","fanart"],full:[]},getEntity:function(a,b){return a.findWhere({season:b})},getCollection:function(b){var c,d;return d={cache:!1,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.SeasonCollection,c.fetch(b),c}},a.Season=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{seasonid:1,season:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.parse=function(a){var b;return b=null!=a.seasondetails?a.seasondetails:a,null!=a.seasondetails&&(b.fullyloaded=!0),b.unwatched=b.episode-b.watchedepisodes,this.parseModel("season",b,b.tvshowid+"/"+b.season)},b}(b.KodiEntities.Model),a.SeasonCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Season,c.prototype.methods={read:["VideoLibrary.GetSeasons","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return this.argCheckOption("tvshowid",0)},c.prototype.arg2=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg3=function(){return this.argLimit()},c.prototype.arg4=function(){return this.argSort("season","ascending")},c.prototype.parse=function(a){return this.getResult(a,"seasons")},c}(b.KodiEntities.Collection),b.reqres.setHandler("season:entity",function(a,b){return g.getEntity(a,b)}),b.reqres.setHandler("season:entities",function(a,b){return null==b&&(b={}),b.tvshowid=a,g.getCollection(b)})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={songsByIdMax:50,fields:{minimal:["title","file"],small:["thumbnail","artist","artistid","album","albumid","lastplayed","track","year","duration"],full:["fanart","genre","style","mood","born","formed","description","lyrics"]},getSong:function(a,c){var d;return d=new b.KodiEntities.Song,d.set({songid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getFilteredSongs:function(b){var c,d;return c={cache:!0},b=f.extend(c,b),b.indexOnly?(b.expires=config.get("static","searchIndexCacheExpiry",86400),d=new a.SongSearchIndexCollection):d=new a.SongFilteredCollection,d.fetch(b),d},parseSongsToAlbumSongs:function(b){var c,d,e,f,g,h,i,j;for(h=b.getRawCollection(),e={},d={},i=0,j=h.length;j>i;i++)f=h[i],e[f.albumid]||(e[f.albumid]=[]),e[f.albumid].push(f);for(c in e)g=e[c],d[c]=new a.SongCustomCollection(g);return d},getSongsByIds:function(c,d,e){var h,i,j,k,l,m,n,o,p,q;if(null==c&&(c=[]),null==d&&(d=-1),k=b.request("command:kodi:controller","auto","Commander"),c=this.getLimitIds(c,d),i="songs-"+c.join("-"),n=[],h=helpers.cache.get(i,!1))j=new a.SongCustomCollection(h),e&&e(j);else{for(o=new a.Song,l=[],p=0,q=c.length;q>p;p++)m=c[p],l.push({method:"AudioLibrary.GetSongDetails",params:[m,helpers.entities.getFields(g.fields,"small")]});l.length>0&&k.multipleCommands(l,function(){return function(b){var c,d,g,h;for(h=f.flatten([b]),d=0,g=h.length;g>d;d++)c=h[d],n.push(o.parseModel("song",c.songdetails,c.songdetails.songid));return helpers.cache.set(i,n),j=new a.SongCustomCollection(n),e?e(j):void 0}}(this))}return j},getLimitIds:function(a,b){var c,d,e;b=-1===b?this.songsByIdMax:b,e=[];for(c in a)d=a[c],b>c&&e.push(d);return e}},a.Song=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{songid:1,artist:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["AudioLibrary.GetSongDetails","songidid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.songdetails?a.songdetails:a,null!=a.songdetails&&(b.fullyloaded=!0),this.parseModel("song",b,b.songid)},b}(b.KodiEntities.Model),a.SongFilteredCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Song,c.prototype.methods={read:["AudioLibrary.GetSongs","arg1","arg2","arg3","arg4"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("track","ascending")},c.prototype.arg4=function(){return this.argFilter()},c.prototype.parse=function(a){return this.getResult(a,"songs")},c}(b.KodiEntities.Collection),a.SongCustomCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.Song,c}(b.KodiEntities.Collection),a.SongSearchIndexCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["AudioLibrary.GetSongs"]},b}(a.SongFilteredCollection),b.reqres.setHandler("song:entity",function(a,b){return null==b&&(b={}),g.getSong(a,b)}),b.reqres.setHandler("song:filtered:entities",function(a){return null==a&&(a={}),g.getFilteredSongs(a)}),b.reqres.setHandler("song:byid:entities",function(a,b){return null==a&&(a=[]),g.getSongsByIds(a,-1,b)}),b.reqres.setHandler("song:albumparse:entities",function(a){return g.parseSongsToAlbumSongs(a)}),b.commands.setHandler("song:search:entities",function(a,c,d){var e,f,h;return e=20,h=helpers.global.paramObj("indexOnly",!0),f=g.getFilteredSongs(h),b.execute("when:entity:fetched",f,function(){return function(){var h,i,j;return i=new b.Entities.Filtered(f),i.filterByString("label",a),j=i.pluck("songid"),h="limit"===c?e:-1,g.getSongsByIds(j,h,function(a){return j.length>e&&"limit"===c&&(a.more=!0),d?d(a):void 0})}}(this)),f})}),this.Kodi.module("KodiEntities",function(a,b,c,d,e,f){var g;return g={fields:{minimal:["title"],small:["thumbnail","playcount","lastplayed","dateadded","episode","rating","year","file","genre","watchedepisodes","cast"],full:["fanart","studio","mpaa","imdbnumber","episodeguide","plot"]},getEntity:function(a,c){var d;return d=new b.KodiEntities.TVShow,d.set({tvshowid:parseInt(a),properties:helpers.entities.getFields(g.fields,"full")}),d.fetch(c),d},getCollection:function(b){var c,d;return d={cache:!0,expires:config.get("static","collectionCacheExpiry")},b=f.extend(d,b),c=new a.TVShowCollection,c.fetch(b),c}},a.TVShow=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){var a;return a=f.extend(this.modelDefaults,{tvshowid:1,tvshow:""}),this.parseFieldsToDefaults(helpers.entities.getFields(g.fields,"full"),a)},b.prototype.methods={read:["VideoLibrary.GetTVShowDetails","tvshowid","properties"]},b.prototype.parse=function(a){var b;return b=null!=a.tvshowdetails?a.tvshowdetails:a,null!=a.tvshowdetails&&(b.fullyloaded=!0),b.unwatched=b.episode-b.watchedepisodes,this.parseModel("tvshow",b,b.tvshowid)},b}(b.KodiEntities.Model),a.TVShowCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.TVShow,c.prototype.methods={read:["VideoLibrary.GetTVShows","arg1","arg2","arg3"]},c.prototype.arg1=function(){return helpers.entities.getFields(g.fields,"small")},c.prototype.arg2=function(){return this.argLimit()},c.prototype.arg3=function(){return this.argSort("title","ascending")},c.prototype.parse=function(a){return this.getResult(a,"tvshows")},c}(b.KodiEntities.Collection),a.TVShowFilteredCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.methods={read:["VideoLibrary.GetTVShowss","arg1","arg2","arg3","arg4"]},b.prototype.arg4=function(){return this.argFilter()},b}(a.TVShowCollection),b.reqres.setHandler("tvshow:entity",function(a,b){return null==b&&(b={}),g.getEntity(a,b)}),b.reqres.setHandler("tvshow:entities",function(a){return null==a&&(a={}),g.getCollection(a)}),b.commands.setHandler("tvshow:search:entities",function(a,c,d){var e;return e=g.getCollection({}),b.execute("when:entity:fetched",e,function(){return function(){var c;return c=new b.Entities.Filtered(e),c.filterByString("label",a),d?d(c):void 0}}(this))})}),this.Kodi.module("Entities",function(a,b,c,d,e,f){var g;return g={savedFields:["id","position","file","type","label","thumbnail","artist","album","artistid","artistid","tvshowid","tvshow","year","rating","duration","track","url"],playlistKey:"localplaylist:list",playlistItemNamespace:"localplaylist:item:",thumbsUpNamespace:"thumbs:",localPlayerNamespace:"localplayer:",getPlaylistKey:function(a){return this.playlistItemNamespace+a},getThumbsKey:function(a){return this.thumbsUpNamespace+a},getlocalPlayerKey:function(a){return null==a&&(a="audio"),this.localPlayerNamespace+a},getListCollection:function(b){var c;return null==b&&(b="list"),c=new a.localPlaylistCollection,c.fetch(),c.where({type:b}),c},addList:function(a){var b;return b=this.getListCollection(),a.id=this.getNextId(),b.create(a),a.id},getNextId:function(){var a,b,c,d;return a=g.getListCollection(),b=a.getRawCollection(),0===b.length?d=1:(c=f.max(b,function(a){return a.id}),d=c.id+1),d},getItemCollection:function(b){var c;return c=new a.localPlaylistItemCollection([],{key:b}),c.fetch(),c},addItemsToPlaylist:function(a,b){var c,d,e,h,i;for(d=f.isArray(b)?b:b.getRawCollection(),b=this.getItemCollection(a),e=b.length,h=0,i=d.length;i>h;h++)c=d[h],b.create(g.getSavedModelFromSource(c,e)),e++;return b},getSavedModelFromSource:function(a,b){var c,d,e,f,g,h;for(e={},h=this.savedFields,f=0,g=h.length;g>f;f++)c=h[f],a[c]&&(e[c]=a[c]);return e.position=parseInt(b),d=a.type+"id",e[d]=a[d],e},clearPlaylist:function(a){var b,c;for(b=this.getItemCollection(a);c=b.first();)c.destroy()}},a.localPlaylist=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,name:"",media:"",type:"list"},b}(a.Model),a.localPlaylistCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.localPlaylist,d.prototype.localStorage=new c.LocalStorage(g.playlistKey),d}(a.Collection),a.localPlaylistItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.idAttribute="position",b.prototype.defaults=function(){var a,b,c,d,e;for(b={},e=g.savedFields,c=0,d=e.length;d>c;c++)a=e[c],b[a]="";return b},b}(a.Model),a.localPlaylistItemCollection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.model=a.localPlaylistItem,d.prototype.initialize=function(a,b){return this.localStorage=new c.LocalStorage(g.getPlaylistKey(b.key))},d}(a.Collection),b.reqres.setHandler("localplaylist:add:entity",function(a,b,c){return null==c&&(c="list"),g.addList({name:a,media:b,type:c})}),b.commands.setHandler("localplaylist:remove:entity",function(a){var b,c;return b=g.getListCollection(),c=b.findWhere({id:parseInt(a)}),c.destroy()}),b.reqres.setHandler("localplaylist:entities",function(){return g.getListCollection()}),b.commands.setHandler("localplaylist:clear:entities",function(a){return g.clearPlaylist(a)}),b.reqres.setHandler("localplaylist:entity",function(a){var b;return b=g.getListCollection(),b.findWhere({id:parseInt(a)})}),b.reqres.setHandler("localplaylist:item:entities",function(a){return g.getItemCollection(a)}),b.reqres.setHandler("localplaylist:item:add:entities",function(a,b){return g.addItemsToPlaylist(a,b)}),b.reqres.setHandler("thumbsup:toggle:entity",function(a){var b,c,d,e;return d=a.get("type"),b=g.getItemCollection(g.getThumbsKey(d)),e=b?b.length+1:1,c=b.findWhere({id:a.get("id")}),c?c.destroy():b.create(g.getSavedModelFromSource(a.attributes,e)),b}),b.reqres.setHandler("thumbsup:get:entities",function(a){return g.getItemCollection(g.getThumbsKey(a))}),b.reqres.setHandler("thumbsup:check",function(a){var b,c;return null!=a?(b=g.getItemCollection(g.getThumbsKey(a.get("type"))),c=b.findWhere({id:a.get("id")}),f.isObject(c)):!1}),b.reqres.setHandler("localplayer:get:entities",function(a){return null==a&&(a="audio"),g.getItemCollection(g.getlocalPlayerKey(a))}),b.commands.setHandler("localplayer:clear:entities",function(a){return null==a&&(a="audio"),g.clearPlaylist(g.getlocalPlayerKey(a))}),b.reqres.setHandler("localplayer:item:add:entities",function(a,b){return null==b&&(b="audio"),g.addItemsToPlaylist(g.getlocalPlayerKey(b),a)})}),this.Kodi.module("Entities",function(a,b,c,d,e,f){var g;return a.NavMain=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.defaults={id:0,title:"Untitled",path:"",icon:"",classes:"",parent:0,children:[]},b}(a.Model),a.NavMainCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.model=a.NavMain,c}(a.Collection),g={getItems:function(){var a;return a=[],a.push({id:1,title:"Music",path:"music",icon:"mdi-av-my-library-music",classes:"nav-music",parent:0}),a.push({id:2,title:"Recent",path:"music",icon:"",classes:"",parent:1}),a.push({id:3,title:"Artists",path:"music/artists",icon:"",classes:"",parent:1}),a.push({id:4,title:"Albums",path:"music/albums",icon:"",classes:"",parent:1}),a.push({id:5,title:"Digital radio",path:"music/radio",icon:"",classes:"pvr-link",parent:1,visibility:"addon:pvr:enabled"}),a.push({id:11,title:"Movies",path:"movies/recent",icon:"mdi-av-movie",classes:"nav-movies",parent:0}),a.push({id:12,title:"Recent movies",path:"movies/recent",icon:"",classes:"",parent:11}),a.push({id:13,title:"All movies",path:"movies",icon:"",classes:"",parent:11}),a.push({id:21,title:"TV shows",path:"tvshows/recent",icon:"mdi-hardware-tv",classes:"nav-tv",parent:0}),a.push({id:22,title:"Recent episodes",path:"tvshows/recent",icon:"",classes:"",parent:21}),a.push({id:23,title:"All TV shows",path:"tvshows",icon:"",classes:"",parent:21}),a.push({id:24,title:"TV",path:"tvshows/live",icon:"",classes:"pvr-link",parent:21,visibility:"addon:pvr:enabled"}),a.push({id:31,title:"Browser",path:"browser",icon:"mdi-action-view-list",classes:"nav-browser",parent:0}),a.push({id:41,title:"Thumbs up",path:"thumbsup",icon:"mdi-action-thumb-up",classes:"nav-thumbs-up",parent:0}),a.push({id:42,title:"Playlists",path:"playlists",icon:"mdi-action-assignment",classes:"playlists",parent:0}),a.push({id:51,title:"Settings",path:"settings/web",icon:"mdi-action-settings",classes:"nav-browser",parent:0}),a.push({id:52,title:"Web settings",path:"settings/web",icon:"",classes:"",parent:51}),a.push({id:53,title:"Kodi settings",path:"settings/kodi",icon:"",classes:"",parent:51}),this.checkVisibility(a)},checkVisibility:function(a){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],null!=c.visibility?b.request(c.visibility)&&d.push(c):d.push(c);return d},getDefaultStructure:function(){var b,c;return c=this.sortStructure(this.getItems()),b=new a.NavMainCollection(c)},getChildStructure:function(b){var c,d,e;return d=this.getItems(),e=f.findWhere(d,{id:b}),c=f.where(d,{parent:b}),e.items=new a.NavMainCollection(c),new a.NavMain(e)},sortStructure:function(a){var b,c,d,e,f,g,h;for(b={},f=0,g=a.length;g>f;f++)d=a[f],null!=d.path&&0!==d.parent&&(d.title=t.gettext(d.title),null==b[h=d.parent]&&(b[h]=[]),b[d.parent].push(d));e=[];for(c in a)d=a[c],null!=d.path&&0===d.parent&&(d.children=b[d.id],e.push(d));return e}},b.reqres.setHandler("navMain:entities",function(a){return null==a&&(a="all"),"all"===a?g.getDefaultStructure():g.getChildStructure(a)})}),this.Kodi.module("Controllers",function(a,b,c,d,e,f){return a.Base=function(a){function c(a){null==a&&(a={}),this.region=a.region||b.request("default:region"),this.params=helpers.url.params(),c.__super__.constructor.call(this,a),this._instance_id=f.uniqueId("controller"),b.execute("register:instance",this,this._instance_id)}return __extends(c,a),c.prototype.params={},c.prototype.close=function(){var a;return a=1<=arguments.length?__slice.call(arguments,0):[],delete this.region,delete this.options,c.__super__.close.call(this,a),b.execute("unregister:instance",this,this._instance_id)},c.prototype.show=function(a){return this.listenTo(a,"close",this.close),this.region.show(a)},c}(c.Marionette.Controller)}),this.Kodi.module("Router",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.before=function(){return b.execute("loading:show:page")},c.prototype.after=function(){return this.setBodyClasses()},c.prototype.setBodyClasses=function(){var a,c;return a=b.getRegion("root").$el,a.removeClassRegex(/^section-/),a.removeClassRegex(/^page-/),c=helpers.url.arg(0),""===c&&(c="home"),a.addClass("section-"+c),a.addClass("page-"+helpers.url.arg().join("-"))},c}(d.AppRouter)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.CollectionView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.itemViewEventPrefix="childview",b.prototype.onShow=function(){return e("img.lazy").lazyload({threshold:200})},b}(c.Marionette.CollectionView)}),this.Kodi.module("Views",function(a,b,c){return a.CompositeView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.itemViewEventPrefix="childview",b}(c.Marionette.CompositeView)}),this.Kodi.module("Views",function(a,b,c){return a.ItemView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Marionette.ItemView)}),this.Kodi.module("Views",function(a,b,c){return a.LayoutView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(c.Marionette.LayoutView)}),this.Kodi.module("Views",function(a,b,c,d,e,f){var g;return g=d.View.prototype.remove,f.extend(d.View.prototype,{themeLink:function(a,b,c){var d;return null==c&&(c={}),f.defaults(c,{external:!1,className:""}),d=c.external?void 0:{href:"#"+b},""!==c.className&&(d["class"]=c.className),this.themeTag("a",d,a)},parseAttributes:function(a){var b,c,d;b=[];for(c in a)d=a[c],b.push(""+c+"='"+d+"'");return b.join(" ")},themeTag:function(a,b,c){var d;return d=this.parseAttributes(b),"<"+a+" "+d+">"+c+"</"+a+">"}})}),this.Kodi.module("Views",function(a,b,c,d,e,f){return a.VirtualListView=function(a){function g(){return g.__super__.constructor.apply(this,arguments)}return __extends(g,a),g.prototype.originalCollection={},g.prototype.preload=20,g.prototype.originalChildView={},g.prototype.buffer=30,g.prototype.isTicking=!1,g.prototype.addChild=function(a,d,e){return e>this.preload&&(d=b.Views.CardViewPlaceholder),c.Marionette.CollectionView.prototype.addChild.apply(this,arguments)},g.prototype.bindScroll=function(){return e(window).scrollStopped(function(a){return function(){return a.requestTick()}}(this)),e(window).resizeStopped(function(a){return function(){return a.requestTick()}}(this))},g.prototype.initialize=function(){return this.originalChildView=this.getOption("childView"),this.placeholderChildView=b.Views.CardViewPlaceholder,this.bindScroll()},g.prototype.onRender=function(){return this.requestTick()},g.prototype.requestTick=function(){return this.isTicking||requestAnimationFrame(function(a){return function(){return a.renderItemsInViewport()}}(this)),this.isTicking=!0},g.prototype.renderItemsInViewport=function(){var a,b,c,d,g,h;return this.isTicking=!1,a=e(".card",this.$el),d=[],a.each(function(){return function(a,b){return e(b).visible(!0)?d.push(a):void 0}}(this)),c=f.min(d),b=f.max(d),c=c-this.buffer<0?0:c-this.buffer,b=b+this.buffer>=a.length?a.length-1:b+this.buffer,g=function(){h=[];for(var a=c;b>=c?b>=a:a>=b;b>=c?a++:a--)h.push(a);return h}.apply(this),a.each(function(a){return function(b,c){return e(c).hasClass("ph")&&helpers.global.inArray(b,g)?e(c).replaceWith(a.getRenderedChildView(e(c).data("model"),a.originalChildView,b)):e(c).hasClass("ph")||helpers.global.inArray(b,g)?void 0:e(c).replaceWith(a.getRenderedChildView(e(c).data("model"),a.placeholderChildView,b))}}(this))},g.prototype.getRenderedChildView=function(a,b,c){var e,f;return e=this.getOption("childViewOptions"),e=d._getValue(e,this,[a,c]),f=this.buildChildView(a,b,e),this.proxyChildEvents(f),f.render().$el},g.prototype.events={"click a":"storeScroll"},g.prototype.storeScroll=function(){return helpers.backscroll.setLast()},g.prototype.onShow=function(){return helpers.backscroll.scrollToLast()},g.prototype.onDestroy=function(){return e(window).unbind("scroll"),e(window).unbind("resize")},g}(a.CollectionView)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.CardView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="views/card/card",c.prototype.tagName="li",c.prototype.events={"click .dropdown > i":"populateMenu","click .thumbs":"toggleThumbs"},c.prototype.populateMenu=function(){var a,b,c,d;if(b="",this.model.get("menu")){d=this.model.get("menu");for(a in d)c=d[a],b+=this.themeTag("li",{"class":a},c);return this.$el.find(".dropdown-menu").html(b)}},c.prototype.toggleThumbs=function(){return b.request("thumbsup:toggle:entity",this.model),this.$el.toggleClass("thumbs-up")},c.prototype.attributes=function(){var a;return a=["card","card-loaded"],b.request("thumbsup:check",this.model)&&a.push("thumbs-up"),{"class":a.join(" ")}},c.prototype.onRender=function(){return this.$el.data("model",this.model)},c.prototype.onShow=function(){return e(".dropdown",this.$el).on("click",function(){return e(this).removeClass("open").trigger("hide.bs.dropdown")})},c}(b.Views.ItemView),a.CardViewPlaceholder=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/card/card_placeholder",b.prototype.attributes=function(){return{"class":"card ph"}},b.prototype.onRender=function(){return this.$el.data("model",this.model)
},b}(b.Views.ItemView)}),this.Kodi.module("Views",function(a,b){return a.EmptyViewPage=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.template="views/empty/empty_page",d.prototype.regions={regionEmptyContent:".empty--page"},a.EmptyViewResults=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/empty/empty_results",b.prototype.regions={regionEmptyContent:".empty-result"},b}(b.Views.ItemView),d}(b.Views.ItemView)}),this.Kodi.module("Views",function(a,b,c,d,e){return a.LayoutWithSidebarFirstView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_with_sidebar_first",b.prototype.regions={regionSidebarFirst:".region-first",regionContent:".region-content"},b.prototype.events={"click .region-first-toggle":"toggleRegionFirst"},b.prototype.toggleRegionFirst=function(){return this.$el.toggleClass("region-first-open")},b}(b.Views.LayoutView),a.LayoutWithHeaderView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_with_header",b.prototype.regions={regionHeader:".region-header",regionContentTop:".region-content-top",regionContent:".region-content"},b}(b.Views.LayoutView),a.LayoutDetailsHeaderView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="views/layouts/layout_details_header",b.prototype.regions={regionSide:".region-details-side",regionTitle:".region-details-title",regionMeta:".region-details-meta",regionMetaSideFirst:".region-details-meta-side-first",regionMetaSideSecond:".region-details-meta-side-second",regionMetaBelow:".region-details-meta-below",regionFanart:".region-details-fanart"},b.prototype.onRender=function(){return e(".region-details-fanart",this.$el).css("background-image",'url("'+this.model.get("fanart")+'")'),helpers.ui.getSwatch(this.model.get("thumbnail"),function(a){return helpers.ui.applyHeaderSwatch(a)})},b}(b.Views.LayoutView)}),this.Kodi.module("Components.Form",function(a,b,c,d,e){return a.Controller=function(d){function f(){return f.__super__.constructor.apply(this,arguments)}return __extends(f,d),f.prototype.initialize=function(a){var b;return null==a&&(a={}),b=a.config?a.config:{},this.formLayout=this.getFormLayout(b),this.listenTo(this.formLayout,"show",function(c){return function(){return c.formBuild(a.form,a.formState,b),e.material.init()}}(this)),this.listenTo(this.formLayout,"form:submit",function(b){return function(){return b.formSubmit(a)}}(this)),this},f.prototype.formSubmit=function(a){var b;return b=c.Syphon.serialize(this.formLayout),this.processFormSubmit(b,a)},f.prototype.processFormSubmit=function(a,b){return b.config&&"function"==typeof b.config.callback?b.config.callback(a,this.formLayout):void 0},f.prototype.getFormLayout=function(b){return null==b&&(b={}),new a.FormWrapper({config:b})},f.prototype.formBuild=function(c,d,e){var f,g;return null==c&&(c=[]),null==d&&(d={}),null==e&&(e={}),g=b.request("form:item:entites",c,d),f=new a.Groups({collection:g}),this.formLayout.formContentRegion.show(f)},f}(b.Controllers.Base),b.reqres.setHandler("form:wrapper",function(b){var c;return null==b&&(b={}),c=new a.Controller(b),c.formLayout}),b.reqres.setHandler("form:popup:wrapper",function(c){var d,e,f;return null==c&&(c={}),f=c.config.callback,c.config.callback=function(a,c){return b.execute("ui:modal:close"),f(a,c)},e=new a.Controller(c),d=e.formLayout.render().$el,e.formLayout.trigger("show"),b.execute("ui:modal:form:show",c.title,d)})}),this.Kodi.module("Components.Form",function(a,b,c,d,e,f){return a.FormWrapper=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="components/form/form",b.prototype.tagName="form",b.prototype.regions={formContentRegion:".form-content-region",formResponse:".response"},b.prototype.triggers={"click .form-save":"form:submit","click [data-form-button='cancel']":"form:cancel"},b.prototype.modelEvents={"change:_errors":"changeErrors","sync:start":"syncStart","sync:stop":"syncStop"},b.prototype.initialize=function(){return this.config=this.options.config,this.on("form:save",function(a){return function(b){return a.addSuccessMsg(b)}}(this))},b.prototype.attributes=function(){var a;return a={"class":"component-form"},this.options.config&&this.options.config.attributes&&(a=f.extend(a,this.options.config.attributes)),a},b.prototype.onShow=function(){return f.defer(function(a){return function(){return a.config.focusFirstInput&&a.focusFirstInput(),e(".btn").ripples({color:"rgba(255,255,255,0.1)"})}}(this))},b.prototype.focusFirstInput=function(){return this.$(":input:visible:enabled:first").focus()},b.prototype.changeErrors=function(a,b){return this.config.errors?f.isEmpty(b)?this.removeErrors():this.addErrors(b):void 0},b.prototype.removeErrors=function(){return this.$(".error").removeClass("error").find("small").remove()},b.prototype.addErrors=function(a){var b,c,d;null==a&&(a={}),d=[];for(c in a)b=a[c],d.push(this.addError(c,b[0]));return d},b.prototype.addError=function(a,b){var c,d;return c=this.$("[name='"+a+"']"),d=e("<small>").text(b),c.after(d).closest(".row").addClass("error")},b.prototype.addSuccessMsg=function(a){var b;return b=e(".response",this.$el),b.html(a).show(),setTimeout(function(){return b.fadeOut()},5e3)},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="components/form/form_item",b.prototype.tagName="div",b.prototype.initialize=function(){var a,b,c,d,e,g,h,i;switch(b=f.extend({id:"form-edit-"+this.model.get("id"),name:this.model.get("id")},this.model.get("attributes")),e=f.extend(b,{"class":"form-control"}),this.model.get("type")){case"checkbox":a={type:"checkbox",value:1,"class":"form-checkbox"},this.model.get("defaultValue")===!0&&(a.checked="checked"),c=this.themeTag("input",f.extend(b,a),"");break;case"textfield":a={type:"text",value:this.model.get("defaultValue")},c=this.themeTag("input",f.extend(e,a),"");break;case"textarea":c=this.themeTag("textarea",e,this.model.get("defaultValue"));break;case"select":g="",i=this.model.get("options");for(d in i)h=i[d],a={value:d},this.model.get("defaultValue")===d&&(a.selected="selected"),g+=this.themeTag("option",a,h);c=this.themeTag("select",f.extend(b,{"class":"form-control"}),g);break;default:c=""}return this.model.set({element:c})},b.prototype.attributes=function(){return{"class":"form-item form-group form-type-"+this.model.get("type")+" form-edit-"+this.model.get("id")}},b}(b.Views.ItemView),a.Group=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="components/form/form_item_group",c.prototype.tagName="div",c.prototype.className="form-group",c.prototype.childView=a.Item,c.prototype.childViewContainer=".form-items",c.prototype.initialize=function(){return this.collection=this.model.get("children")},c}(b.Views.CompositeView),a.Groups=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Group,c.prototype.className="form-groups",c}(b.Views.CollectionView)}),this.Kodi.module("AddonApp",function(a,b){var c;return c={addonController:function(){return b.request("command:kodi:controller","auto","AddOn")},getEnabledAddons:function(a){return this.addonController().getEnabledAddons(a)}},b.on("before:start",function(){return c.getEnabledAddons(function(a){return config.set("static","addOnsEnabled",a),config.set("static","addOnsLoaded",!0)})})}),this.Kodi.module("AddonApp.Pvr",function(a,b,c,d,e,f){var g;return g={pvrEnabled:function(){var a,b,c;return b=!1,config.get("static","addOnsLoaded",!1)&&(a=config.get("static","addOnsEnabled",[]),c=f.findWhere(a,{type:"xbmc.pvrclient"}),b=null!=c?!0:!1),b}},b.reqres.setHandler("addon:pvr:enabled",function(){return g.pvrEnabled()})}),this.Kodi.module("AlbumApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={music:"recent","music/albums":"list","music/album/:id":"view"},b}(b.Router.Base),c={recent:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f;switch(e=c.model,f=b.request("command:kodi:controller","audio","PlayList"),a){case"play":return b.execute("command:audio:play","albumid",e.get("albumid"));case"add":return f.add("albumid",e.get("albumid"));case"localadd":return b.execute("localplaylist:addentity","albumid",e.get("albumid"));case"localplay":return d=b.request("command:local:controller","audio","PlayList"),d.play("albumid",e.get("albumid"))}}},b.on("before:start",function(){return new a.Router({controller:c})}),b.commands.setHandler("album:action",function(a,b){return c.action(a,b)}),b.reqres.setHandler("album:action:items",function(){return{actions:{thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",localadd:"Add to local playlist",divider:"",localplay:"Play in browser"}}})}),this.Kodi.module("AlbumApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=1,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded(),a.renderRecentlyPlayed()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("album:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("album:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d.prototype.renderRecentlyPlayed=function(){var a;return a=b.request("album:recentlyplayed:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("album:list:view",a),c.page.regionRecentlyPlayed.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("AlbumApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/landing/landing",b.prototype.className="album-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added",regionRecentlyPlayed:".region-recently-played"},b}(b.Views.LayoutView)}),this.Kodi.module("AlbumApp.List",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"childview:album:play",function(a,c){return b.execute("album:action","play",c)}),b.listenTo(a,"childview:album:add",function(a,c){return b.execute("album:action","add",c)}),b.listenTo(a,"childview:album:localadd",function(a,c){return b.execute("album:action","localadd",c)}),b.listenTo(a,"childview:album:localplay",function(a,c){return b.execute("album:action","localplay",c)})},getAlbumsList:function(b,d){var e,f;return null==d&&(d=!1),f=d?"AlbumsSet":"Albums",e=new a[f]({collection:b}),c.bindTriggers(e),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("album:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=1,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["label","year","rating"],filter:["year","genre"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getAlbumsList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("album:list:view",function(a){return c.getAlbumsList(a,!0)})}),this.Kodi.module("AlbumApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.AlbumTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"album:play","click .dropdown .add":"album:add","click .dropdown .localadd":"album:localadd","click .dropdown .localplay":"album:localplay"},c.prototype.initialize=function(){var a,d;return c.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set(b.request("album:action:items")),a=""!==this.model.get("artist")?this.model.get("artist"):"&nbsp;",d=this.themeLink(a,helpers.url.get("artist",this.model.get("artistid"))),this.model.set({subtitle:d})):void 0},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="album-empty-result",b}(b.Views.EmptyViewResults),a.Albums=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.AlbumTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.sort="artist",c.prototype.className="card-grid--square",c}(b.Views.VirtualListView),a.AlbumsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.AlbumTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.sort="artist",c.prototype.className="card-grid--square",c}(b.Views.CollectionView)}),this.Kodi.module("AlbumApp.Show",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"album:play",function(a){return b.execute("album:action","play",a)}),b.listenTo(a,"album:add",function(a){return b.execute("album:action","add",a)}),b.listenTo(a,"album:localadd",function(a){return b.execute("album:action","localadd",a)}),b.listenTo(a,"album:localplay",function(a){return b.execute("album:action","localplay",a)})},getAlbumsFromSongs:function(d){var e,f,g,h;g=new a.WithSongsCollection,g.on("add:child",function(){return function(f){return b.execute("when:entity:fetched",e,function(){var e,g,h;return e=f.model,h=new a.AlbumTeaser({model:e}),c.bindTriggers(h),f.regionMeta.show(h),g=b.request("song:list:view",d[e.get("albumid")]),f.regionSongs.show(g)})}}(this));for(f in d)h=d[f],e=b.request("album:entity",f,{success:function(b){return g.addChild(b,a.WithSongsLayout)}});return g}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d;return d=parseInt(a.id),c=b.request("album:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getMusic(d),a.getDetailsLayoutView(c)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.AlbumDetailTeaser({model:b}),c.bindTriggers(f),e=new a.Details({model:b}),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getMusic=function(c){var d,e;return d={filter:{albumid:c}},e=b.request("song:filtered:entities",d),b.execute("when:entity:fetched",e,function(c){return function(){var d,f;return d=new a.WithSongsLayout,f=b.request("song:list:view",e),c.listenTo(d,"show",function(){return d.regionSongs.show(f)}),c.layout.regionContent.show(d)}}(this))},e}(b.Controllers.Base),b.reqres.setHandler("albums:withsongs:view",function(a){return c.getAlbumsFromSongs(a)})}),this.Kodi.module("AlbumApp.Show",function(a,b){return a.WithSongsLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/show/album_with_songs",b.prototype.className="album-wrapper",b.prototype.regions={regionMeta:".region-album-meta",regionSongs:".region-album-songs"},b}(b.Views.LayoutView),a.WithSongsCollection=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.WithSongsLayout,c.prototype.tagName="div",c.prototype.sort="year",c.prototype.className="albums-wrapper",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="album-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/album/show/details_meta",b}(b.Views.ItemView),a.AlbumTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.tagName="div",c.prototype.className="card-minimal",c.prototype.initialize=function(){return this.model.set({subtitle:this.model.get("year")}),this.model.set(b.request("album:action:items"))},c}(b.AlbumApp.List.AlbumTeaser),a.AlbumDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="card-detail",b}(a.AlbumTeaser)}),this.Kodi.module("ArtistApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"music/artists":"list","music/artist/:id":"view"},b}(b.Router.Base),c={list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f;switch(e=c.model,f=b.request("command:kodi:controller","audio","PlayList"),a){case"play":return b.execute("command:audio:play","artistid",e.get("artistid"));case"add":return f.add("artistid",e.get("artistid"));case"localadd":return b.execute("localplaylist:addentity","artistid",e.get("artistid"));case"localplay":return d=b.request("command:local:controller","audio","PlayList"),d.play("artistid",e.get("artistid"))}}},b.on("before:start",function(){return new a.Router({controller:c})}),b.commands.setHandler("artist:action",function(a,b){return c.action(a,b)}),b.reqres.setHandler("artist:action:items",function(){return{actions:{thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",localadd:"Add to local playlist",divider:"",localplay:"Play in browser"}}})}),this.Kodi.module("ArtistApp.List",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"childview:artist:play",function(a,c){return b.execute("artist:action","play",c)}),b.listenTo(a,"childview:artist:add",function(a,c){return b.execute("artist:action","add",c)}),b.listenTo(a,"childview:artist:localadd",function(a,c){return b.execute("artist:action","localadd",c)}),b.listenTo(a,"childview:artist:localplay",function(a,c){return b.execute("artist:action","localplay",c)})},getArtistList:function(b,d){var e,f;return null==d&&(d=!1),f=d?"ArtistsSet":"Artists",e=new a[f]({collection:b}),c.bindTriggers(e),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("artist:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=1,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["label"],filter:["mood","genre","style"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getArtistList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("artist:list:view",function(a){return c.getArtistList(a,!0)})}),this.Kodi.module("ArtistApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.ArtistTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"artist:play","click .dropdown .add":"artist:add","click .dropdown .localadd":"artist:localadd","click .dropdown .localplay":"artist:localplay"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),null!=this.model?this.model.set(b.request("album:action:items")):void 0},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="artist-empty-result",b}(b.Views.EmptyViewResults),a.Artists=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ArtistTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--wide",c}(b.Views.VirtualListView),a.ArtistsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ArtistTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--wide",c}(b.Views.CollectionView)}),this.Kodi.module("ArtistApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return d=parseInt(a.id),c=b.request("artist:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getMusic(d),a.getDetailsLayoutView(c)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},d.prototype.getDetailsLayoutView=function(b){var c;return c=new a.HeaderLayout({model:b}),this.listenTo(c,"show",function(){return function(){var d,e;return e=new a.ArtistTeaser({model:b}),d=new a.Details({model:b}),c.regionSide.show(e),c.regionMeta.show(d)}}(this)),this.layout.regionHeader.show(c)},d.prototype.getMusic=function(a){var c,d;return c={filter:{artistid:a}},d=b.request("song:filtered:entities",c),b.execute("when:entity:fetched",d,function(a){return function(){var c,e;return e=b.request("song:albumparse:entities",d),c=b.request("albums:withsongs:view",e),a.layout.regionContent.show(c)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("ArtistApp.Show",function(a,b){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="artist-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/artist/show/details_meta",b}(b.Views.ItemView),a.ArtistTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b}(b.ArtistApp.List.ArtistTeaser)}),soundManager.setup({url:"lib/soundmanager/swf/",flashVersion:9,preferFlash:!0,useHTML5Audio:!0,useFlashBlock:!1,flashLoadTimeout:3e3,debugMode:!1,noSWFCache:!0,debugFlash:!1,flashPollingInterval:1e3,html5PollingInterval:1e3,onready:function(){return $(window).trigger("audiostream:ready")},ontimeout:function(){return $(window).trigger("audiostream:timout"),soundManager.flashLoadTimeout=0,soundManager.onerror={},soundManager.reboot()}}),this.Kodi.module("BrowserApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={browser:"list","browser/:media/:id":"view"},b}(b.Router.Base),c={list:function(){return new a.List.Controller},view:function(b,c){return new a.List.Controller({media:b,id:c})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("BrowserApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.sourceCollection={},d.prototype.backButtonModel={},d.prototype.initialize=function(a){return null==a&&(a={}),this.layout=this.getLayout(),this.listenTo(this.layout,"show",function(b){return function(){return b.getSources(a),b.getFolderLayout()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getFolderLayout=function(){return this.folderLayout=new a.FolderLayout,this.layout.regionContent.show(this.folderLayout)},d.prototype.getSources=function(c){var d;return d=b.request("file:source:entities","video"),b.execute("when:entity:fetched",d,function(e){return function(){var f,g;return e.sourceCollection=d,g=b.request("file:source:media:entities",d),f=new a.SourcesSet({collection:g}),e.layout.regionSidebarFirst.show(f),e.listenTo(f,"childview:childview:source:open",function(a,b){return e.getFolder(b.model)}),e.loadFromUrl(c)}}(this))},d.prototype.loadFromUrl=function(a){var c;return a.media&&a.id?(c=b.request("file:url:entity",a.media,a.id),this.getFolder(c)):void 0},d.prototype.getFolder=function(a){var c,d;return b.navigate(a.get("url")),c=b.request("file:entities",{file:a.get("file"),media:a.get("media")}),d=b.request("file:path:entities",a.get("file"),this.sourceCollection),this.getPathList(d),b.execute("when:entity:fetched",c,function(a){return function(){var d;return d=b.request("file:parsed:entities",c),a.getFolderList(d.directory),a.getFileList(d.file)}}(this))},d.prototype.getFolderList=function(c){var d;return d=new a.FolderList({collection:c}),this.folderLayout.regionFolders.show(d),this.getBackButton(),this.listenTo(d,"childview:folder:open",function(a){return function(b,c){return a.getFolder(c.model)}}(this)),this.listenTo(d,"childview:folder:play",function(){return function(a,c){var d;return d=b.request("command:kodi:controller",c.model.get("player"),"PlayList"),d.play("directory",c.model.get("file"))}}(this))},d.prototype.getFileList=function(c){var d;return d=new a.FileList({collection:c}),this.folderLayout.regionFiles.show(d),this.listenTo(d,"childview:file:play",function(){return function(a,c){var d;return d=b.request("command:kodi:controller",c.model.get("player"),"PlayList"),d.play("file",c.model.get("file"))}}(this))},d.prototype.getPathList=function(b){var c;return c=new a.PathList({collection:b}),this.folderLayout.regionPath.show(c),this.setBackModel(b),this.listenTo(c,"childview:folder:open",function(a){return function(b,c){return a.getFolder(c.model)}}(this))},d.prototype.setBackModel=function(a){return this.backButtonModel=a.length>=2?a.models[a.length-2]:{}},d.prototype.getBackButton=function(){var b;return this.backButtonModel.attributes?(b=new a.Back({model:this.backButtonModel}),this.folderLayout.regionBack.show(b),this.listenTo(b,"folder:open",function(a){return function(b){return a.getFolder(b.model)}}(this))):this.folderLayout.regionBack.empty()},d}(b.Controllers.Base)}),this.Kodi.module("BrowserApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="browser-page",b}(b.Views.LayoutWithSidebarFirstView),a.Source=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/source",b.prototype.tagName="li",b.prototype.triggers={"click .source":"source:open"},b.prototype.attributes=function(){return{"class":"type-"+this.model.get("sourcetype")}},b}(b.Views.ItemView),a.Sources=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/browser/list/source_set",c.prototype.childView=a.Source,c.prototype.tagName="div",c.prototype.childViewContainer="ul.sources",c.prototype.className="source-set",c.prototype.initialize=function(){return this.collection=this.model.get("sources")},c}(b.Views.CompositeView),a.SourcesSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Sources,c.prototype.tagName="div",c.prototype.className="sources-sets",c}(b.Views.CollectionView),a.FolderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/folder_layout",b.prototype.className="folder-page-wrapper",b.prototype.regions={regionPath:".path",regionFolders:".folders",regionFiles:".files",regionBack:".back"},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/file",b.prototype.tagName="li",b}(b.Views.ItemView),a.Folder=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="folder",b.prototype.triggers={"click .title":"folder:open","click .play":"folder:play"},b}(a.Item),a.EmptyFiles=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.initialize=function(){return this.model.set({id:"empty",content:t.gettext("no media in this folder")})},b}(b.Views.EmptyViewPage),a.File=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="file",b.prototype.triggers={"click .play":"file:play"},b}(a.Item),a.FolderList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)
}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.Folder,c}(b.Views.CollectionView),a.FileList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.File,c.prototype.emptyView=a.EmptyFiles,c}(b.Views.CollectionView),a.Path=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/path",b.prototype.tagName="li",b.prototype.triggers={"click .title":"folder:open"},b}(b.Views.ItemView),a.PathList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.childView=a.Path,c}(b.Views.CollectionView),a.Back=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/browser/list/back_button",b.prototype.tagName="div",b.prototype.className="back-button",b.prototype.triggers={"click .title":"folder:open"},b}(b.Views.ItemView)}),this.Kodi.module("CastApp",function(a,b){var c;return c={getCastCollection:function(a,c){return b.request("cast:entities",a,c)},getCastView:function(c){var d;return d=new a.List.CastList({collection:c}),b.listenTo(d,"childview:cast:google",function(a,b){return window.open("https://www.google.com/webhp?#q="+encodeURIComponent(b.model.get("name")))}),b.listenTo(d,"childview:cast:imdb",function(a,b){return window.open("http://www.imdb.com/find?s=nm&q="+encodeURIComponent(b.model.get("name")))}),d}},b.reqres.setHandler("cast:list:view",function(a,b){var d;return d=c.getCastCollection(a,b),c.getCastView(d)})}),this.Kodi.module("CastApp.List",function(a,b){return a.CastTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/cast/list/cast",b.prototype.tagName="li",b.prototype.triggers={"click .imdb":"cast:imdb","click .google":"cast:google"},b}(b.Views.ItemView),a.CastList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.CastTeaser,c.prototype.tagName="ul",c.prototype.className="cast-full",c}(b.Views.CollectionView)}),this.Kodi.module("CommandApp",function(a,b){var c;return c={currentAudioPlaylistController:function(){var a;return a=b.request("state:current"),b.request("command:"+a.getPlayer()+":controller","audio","PlayList")}},b.reqres.setHandler("command:kodi:player",function(b,c,d){var e;return e=new a.Kodi.Player("auto"),e.sendCommand(b,c,d)}),b.reqres.setHandler("command:kodi:controller",function(b,c){return null==b&&(b="auto"),new a.Kodi[c](b)}),b.reqres.setHandler("command:local:player",function(b,c,d){var e;return e=new a.Local.Player("audio"),e.sendCommand(b,c,d)}),b.reqres.setHandler("command:local:controller",function(b,c){return null==b&&(b="auto"),new a.Local[c](b)}),b.commands.setHandler("command:audio:play",function(a,b){return c.currentAudioPlaylistController().play(a,b)}),b.commands.setHandler("command:audio:add",function(a,b){return c.currentAudioPlaylistController().add(a,b)}),b.addInitializer(function(){})}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.Base=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.ajaxOptions={},b.prototype.initialize=function(a){return null==a&&(a={}),e.jsonrpc.defaultUrl=helpers.url.baseKodiUrl("Base"),this.setOptions(a)},b.prototype.setOptions=function(a){return this.ajaxOptions=a},b.prototype.multipleCommands=function(a,b){var c;return c=e.jsonrpc(a,this.ajaxOptions),c.fail(function(b){return function(c){return b.onError(a,c)}}(this)),c.done(function(c){return function(d){return d=c.parseResponse(a,d),c.triggerMethod("response:ready",d),null!=b?c.doCallback(b,d):void 0}}(this)),c},b.prototype.singleCommand=function(a,b,c){var d;return a={method:a},null!=b&&(b.length>0||f.isObject(b))&&(a.params=b),d=this.multipleCommands([a],c)},b.prototype.parseResponse=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],d.result||d.result===!1?e.push(d.result):this.onError(a[c],d);return 1===a.length&&1===e.length&&(e=e[0]),e},b.prototype.paramObj=function(a,b){return helpers.global.paramObj(a,b)},b.prototype.doCallback=function(a,b){return null!=a?a(b):void 0},b.prototype.onError=function(a,b){return helpers.debug.rpcError(a,b)},b}(d.Object)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Commander=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.playerActive=0,b.prototype.playerName="music",b.prototype.playerForced=!1,b.prototype.playerIds={audio:0,video:1},b.prototype.setPlayer=function(a){return"audio"===a||"video"===a?(this.playerActive=this.playerIds[a],this.playerName=a,this.playerForced=!0):void 0},b.prototype.getPlayer=function(){return this.playerActive},b.prototype.getPlayerName=function(){return this.playerName},b.prototype.playerIdToName=function(a){var b,c,d,e;e=this.playerIds;for(c in e)b=e[c],b===a&&(d=c);return d},b.prototype.commandNameSpace="JSONRPC",b.prototype.getCommand=function(a,b){return null==b&&(b=this.commandNameSpace),b+"."+a},b.prototype.sendCommand=function(a,b,c){return this.singleCommand(this.getCommand(a),b,function(a){return function(b){return a.doCallback(c,b)}}(this))},b}(a.Base),a.Player=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Player",c.prototype.playlistApi={},c.prototype.initialize=function(a){return null==a&&(a="audio"),this.setPlayer(a),this.playlistApi=b.request("playlist:kodi:entity:api")},c.prototype.getParams=function(a,b){var c;return null==a&&(a=[]),this.playerForced?(c=[this.playerActive],this.doCallback(b,c.concat(a))):this.getActivePlayers(function(d){return function(e){return c=[e],d.doCallback(b,c.concat(a))}}(this))},c.prototype.getActivePlayers=function(a){return this.singleCommand(this.getCommand("GetActivePlayers"),{},function(b){return function(c){return c.length>0?(b.playerActive=c[0].playerid,b.playerName=b.playerIdToName(b.playerActive),b.triggerMethod("player:ready",b.playerActive),b.doCallback(a,b.playerActive)):b.doCallback(a,b.playerActive)}}(this))},c.prototype.sendCommand=function(a,b,c){return null==b&&(b=[]),this.getParams(b,function(b){return function(d){return b.singleCommand(b.getCommand(a),d,function(a){return b.doCallback(c,a)})}}(this))},c.prototype.playEntity=function(a,c,d,e){var f,g;return null==d&&(d={}),g=[],f=this.paramObj(a,c),"position"===a&&(f.playlistid=this.getPlayer()),g.push(f),d.length>0&&g.push(d),this.singleCommand(this.getCommand("Open","Player"),g,function(a){return function(c){return b.request("sockets:active")||b.request("state:kodi:update"),a.doCallback(e,c)}}(this))},c.prototype.getPlaying=function(a){var b;return b={active:!1,properties:!1,item:!1},this.singleCommand(this.getCommand("GetActivePlayers"),{},function(c){return function(d){var e,f,g;return d.length>0?(b.active=d[0],e=[],f=helpers.entities.getFields(c.playlistApi.fields,"full"),g=["playlistid","speed","position","totaltime","time","percentage","shuffled","repeat","canrepeat","canshuffle","canseek","partymode"],e.push({method:c.getCommand("GetProperties"),params:[b.active.playerid,g]}),e.push({method:c.getCommand("GetItem"),params:[b.active.playerid,f]}),c.multipleCommands(e,function(d){return b.properties=d[0],b.item=d[1].item,c.doCallback(a,b)})):c.doCallback(a,!1)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a){return a.AddOn=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="Addons",b.prototype.getAddons=function(a,b,c){return null==a&&(a="unknown"),null==b&&(b=!0),this.singleCommand(this.getCommand("GetAddons"),[a,"unknown",b],function(a){return function(b){return a.doCallback(c,b.addons)}}(this))},b.prototype.getEnabledAddons=function(a){return this.getAddons("unknown",!0,function(b){return function(c){return b.doCallback(a,c)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Application=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Application",c.prototype.getProperties=function(a){return this.singleCommand(this.getCommand("GetProperties"),[["volume","muted"]],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.setVolume=function(a,b){return this.singleCommand(this.getCommand("SetVolume"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},c.prototype.toggleMute=function(a){var c;return c=b.request("state:kodi"),this.singleCommand(this.getCommand("SetMute"),[!c.getState("muted")],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.quit=function(a){return this.singleCommand(this.getCommand("Quit"),[],function(b){return function(c){return b.doCallback(a,c)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.AudioLibrary=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="AudioLibrary",b.prototype.setAlbumDetails=function(a,b,c){var d;return null==b&&(b={}),d={albumid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetAlbumDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setArtistDetails=function(a,b,c){var d;return null==b&&(b={}),d={artistid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetArtistDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setArtistDetails=function(a,b,c){var d;return null==b&&(b={}),d={songid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetSongDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.scan=function(a){return this.singleCommand(this.getCommand("Scan"),function(b){return function(c){return b.doCallback(a,c)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a){return a.Files=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="Files",b.prototype.prepareDownload=function(a,b){return this.singleCommand(this.getCommand("PrepareDownload"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},b.prototype.downloadPath=function(a,b){return this.prepareDownload(a,function(a){return function(c){return a.doCallback(b,c.details.path)}}(this))},b.prototype.downloadFile=function(a){var b;return b=window.open("about:blank","download"),this.downloadPath(a,function(a){return b.location=a})},b.prototype.videoStream=function(a,b){var c;return null==b&&(b="html5"),c=helpers.global.localVideoPopup("about:blank"),this.downloadPath(a,function(a){return c.location="videoPlayer.html?player="+b+"&src="+encodeURIComponent(a)})},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.Input=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Input",c.prototype.sendText=function(a,b){return this.singleCommand(this.getCommand("SendText"),[a],function(a){return function(c){return a.doCallback(b,c)}}(this))},c.prototype.sendInput=function(a,c){return this.singleCommand(this.getCommand(a),[],function(a){return function(d){return a.doCallback(c,d),b.request("sockets:active")?void 0:b.request("state:kodi:update",c)}}(this))},c}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b){return a.PlayList=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commandNameSpace="Playlist",c.prototype.play=function(a,c){var d;return d=b.request("state:kodi"),d.isPlaying()?this.insertAndPlay(a,c,d.getPlaying("position")+1):this.clear(function(b){return function(){return b.insertAndPlay(a,c,0)}}(this))},c.prototype.playCollection=function(a,b){return null==b&&(b=0),this.clear(function(c){return function(){var d,e,f,g,h,i,j,k;g=a.getRawCollection(),i=c.getPlayer(),d=[];for(e in g)f=g[e],j=parseInt(b)+parseInt(e),k="file"===f.type?"file":f.type+"id",h=[i,j,c.paramObj(k,f[k])],d.push({method:c.getCommand("Insert"),params:h});return c.multipleCommands(d,function(){return c.playEntity("position",parseInt(b),{},function(){return c.refreshPlaylistView()})})}}(this))},c.prototype.add=function(a,b){return this.playlistSize(function(c){return function(d){return c.insert(a,b,d)}}(this))},c.prototype.remove=function(a,b){return this.singleCommand(this.getCommand("Remove"),[this.getPlayer(),parseInt(a)],function(a){return function(c){return a.refreshPlaylistView(),a.doCallback(b,c)}}(this))},c.prototype.clear=function(a){return this.singleCommand(this.getCommand("Clear"),[this.getPlayer()],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.insert=function(a,b,c,d){return null==c&&(c=0),this.singleCommand(this.getCommand("Insert"),[this.getPlayer(),parseInt(c),this.paramObj(a,b)],function(a){return function(b){return a.refreshPlaylistView(),a.doCallback(d,b)}}(this))},c.prototype.getItems=function(a){return this.singleCommand(this.getCommand("GetItems"),[this.getPlayer(),["title"]],function(b){return function(c){return b.doCallback(a,c)}}(this))},c.prototype.insertAndPlay=function(a,b,c,d){return null==c&&(c=0),this.insert(a,b,c,function(a){return function(b){return a.playEntity("position",parseInt(c),{},function(){return a.doCallback(d,b)})}}(this))},c.prototype.playlistSize=function(a){return this.getItems(function(b){return function(c){var d;return d=null!=c.items?c.items.length:0,b.doCallback(a,d)}}(this))},c.prototype.refreshPlaylistView=function(){var a;return a=b.request("sockets:active"),a?void 0:b.execute("playlist:refresh","kodi",this.playerName)},c.prototype.moveItem=function(a,b,c,d,e){var f;return f="file"===a?"file":a+"id",this.singleCommand(this.getCommand("Remove"),[this.getPlayer(),parseInt(c)],function(a){return function(){return a.insert(f,b,d,function(){return a.doCallback(e,d)})}}(this))},c}(a.Player)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.PVR=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="PVR",b.prototype.setPVRRecord=function(a,b,c){var d;return null==b&&(b={}),d={channel:a},d=f.extend(d,b),this.singleCommand(this.getCommand("Record"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b}(a.Commander)}),this.Kodi.module("CommandApp.Kodi",function(a,b,c,d,e,f){return a.VideoLibrary=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.commandNameSpace="VideoLibrary",b.prototype.setEpisodeDetails=function(a,b,c){var d;return null==b&&(b={}),d={episodeid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetEpisodeDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.setMovieDetails=function(a,b,c){var d;return null==b&&(b={}),d={movieid:a},d=f.extend(d,b),this.singleCommand(this.getCommand("SetMovieDetails"),d,function(a){return function(b){return a.doCallback(c,b)}}(this))},b.prototype.scan=function(a){return this.singleCommand(this.getCommand("Scan"),function(b){return function(c){return b.doCallback(a,c)}}(this))},b.prototype.toggleWatched=function(a,b){var c,d;return d=a.get("playcount")>0?0:1,c=helpers.global.paramObj("playcount",d),"movie"===a.get("type")&&this.setMovieDetails(a.get("id"),c,function(c){return function(){return helpers.cache.updateCollection("MovieCollection","movies",a.get("id"),"playcount",d),c.doCallback(b,d)}}(this)),"episode"===a.get("type")?this.setEpisodeDetails(a.get("id"),c,function(c){return function(){return helpers.cache.updateCollection("TVShowCollection","tvshows",a.get("tvshowid"),"playcount",d),c.doCallback(b,d)}}(this)):void 0},b}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.localLoad=function(a,c){var d,e;return e=b.request("state:local"),null==a?(e.setPlaying("playing",!1),void this.localStateUpdate()):(e.setState("currentPlaybackId","browser-"+a.get("id")),d=b.request("command:kodi:controller","video","Files"),d.downloadPath(a.get("file"),function(d){return function(f){var g;return g=soundManager,d.localStop(),e.setState("localPlay",g.createSound({id:e.getState("currentPlaybackId"),url:f,autoplay:!1,autoLoad:!0,stream:!0,onerror:function(){return console.log("SM ERROR!")},onplay:function(){return e.setPlayer("local"),e.setPlaying("playing",!0),e.setPlaying("paused",!1),e.setPlaying("playState","playing"),e.setPlaying("position",a.get("position")),e.setPlaying("itemChanged",!0),e.setPlaying("item",a.attributes),e.setPlaying("totaltime",helpers.global.secToTime(a.get("duration"))),d.localStateUpdate()},onstop:function(){return e.setPlaying("playing",!1),d.localStateUpdate()},onpause:function(){return e.setPlaying("paused",!0),e.setPlaying("playState","paused"),d.localStateUpdate()},onresume:function(){return e.setPlaying("paused",!1),e.setPlaying("playState","playing"),d.localStateUpdate()},onfinish:function(){return d.localFinished()},whileplaying:function(){var c,d,f;return f=parseInt(this.position)/1e3,c=parseInt(a.get("duration")),d=Math.round(f/c*100),e.setPlaying("time",helpers.global.secToTime(f)),e.setPlaying("percentage",d),b.execute("player:local:progress:update",d,helpers.global.secToTime(f))}})),d.doCallback(c)}}(this)))},c.prototype.localFinished=function(){return this.localGoTo("next")},c.prototype.localPlay=function(){return this.localCommand("play")},c.prototype.localStop=function(){return this.localCommand("stop")},c.prototype.localPause=function(){return this.localCommand("pause")},c.prototype.localPlayPause=function(){var a;return a=b.request("state:local"),this.localCommand(a.getPlaying("paused")?"play":"pause")},c.prototype.localSetVolume=function(a){return this.localCommand("setVolume",a)},c.prototype.localCommand=function(a,c){var d,e;return e=b.request("state:local"),d=e.getState("localPlay"),d!==!1&&d[a](c),this.localStateUpdate()},c.prototype.localGoTo=function(a){var c,d,e,f,g;return c=b.request("localplayer:get:entities"),g=b.request("state:local"),d=g.getPlaying("position"),f=!1,c.length>0&&("one"===g.getState("repeat")?f=d:g.getState("shuffled")===!0?f=helpers.global.getRandomInt(0,c.length-1):("next"===a&&(d===c.length-1&&"all"===g.getState("repeat")?f=0:d<c.length&&(f=d+1)),"previous"===a&&(0===d&&"all"===g.getState("repeat")?f=c.length-1:d>0&&(f=d-1)))),f!==!1?(e=c.findWhere({position:f}),this.localLoad(e,function(a){return function(){return a.localPlay(),a.localStateUpdate()}}(this))):void 0},c.prototype.localSeek=function(a){var c,d,e,f;return f=b.request("state:local"),c=f.getState("localPlay"),c!==!1?(d=a/100*c.duration,e=soundManager.getSoundById(f.getState("currentPlaybackId")),e.setPosition(d)):void 0},c.prototype.localRepeat=function(a){var c,d,e,f,g,h;if(g=b.request("state:local"),"cycle"!==a)return g.setState("repeat",a);e=!1,h=["off","all","one"];for(c in h)f=h[c],c=parseInt(c),e===!1&&g.getState("repeat")===f&&(c!==h.length-1?(d=c+1,e=h[d]):e="off");return g.setState("repeat",e)},c.prototype.localShuffle=function(){var a,c;return c=b.request("state:local"),a=c.getState("shuffled"),c.setState("shuffled",!a)},c.prototype.localStateUpdate=function(){return b.vent.trigger("state:local:changed")},c.prototype.paramObj=function(a,b){return helpers.global.paramObj(a,b)},c.prototype.doCallback=function(a,b){return"function"==typeof a?a(b):void 0},c.prototype.onError=function(a,b){return helpers.debug.rpcError(a,b)},c}(d.Object)}),this.Kodi.module("CommandApp.Local",function(a,b){return a.Commander=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(a.Base),a.Player=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.playEntity=function(a,c,d){var e,f;return null==a&&(a="position"),e=b.request("localplayer:get:entities"),f=e.findWhere({position:c}),this.localLoad(f,function(a){return function(){return a.localPlay(),a.doCallback(d,c)}}(this))},c.prototype.sendCommand=function(a,b){switch(a){case"GoTo":this.localGoTo(b);break;case"PlayPause":this.localPlayPause();break;case"Seek":this.localSeek(b);break;case"SetRepeat":this.localRepeat(b);break;case"SetShuffle":this.localShuffle();break;case"Stop":this.localStop()}return this.localStateUpdate()},c}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b){return a.Application=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.getProperties=function(a){var c,d;return d=b.request("state:local"),c={volume:d.getState("volume"),muted:d.getState("muted")},this.doCallback(a,c)},c.prototype.setVolume=function(a,c){var d;return d=b.request("state:local"),d.setState("volume",a),this.localSetVolume(a),this.doCallback(c,a)},c.prototype.toggleMute=function(a){var c,d;return c=b.request("state:local"),d=0,c.getState("muted")?(d=c.getState("lastVolume"),c.setState("muted",!1)):(c.setState("lastVolume",c.getState("volume")),c.setState("muted",!0),d=0),this.localSetVolume(d),this.doCallback(a,d)},c}(a.Commander)}),this.Kodi.module("CommandApp.Local",function(a,b,c,d,e,f){return a.PlayList=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.play=function(a,b){return this.getSongs(a,b,function(a){return function(b){return a.playCollection(b)}}(this))},c.prototype.add=function(a,b){return this.getSongs(a,b,function(a){return function(b){return a.addCollection(b)}}(this))},c.prototype.playCollection=function(a){return f.isArray(a)||(a=a.getRawCollection()),this.clear(function(b){return function(){return b.insertAndPlay(a,0)}}(this))},c.prototype.addCollection=function(a){return this.playlistSize(function(b){return function(c){return b.insert(a,c)}}(this))},c.prototype.remove=function(a,b){return this.getItems(function(c){return function(d){var e,f,g,h;g=d.getRawCollection(),h=[];for(f in g)e=g[f],parseInt(f)!==parseInt(a)&&h.push(e);return c.clear(function(){return d=c.addItems(h),c.doCallback(b,d)})}}(this))},c.prototype.clear=function(a){var c;return c=b.execute("localplayer:clear:entities"),this.refreshPlaylistView(),this.doCallback(a,c)},c.prototype.insert=function(a,b,c){return null==b&&(b=0),this.getItems(function(d){return function(e){var g,h,i,j,k,l,m,n,o,p,q;if(j=e.getRawCollection(),0===j.length)k=f.flatten([a]);else if(parseInt(b)>=j.length)for(k=j,p=f.flatten([a]),l=0,n=p.length;n>l;l++)h=p[l],k.push(h);else{k=[];for(i in j){if(g=j[i],parseInt(i)===parseInt(b))for(q=f.flatten([a]),m=0,o=q.length;o>m;m++)h=q[m],k.push(h);k.push(g)}}return d.clear(function(){return e=d.addItems(k),d.doCallback(c,e)})}}(this))},c.prototype.addItems=function(a){return b.request("localplayer:item:add:entities",a),this.refreshPlaylistView()},c.prototype.getSongs=function(a,c,d){var e;return"songid"===a?b.request("song:byid:entities",[c],function(a){return function(b){return a.doCallback(d,b.getRawCollection())}}(this)):(e=b.request("song:filtered:entities",{filter:helpers.global.paramObj(a,c)}),b.execute("when:entity:fetched",e,function(a){return function(){return a.doCallback(d,e.getRawCollection())}}(this)))},c.prototype.getItems=function(a){var c;return c=b.request("localplayer:get:entities"),this.doCallback(a,c)},c.prototype.insertAndPlay=function(a,b,c){return null==b&&(b=0),this.insert(a,b,function(a){return function(){return a.playEntity("position",parseInt(b),{},function(){return a.doCallback(c,b)})}}(this))},c.prototype.playlistSize=function(a){return this.getItems(function(b){return function(c){return b.doCallback(a,c.length)}}(this))},c.prototype.refreshPlaylistView=function(){return b.execute("playlist:refresh","local","audio")},c.prototype.moveItem=function(a,b,c,d,e){return this.getItems(function(a){return function(b){var f,g;return g=b.getRawCollection(),f=g[c],a.remove(c,function(){return a.insert(f,d,function(){return a.doCallback(e,d)})})}}(this))},c}(a.Player)}),this.Kodi.module("EPGApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/live/:channelid":"tv","music/radio/:channelid":"radio"},b}(b.Router.Base),c={tv:function(b){return new a.List.Controller({channelid:b,type:"tv"})},radio:function(b){return new a.List.Controller({channelid:b,type:"radio"})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("EPGApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c;return c=b.request("broadcast:entities",a.channelid),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.getSubNav(),a.renderProgrammes(c)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.Layout({collection:b})},d.prototype.renderProgrammes=function(b){var c;return c=new a.EPGList({collection:b}),this.layout.regionContent.show(c)},d.prototype.getSubNav=function(){var a,c;return c="tv"===this.getOption("type")?21:1,a=b.request("navMain:children:show",c,"Sections"),this.layout.regionSidebarFirst.show(a)},d}(b.Controllers.Base)}),this.Kodi.module("EPGApp.List",function(a,b,c,d,e){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="epg-page",b}(b.Views.LayoutWithSidebarFirstView),a.ProgrammeList=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/epg/list/programmes",b.prototype.tagName="li",b.prototype.className="programme",b.prototype.onRender=function(){return this.model.attributes.wasactive?this.$el.addClass("aired"):void 0},b}(b.Views.ItemView),a.EPGList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ProgrammeList,c.prototype.tagName="ul",c.prototype.className="programmes",c.prototype.onShow=function(){return e(window).scrollTop(this.$el.find(".airing").offset().top-150)},c}(b.Views.CollectionView)}),this.Kodi.module("ExternalApp",function(){}),this.Kodi.module("ExternalApp.Youtube",function(a,b){var c;return c={getSearchView:function(c,d){return b.execute("youtube:search:entities",c,function(c){var e;return e=new a.List({collection:c}),b.listenTo(e,"childview:youtube:kodiplay",function(a,c){var d;return d=b.request("command:kodi:controller","video","PlayList"),d.play("file","plugin://plugin.video.youtube/play/?video_id="+c.model.get("id"))}),b.listenTo(e,"childview:youtube:localplay",function(a,b){var c;return c="videoPlayer.html?yt="+b.model.get("id"),helpers.global.localVideoPopup(c,500)}),d(e)})}},b.commands.setHandler("youtube:search:view",function(a,b){return c.getSearchView(a,b)})}),this.Kodi.module("ExternalApp.Youtube",function(a,b){return a.Item=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/external/youtube/youtube",c.prototype.tagName="li",c.prototype.triggers={"click .play-kodi":"youtube:kodiplay","click .play-local":"youtube:localplay"},c.prototype.events={"click .action":"closeModal"},c.prototype.closeModal=function(){return b.execute("ui:modal:close")},c}(b.Views.ItemView),a.List=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Item,c.prototype.tagName="ul",c.prototype.className="youtube-list",c}(b.Views.CollectionView)}),this.Kodi.module("FilterApp",function(a,b,c,d,e,f){var g;return g={sortFields:[{alias:"Title",type:"string",defaultSort:!0,defaultOrder:"asc",key:"title"},{alias:"Title",type:"string",defaultSort:!0,defaultOrder:"asc",key:"label"},{alias:"Year",type:"number",key:"year",defaultOrder:"desc"},{alias:"Date Added",type:"string",key:"dateadded",defaultOrder:"desc"},{alias:"Rating",type:"float",key:"rating",defaultOrder:"desc"}],filterFields:[{alias:"Year",type:"number",key:"year",sortOrder:"desc",filterCallback:"multiple"},{alias:"Genre",type:"array",key:"genre",sortOrder:"asc",filterCallback:"multiple"},{alias:"Mood",type:"array",key:"mood",sortOrder:"asc",filterCallback:"multiple"},{alias:"Style",type:"array",key:"style",sortOrder:"asc",filterCallback:"multiple"},{alias:"Unwatched",type:"boolean",key:"unwatched",sortOrder:"asc",filterCallback:"unwatched"},{alias:"Writer",type:"array",key:"writer",sortOrder:"asc",filterCallback:"multiple"},{alias:"Director",type:"array",key:"director",sortOrder:"asc",filterCallback:"multiple"},{alias:"Actor",type:"object",property:"name",key:"cast",sortOrder:"asc",filterCallback:"multiple"},{alias:"Set",type:"string",property:"set",key:"set",sortOrder:"asc",filterCallback:"multiple"}],getFilterFields:function(a){var b,c,d,e,f,h,i,j;for(f=a+"Fields",e=g[f],c=g.getAvailable(),b=c[a],h=[],i=0,j=e.length;j>i;i++)d=e[i],helpers.global.inArray(d.key,b)&&h.push(d);return h},storeFiltersNamespace:"filter:store:",getStoreNameSpace:function(a){return g.storeFiltersNamespace+a},setStoreFilters:function(a,c){var d;return null==a&&(a={}),null==c&&(c="filters"),d={},d[helpers.url.path()]=a,helpers.cache.set(g.getStoreNameSpace(c),d),b.vent.trigger("filter:changed",a)},getStoreFilters:function(a){var b,c,d,e,h,i;if(null==a&&(a="filters"),h=helpers.cache.get(g.getStoreNameSpace(a),{}),d=helpers.url.path(),b=h[d]?h[d]:{},e={},!f.isEmpty(b))for(c in b)i=b[c],i.length>0&&(e[c]=i);return e},updateStoreFiltersKey:function(a,b){var c;return null==b&&(b=[]),c=g.getStoreFilters(),c[a]=b,g.setStoreFilters(c),c},getStoreFiltersKey:function(a){var b,c;return c=g.getStoreFilters(),b=c[a]?c[a]:[]},setStoreSort:function(a,b){var c;return null==b&&(b="asc"),c={method:a,order:b},g.setStoreFilters(c,"sort")},getStoreSort:function(){var a,b;return b=g.getStoreFilters("sort"),b.method||(a=f.findWhere(g.getFilterFields("sort"),{defaultSort:!0}),b={method:a.key,order:a.defaultOrder}),b},setAvailable:function(a){return g.setStoreFilters(a,"available")},getAvailable:function(){return g.getStoreFilters("available")},toggleOrder:function(a){return a="asc"===a?"desc":"asc"},parseSortable:function(a){var b,c,d;d=g.getStoreSort(!1,"asc");for(b in a)c=a[b],a[b].active=!1,a[b].order=c.defaultOrder,d.method&&c.key===d.method?(a[b].active=!0,a[b].order=this.toggleOrder(d.order)):c.defaultSort&&d.method===!1&&(a[b].active=!0);return a},parseFilterable:function(a){var b,c,d,e;b=g.getFilterActive();for(d in a)e=a[d],c=f.findWhere(b,{key:e.key}),a[d].active=void 0!==c;return a},getFilterOptions:function(a,c){var d,e,h,i,j,k,l,m,n,o;if(m=b.request("filter:store:key:get",a),l=g.getFilterSettings(a),j=[],d=c.pluck(a),"multiple"===l.filterCallback&&"object"===l.type){for(k=[],n=0,o=d.length;o>n;n++){i=d[n];for(h in i)e=i[h],5>h&&k.push(e[l.property])}d=k}return f.map(f.uniq(f.flatten(d)),function(b){return j.push({key:a,value:b,active:helpers.global.inArray(b,m)})}),j},applyFilters:function(a){var c,d,e,f,h;e=g.getStoreSort(),a.sortCollection(e.method,e.order),c=new b.Entities.Filtered(a),h=g.getStoreFilters();for(d in h)f=h[d],f.length>0&&(c=g.applyFilter(c,d,f));return c},applyFilter:function(a,b,c){var d;switch(d=g.getFilterSettings(b),d.filterCallback){case"multiple":"array"===d.type?a.filterByMultipleArray(b,c):"object"===d.type?a.filterByMultipleObject(b,d.property,c):a.filterByMultiple(b,c);break;case"unwatched":a.filterByUnwatched()
}return a},getFilterSettings:function(a){return f.findWhere(g.getFilterFields("filter"),{key:a})},getFilterActive:function(){var a,b,c,d;a=[],d=g.getStoreFilters();for(b in d)c=d[b],c.length>0&&a.push({key:b,values:c});return a}},b.reqres.setHandler("filter:show",function(b){var c,d;return g.setAvailable(b.availableFilters),c=new a.Show.Controller({refCollection:b}),d=c.getFilterView()}),b.reqres.setHandler("filter:options",function(a,c){var d,e,f;return e=g.getFilterOptions(a,c),f=b.request("filter:filters:options:entities",e),d=g.getFilterSettings(a),f.sortCollection("value",d.sortOrder),f}),b.reqres.setHandler("filter:active",function(){return b.request("filter:active:entities",g.getFilterActive())}),b.reqres.setHandler("filter:apply:entites",function(a){return g.setAvailable(a.availableFilters),g.applyFilters(a)}),b.reqres.setHandler("filter:sortable:entities",function(){return b.request("filter:sort:entities",g.parseSortable(g.getFilterFields("sort")))}),b.reqres.setHandler("filter:filterable:entities",function(){return b.request("filter:filters:entities",g.parseFilterable(g.getFilterFields("filter")))}),b.reqres.setHandler("filter:init",function(a){var b,c,d,e,h,i,j;if(c=helpers.url.params(),!f.isEmpty(c)){for(g.setStoreFilters({}),i=a.filter,j=[],e=0,h=i.length;h>e;e++)b=i[e],c[b]?(d=g.getStoreFiltersKey(b),helpers.global.inArray(c[b],d)?j.push(void 0):(d.push(decodeURIComponent(c[b])),j.push(g.updateStoreFiltersKey(b,d)))):j.push(void 0);return j}}),b.reqres.setHandler("filter:store:set",function(a){return g.setStoreFilters(a),a}),b.reqres.setHandler("filter:store:get",function(){return g.getStoreFilters()}),b.reqres.setHandler("filter:store:key:get",function(a){return g.getStoreFiltersKey(a)}),b.reqres.setHandler("filter:store:key:update",function(a,b){return null==b&&(b=[]),g.updateStoreFiltersKey(a,b)}),b.reqres.setHandler("filter:store:key:toggle",function(a,b){var c,d,e,h,i,j;if(h=g.getStoreFiltersKey(a),e=[],f.indexOf(h,b)>-1){for(d=[],i=0,j=h.length;j>i;i++)c=h[i],c!==b&&d.push(c);e=d}else h.push(b),e=h;return g.updateStoreFiltersKey(a,e),e}),b.reqres.setHandler("filter:sort:store:set",function(a,b){return null==b&&(b="asc"),g.setStoreSort(a,b)}),b.reqres.setHandler("filter:sort:store:get",function(){return g.getStoreSort()})}),this.Kodi.module("FilterApp.Show",function(a,b,c,d,e,f){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.getFilterView=function(){var a;return a=this.getOption("refCollection"),this.layoutFilters=this.getLayoutView(a),this.listenTo(this.layoutFilters,"show",function(a){return function(){return a.getSort(),a.getFilters(),a.getActive(),a.getSections()}}(this)),this.listenTo(this.layoutFilters,"filter:layout:close:filters",function(a){return function(){return a.stateChange("normal")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:close:options",function(a){return function(){return a.stateChange("filters")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:open:filters",function(a){return function(){return a.stateChange("filters")}}(this)),this.listenTo(this.layoutFilters,"filter:layout:open:options",function(a){return function(){return a.stateChange("options")}}(this)),this.layoutFilters},d.prototype.getLayoutView=function(b){return new a.FilterLayout({collection:b})},d.prototype.getSort=function(){var c,d;return c=b.request("filter:sortable:entities"),d=new a.SortList({collection:c}),this.layoutFilters.regionSort.show(d),b.listenTo(d,"childview:filter:sortable:select",function(a){return function(c,d){return b.request("filter:sort:store:set",d.model.get("key"),d.model.get("order")),a.layoutFilters.trigger("filter:changed"),a.getSort()}}(this))},d.prototype.getFilters=function(c){var d,e;return null==c&&(c=!0),d=b.request("filter:filterable:entities"),e=new a.FilterList({collection:d}),b.listenTo(e,"childview:filter:filterable:select",function(a){return function(c,d){var e;return e=d.model.get("key"),"boolean"===d.model.get("type")?(b.request("filter:store:key:toggle",e,d.model.get("alias")),a.triggerChange()):(a.getFilterOptions(e),a.stateChange("options"))}}(this)),this.layoutFilters.regionFiltersList.show(e),c?this.layoutFilters.regionFiltersOptions.empty():void 0},d.prototype.getActive=function(){var c,d;return c=b.request("filter:active"),d=new a.ActiveList({collection:c}),this.layoutFilters.regionFiltersActive.show(d),b.listenTo(d,"childview:filter:option:remove",function(a){return function(c,d){var e;return e=d.model.get("key"),b.request("filter:store:key:update",e,[]),a.triggerChange()}}(this)),b.listenTo(d,"childview:filter:add",function(a){return function(){return a.stateChange("filters")}}(this)),this.getFilterBar()},d.prototype.getFilterOptions=function(c){var d,e;return d=b.request("filter:options",c,this.getOption("refCollection")),e=new a.OptionList({collection:d}),this.layoutFilters.regionFiltersOptions.show(e),b.listenTo(e,"childview:filter:option:select",function(a){return function(d,e){var f;return f=e.model.get("value"),e.view.$el.find(".option").toggleClass("active"),b.request("filter:store:key:toggle",c,f),a.triggerChange(!1)}}(this)),b.listenTo(e,"filter:option:deselectall",function(a){return function(d){return d.view.$el.find(".option").removeClass("active"),b.request("filter:store:key:update",c,[]),a.triggerChange(!1)}}(this))},d.prototype.triggerChange=function(a){return null==a&&(a=!0),this.getFilters(a),this.getActive(),b.navigate(helpers.url.path()),this.layoutFilters.trigger("filter:changed")},d.prototype.getFilterBar=function(){var c,d,g,h,i;return h=b.request("filter:store:get"),i=f.flatten(f.values(h)),d=e(".layout-container"),c=e(".region-content-top",d),i.length>0?(g=new a.FilterBar({filters:i}),c.html(g.render().$el),d.addClass("filters-active"),b.listenTo(g,"filter:remove:all",function(a){return function(){return b.request("filter:store:set",{}),a.triggerChange(),a.stateChange("normal")}}(this))):d.removeClass("filters-active")},d.prototype.stateChange=function(a){var b;switch(null==a&&(a="normal"),b=this.layoutFilters.$el.find(".filters-container"),a){case"filters":return b.removeClass("show-options").addClass("show-filters");case"options":return b.addClass("show-options").removeClass("show-filters");default:return b.removeClass("show-options").removeClass("show-filters")}},d.prototype.getSections=function(){var a,c;return a=this.getOption("refCollection"),a.sectionId?(c=b.request("navMain:children:show",a.sectionId,"Sections"),this.layoutFilters.regionNavSection.show(c)):void 0},d}(b.Controllers.Base)}),this.Kodi.module("FilterApp.Show",function(a,b,c,d,e){return a.FilterLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/filters_ui",b.prototype.className="side-bar",b.prototype.regions={regionSort:".sort-options",regionFiltersActive:".filters-active",regionFiltersList:".filters-list",regionFiltersOptions:".filter-options-list",regionNavSection:".nav-section"},b.prototype.triggers={"click .close-filters":"filter:layout:close:filters","click .close-options":"filter:layout:close:options","click .open-filters":"filter:layout:open:filters"},b}(b.Views.LayoutView),a.ListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/list_item",b.prototype.tagName="li",b}(b.Views.ItemView),a.List=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ListItem,c.prototype.tagName="ul",c.prototype.className="selection-list",c}(b.Views.CollectionView),a.SortListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .sortable":"filter:sortable:select"},b.prototype.initialize=function(){var a,b;return a=["option","sortable"],this.model.get("active")===!0&&a.push("active"),a.push("order-"+this.model.get("order")),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("alias")),this.model.set({title:b})},b}(a.ListItem),a.SortList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.SortListItem,c}(a.List),a.FilterListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable":"filter:filterable:select"},b.prototype.initialize=function(){var a,b;return a=["option","option filterable"],this.model.get("active")&&a.push("active"),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("alias")),this.model.set({title:b})},b}(a.ListItem),a.FilterList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.FilterListItem,c}(a.List),a.OptionListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-option":"filter:option:select"},b.prototype.initialize=function(){var a,b;return a=["option","option filterable-option"],this.model.get("active")&&a.push("active"),b=this.themeTag("span",{"class":a.join(" ")},this.model.get("value")),this.model.set({title:b})},b}(a.ListItem),a.OptionList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/filter/show/filter_options",c.prototype.activeValues=[],c.prototype.childView=a.OptionListItem,c.prototype.childViewContainer="ul.selection-list",c.prototype.onRender=function(){return this.collection.length<=10&&e(".options-search-wrapper",this.$el).addClass("hidden"),e(".options-search",this.$el).on("keyup",function(){var a,b;return b=e(".options-search",this.$el).val().toLocaleLowerCase(),a=e(".filter-options-list li",this.$el).removeClass("hidden"),b.length>0?a.each(function(a,c){var d;return d=e(c).find(".option").text().toLowerCase(),-1===d.indexOf(b)?e(c).addClass("hidden"):void 0}):void 0})},c.prototype.triggers={"click .deselect-all":"filter:option:deselectall"},c}(b.Views.CompositeView),a.ActiveListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-remove":"filter:option:remove"},b.prototype.initialize=function(){var a,b,c;return c=t.gettext("Remove")+" "+t.gettext(this.model.get("key"))+" "+t.gettext("filter"),b=this.themeTag("span",{"class":"text"},this.model.get("values").join(", ")),a=this.themeTag("span",{"class":"filter-btn filterable-remove",title:c},b),this.model.set({title:a})},b}(a.ListItem),a.ActiveNewListItem=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .filterable-add":"filter:add"},b.prototype.initialize=function(){var a;return a=this.themeTag("span",{"class":"filter-btn filterable-add"},t.gettext("Add filter")),this.model.set({title:a})},b}(a.ListItem),a.ActiveList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ActiveListItem,c.prototype.emptyView=a.ActiveNewListItem,c.prototype.className="active-list",c}(a.List),a.FilterBar=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/filter/show/filters_bar",b.prototype.className="filters-active-bar",b.prototype.onRender=function(){return this.options.filters?e(".filters-active-all",this.$el).html(this.options.filters.join(", ")):void 0},b.prototype.triggers={"click .remove":"filter:remove:all"},b}(b.Views.ItemView)}),this.Kodi.module("Images",function(a,b){var c;return c={imagesPath:"images/",defaultFanartPath:"fanart_default/",defaultFanartFiles:["buds.jpg","cans.jpg","guitar.jpg","speaker.jpg","turntable.jpg"],getDefaultThumbnail:function(){return c.imagesPath+"thumbnail_default.png"},getRandomFanart:function(){var a,b,d;return d=helpers.global.getRandomInt(0,c.defaultFanartFiles.length-1),a=c.defaultFanartFiles[d],b=c.imagesPath+c.defaultFanartPath+a},parseRawPath:function(a){var b;return b=config.get("static","reverseProxy")?"image/"+encodeURIComponent(a):"/image/"+encodeURIComponent(a)},setFanartBackground:function(a,c){var d;return d=b.getRegion(c).$el,"none"!==a?(a||(a=this.getRandomFanart()),d.css("background-image","url("+a+")")):d.removeAttr("style")},getImageUrl:function(a,b){var d;if(null==b&&(b="thumbnail"),d="",null==a||""===a)switch(b){case"fanart":d=c.getRandomFanart();break;default:d=c.getDefaultThumbnail()}else d=c.parseRawPath(a);return d}},b.commands.setHandler("images:fanart:set",function(a,b){return null==b&&(b="regionFanart"),c.setFanartBackground(a,b)}),b.reqres.setHandler("images:path:get",function(a,b){return null==a&&(a=""),null==b&&(b="thumbnail"),c.getImageUrl(a,b)}),b.reqres.setHandler("images:path:entity",function(a){var b,d,e;if(null!=a.thumbnail&&(a.thumbnail=c.getImageUrl(a.thumbnail,"thumbnail")),null!=a.fanart&&(a.fanart=c.getImageUrl(a.fanart,"fanart")),null!=a.cast&&a.cast.length>0){e=a.cast;for(b in e)d=e[b],a.cast[b].thumbnail=c.getImageUrl(d.thumbnail,"thumbnail")}return a})}),this.Kodi.module("InputApp",function(a,b,c,d,e){var f;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={remote:"remotePage"},b}(b.Router.Base),f={initKeyBind:function(){return e(document).keydown(function(a){return function(b){return a.keyBind(b)}}(this))},inputController:function(){return b.request("command:kodi:controller","auto","Input")},doInput:function(a){return this.inputController().sendInput(a)},doCommand:function(a,c,d){return b.request("command:kodi:player",a,c,function(a){return function(){return a.pollingUpdate(d)}}(this))},appController:function(){return b.request("command:kodi:controller","auto","Application")},pollingUpdate:function(a){return b.request("sockets:active")?void 0:b.request("state:kodi:update",a)},toggleRemote:function(a){var c,d;return null==a&&(a="auto"),c=e("body"),d="section-remote","auto"===a&&(a=c.hasClass(d)?!0:!1),a?(b.navigate(helpers.backscroll.lastPath),helpers.backscroll.scrollToLast()):(helpers.backscroll.setLast(),b.navigate("remote",{trigger:!0}))},remotePage:function(){return this.toggleRemote(!1),b.regionContent.empty()},keyBind:function(a){var c,d;if(!e(a.target).is("input, textarea"))switch(c=b.request("state:kodi"),a.which){case 37:return this.doInput("Left");case 38:return this.doInput("Up");case 39:return this.doInput("Right");case 40:return this.doInput("Down");case 8:return this.doInput("Back");case 13:return this.doInput("Select");case 67:return this.doInput("ContextMenu");case 107:return d=c.getState("volume")+5,this.appController().setVolume(d>100?100:Math.ceil(d));case 109:return d=c.getState("volume")-5,this.appController().setVolume(0>d?0:Math.ceil(d));case 32:return this.doCommand("PlayPause","toggle");case 88:return this.doCommand("Stop");case 190:return this.doCommand("GoTo","next");case 188:return this.doCommand("GoTo","previous")}}},b.commands.setHandler("input:textbox",function(a){return b.execute("ui:textinput:show","Input required",a,function(a){return f.inputController().sendText(a),b.execute("notification:show",t.gettext("Sent text")+' "'+a+'" '+t.gettext("to Kodi"))}),b.commands.setHandler("input:textbox:close",function(){return b.execute("ui:modal:close")})}),b.commands.setHandler("input:send",function(a){return f.doInput(a)}),b.commands.setHandler("input:remote:toggle",function(){return f.toggleRemote()}),b.addInitializer(function(){var b;return b=new a.Remote.Controller,f.initKeyBind()}),b.on("before:start",function(){return new a.Router({controller:f})})}),this.Kodi.module("InputApp.Remote",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return b.vent.on("shell:ready",function(a){return function(){return a.getRemote()}}(this))},d.prototype.getRemote=function(){var c;return c=new a.Control,this.listenTo(c,"remote:input",function(a){return b.execute("input:send",a)}),this.listenTo(c,"remote:player",function(a){return b.request("command:kodi:player",a,[])}),this.listenTo(c,"remote:power",function(){var a;return a=b.request("command:kodi:controller","auto","Application"),a.quit()}),b.regionRemote.show(c),b.vent.on("state:changed",function(){var a,c,d;return d=b.request("state:current"),d.isPlayingItemChanged()?(c=d.getPlaying("item"),a=b.request("images:path:get",c.fanart,"fanart"),e("#remote-background").css("background-image","url("+c.fanart+")")):void 0})},d}(b.Controllers.Base)}),this.Kodi.module("InputApp.Remote",function(a,b,c,d,e){return a.Control=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.template="apps/input/remote/remote_control",d.prototype.events={"click .input-button":"inputClick","click .player-button":"playerClick"},d.prototype.triggers={"click .power-button":"remote:power"},d.prototype.inputClick=function(a){var b;return b=e(a.target).data("type"),this.trigger("remote:input",b)},d.prototype.playerClick=function(a){var b;return b=e(a.target).data("type"),this.trigger("remote:player",b)},a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(b.Views.ItemView),d}(b.Views.ItemView)}),this.Kodi.module("LoadingApp",function(a,b){return b.commands.setHandler("loading:show:view",function(b,c){var d;return null==c&&(c="Just a sec..."),d=new a.Show.Page({text:c}),b.show(d)}),b.commands.setHandler("loading:show:page",function(){return b.execute("loading:show:view",b.regionContent)})}),this.Kodi.module("LoadingApp.Show",function(a,b,c){return a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/loading/show/loading_page",b.prototype.onRender=function(){return this.$el.find("h2").html(this.options.text)},b}(c.Marionette.ItemView)}),this.Kodi.module("localPlaylistApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return c=a.id,d=b.request("localplaylist:entities"),this.layout=this.getLayoutView(d),this.listenTo(this.layout,"show",function(a){return function(){return a.getListsView(d),a.getItems(c)}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},d.prototype.getListsView=function(c){var d;return this.sideLayout=new a.SideLayout,d=new a.Lists({collection:c}),b.listenTo(this.sideLayout,"show",function(a){return function(){return c.length>0?a.sideLayout.regionLists.show(d):void 0}}(this)),b.listenTo(this.sideLayout,"lists:new",function(){return b.execute("localplaylist:newlist")}),this.layout.regionSidebarFirst.show(this.sideLayout)},d.prototype.getItems=function(c){var d,e;return e=b.request("localplaylist:entity",c),d=b.request("localplaylist:item:entities",c),this.itemLayout=new a.Layout({list:e}),b.listenTo(this.itemLayout,"show",function(a){return function(){var c,f;return c=e.get("media"),d.length>0?(f=b.request(""+c+":list:view",d,!0),a.itemLayout.regionListItems.show(f)):void 0}}(this)),this.bindLayout(c),this.layout.regionContent.show(this.itemLayout)},d.prototype.bindLayout=function(a){var c;return c=b.request("localplaylist:item:entities",a),b.listenTo(this.itemLayout,"list:clear",function(){return b.execute("localplaylist:clear:entities",a),b.execute("localplaylist:reload",a)}),b.listenTo(this.itemLayout,"list:delete",function(){return b.execute("localplaylist:clear:entities",a),b.execute("localplaylist:remove:entity",a),b.navigate("playlists",{trigger:!0})}),b.listenTo(this.itemLayout,"list:play",function(){var a;return a=b.request("command:kodi:controller","audio","PlayList"),a.playCollection(c)}),b.listenTo(this.itemLayout,"list:localplay",function(){var a;return a=b.request("command:local:controller","audio","PlayList"),a.playCollection(c)})},d}(b.Controllers.Base)}),this.Kodi.module("localPlaylistApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="local-playlist-list",b}(b.Views.LayoutWithSidebarFirstView),a.SideLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist_sidebar_layout",b.prototype.tagName="div",b.prototype.className="side-inner",b.prototype.regions={regionLists:".current-lists"},b.prototype.triggers={"click .new-list":"lists:new"},b}(b.Views.LayoutView),a.List=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist",b.prototype.tagName="li",b.prototype.initialize=function(){var a,b,c;return b=helpers.url.get("playlist",this.model.get("id")),a=[],b===helpers.url.path()&&a.push("active"),c=this.themeLink(this.model.get("name"),b,{className:a.join(" ")}),this.model.set({title:c})},b}(b.Views.ItemView),a.Lists=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/localPlaylist/list/playlist_list",c.prototype.childView=a.List,c.prototype.tagName="div",c.prototype.childViewContainer="ul.lists",c.prototype.onRender=function(){return e("h3",this.$el).html(t.gettext("Playlists"))},c}(b.Views.CompositeView),a.Selection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist",b.prototype.tagName="li",b.prototype.initialize=function(){return this.model.set({title:this.model.get("name")})},b.prototype.triggers={"click .item":"item:selected"},b}(b.Views.ItemView),a.SelectionList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/localPlaylist/list/playlist_list",c.prototype.childView=a.Selection,c.prototype.tagName="div",c.prototype.className="playlist-selection-list",c.prototype.childViewContainer="ul.lists",c.prototype.onRender=function(){return e("h3",this.$el).html(t.gettext("Existing playlists"))},c}(b.Views.CompositeView),a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/localPlaylist/list/playlist_layout",b.prototype.tagName="div",b.prototype.className="local-playlist",b.prototype.regions={regionListItems:".item-container"},b.prototype.triggers={"click .local-playlist-header .clear":"list:clear","click .local-playlist-header .delete":"list:delete","click .local-playlist-header .play":"list:play","click .local-playlist-header .localplay":"list:localplay"},b.prototype.onRender=function(){return this.options&&this.options.list?e("h2",this.$el).html(this.options.list.get("name")):void 0},b}(b.Views.LayoutView)}),this.Kodi.module("localPlaylistApp",function(a,b,c,d,e,f){var g;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={playlists:"list","playlist/:id":"list"},b}(b.Router.Base),g={list:function(c){var d,e,g;return null===c&&(g=b.request("localplaylist:entities"),e=g.getRawCollection(),f.isEmpty(g)?c=0:(d=f.min(e,function(a){return a.id}),c=d.id,b.navigate(helpers.url.get("playlist",c)))),new a.List.Controller({id:c})},addToList:function(c,d){var h,i,j,k;return j=b.request("localplaylist:entities"),j&&0!==j.length?(k=new a.List.SelectionList({collection:j}),h=k.render().$el,i=e("<button>").html(t.gettext("Create a new list")).addClass("btn btn-primary"),i.on("click",function(){return function(){return f.defer(function(){return g.createNewList(c,d)})}}(this)),b.execute("ui:modal:show",t.gettext("Add to playlist"),h,i),b.listenTo(k,"childview:item:selected",function(a){return function(b,e){return a.addToExistingList(e.model.get("id"),c,d)}}(this))):this.createNewList(c,d)},addToExistingList:function(a,c,d){var e;return helpers.global.inArray(c,["albumid","artistid"])?(e=b.request("song:filtered:entities",{filter:helpers.global.paramObj(c,d)}),b.execute("when:entity:fetched",e,function(b){return function(){return b.addCollectionToList(e,a)}}(this))):"songid"===c?b.request("song:byid:entities",[d],function(b){return function(c){return b.addCollectionToList(c,a)}}(this)):"playlist"===c?(e=b.request("playlist:kodi:entities","audio"),b.execute("when:entity:fetched",e,function(b){return function(){return b.addCollectionToList(e,a)}}(this))):void 0},addCollectionToList:function(a,c){return b.request("localplaylist:item:add:entities",c,a),b.execute("ui:modal:close"),b.execute("notification:show",t.gettext("Added to your playlist"))},createNewList:function(a,c){return b.execute("ui:textinput:show",t.gettext("Add a new playlist"),t.gettext("Give your playlist a name"),function(d){return function(e){var f;return""!==e?(f=b.request("localplaylist:add:entity",e,"song"),d.addToExistingList(f,a,c)):void 0}}(this),!1)},createEmptyList:function(){return b.execute("ui:textinput:show",t.gettext("Add a new playlist"),t.gettext("Give your playlist a name"),function(){return function(a){var c;return""!==a?(c=b.request("localplaylist:add:entity",a,"song"),b.navigate("playlist/"+c,{trigger:!0})):void 0}}(this))}},b.commands.setHandler("localplaylist:addentity",function(a,b){return g.addToList(a,b)}),b.commands.setHandler("localplaylist:newlist",function(){return g.createEmptyList()}),b.commands.setHandler("localplaylist:reload",function(a){return g.list(a)}),b.on("before:start",function(){return new a.Router({controller:g})})}),this.Kodi.module("MovieApp.Edit",function(a,b){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){var a,c;return this.model=this.getOption("model"),c={title:this.model.get("title"),form:this.getSructure(),formState:this.model.attributes,config:{attributes:{"class":"edit-form"},callback:function(a){return function(b,c){return a.saveCallback(b,c)}}(this)}},a=b.request("form:popup:wrapper",c)},c.prototype.getSructure=function(){return[{title:"Information",id:"general",children:[{id:"title",title:"Title",type:"textfield",defaultValue:""},{id:"plotoutline",title:"Plot Outline",type:"textarea",defaultValue:""},{id:"plot",title:"Plot",type:"textarea",defaultValue:""},{id:"rating",title:"Rating",type:"textfield",defaultValue:""},{id:"imdbnumber",title:"Imdb",type:"textfield",defaultValue:""}]}]},c.prototype.saveCallback=function(a){var c;return a.rating=parseFloat(a.rating),c=b.request("command:kodi:controller","video","VideoLibrary"),c.setMovieDetails(this.model.get("id"),a,function(){return Kodi.execute("notification:show",t.gettext("Updated movie details"))})},c}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=11,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("movie:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("movie:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/landing/landing",b.prototype.className="movie-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added"},b}(b.Views.LayoutView)}),this.Kodi.module("MovieApp.List",function(a,b){var c;return c={getMoviesView:function(b,d){var e,f;return null==d&&(d=!1),f=d?"MoviesSet":"Movies",e=new a[f]({collection:b}),c.bindTriggers(e),e},bindTriggers:function(a){return b.listenTo(a,"childview:movie:play",function(a,c){return b.execute("movie:action","play",c)}),b.listenTo(a,"childview:movie:add",function(a,c){return b.execute("movie:action","add",c)}),b.listenTo(a,"childview:movie:localplay",function(a,c){return b.execute("movie:action","localplay",c)}),b.listenTo(a,"childview:movie:download",function(a,c){return b.execute("movie:action","download",c)}),b.listenTo(a,"childview:movie:watched",function(a,c){return a.$el.toggleClass("is-watched"),b.execute("movie:action","toggleWatched",c)}),b.listenTo(a,"childview:movie:edit",function(a,c){return b.execute("movie:action","edit",c)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("movie:entities"),b.execute("when:entity:fetched",a,function(c){return function(){return a.availableFilters=c.getAvailableFilters(),a.sectionId=11,b.request("filter:init",c.getAvailableFilters()),c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.renderList(a),c.getFiltersView(a)}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["title","year","dateadded","rating"],filter:["year","genre","writer","director","cast","set","unwatched"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getMoviesView(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("movie:list:view",function(a){return c.getMoviesView(a,!0)})}),this.Kodi.module("MovieApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.MovieTeaser=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.triggers={"click .play":"movie:play","click .watched":"movie:watched","click .add":"movie:add","click .localplay":"movie:localplay","click .download":"movie:download","click .edit":"movie:edit"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set({subtitle:this.model.get("year")}),this.model.set(b.request("movie:action:items"))):void 0},c.prototype.attributes=function(){var a;return a=["card"],helpers.entities.isWatched(this.model)&&a.push("is-watched"),{"class":a.join(" ")}},c}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="movie-empty-result",b
}(b.Views.EmptyViewResults),a.Movies=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.MovieTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.VirtualListView),a.MoviesSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.MovieTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView)}),this.Kodi.module("MovieApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"movies/recent":"landing",movies:"list","movie/:id":"view"},b}(b.Router.Base),c={landing:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},action:function(a,c){var d,e,f,g;switch(e=c.model,f=b.request("command:kodi:controller","video","PlayList"),d=b.request("command:kodi:controller","video","Files"),g=b.request("command:kodi:controller","video","VideoLibrary"),a){case"play":return f.play("movieid",e.get("movieid"));case"add":return f.add("movieid",e.get("movieid"));case"localplay":return d.videoStream(e.get("file"));case"download":return d.downloadFile(e.get("file"));case"toggleWatched":return g.toggleWatched(e);case"edit":return b.execute("movie:edit",e)}}},b.reqres.setHandler("movie:action:items",function(){return{actions:{watched:"Watched",thumbs:"Thumbs up"},menu:{add:"Add to Kodi playlist",edit:"Edit",divider:"",download:"Download",localplay:"Play in browser"}}}),b.commands.setHandler("movie:action",function(a,b){return c.action(a,b)}),b.commands.setHandler("movie:edit",function(c){var d;return d=b.request("movie:entity",c.get("id")),b.execute("when:entity:fetched",d,function(){return function(){return new a.Edit.Controller({model:d})}}(this))}),b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("MovieApp.Show",function(a,b){var c;return c={bindTriggers:function(a){return b.listenTo(a,"movie:play",function(a){return b.execute("movie:action","play",a)}),b.listenTo(a,"movie:add",function(a){return b.execute("movie:action","add",a)}),b.listenTo(a,"movie:localplay",function(a){return b.execute("movie:action","localplay",a)}),b.listenTo(a,"movie:download",function(a){return b.execute("movie:action","download",a)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d;return c=parseInt(a.id),d=b.request("movie:entity",c),b.execute("when:entity:fetched",d,function(a){return function(){return a.layout=a.getLayoutView(d),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(d),a.getContentView(d)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},e.prototype.getContentView=function(c){return this.contentLayout=new a.Content({model:c}),this.listenTo(this.contentLayout,"movie:youtube",function(){var a;return a=c.get("trailer"),b.execute("ui:modal:youtube",c.get("title")+" Trailer",a.id)}),this.listenTo(this.contentLayout,"show",function(a){return function(){return c.get("cast").length>0&&a.contentLayout.regionCast.show(a.getCast(c)),a.getSetView(c)}}(this)),this.layout.regionContent.show(this.contentLayout)},e.prototype.getCast=function(a){return b.request("cast:list:view",a.get("cast"),"movies")},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.MovieTeaser({model:b}),c.bindTriggers(f),e=new a.Details({model:b}),c.bindTriggers(e),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getSetView=function(c){var d;return""!==c.get("set")?(d=b.request("movie:entities"),b.execute("when:entity:fetched",d,function(e){return function(){var f,g;return f=new b.Entities.Filtered(d),f.filterBy("set",{set:c.get("set")}),g=new a.Set({set:c.get("set")}),b.listenTo(g,"show",function(){var a;return a=b.request("movie:list:view",f),g.regionCollection.show(a)}),e.contentLayout.regionSets.show(g)}}(this))):void 0},e}(b.Controllers.Base)}),this.Kodi.module("MovieApp.Show",function(a,b,c,d,e){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/details_meta",b.prototype.triggers={"click .play":"movie:play","click .add":"movie:add","click .stream":"movie:localplay","click .download":"movie:download"},b}(b.Views.ItemView),a.MovieTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .play":"movie:play"},b}(b.Views.CardView),a.Content=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/content",b.prototype.className="movie-content content-sections",b.prototype.onRender=e('[data-toggle="tooltip"]',b.$el).tooltip(),b.prototype.triggers={"click .youtube":"movie:youtube"},b.prototype.regions={regionCast:".region-cast",regionSets:".region-sets"},b}(b.Views.LayoutView),a.Set=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/show/set",b.prototype.className="movie-set",b.prototype.onRender=function(){return this.options&&this.options.set?e("h2.set-name",this.$el).html(this.options.set):void 0},b.prototype.regions=function(){return{regionCollection:".collection-items"}},b}(b.Views.LayoutView)}),this.Kodi.module("NavMain",function(a,b){var c;return c={getNav:function(){var c;return c=b.request("navMain:entities"),new a.List({collection:c})},getNavChildren:function(c,d){var e;return null==d&&(d="default"),e=b.request("navMain:entities",c),"default"!==d&&e.set({title:d}),new a.ItemList({model:e})}},this.onStart=function(){return b.vent.on("shell:ready",function(){return function(){var a;return a=c.getNav(),b.regionNav.show(a)}}(this))},b.reqres.setHandler("navMain:children:show",function(a,b){return null==b&&(b="default"),c.getNavChildren(a,b)})}),this.Kodi.module("NavMain",function(a,b,c){return a.List=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/navMain/show/navMain",b}(c.Marionette.ItemView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/navMain/show/nav_item",b.prototype.tagName="li",b.prototype.initialize=function(){var a,b;return a=[],this.model.get("path")===helpers.url.path()&&a.push("active"),b=this.themeLink(this.model.get("title"),this.model.get("path"),{className:a.join(" ")}),this.model.set({link:b})},b}(c.Marionette.ItemView),a.ItemList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.template="apps/navMain/show/nav_sub",c.prototype.childView=a.Item,c.prototype.tagName="div",c.prototype.childViewContainer="ul.items",c.prototype.className="nav-sub",c.prototype.initialize=function(){return this.collection=this.model.get("items")},c}(b.Views.CompositeView)}),this.Kodi.module("NotificationsApp",function(a,b,c,d,e){var f;return f={notificationMinTimeOut:5e3},b.commands.setHandler("notification:show",function(a,b){var c;return null==b&&(b="normal"),c=a.length<50?f.notificationMinTimeOut:100*a.length,e.snackbar({content:a,style:"type-"+b,timeout:c})})}),this.Kodi.module("PlayerApp",function(a,b,c,d,e){var f;return f={getPlayer:function(b){return new a.Show.Player({player:b})},doCommand:function(a,c,d,e){return b.request("command:"+a+":player",c,d,function(a){return function(){return a.pollingUpdate(e)}}(this))},getAppController:function(a){return b.request("command:"+a+":controller","auto","Application")},pollingUpdate:function(a){var c;return c=b.request("state:current"),"kodi"!==c.getPlayer()||b.request("sockets:active")?void 0:b.request("state:kodi:update",a)},initPlayer:function(a,c){var d,g,h,i;return this.initProgress(a),this.initVolume(a),b.vent.trigger("state:player:updated",a),i=this.getAppController(a),b.vent.on("state:initialized",function(a){return function(){var c;return c=b.request("state:kodi"),c.isPlaying()?(a.timerStop(),a.timerStart()):void 0}}(this)),b.listenTo(c,"control:play",function(b){return function(){return b.doCommand(a,"PlayPause","toggle")}}(this)),b.listenTo(c,"control:prev",function(b){return function(){return b.doCommand(a,"GoTo","previous")}}(this)),b.listenTo(c,"control:next",function(b){return function(){return b.doCommand(a,"GoTo","next")}}(this)),b.listenTo(c,"control:repeat",function(b){return function(){return b.doCommand(a,"SetRepeat","cycle")}}(this)),b.listenTo(c,"control:shuffle",function(b){return function(){return b.doCommand(a,"SetShuffle","toggle")}}(this)),b.listenTo(c,"control:mute",function(a){return function(){return i.toggleMute(function(){return a.pollingUpdate()})}}(this)),b.listenTo(c,"control:menu",function(){return b.execute("ui:playermenu","toggle")}),"kodi"===a&&b.listenTo(c,"remote:toggle",function(){return function(){return b.execute("input:remote:toggle")}}(this)),d=e("#player-"+a),g=e(".playing-progress",d),"kodi"===a?(g.on("change",function(){return f.timerStop(),f.doCommand(a,"Seek",Math.round(this.vGet()),function(){return f.timerStart()})}),g.on("slide",function(){return f.timerStop()})):g.on("change",function(){return f.doCommand(a,"Seek",Math.round(this.vGet()))}),h=e(".volume",d),h.on("change",function(){return i.setVolume(Math.round(this.vGet()),function(){return f.pollingUpdate()})})},timerStart:function(){return b.playingTimerInterval=setTimeout(function(a){return function(){return a.timerUpdate()}}(this),1e3)},timerStop:function(){return clearTimeout(b.playingTimerInterval)},timerUpdate:function(){var a,c,d,e,f;return f=b.request("state:kodi"),this.timerStop(),f.isPlaying()&&null!=f.getPlaying("time")?(a=helpers.global.timeToSec(f.getPlaying("time"))+1,d=helpers.global.timeToSec(f.getPlaying("totaltime")),e=Math.ceil(a/d*100),c=helpers.global.secToTime(a),f.setPlaying("time",c),this.setProgress("kodi",e,c),this.timerStart()):void 0},setProgress:function(a,b,c){var d,f;return null==b&&(b=0),f=e("#player-"+a),d=e(".playing-time-current",f),d.html(helpers.global.formatTime(c)),e(".playing-progress",f).val(b)},initProgress:function(a,b){var c;return null==b&&(b=0),c=e("#player-"+a),e(".playing-progress",c).noUiSlider({start:b,connect:"upper",step:1,range:{min:0,max:100}})},initVolume:function(a,b){var c;return null==b&&(b=50),c=e("#player-"+a),e(".volume",c).noUiSlider({start:b,connect:"upper",step:1,range:{min:0,max:100}})}},this.onStart=function(){return b.vent.on("shell:ready",function(){return function(){return b.kodiPlayer=f.getPlayer("kodi"),b.listenTo(b.kodiPlayer,"show",function(){return f.initPlayer("kodi",b.kodiPlayer),b.execute("player:kodi:timer","start")}),b.regionPlayerKodi.show(b.kodiPlayer),b.localPlayer=f.getPlayer("local"),b.listenTo(b.localPlayer,"show",function(){return f.initPlayer("local",b.localPlayer)}),b.regionPlayerLocal.show(b.localPlayer)}}(this)),b.commands.setHandler("player:kodi:timer",function(a){return null==a&&(a="start"),"start"===a?f.timerStart():"stop"===a?f.timerStop():"update"===a?f.timerUpdate():void 0}),b.commands.setHandler("player:local:progress:update",function(a,b){return f.setProgress("local",a,b)})}}),this.Kodi.module("PlayerApp.Show",function(a,b){return a.Player=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/player/show/player",b.prototype.regions={regionProgress:".playing-progress",regionVolume:".volume",regionThumbnail:".playing-thumb",regionTitle:".playing-title",regionSubtitle:".playing-subtitle",regionTimeCur:".playing-time-current",regionTimeDur:".playing-time-duration"},b.prototype.triggers={"click .remote-toggle":"remote:toggle","click .control-prev":"control:prev","click .control-play":"control:play","click .control-next":"control:next","click .control-stop":"control:stop","click .control-mute":"control:mute","click .control-shuffle":"control:shuffle","click .control-repeat":"control:repeat","click .control-menu":"control:menu"},b}(b.Views.ItemView)}),this.Kodi.module("PlaylistApp.List",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return b.vent.on("shell:ready",function(a){return function(){return a.getPlaylistBar()}}(this))},d.prototype.playlistController=function(a,c){return b.request("command:"+a+":controller",c,"PlayList")},d.prototype.playerCommand=function(a,c,d){return null==d&&(d=[]),b.request("command:"+a+":player",c,d,function(){return b.request("state:kodi:update")})},d.prototype.stateObj=function(){return b.request("state:current")},d.prototype.getPlaylistBar=function(){return this.layout=this.getLayout(),this.listenTo(this.layout,"show",function(a){return function(){return a.renderList("kodi","audio"),a.renderList("local","audio"),b.vent.on("state:initialized",function(){return a.changePlaylist(a.stateObj().getState("player"),a.stateObj().getState("media"))})}}(this)),this.listenTo(this.layout,"playlist:kodi:audio",function(a){return function(){return a.changePlaylist("kodi","audio")}}(this)),this.listenTo(this.layout,"playlist:kodi:video",function(a){return function(){return a.changePlaylist("kodi","video")}}(this)),this.listenTo(this.layout,"playlist:kodi",function(a){return function(){return a.stateObj().setPlayer("kodi"),a.renderList("kodi","audio")}}(this)),this.listenTo(this.layout,"playlist:local",function(a){return function(){return a.stateObj().setPlayer("local"),a.renderList("local","audio")}}(this)),this.listenTo(this.layout,"playlist:clear",function(a){return function(){return a.playlistController(a.stateObj().getPlayer(),a.stateObj().getState("media")).clear()}}(this)),this.listenTo(this.layout,"playlist:refresh",function(a){return function(){return a.renderList(a.stateObj().getPlayer(),a.stateObj().getState("media")),b.execute("notification:show",t.gettext("Playlist refreshed"))}}(this)),this.listenTo(this.layout,"playlist:party",function(a){return function(){return a.playerCommand("kodi","SetPartymode",["toggle"])}}(this)),this.listenTo(this.layout,"playlist:save",function(){return function(){return b.execute("localplaylist:addentity","playlist")}}(this)),b.regionPlaylist.show(this.layout)},d.prototype.getLayout=function(){return new a.Layout},d.prototype.getList=function(b){return new a.Items({collection:b})},d.prototype.renderList=function(a,c){var d,e;return this.layout.$el.removeClassStartsWith("media-").addClass("media-"+c),"kodi"===a?(d=b.request("playlist:list",a,c),b.execute("when:entity:fetched",d,function(e){return function(){var f;return f=e.getList(d),b.listenTo(f,"show",function(){return e.bindActions(f,a,c)}),e.layout.kodiPlayList.show(f),b.vent.trigger("state:content:updated")}}(this))):(d=b.request("localplayer:get:entities"),e=this.getList(d),b.listenTo(e,"show",function(b){return function(){return b.bindActions(e,a,c)}}(this)),this.layout.localPlayList.show(e),b.vent.trigger("state:content:updated"))},d.prototype.bindActions=function(a,b,c){var d;return d=this.playlistController(b,c),this.listenTo(a,"childview:playlist:item:remove",function(a,b){return d.remove(b.model.get("position"))}),this.listenTo(a,"childview:playlist:item:play",function(a,b){return d.playEntity("position",parseInt(b.model.get("position")))}),this.initSortable(b,c)},d.prototype.changePlaylist=function(a,b){return this.renderList(a,b)},d.prototype.initSortable=function(a,b){var c,d;return c=e("."+a+"-playlist"),d=this.playlistController(a,b),e("ul.playlist-items",c).sortable({onEnd:function(a){return d.moveItem(e(a.item).data("type"),e(a.item).data("id"),a.oldIndex,a.newIndex)}})},d}(b.Controllers.Base)}),this.Kodi.module("PlaylistApp.List",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/list/playlist_bar",b.prototype.tagName="div",b.prototype.className="playlist-bar",b.prototype.regions={kodiPlayList:".kodi-playlist",localPlayList:".local-playlist"},b.prototype.triggers={"click .kodi-playlists .media-toggle .video":"playlist:kodi:video","click .kodi-playlists .media-toggle .audio":"playlist:kodi:audio","click .player-toggle .kodi":"playlist:kodi","click .player-toggle .local":"playlist:local","click .clear-playlist":"playlist:clear","click .refresh-playlist":"playlist:refresh","click .party-mode":"playlist:party","click .save-playlist":"playlist:save"},b.prototype.events={"click .playlist-menu a":"menuClick"},b.prototype.menuClick=function(a){return a.preventDefault()},b}(b.Views.LayoutView),a.Item=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/list/playlist_item",b.prototype.tagName="li",b.prototype.initialize=function(){var a;switch(a="",this.model.get("type")){case"song":a=this.model.get("artist")?this.model.get("artist").join(", "):"";break;default:a=""}return this.model.set({subtitle:a})},b.prototype.triggers={"click .remove":"playlist:item:remove","click .play":"playlist:item:play"},b.prototype.attributes=function(){return{"class":"item pos-"+this.model.get("position"),"data-type":this.model.get("type"),"data-id":this.model.get("id")}},b}(b.Views.ItemView),a.Items=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Item,c.prototype.tagName="ul",c.prototype.className="playlist-items",c}(b.Views.CollectionView)}),this.Kodi.module("PlaylistApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={playlist:"list"},b}(b.Router.Base),c={list:function(){return new a.Show.Controller},type:"kodi",media:"audio",setContext:function(a,b){return null==a&&(a="kodi"),null==b&&(b="audio"),this.type=a,this.media=b},getController:function(){return b.request("command:"+this.type+":controller",this.media,"PlayList")},getPlaylistItems:function(){return b.request("playlist:"+this.type+":entities",this.media)}},b.reqres.setHandler("playlist:list",function(a,b){return c.setContext(a,b),c.getPlaylistItems()}),b.on("before:start",function(){return new a.Router({controller:c})}),b.addInitializer(function(){var c;return c=new a.List.Controller,b.commands.setHandler("playlist:refresh",function(a,b){return c.renderList(a,b)})})}),this.Kodi.module("PlaylistApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return this.landing=this.getLanding(),b.regionContent.show(this.landing)},d.prototype.getLanding=function(){return new a.Landing},d}(b.Controllers.Base)}),this.Kodi.module("PlaylistApp.Show",function(a,b){return a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/playlist/show/landing",b}(b.Views.ItemView)}),this.Kodi.module("ChannelApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c;return c=b.request("channel:entities",a.group),b.execute("when:entity:fetched",c,function(a){return function(){return a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.renderChannels(c),a.getSubNav()}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.Layout({collection:b})},d.prototype.renderChannels=function(c){var d;return d=new a.ChannelList({collection:c}),this.listenTo(d,"childview:channel:play",function(a,c){var d;return d=b.request("command:kodi:controller","auto","Player"),d.playEntity("channelid",c.model.get("id"),{},function(){return function(){}}(this))}),this.listenTo(d,"childview:channel:record",function(a,c){var d;return d=b.request("command:kodi:controller","auto","PVR"),d.setPVRRecord(c.model.get("id"),{record:"toggle"},function(){return function(){return b.execute("notification:show",t.gettext("Channel recording toggled"))}}(this))}),this.layout.regionContent.show(d)},d.prototype.getSubNav=function(){var a,c;return c="alltv"===this.getOption("group")?21:1,a=b.request("navMain:children:show",c,"Sections"),this.layout.regionSidebarFirst.show(a)},d}(b.Controllers.Base)}),this.Kodi.module("ChannelApp.List",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="pvr-page",b}(b.Views.LayoutWithSidebarFirstView),a.ChannelTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.triggers={"click .play":"channel:play","click .record":"channel:record"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),null!=this.model?this.model.set({subtitle:this.model.get("broadcastnow").title}):void 0},b}(b.Views.CardView),a.ChannelList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.ChannelTeaser,c.prototype.tagName="ul",c.prototype.className="card-grid--square",c}(b.Views.CollectionView)}),this.Kodi.module("ChannelApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/live":"tv","music/radio":"radio"},b}(b.Router.Base),c={tv:function(){return new a.List.Controller({group:"alltv"})},radio:function(){return new a.List.Controller({group:"allradio"})}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("SearchApp.List",function(a,b,c,d,e,f){return a.Controller=function(c){function d(){return this.updateProgress=__bind(this.updateProgress,this),this.getLoader=__bind(this.getLoader,this),d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){var a;return this.layout=this.getLayout(),this.processed=[],a=this.getOption("media"),this.entities="all"===a?["song","artist","album","tvshow","movie"]:[a],this.listenTo(this.layout,"show",function(a){return function(){var b,c,d,e,f;for(a.getLoader(),e=a.entities,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a.getResult(b));return f}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getLoader=function(){var a;return a=t.gettext("Searching for")+" "+helpers.global.arrayToSentence(f.difference(this.entities,this.processed)),b.execute("loading:show:view",this.layout.loadingSet,a)},d.prototype.getResult=function(c){var d,e;return e=this.getOption("query"),d="all"===this.getOption("media")?"limit":"all",b.execute(""+c+":search:entities",e,d,function(d){return function(f){var g,h;return f.length>0&&(h=b.request(""+c+":list:view",f,!0),g=new a.ListSet({entity:c,more:f.more?!0:!1,query:e}),b.listenTo(g,"show",function(){return g.regionResult.show(h)}),d.layout[""+c+"Set"].show(g)),d.updateProgress(c)}}(this))},d.prototype.updateProgress=function(a){return null!=a&&this.processed.push(a),this.getLoader(),this.processed.length===this.entities.length?this.layout.loadingSet.$el.empty():void 0},d}(b.Controllers.Base)}),this.Kodi.module("SearchApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/list/search_layout",b.prototype.className="search-page set-page",b.prototype.regions={artistSet:".entity-set-artist",albumSet:".entity-set-album",songSet:".entity-set-song",movieSet:".entity-set-movie",tvshowSet:".entity-set-tvshow",loadingSet:".entity-set-loading"},b}(b.Views.LayoutView),a.ListSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/list/search_set",b.prototype.className="search-set",b.prototype.onRender=function(){var a;return this.options&&this.options.entity&&(e("h2.set-header",this.$el).html(t.gettext(this.options.entity+"s")),this.options.more&&this.options.query)?(a=this.themeLink(t.gettext("Show more"),"search/"+this.options.entity+"/"+this.options.query),e(".more",this.$el).html(a)):void 0},b.prototype.regions={regionResult:".set-results"},b}(b.Views.LayoutView)}),this.Kodi.module("SearchApp",function(a,b,c,d,e){var f;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={search:"view","search/:media/:query":"list"},b}(b.Router.Base),f={keyUpTimeout:2e3,list:function(c,d){var f;return b.navigate("search/"+c+"/"+d),f=e("#search"),""===f.val()&&f.val(d),new a.List.Controller({query:d,media:c})},view:function(){return new a.Show.Controller},searchBind:function(){return e("#search").on("keyup",function(a){var c;return c=e("#search").val(),clearTimeout(b.searchAllTimeout),13===a.which?f.list("all",c):b.searchAllTimeout=setTimeout(function(){return f.list("all",c)},f.keyUpTimeout)})}},b.on("before:start",function(){return new a.Router({controller:f})}),b.addInitializer(function(){return b.vent.on("shell:ready",function(){return f.searchBind()})})}),this.Kodi.module("SearchApp.Show",function(a,b,c,d,e){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){return this.landing=this.getLanding(),this.listenTo(this.landing,"show",function(){return function(){return e("#search").focus()}}(this)),b.regionContent.show(this.landing)},d.prototype.getLanding=function(){return new a.Landing},d}(b.Controllers.Base)}),this.Kodi.module("SearchApp.Show",function(a,b){return a.Landing=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/search/show/landing",b}(b.Views.ItemView)}),this.Kodi.module("SettingsApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"settings/web":"local","settings/kodi":"kodi"},b}(b.Router.Base),c={subNavId:51,local:function(){return new a.Show.Local.Controller},kodi:function(){return new a.Show.Kodi.Controller},getSubNav:function(){return b.request("navMain:children:show",this.subNavId,"Sections")}},b.on("before:start",function(){return new a.Router({controller:c})}),b.reqres.setHandler("settings:subnav",function(){return c.getSubNav()})}),this.Kodi.module("SettingsApp.Show.Kodi",function(a,b){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getSubNav(),a.getForm()}}(this)),b.regionContent.show(this.layout)},c.prototype.getLayoutView=function(){return new b.SettingsApp.Show.Layout},c.prototype.getSubNav=function(){var a;return a=b.request("settings:subnav"),this.layout.regionSidebarFirst.show(a)},c.prototype.getForm=function(){var a,c;return c={form:this.getSructure(),formState:this.getState(),config:{attributes:{"class":"settings-form"}}},a=b.request("form:wrapper",c),this.layout.regionContent.show(a)},c.prototype.getSructure=function(){return[{title:"List options",id:"list",children:[{id:"ignore-article",title:"Ignore article",type:"checkbox",defaultValue:!0,description:'Ignore terms such as "The" and "a" when sorting lists'}]}]},c.prototype.getState=function(){return{"default-player":"local","jsonrpc-address":"/jsonrpc","test-checkbox":!1}},c}(b.Controllers.Base)}),this.Kodi.module("SettingsApp.Show.Local",function(a,b,c,d,e,f){return a.Controller=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getSubNav(),a.getForm()}}(this)),b.regionContent.show(this.layout)},c.prototype.getLayoutView=function(){return new b.SettingsApp.Show.Layout},c.prototype.getSubNav=function(){var a;return a=b.request("settings:subnav"),this.layout.regionSidebarFirst.show(a)},c.prototype.getForm=function(){var a,c;return c={form:this.getStructure(),formState:this.getState(),config:{attributes:{"class":"settings-form"},callback:function(a){return function(b,c){return a.saveCallback(b,c)}}(this)}},a=b.request("form:wrapper",c),this.layout.regionContent.show(a)},c.prototype.getStructure=function(){return[{title:"General options",id:"general",children:[{id:"lang",title:t.gettext("Language"),type:"select",options:helpers.translate.getLanguages(),defaultValue:"en",description:t.gettext("Preferred language, need to refresh browser to take effect")},{id:"defaultPlayer",title:t.gettext("Default player"),type:"select",options:{auto:"Auto",kodi:"Kodi",local:"Local"},defaultValue:"auto",description:t.gettext("Which player to start with")}]},{title:"List options",id:"list",children:[{id:"ignoreArticle",title:t.gettext("Ignore article"),type:"checkbox",defaultValue:!0,description:t.gettext("Ignore articles (terms such as 'The' and 'A') when sorting lists")},{id:"albumAtristsOnly",title:t.gettext("Album artists only"),type:"checkbox",defaultValue:!0,description:t.gettext("When listing artists should we only see artists with albums or all artists found. Warning: turning this off can impact performance with large libraries")}]},{title:"Appearance",id:"appearance",children:[{id:"vibrantHeaders",title:t.gettext("Vibrant Headers"),type:"checkbox",defaultValue:!0,description:t.gettext("Use colourful headers for media pages")}]},{title:"Advanced Options",id:"advanced",children:[{id:"socketsPort",title:t.gettext("Websockets port"),type:"textfield",defaultValue:"9090",description:"9090 "+t.gettext("is the default")},{id:"socketsHost",title:t.gettext("Websockets host"),type:"textfield",defaultValue:"auto",description:t.gettext("The hostname used for websockets connection. Set to 'auto' to use the current hostname.")},{id:"pollInterval",title:t.gettext("Poll interval"),type:"select",defaultValue:"10000",options:{5000:"5 "+t.gettext("sec"),10000:"10 "+t.gettext("sec"),30000:"30 "+t.gettext("sec"),60000:"60 "+t.gettext("sec")},description:t.gettext("How often do I poll for updates from Kodi (Only applies when websockets inactive)")},{id:"reverseProxy",title:t.gettext("Reverse proxy support"),type:"checkbox",defaultValue:!1,description:t.gettext("Enable support for reverse proxying.")}]}]},c.prototype.getState=function(){return config.get("app","config:local",config["static"])},c.prototype.saveCallback=function(a){return config.set("app","config:local",a),config["static"]=f.extend(config["static"],config.get("app","config:local",config["static"])),Kodi.execute("notification:show",t.gettext("Web Settings saved."))
},c}(b.Controllers.Base)}),this.Kodi.module("SettingsApp.Show",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="settings-page",b}(b.Views.LayoutWithSidebarFirstView)}),this.Kodi.module("Shell",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"":"homePage",home:"homePage"},b}(b.Router.Base),c={homePage:function(){var c;return c=new a.HomepageLayout,b.regionContent.show(c),this.setFanart(),b.vent.on("state:changed",function(a){return function(){var c;return c=b.request("state:current"),c.isPlayingItemChanged()&&""===helpers.url.arg(0)?a.setFanart():void 0}}(this)),b.listenTo(c,"destroy",function(){return function(){return b.execute("images:fanart:set","none")}}(this))},setFanart:function(){var a,c;return c=b.request("state:current"),null!=c?(a=c.getPlaying("item"),b.execute("images:fanart:set",a.fanart)):b.execute("images:fanart:set")},renderLayout:function(){var c,d;return d=new a.Layout,b.root.show(d),b.addRegions(d.regions),b.execute("loading:show:page"),c=config.get("app","shell:playlist:state","open"),"closed"===c&&this.alterRegionClasses("add","shell-playlist-closed"),b.listenTo(d,"shell:playlist:toggle",function(a){return function(){var b;return c=config.get("app","shell:playlist:state","open"),b="open"===c?"closed":"open",config.set("app","shell:playlist:state",b),a.alterRegionClasses("toggle","shell-playlist-closed")}}(this)),b.listenTo(d,"shell:audio:scan",function(){return function(){return b.request("command:kodi:controller","auto","AudioLibrary").scan()}}(this)),b.listenTo(d,"shell:video:scan",function(){return function(){return b.request("command:kodi:controller","auto","VideoLibrary").scan()}}(this)),b.listenTo(d,"shell:about",function(){return function(){}}(this))},alterRegionClasses:function(a,c,d){var e,f;return null==d&&(d="root"),e=b.getRegion(d).$el,f=""+a+"Class",e[f](c)}},b.addInitializer(function(){return b.commands.setHandler("shell:view:ready",function(){return c.renderLayout(),new a.Router({controller:c}),b.vent.trigger("shell:ready"),b.commands.setHandler("body:state",function(a,b){return c.alterRegionClasses(a,b)})})})}),this.Kodi.module("Shell",function(a,b,c){return a.Layout=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/shell/show/shell",c.prototype.regions={regionNav:"#nav-bar",regionContent:"#content",regionSidebarFirst:"#sidebar-first",regionPlaylist:"#playlist-bar",regionTitle:"#page-title .title",regionTitleContext:"#page-title .context",regionFanart:"#fanart",regionPlayerKodi:"#player-kodi",regionPlayerLocal:"#player-local",regionModal:"#modal-window",regionModalTitle:".modal-title",regionModalBody:".modal-body",regionModalFooter:".modal-footer",regionRemote:"#remote",regionSearch:"#search-region"},c.prototype.triggers={"click .playlist-toggle-open":"shell:playlist:toggle","click .audio-scan":"shell:audio:scan","click .video-scan":"shell:video:scan","click .about":"shell:about"},c.prototype.events={"click .player-menu > li":"closePlayerMenu"},c.prototype.closePlayerMenu=function(){return b.execute("ui:playermenu","close")},c}(c.Marionette.LayoutView),a.HomepageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/shell/show/homepage",b}(c.Marionette.LayoutView),b.execute("shell:view:ready")}),this.Kodi.module("SongApp.List",function(a,b,c,d,e){var f;return f={getSongsView:function(c,d){return null==d&&(d=!1),this.songsView=new a.Songs({collection:c,verbose:d}),b.listenTo(this.songsView,"childview:song:play",function(a){return function(b,c){return a.playSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:add",function(a){return function(b,c){return a.addSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:localadd",function(a){return function(b,c){return a.localAddSong(c.model.get("songid"))}}(this)),b.listenTo(this.songsView,"childview:song:localplay",function(a){return function(b,c){return a.localPlaySong(c.model)}}(this)),b.listenTo(this.songsView,"childview:song:download",function(a){return function(b,c){return a.downloadSong(c.model)}}(this)),b.listenTo(this.songsView,"childview:song:musicvideo",function(a){return function(b,c){return a.musicVideo(c.model)}}(this)),b.listenTo(this.songsView,"show",function(){return b.vent.trigger("state:content:updated")}),this.songsView},playSong:function(a){return b.execute("command:audio:play","songid",a)},addSong:function(a){return b.execute("command:audio:add","songid",a)},localAddSong:function(a){return b.execute("localplaylist:addentity","songid",a)},localPlaySong:function(a){var c;return c=b.request("command:local:controller","audio","PlayList"),c.play(a.attributes)},downloadSong:function(a){var c;return c=b.request("command:kodi:controller","video","Files"),c.downloadFile(a.get("file"))},musicVideo:function(a){var c;return c=a.get("label")+" "+a.get("artist"),b.execute("youtube:search:view",c,function(a){var d;return d=e("<a>",{"class":"btn btn-primary",href:"https://www.youtube.com/results?search_query="+c,target:"_blank"}),d.html("More videos"),b.execute("ui:modal:show",c,a.render().$el,d)})}},b.reqres.setHandler("song:list:view",function(a,b){return null==b&&(b=!1),f.getSongsView(a,b)})}),this.Kodi.module("SongApp.List",function(a,b,c,d,e){return a.Song=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template="apps/song/list/song",c.prototype.tagName="tr",c.prototype.initialize=function(){var a,b;return a=helpers.global.secToTime(this.model.get("duration")),b={"song-localadd":"Add to playlist","song-download":"Download song","song-localplay":"Play in browser","song-musicvideo":"Music video"},this.model.set({displayDuration:helpers.global.formatTime(a),menu:b})},c.prototype.triggers={"click .play":"song:play","dblclick .song-title":"song:play","click .add":"song:add","click .song-localadd":"song:localadd","click .song-download":"song:download","click .song-localplay":"song:localplay","click .song-musicvideo":"song:musicvideo"},c.prototype.events={"click .dropdown > i":"populateMenu","click .thumbs":"toggleThumbs"},c.prototype.populateMenu=function(){var a,b,c,d;if(b="",this.model.get("menu")){d=this.model.get("menu");for(a in d)c=d[a],b+=this.themeTag("li",{"class":a},c);return this.$el.find(".dropdown-menu").html(b)}},c.prototype.toggleThumbs=function(){return b.request("thumbsup:toggle:entity",this.model),this.$el.toggleClass("thumbs-up")},c.prototype.attributes=function(){var a;return a=["song","table-row","can-play","item-"+this.model.get("uid")],b.request("thumbsup:check",this.model)&&a.push("thumbs-up"),{"class":a.join(" ")}},c.prototype.onShow=function(){return console.log(this.model),e(".dropdown",this.$el).on("show.bs.dropdown",function(a){return function(){return a.$el.addClass("menu-open")}}(this)),e(".dropdown",this.$el).on("hide.bs.dropdown",function(a){return function(){return a.$el.removeClass("menu-open")}}(this)),e(".dropdown",this.$el).on("click",function(){return e(this).removeClass("open").trigger("hide.bs.dropdown")})},c}(b.Views.ItemView),a.Songs=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.Song,c.prototype.tagName="table",c.prototype.attributes=function(){var a;return a=this.options.verbose?"verbose":"basic",{"class":"songs-table table table-hover "+a}},c}(b.Views.CollectionView)}),this.Kodi.module("StateApp",function(a,b,c,d){return a.Base=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.instanceSettings={},c.prototype.state={player:"kodi",media:"audio",volume:50,lastVolume:50,muted:!1,shuffled:!1,repeat:"off"},c.prototype.playing={playing:!1,paused:!1,playState:"",item:{},media:"audio",itemChanged:!1,latPlaying:"",canrepeat:!0,canseek:!0,canshuffle:!0,partymode:!1,percentage:0,playlistid:0,position:0,speed:0,time:{hours:0,milliseconds:0,minutes:0,seconds:0},totaltime:{hours:0,milliseconds:0,minutes:0,seconds:0}},c.prototype.defaultPlayingItem={thumbnail:"",fanart:"",id:0,songid:0,episodeid:0,album:"",albumid:"",duration:0,type:"song"},c.prototype.getState=function(a){return null==a&&(a="all"),"all"===a?this.state:this.state[a]},c.prototype.setState=function(a,b){return this.state[a]=b},c.prototype.getPlaying=function(a){var b;return null==a&&(a="all"),b=this.playing,0===b.item.length&&(b.item=this.defaultPlayingItem),"all"===a?this.playing:this.playing[a]},c.prototype.setPlaying=function(a,b){return this.playing[a]=b},c.prototype.isPlaying=function(){return this.getPlaying("playing")},c.prototype.isPlayingItemChanged=function(){return this.getPlaying("itemChanged")},c.prototype.doCallback=function(a,b){return"function"==typeof a?a(b):void 0},c.prototype.getCurrentState=function(){},c.prototype.getCachedState=function(){return{state:this.state,playing:this.playing}},c.prototype.setPlayer=function(a){var c;return null==a&&(a="kodi"),c=b.getRegion("root").$el,c.removeClassStartsWith("active-player-").addClass("active-player-"+a),config.set("state","lastplayer",a)},c.prototype.getPlayer=function(){var a,c;return c="kodi",a=b.getRegion("root").$el,a.hasClass("active-player-local")&&(c="local"),c},c}(d.Object)}),this.Kodi.module("StateApp.Kodi",function(a,b,c,d,e,f){return a.State=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.playerController={},c.prototype.applicationController={},c.prototype.playlistApi={},c.prototype.initialize=function(){return this.state=f.extend({},this.state),this.playing=f.extend({},this.playing),this.setState("player","kodi"),this.playerController=b.request("command:kodi:controller","auto","Player"),this.applicationController=b.request("command:kodi:controller","auto","Application"),this.playlistApi=b.request("playlist:kodi:entity:api"),b.reqres.setHandler("state:kodi:update",function(a){return function(b){return a.getCurrentState(b)}}(this)),b.reqres.setHandler("state:kodi:get",function(a){return function(){return a.getCachedState()}}(this))},c.prototype.getCurrentState=function(a){return this.applicationController.getProperties(function(c){return function(d){return c.setState("volume",d.volume),c.setState("muted",d.muted),b.reqres.setHandler("player:kodi:timer","stop"),c.playerController.getPlaying(function(d){var e,f,g,h,i;if(d){for(c.setPlaying("playing",!0),c.setPlaying("paused",0===d.properties.speed),c.setPlaying("playState",0===d.properties.speed?"paused":"playing"),e=["canrepeat","canseek","canshuffle","partymode","percentage","playlistid","position","speed","time","totaltime"],h=0,i=e.length;i>h;h++)f=e[h],d.properties[f]&&c.setPlaying(f,d.properties[f]);c.setState("shuffled",d.properties.shuffled),c.setState("repeat",d.properties.repeat),g=c.playerController.playerIdToName(d.properties.playlistid),g&&c.setState("media",g),d.item.file!==c.getPlaying("lastPlaying")?(c.setPlaying("itemChanged",!0),b.vent.trigger("state:kodi:itemchanged",c.getCachedState())):c.setPlaying("itemChanged",!1),c.setPlaying("lastPlaying",d.item.file),c.setPlaying("item",c.parseItem(d.item,{media:g,playlistid:d.properties.playlistid})),b.reqres.setHandler("player:kodi:timer","start")}else c.setPlaying("playing",!1),c.setPlaying("paused",!1),c.setPlaying("item",c.defaultPlayingItem),c.setPlaying("lstPlaying","");return b.vent.trigger("state:kodi:changed",c.getCachedState()),b.vent.trigger("state:changed"),c.doCallback(a,c.getCachedState())})}}(this))},c.prototype.parseItem=function(a,c){return a=this.playlistApi.parseItem(a,c),a=b.request("images:path:entity",a),a.url=helpers.url.get(a.type,a.id),a.url=helpers.url.playlistUrl(a),a},c}(b.StateApp.Base)}),this.Kodi.module("StateApp.Kodi",function(a,b,c){return a.Notifications=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,a),d.prototype.wsActive=!1,d.prototype.wsObj={},d.prototype.getConnection=function(){var a,b,c,d,e;return a=config.get("static","socketsHost"),d=config.get("static","jsonRpcEndpoint"),e=config.get("static","socketsPort"),c="auto"===a?location.hostname:a,b=helpers.url.isSecureProtocol()?"wss":"ws",""+b+"://"+c+":"+e+"/"+d+"?kodi"},d.prototype.initialize=function(){var a,c;return window.WebSocket?(c=new WebSocket(this.getConnection()),c.onopen=function(a){return function(){return helpers.debug.msg("Websockets Active"),a.wsActive=!0,b.vent.trigger("sockets:available")}}(this),c.onerror=function(a){return function(c){return helpers.debug.msg(a.socketConnectionErrorMsg(),"warning",c),a.wsActive=!1,b.vent.trigger("sockets:unavailable")}}(this),c.onmessage=function(a){return function(b){return a.messageRecieved(b)}}(this),c.onclose=function(a){return function(b){return helpers.debug.msg("Websockets Closed","warning",b),a.wsActive=!1}}(this)):(a="Your browser doesn't support websockets! Get with the times and update your browser.",helpers.debug.msg(t.gettext(a),"warning",resp),b.vent.trigger("sockets:unavailable")),b.reqres.setHandler("sockets:active",function(){return this.wsActive})},d.prototype.parseResponse=function(a){return jQuery.parseJSON(a.data)},d.prototype.messageRecieved=function(a){var b;return b=this.parseResponse(a),this.onMessage(b),console.log(b)},d.prototype.socketConnectionErrorMsg=function(){var a;return a="Failed to connect to websockets",t.gettext(a)},d.prototype.refreshStateNow=function(a){return b.vent.trigger("state:kodi:changed",this.getCachedState()),setTimeout(function(){return function(){return b.request("state:kodi:update",function(b){return a?a(b):void 0})}}(this),1e3)},d.prototype.onMessage=function(a){var d,e;switch(a.method){case"Player.OnPlay":this.setPlaying("paused",!1),this.setPlaying("playState","playing"),b.execute("player:kodi:timer","start"),this.refreshStateNow();break;case"Player.OnStop":this.setPlaying("playing",!1),b.execute("player:kodi:timer","stop"),this.refreshStateNow();break;case"Player.OnPropertyChanged":this.refreshStateNow();break;case"Player.OnPause":this.setPlaying("paused",!0),this.setPlaying("playState","paused"),b.execute("player:kodi:timer","stop"),this.refreshStateNow();break;case"Player.OnSeek":b.execute("player:kodi:timer","stop"),this.refreshStateNow(function(){return b.execute("player:kodi:timer","start")});break;case"Playlist.OnClear":case"Playlist.OnAdd":case"Playlist.OnRemove":d=b.request("command:kodi:controller","auto","Player"),b.execute("playlist:refresh","kodi",d.playerIdToName(a.params.data.playlistid)),this.refreshStateNow();break;case"Application.OnVolumeChanged":this.setState("volume",a.params.data.volume),this.setState("muted",a.params.data.muted),this.refreshStateNow();break;case"VideoLibrary.OnScanStarted":b.execute("notification:show",t.gettext("Video library scan started"));break;case"VideoLibrary.OnScanFinished":b.execute("notification:show",t.gettext("Video library scan complete")),c.fetchCache.clearItem("MovieCollection"),c.fetchCache.clearItem("TVShowCollection");break;case"AudioLibrary.OnScanStarted":b.execute("notification:show",t.gettext("Audio library scan started"));break;case"AudioLibrary.OnScanFinished":b.execute("notification:show",t.gettext("Audio library scan complete")),c.fetchCache.clearItem("AlbumCollection"),c.fetchCache.clearItem("ArtistCollection");break;case"Input.OnInputRequested":b.execute("input:textbox",""),e=60,b.inputTimeout=setTimeout(function(){var a;a=e+t.gettext(" seconds ago, an input dialog opened on xbmc and it is still open! To prevent a mainframe implosion, you should probably give me some text. I don't really care what it is at this point, why not be creative? Do you have a ")+'<a href="http://goo.gl/PGE7wg" target="_blank">'+t.gettext("word of the day")+"</a>? "+t.gettext("I won't tell..."),b.execute("input:textbox",a)},1e3*e);break;case"Input.OnInputFinished":clearTimeout(b.inputTimeout),b.execute("input:textbox:close");break;case"System.OnQuit":b.execute("notification:show",t.gettext("Kodi has quit"))}},d}(b.StateApp.Base)}),this.Kodi.module("StateApp.Kodi",function(a,b){return a.Polling=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.commander={},c.prototype.checkInterval=1e4,c.prototype.currentInterval="",c.prototype.timeoutObj={},c.prototype.failures=0,c.prototype.maxFailures=100,c.prototype.initialize=function(){var a;return a=config.get("static","pollInterval"),this.checkInterval=parseInt(a),this.currentInterval=this.checkInterval},c.prototype.startPolling=function(){return this.update()},c.prototype.updateState=function(){var a;return a=b.request("state:kodi"),a.getCurrentState()},c.prototype.update=function(){return b.kodiPolling.failures<b.kodiPolling.maxFailures?(b.kodiPolling.updateState(),b.kodiPolling.timeout=setTimeout(b.kodiPolling.ping,b.kodiPolling.currentInterval)):b.execute("notification:show",t.gettext("Unable to communicate with Kodi in a long time. I think it's dead Jim!"))},c.prototype.ping=function(){var a;return a=b.request("command:kodi:controller","auto","Commander"),a.setOptions({timeout:5e3,error:function(){return b.kodiPolling.failure()}}),a.onError=function(){},a.sendCommand("Ping",[],function(){return b.kodiPolling.alive()})},c.prototype.alive=function(){return b.kodiPolling.failures=0,b.kodiPolling.currentInterval=b.kodiPolling.checkInterval,b.kodiPolling.update()},c.prototype.failure=function(){return b.kodiPolling.failures++,b.kodiPolling.failures>10&&(b.kodiPolling.currentInterval=5*b.kodiPolling.checkInterval),b.kodiPolling.failures>20&&(b.kodiPolling.currentInterval=10*b.kodiPolling.checkInterval),b.kodiPolling.failures>30&&(b.kodiPolling.currentInterval=30*b.kodiPolling.checkInterval),b.kodiPolling.update()},c}(b.StateApp.Base)}),this.Kodi.module("StateApp.Local",function(a,b,c,d,e,f){return a.State=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){return this.state=f.extend({},this.state),this.playing=f.extend({},this.playing),this.setState("player","local"),this.setState("currentPlaybackId","browser-none"),this.setState("localPlay",!1),b.reqres.setHandler("state:local:update",function(a){return function(b){return a.getCurrentState(b)}}(this)),b.reqres.setHandler("state:local:get",function(a){return function(){return a.getCachedState()}}(this))},c.prototype.getCurrentState=function(a){return this.doCallback(a,this.getCachedState())},c}(b.StateApp.Base)}),this.Kodi.module("StateApp",function(a,b,c,d,e){var f;return f={setState:function(a){return null==a&&(a="kodi"),this.setBodyClasses(a),this.setPlayingContent(a),this.setPlayerPlaying(a),this.setAppProperties(a),this.setTitle(a)},playerClass:function(a,b){return b+"-"+a},setBodyClasses:function(a){var c,d,e,f,g,h,i;for(f=b.request("state:"+a),c=b.getRegion("root").$el,c.removeClassStartsWith(a+"-"),e=[],e.push("shuffled-"+(f.getState("shuffled")?"on":"off")),e.push("partymode-"+(f.getPlaying("partymode")?"on":"off")),e.push("mute-"+(f.getState("muted")?"on":"off")),e.push("repeat-"+f.getState("repeat")),e.push("media-"+f.getState("media")),e.push(f.isPlaying()?f.getPlaying("playState"):"not-playing"),i=[],g=0,h=e.length;h>g;g++)d=e[g],i.push(c.addClass(this.playerClass(d,a)));return i},setPlayingContent:function(a){var c,d,f,g,h;return h=b.request("state:"+a),c=e(".media-"+h.getState("media")+" ."+a+"-playlist"),e(".can-play").removeClassStartsWith(a+"-row-"),e(".item",c).removeClassStartsWith("row-"),h.isPlaying()?(f=h.getPlaying("item"),g=h.getPlaying("playState"),d=".item-"+f.type+"-"+f.id,e(d).addClass(this.playerClass("row-"+g,a)),e(".pos-"+h.getPlaying("position"),c).addClass("row-"+g)):void 0},setPlayerPlaying:function(a){var c,d,f,g,h,i,j;return j=b.request("state:"+a),f=e("#player-"+a),h=e(".playing-title",f),g=e(".playing-subtitle",f),c=e(".playing-time-duration",f),d=e(".playing-thumb",f),j.isPlaying()?(i=j.getPlaying("item"),h.html(helpers.entities.playingLink(i)),g.html(helpers.entities.getSubtitle(i)),c.html(helpers.global.formatTime(j.getPlaying("totaltime"))),d.css("background-image","url('"+i.thumbnail+"')")):(h.html(t.gettext("Nothing playing")),g.html(""),c.html("0"),d.attr("src",b.request("images:path:get")))},setAppProperties:function(a){var c,d;return d=b.request("state:"+a),c=e("#player-"+a),e(".volume",c).val(d.getState("volume"))},setTitle:function(a){var c;return"kodi"===a?(c=b.request("state:"+a),c.isPlaying()&&"playing"===c.getPlaying("playState")?helpers.global.appTitle(c.getPlaying("item")):helpers.global.appTitle()):void 0},initKodiState:function(){return b.kodiState=new a.Kodi.State,b.localState=new a.Local.State,b.kodiState.setPlayer(config.get("state","lastplayer","kodi")),b.kodiState.getCurrentState(function(){return f.setState("kodi"),b.kodiSockets=new a.Kodi.Notifications,b.kodiPolling=new a.Kodi.Polling,b.vent.on("sockets:unavailable",function(){return b.kodiPolling.startPolling()}),b.vent.on("playlist:rendered",function(){return b.request("playlist:refresh",b.kodiState.getState("player"),b.kodiState.getState("media"))}),b.vent.on("state:content:updated",function(){return f.setPlayingContent("kodi"),f.setPlayingContent("local")}),b.vent.on("state:kodi:changed",function(){return f.setState("kodi")}),b.vent.on("state:local:changed",function(){return f.setState("local")}),b.vent.on("state:player:updated",function(a){return f.setPlayerPlaying(a)}),b.vent.trigger("state:initialized")}),b.reqres.setHandler("state:kodi",function(){return b.kodiState}),b.reqres.setHandler("state:local",function(){return b.localState}),b.reqres.setHandler("state:current",function(){var a;return a="kodi"===b.kodiState.getPlayer()?b.kodiState:b.localState}),b.vent.trigger("state:changed")}},b.addInitializer(function(){return f.initKodiState()})}),this.Kodi.module("ThumbsApp.List",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(){var a;return this.layout=this.getLayout(),a=["song","artist","album","tvshow","movie"],this.listenTo(this.layout,"show",function(b){return function(){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(b.getResult(c));return f}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayout=function(){return new a.ListLayout},d.prototype.getResult=function(c){var d,e,f,g,h;return f=this.getOption("query"),d="all"===this.getOption("media")?"limit":"all",e=b.request("thumbsup:get:entities",c),e.length>0?(h=b.request(""+c+":list:view",e,!0),g=new a.ListSet({entity:c}),b.listenTo(g,"show",function(){return function(){return g.regionResult.show(h)}}(this)),this.layout[""+c+"Set"].show(g)):void 0},d}(b.Controllers.Base)}),this.Kodi.module("ThumbsApp.List",function(a,b,c,d,e){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/thumbs/list/thumbs_layout",b.prototype.className="thumbs-page set-page",b.prototype.regions={artistSet:".entity-set-artist",albumSet:".entity-set-album",songSet:".entity-set-song",movieSet:".entity-set-movie",tvshowSet:".entity-set-tvshow"},b}(b.Views.LayoutView),a.ListSet=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/thumbs/list/thumbs_set",b.prototype.className="thumbs-set",b.prototype.onRender=function(){return this.options&&this.options.entity?e("h2.set-header",this.$el).html(t.gettext(this.options.entity+"s")):void 0},b.prototype.regions={regionResult:".set-results"},b}(b.Views.LayoutView)}),this.Kodi.module("ThumbsApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={thumbsup:"list"},b}(b.Router.Base),c={list:function(){return new a.List.Controller}},b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("TVShowApp.Episode",function(a,b){var c;return c={getEpisodeList:function(c){var d;return d=new a.Episodes({collection:c}),b.listenTo(d,"childview:episode:play",function(a,c){return b.execute("episode:action","play",c)}),b.listenTo(d,"childview:episode:add",function(a,c){return b.execute("episode:action","add",c)}),b.listenTo(d,"childview:episode:localplay",function(a,c){return b.execute("episode:action","localplay",c)}),b.listenTo(d,"childview:episode:download",function(a,c){return b.execute("episode:action","download",c)}),b.listenTo(d,"childview:episode:watched",function(a,c){return a.$el.toggleClass("is-watched"),b.execute("episode:action","toggleWatched",c)}),d},bindTriggers:function(a){return b.listenTo(a,"episode:play",function(a){return b.execute("episode:action","play",a)}),b.listenTo(a,"episode:add",function(a){return b.execute("episode:action","add",a)}),b.listenTo(a,"episode:localplay",function(a){return b.execute("episode:action","localplay",a)}),b.listenTo(a,"episode:download",function(a){return b.execute("episode:action","download",a)}),b.listenTo(a,"episode:watched",function(a){return parent.$el.toggleClass("is-watched"),b.execute("episode:action","toggleWatched",a)})}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(a){var c,d,e,f;return e=parseInt(a.id),f=parseInt(a.season),d=parseInt(a.episodeid),c=b.request("episode:entity",d),b.execute("when:entity:fetched",c,function(a){return function(){return console.log(c),a.layout=a.getLayoutView(c),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(c),a.getContentView(c)}),b.regionContent.show(a.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.PageLayout({tvshow:b})},e.prototype.getDetailsLayoutView=function(b){var d;return d=new a.HeaderLayout({model:b}),this.listenTo(d,"show",function(){return function(){var e,f;return f=new a.EpisodeDetailTeaser({model:b}),e=new a.Details({model:b}),c.bindTriggers(e),d.regionSide.show(f),d.regionMeta.show(e)}}(this)),this.layout.regionHeader.show(d)},e.prototype.getContentView=function(c){var d;return d=new a.Content({model:c}),b.listenTo(d,"show",function(a){return function(){return c.get("cast").length>0?d.regionCast.show(a.getCast(c)):void 0}}(this)),this.layout.regionContent.show(d)},e.prototype.getCast=function(a){return b.request("cast:list:view",a.get("cast"),"tvshows")},e}(b.Controllers.Base),b.reqres.setHandler("episode:list:view",function(a){return c.getEpisodeList(a)})}),this.Kodi.module("TVShowApp.Episode",function(a,b){return a.EpisodeTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"episode:play","click .watched":"episode:watched","click .add":"episode:add","click .localplay":"episode:localplay","click .download":"episode:download"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),null!=this.model?(this.model.set(this.getMeta()),this.model.set({actions:{watched:"Watched"}}),this.model.set({menu:{add:"Add to Kodi playlist",divider:"",download:"Download",localplay:"Play in browser"}})):void 0},b.prototype.attributes=function(){var a;return a=["card"],helpers.entities.isWatched(this.model)&&a.push("is-watched"),{"class":a.join(" ")}},b.prototype.getMeta=function(){var a,b,c;return a=this.themeTag("span",{"class":"ep-num"},this.model.get("season")+"x"+this.model.get("episode")+" "),b=this.themeTag("span",{"class":"ep-num-full"},t.gettext("Episode")+" "+this.model.get("episode")),c=this.themeLink(this.model.get("showtitle")+" ","tvshow/"+this.model.get("tvshowid"),{className:"show-name"}),{label:a+this.model.get("title"),subtitle:c+b}},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="episode-empty-result",b}(b.Views.EmptyViewResults),a.Episodes=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.EpisodeTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--episode",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="episode-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="episode-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/episode/details_meta",b.prototype.triggers={"click .play":"episode:play","click .add":"episode:add","click .stream":"episode:localplay","click .download":"episode:download"},b}(b.Views.ItemView),a.EpisodeDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"episode-menu:clicked"},b}(b.Views.CardView),a.Content=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/episode/content",b.prototype.className="episode-content content-sections",b.prototype.regions={regionCast:".region-cast"},b}(b.Views.LayoutView)}),this.Kodi.module("TVShowApp.Landing",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.subNavId=21,d.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(a){return function(){return a.getPageView(),a.getSubNav()}}(this)),b.regionContent.show(this.layout)},d.prototype.getLayoutView=function(){return new a.Layout},d.prototype.getSubNav=function(){var a;return a=b.request("navMain:children:show",this.subNavId,"Sections"),this.layout.regionSidebarFirst.show(a)},d.prototype.getPageView=function(){return this.page=new a.Page,this.listenTo(this.page,"show",function(a){return function(){return a.renderRecentlyAdded()}}(this)),this.layout.regionContent.show(this.page)},d.prototype.renderRecentlyAdded=function(){var a;return a=b.request("episode:recentlyadded:entities"),b.execute("when:entity:fetched",a,function(c){return function(){var d;return d=b.request("episode:list:view",a),c.page.regionRecentlyAdded.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("TVShowApp.Landing",function(a,b){return a.Layout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="movie-landing landing-page",b}(b.Views.LayoutWithSidebarFirstView),a.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/movie/landing/landing",b.prototype.className="movie-recent",b.prototype.regions={regionRecentlyAdded:".region-recently-added"},b}(b.Views.LayoutView)}),this.Kodi.module("TVShowApp.List",function(a,b){var c;return c={getTVShowsList:function(c,d){var e,f;return null==d&&(d=!1),f=d?"TVShowsSet":"TVShows",e=new a[f]({collection:c}),b.listenTo(e,"childview:tvshow:play",function(a,c){var d;return d=b.request("command:kodi:controller","video","PlayList"),d.play("tvshowid",c.model.get("tvshowid"))}),e}},a.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,d),e.prototype.initialize=function(){var a;return a=b.request("tvshow:entities"),a.availableFilters=this.getAvailableFilters(),a.sectionId=21,b.request("filter:init",this.getAvailableFilters()),b.execute("when:entity:fetched",a,function(c){return function(){return c.layout=c.getLayoutView(a),c.listenTo(c.layout,"show",function(){return c.getFiltersView(a),c.renderList(a)
}),b.regionContent.show(c.layout)}}(this))},e.prototype.getLayoutView=function(b){return new a.ListLayout({collection:b})},e.prototype.getAvailableFilters=function(){return{sort:["title","year","dateadded","rating"],filter:["year","genre","unwatched","cast"]}},e.prototype.getFiltersView=function(a){var c;return c=b.request("filter:show",a),this.layout.regionSidebarFirst.show(c),this.listenTo(c,"filter:changed",function(b){return function(){return b.renderList(a)}}(this))},e.prototype.renderList=function(a){var d,e;return b.execute("loading:show:view",this.layout.regionContent),d=b.request("filter:apply:entites",a),e=c.getTVShowsList(d),this.layout.regionContent.show(e)},e}(b.Controllers.Base),b.reqres.setHandler("tvshow:list:view",function(a){return c.getTVShowsList(a,!0)})}),this.Kodi.module("TVShowApp.List",function(a,b){return a.ListLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-list with-filters",b}(b.Views.LayoutWithSidebarFirstView),a.TVShowTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"tvshow:play","click .menu":"tvshow-menu:clicked"},b.prototype.initialize=function(){var a;return b.__super__.initialize.apply(this,arguments),a="",a+=" "+this.model.get("rating"),this.model.set({subtitle:a})},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="tvshow-empty-result",b}(b.Views.EmptyViewResults),a.TVShows=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.TVShowTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.VirtualListView),a.TVShowsSet=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.TVShowTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView)}),this.Kodi.module("TVShowApp.Season",function(a,b){var c;return c={getSeasonList:function(c){var d;return d=new a.Seasons({collection:c}),b.listenTo(d,"childview:season:play",function(){var a;return a=b.request("command:kodi:controller","video","PlayList")}),d}},a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d,e;return c=parseInt(a.id),d=parseInt(a.season),e=b.request("tvshow:entity",c),b.execute("when:entity:fetched",e,function(a){return function(){return a.layout=a.getLayoutView(e),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(e,d),a.getEpisodes(e,d)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({tvshow:b})},d.prototype.getDetailsLayoutView=function(c,d){var e;return e=b.request("season:entities",c.get("id")),b.execute("when:entity:fetched",e,function(b){return function(){var f,g;return g=e.findWhere({season:d}),c.set({season:d,thumbnail:g.get("thumbnail"),seasons:e}),f=new a.HeaderLayout({model:c}),b.listenTo(f,"show",function(){var b,d;return d=new a.SeasonDetailTeaser({model:c}),b=new a.Details({model:c}),f.regionSide.show(d),f.regionMeta.show(b)}),b.layout.regionHeader.show(f)}}(this))},d.prototype.getEpisodes=function(a,c){var d;return d=b.request("episode:entities",a.get("tvshowid"),c),b.execute("when:entity:fetched",d,function(a){return function(){var c;return d.sortCollection("episode","asc"),c=b.request("episode:list:view",d),a.layout.regionContent.show(c)}}(this))},d}(b.Controllers.Base),b.reqres.setHandler("season:list:view",function(a){return c.getSeasonList(a)})}),this.Kodi.module("TVShowApp.Season",function(a,b){return a.SeasonTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.triggers={"click .play":"season:play"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.set({label:"Season "+this.model.get("season")})},b}(b.Views.CardView),a.Empty=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="li",b.prototype.className="season-empty-result",b}(b.Views.EmptyViewResults),a.Seasons=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.childView=a.SeasonTeaser,c.prototype.emptyView=a.Empty,c.prototype.tagName="ul",c.prototype.className="card-grid--tall",c}(b.Views.CollectionView),a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="season-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="season-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/season/details_meta",b}(b.Views.ItemView),a.SeasonDetailTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"season-menu:clicked"},b}(b.Views.CardView)}),this.Kodi.module("TVShowApp.Show",function(a,b){return a.Controller=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.initialize=function(a){var c,d;return c=parseInt(a.id),d=b.request("tvshow:entity",c),b.execute("when:entity:fetched",d,function(a){return function(){return a.layout=a.getLayoutView(d),a.listenTo(a.layout,"destroy",function(){return b.execute("images:fanart:set","none")}),a.listenTo(a.layout,"show",function(){return a.getDetailsLayoutView(d),a.getSeasons(d)}),b.regionContent.show(a.layout)}}(this))},d.prototype.getLayoutView=function(b){return new a.PageLayout({model:b})},d.prototype.getDetailsLayoutView=function(b){var c;return c=new a.HeaderLayout({model:b}),this.listenTo(c,"show",function(){return function(){var d,e;return e=new a.TVShowTeaser({model:b}),d=new a.Details({model:b}),c.regionSide.show(e),c.regionMeta.show(d)}}(this)),this.layout.regionHeader.show(c)},d.prototype.getSeasons=function(a){var c;return c=b.request("season:entities",a.get("tvshowid")),b.execute("when:entity:fetched",c,function(a){return function(){var d;return d=b.request("season:list:view",c),a.layout.regionContent.show(d)}}(this))},d}(b.Controllers.Base)}),this.Kodi.module("TVShowApp.Show",function(a,b){return a.PageLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-show detail-container",b}(b.Views.LayoutWithHeaderView),a.HeaderLayout=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="tvshow-details",b}(b.Views.LayoutDetailsHeaderView),a.Details=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template="apps/tvshow/show/details_meta",b}(b.Views.ItemView),a.TVShowTeaser=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="div",b.prototype.className="card-detail",b.prototype.triggers={"click .menu":"tvshow-menu:clicked"},b}(b.Views.CardView)}),this.Kodi.module("TVShowApp",function(a,b){var c;return a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"tvshows/recent":"landing",tvshows:"list","tvshow/:tvshowid":"view","tvshow/:tvshowid/:season":"season","tvshow/:tvshowid/:season/:episodeid":"episode"},b}(b.Router.Base),c={landing:function(){return new a.Landing.Controller},list:function(){return new a.List.Controller},view:function(b){return new a.Show.Controller({id:b})},season:function(b,c){return new a.Season.Controller({id:b,season:c})},episode:function(b,c,d){return new a.Episode.Controller({id:b,season:c,episodeid:d})},episodeAction:function(a,c){var d,e,f,g;switch(e=c.model,f=b.request("command:kodi:controller","video","PlayList"),d=b.request("command:kodi:controller","video","Files"),g=b.request("command:kodi:controller","video","VideoLibrary"),a){case"play":return f.play("episodeid",e.get("episodeid"));case"add":return f.add("episodeid",e.get("episodeid"));case"localplay":return d.videoStream(e.get("file"));case"download":return d.downloadFile(e.get("file"));case"toggleWatched":return g.toggleWatched(e)}}},b.commands.setHandler("episode:action",function(a,b){return c.episodeAction(a,b)}),b.on("before:start",function(){return new a.Router({controller:c})})}),this.Kodi.module("UiApp",function(a,b,c,d,e){var f;return f={openModal:function(a,c,d,e){var f,g,h;return null==d&&(d=!0),null==e&&(e=""),h=b.getRegion("regionModalTitle").$el,f=b.getRegion("regionModalBody").$el,g=b.getRegion("regionModal").$el,g.removeClassStartsWith("style-"),g.addClass("style-"+e),h.html(a),f.html(c),d&&g.modal(),g.on("hidden.bs.modal",function(){return f.html("")}),g},closeModal:function(){return b.getRegion("regionModal").$el.modal("hide"),e(".modal-body").html("")},closeModalButton:function(){return f.getButton("Close","default").on("click",function(){return f.closeModal()})},getModalButtonContainer:function(){return b.getRegion("regionModalFooter").$el.empty()},getButton:function(a,b){return null==b&&(b="primary"),e("<button>").addClass("btn btn-"+b).html(a)},defaultButtons:function(a){var b;return b=f.getButton("Ok","primary").on("click",function(){return a&&a(),f.closeModal()}),f.getModalButtonContainer().append(f.closeModalButton()).append(b)},playerMenu:function(a){var b,c;switch(null==a&&(a="toggle"),b=e(".player-menu-wrapper"),c="opened",a){case"open":return b.addClass(c);case"close":return b.removeClass(c);default:return b.toggleClass(c)}}},b.commands.setHandler("ui:textinput:show",function(a,c,d,g){var h,i;return null==c&&(c=""),null==g&&(g=!0),h=e("<input>",{id:"text-input","class":"form-control",type:"text"}).on("keyup",function(a){return 13===a.keyCode&&d?(d(e("#text-input").val()),f.closeModal()):void 0}),i=e("<p>").html(c),f.defaultButtons(function(){return d(e("#text-input").val())}),f.openModal(a,i,d,g),b.getRegion("regionModalBody").$el.append(h.wrap('<div class="form-control-wrapper"></div>')).find("input").first().focus(),e.material.init()}),b.commands.setHandler("ui:modal:close",function(){return f.closeModal()}),b.commands.setHandler("ui:modal:show",function(a,b,c){return null==b&&(b=""),null==c&&(c=""),f.getModalButtonContainer().html(c),f.openModal(a,b,open)}),b.commands.setHandler("ui:modal:form:show",function(a,b){return null==b&&(b=""),f.openModal(a,b,!0,"form")}),b.commands.setHandler("ui:modal:close",function(){return f.closeModal()}),b.commands.setHandler("ui:modal:youtube",function(a,b){var c;return f.getModalButtonContainer().html(""),c='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+b+'?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe>',f.openModal(a,c,!0,"video")}),b.commands.setHandler("ui:playermenu",function(a){return f.playerMenu(a)}),b.vent.on("shell:ready",function(){return function(){return e("html").on("click",function(){return f.playerMenu("close")})}}(this))}),window.JST["apps/album/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div>\n<h3>')),d(t.gettext("Recently played")),d(b('</h3>\n<div class="landing-section region-recently-played"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/album/show/tpl/album_with_songs.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="album album--with-songs">\n    <div class="region-album-side">\n        <div class="region-album-meta"></div>\n    </div>\n    <div class="region-album-content">\n        <div class="region-album-songs"></div>\n    </div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/album/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-title">\n    <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n</div>\n\n\n\n<div class="region-details-meta-below">\n\n    <div class="artist"><a href="#music/artist/')),d(this.artistid),d(b('">')),d(this.artist),d(b("</a></div>\n\n    ")),this.genre.length>0&&(d(b('\n    <div class="album-genres">\n        ')),d(b(helpers.url.filterLinks("music/albums","genre",this.genre))),d(b("\n    </div>\n    "))),d(b('\n\n    <div class="description">')),d(this.description),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/artist/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-title">\n    <h2>')),d(this.label),d(b(' <span class="sub">')),d(this.formed),d(b('</span></h2>\n</div>\n\n\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="artist-genres">\n            ')),d(b(helpers.url.filterLinks("music/artists","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <div class="description">')),d(this.description),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/back_button.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<i class="mdi thumb"></i><div class="title">')),d(t.gettext("Back")),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/file.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="thumb" style="background-image: url(\'')),d(this.thumbnail),d(b('\')"><div class="mdi play"></div></div>\n<div class="title">')),d(this.label),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/folder_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="folder-layout">\n    <div class="loading-bar"><div class="inner"><span>')),d(t.gettext("Loading folder...")),d(b('</span></div></div>\n    <div class="path"></div>\n    <div class="folder-container">\n        <div class="files">\n        </div>\n        <div class="folders-pane">\n            <div class="back"></div>\n            <div class="folders">\n                <div class="intro">\n                    <h3><span class="mdi-navigation-arrow-back text-dim"></span> ')),d(t.gettext("Browse Files and AddOns")),d(b("</h3>\n                    <p>")),d(t.gettext("This is where you can browse all Kodi content, not just what is in the library. Browse by source or addon.")),d(b("</p>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/path.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="title">')),d(this.label),d(b("</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/source.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="source source-')),d(this.media),d(b('">\n    ')),d(this.label),d(b("\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/browser/list/tpl/source_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(this.label),d(b('</h3>\n<ul class="sources"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/cast/list/tpl/cast.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<a href="#')),d(this.origin),d(b("?cast=")),d(this.name),d(b('" title="')),d(this.name),d(b(" (")),d(this.role),d(b(')">\n    <div class="thumb">\n        <img src="')),d(this.thumbnail),d(b('" />\n    </div>\n    <div class="meta">\n        <strong>')),d(this.name),d(b('</strong>\n        <span title="')),d(this.role),d(b('">')),d(this.role),d(b('</span>\n    </div>\n</a>\n<ul class="actions">\n    <li class="imdb"></li>\n    <li class="google"></li>\n</ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/epg/list/tpl/programmes.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("\n<div ")),this.isactive&&d(b(' class="airing" ')),d(b(" ><strong>")),d(this.label),d(b("</strong>")),this.hastimer&&d(b('<span class="hastimer"></span>')),d(b("</div>\n<div><strong>")),d(t.gettext("Start")),d(b(":</strong> ")),d(helpers.global.epgDateTimeToJS(this.starttime).toLocaleString()),d(b("</div>\n<div><strong>")),d(t.gettext("End")),d(b(":</strong> ")),d(helpers.global.epgDateTimeToJS(this.endtime).toLocaleString()),d(b("</div>\n<div><strong> ")),d(t.gettext("Runtime")),d(b(":</strong> ")),d(this.runtime),d(b(" </div>\n<div>")),d(this.plot),d(b('</div>\n<div class="programme-progress"><div class="current-progress" style="width: ')),d(this.progresspercentage),d(b('%" title="')),d(Math.round(this.progresspercentage)),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/external/youtube/tpl/youtube.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<img src="')),d(this.thumbnail),d(b('" class="thumb" />\n<h3>')),d(this.title),d(b('</h3>\n<span class="play-kodi flat-btn action">Play in Kodi</span>\n<span class="play-local flat-btn action">Play in Browser</span>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filter_options.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="options-search-wrapper">\n    <input class="options-search" value="" />\n</div>\n<div class="deselect-all">')),d(t.gettext("Deselect all")),d(b('</div>\n<ul class="selection-list"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filters_bar.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<span class="filters-active-all">')),d(this.filters),d(b('</span><i class="remove"></i>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/filters_ui.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="filters-container">\n\n    <div class="filters-current filter-pane">\n        <div class="nav-section"></div>\n\n        <h3 class="open-filters">')),d(t.gettext("Filters")),d(b('<i></i></h3>\n        <div class="filters-active"></div>\n\n        <h3>')),d(t.gettext("Sort")),d(b('</h3>\n        <div class="list sort-options"></div>\n    </div>\n\n    <div class="filters-page filter-pane">\n        <h3 class="close-filters">')),d(t.gettext("Select a filter")),d(b('</h3>\n        <div class="list filters-list"></div>\n    </div>\n\n    <div class="filters-options filter-pane">\n        <h3 class="close-options">')),d(t.gettext("Select an option")),d(b('</h3>\n        <div class="list filter-options-list"></div>\n    </div>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/filter/show/tpl/list_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(this.title))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/input/remote/tpl/remote_control.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="remote-background"></div>\n<div class="remote kodi-remote">\n    <div class="toggle-visibility"></div>\n    <div class="playing-area">\n\n    </div>\n    <div class="main-controls">\n        <div class="direction">\n            <div class="pad">\n                <div class="ibut mdi-hardware-keyboard-arrow-left left input-button" data-type="Left"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-up up input-button" data-type="Up"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-down down input-button" data-type="Down"></div>\n                <div class="ibut mdi-hardware-keyboard-arrow-right right input-button" data-type="Right"></div>\n                <div class="ibut mdi-image-brightness-1 ok input-button" data-type="Select"></div>\n            </div>\n        </div>\n        <div class="buttons">\n            <div class="ibut mdi-action-settings-power power-button"></div>\n            <div class="ibut mdi-navigation-more-vert input-button" data-type="ContextMenu"></div>\n            <div class="ibut mdi-action-info input-button" data-type="Info"></div>\n        </div>\n    </div>\n    <div class="secondary-controls">\n        <div class="ibut mdi-hardware-keyboard-return input-button" data-type="Back"></div>\n        <div class="ibut mdi-av-stop player-button" data-type="Stop"></div>\n        <div class="ibut mdi-maps-store-mall-directory input-button" data-type="Home"></div>\n    </div>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/loading/show/tpl/loading_page.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="loading-page">\n    <div class="spinner-double-section-far"></div>\n    <h2>')),d(t.gettext("Just a sec...")),d(b("</h2>\n</div>\n\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<span class="item">')),d(b(this.title)),d(b("</span>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="local-playlist-header">\n    <h2></h2>\n    <div class="dropdown">\n        <i data-toggle="dropdown"></i>\n        <ul class="dropdown-menu">\n            <li class="play">Play in Kodi</li>\n            <li class="localplay">Play in browser</li>\n            <li class="lsit">Export list</li>\n            <div class="divider"></div>\n            <li class="clear">Clear playlist</li>\n            <li class="delete">Delete playlist</li>\n        </ul>\n    </div>\n</div>\n<div class="item-container">\n    <div class="empty-content">')),d(t.gettext("Empty playlist, you should probably add something to it?")),d(b("</div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_list.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h3></h3>\n<ul class="lists"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/localPlaylist/list/tpl/playlist_sidebar_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="current-lists"></div>\n<div class="new-list">New Playlist</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/content.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))
};return function(){d(b('\n<div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n\n<div class="section-content">\n    <h2>')),d(t.gettext("Synopsis")),d(b("</h2>\n    ")),"youtube"===this.trailer.source&&(d(b('\n        <div class="trailer ')),d(this.trailer.source),d(b('">\n            <img src="')),d(b(this.trailer.img)),d(b('" />\n        </div>\n    '))),d(b("\n    <p>")),d(this.plot),d(b('</p>\n    <ul class="inline-links">\n        <li>')),d(b(helpers.url.imdbUrl(this.imdbnumber,"View on imdb"))),d(b("</li>\n    </ul>\n</div>\n\n")),this.cast.length>0&&(d(b('\n    <div class="section-content">\n        <h2>')),d(t.gettext("Full cast")),d(b('</h2>\n        <div class="region-cast"></div>\n    </div>\n'))),d(b('\n\n<div class="region-sets section-content"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;if(d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n\n        <div class="runtime">\n            ')),d(helpers.global.formatTime(helpers.global.secToTime(this.runtime))),d(b("\n        </div>\n\n        ")),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("movies","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <div class="description">')),d(this.plotoutline),d(b('</div>\n\n    <ul class="people">\n        ')),this.director.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Director","Directors",this.director.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","director",this.director))),d(b("</span></li>\n        "))),d(b("\n        ")),this.writer.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Writer","Writers",this.writer.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","writer",this.writer))),d(b("</span></li>\n        "))),d(b("\n        ")),this.cast.length>0&&(d(b("\n            <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("movies","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <ul class="streams">\n        <li><label>')),d(t.gettext("Video")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.video,"label").join(", ")),d(b("</span></li>\n        <li><label>")),d(t.gettext("Audio")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.audio,"label").join(", ")),d(b("</span></li>\n        ")),this.streamdetails.subtitle.length>0&&""!==this.streamdetails.subtitle[0].label){for(d(b("\n            <li><label>")),d(t.ngettext("Subtitle","Subtitles",this.streamdetails.subtitle.length)),d(b(':</label>\n                <span class="dropdown"><span data-toggle="dropdown">')),d(_.pluck(this.streamdetails.subtitle,"label").join(", ")),d(b('</span>\n                <ul class="dropdown-menu">\n                    ')),f=this.streamdetails.subtitle,c=0,e=f.length;e>c;c++)a=f[c],d(b("\n                        <li>")),d(a.label),d(b("</li>\n                    "));d(b("\n                </ul>\n                </span>\n            </li>\n        "))}d(b('\n    </ul>\n\n    <ul class="inline-links">\n        <li class="btn-flat-play play">')),d(t.gettext("Play")),d(b('</li>\n        <li class="btn-flat-add add">')),d(t.gettext("Queue")),d(b('</li>\n        <li class="btn-flat-stream stream">')),d(t.gettext("Stream")),d(b('</li>\n        <li class="btn-flat-download download">')),d(t.gettext("Download")),d(b("</li>\n    </ul>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/movie/show/tpl/set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="set-collection">\n    <h2 class="set-name"></h2>\n    <div class="collection-items"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/navMain.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j;for(d(b('<div id="nav-header"></div>\n<nav>\n    <ul>\n        ')),i=this.items,e=0,g=i.length;g>e;e++)if(c=i[e],"undefined"!==c.path&&0===c.parent){if(d(b('\n            <li class="')),d(c["class"]),d(b('">\n                <a href="#')),d(c.path),d(b('">\n                    <i class="')),d(c.icon),d(b('"></i>\n                    <span>')),d(c.title),d(b("</span>\n                </a>\n\n                ")),0!==c.children.length){for(d(b("\n                <ul>\n                    ")),j=c.children,f=0,h=j.length;h>f;f++)a=j[f],"undefined"!==a.path&&(d(b('\n                      <li><a href="#')),d(a.path),d(b('">')),d(a.title),d(b("</a></li>\n                    ")));d(b("\n                </ul>\n                "))}d(b("\n            </li>\n        "))}d(b("\n    </ul>\n</nav>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/nav_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(this.link))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/navMain/show/tpl/nav_sub.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(this.title),d(b('</h3>\n<ul class="items"></ul>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/player/show/tpl/player.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="player">\n\n    <div class="controls-primary">\n        <div class="controls-primary-buttons">\n            <div class="control control-prev"></div>\n            <div class="control control-play"></div>\n            <div class="control control-next"></div>\n        </div>\n    </div>\n\n    <div class="controls-secondary">\n        <div class="volume slider-bar"></div>\n        <div class="controls-secondary-buttons">\n            <div class="control control-mute"></div>\n            <div class="control control-repeat"></div>\n            <div class="control control-shuffle"></div>\n            <div class="control control-menu"></div>\n        </div>\n    </div>\n\n    <div class="now-playing">\n        <div class="playing-thumb thumb">\n            <div class="mdi remote-toggle"></div>\n        </div>\n        <div class="playing-info">\n            <div class="playing-progress slider-bar"></div>\n            <div class="playing-time">\n                <div class="playing-time-current">0</div>\n                <div class="playing-time-duration">0:00</div>\n            </div>\n            <div class="playing-meta">\n                <div class="playing-title">')),d(t.gettext("Nothing playing")),d(b('</div>\n                <div class="playing-subtitle"></div>\n            </div>\n        </div>\n    </div>\n\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/list/tpl/playlist_bar.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="playlist-header">\n    <ul class="player-toggle">\n        <li class="kodi">')),d(t.gettext("Kodi")),d(b('</li>\n        <li class="local">')),d(t.gettext("Local")),d(b('</li>\n    </ul>\n    <div class="playlist-menu dropdown">\n        <i data-toggle="dropdown" class="menu-toggle"></i>\n        <ul class="dropdown-menu pull-right">\n            <li class="dropdown-header">')),d(t.gettext("Current playlist")),d(b('</li>\n            <li><a href="#" class="clear-playlist">')),d(t.gettext("Clear playlist")),d(b('</a></li>\n            <li><a href="#" class="refresh-playlist">')),d(t.gettext("Refresh playlist")),d(b('</a></li>\n            <li class="dropdown-header">')),d(t.gettext("Kodi")),d(b('</li>\n            <li><a href="#" class="party-mode">')),d(t.gettext("Party mode")),d(b(' <i class="mdi-navigation-check"></i></a></li>\n            <li><a href="#" class="save-playlist">')),d(t.gettext("Save Kodi playlist")),d(b('</a></li>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="playlists-wrapper">\n    <div class="kodi-playlists">\n        <ul class="media-toggle">\n            <li class="audio">')),d(t.gettext("Audio")),d(b('</li>\n            <li class="video">')),d(t.gettext("Video")),d(b('</li>\n        </ul>\n        <div class="kodi-playlist"></div>\n    </div>\n    <div class="local-playlists">\n        <div class="local-playlist"></div>\n    </div>\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/list/tpl/playlist_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="item-inner item-')),d(this.type),d(b('">\n    <div class="artwork">\n        <div class="thumb" title="')),d(this.label),d(b('" style="background-image: url(\'')),d(this.thumbnail),d(b('\')">\n            <div class="mdi play"></div>\n        </div>\n    </div>\n    <div class="meta">\n        <div class="title"><a href="#')),d(this.url),d(b('" title="')),d(this.label),d(b('">')),d(this.label),d(b("</a></div>\n        ")),null!=this.subtitle&&(d(b('\n        <div class="subtitle">')),d(b(this.subtitle)),d(b("</div>\n        "))),d(b('\n    </div>\n    <div class="remove"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/playlist/show/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="playlist-page playlist-page__empty set-page">\n    <h3>')),d(t.gettext("Now Playing Playlists")),d(b("</h3>\n    <p>")),d(t.gettext("Switch between Kodi and local playback via the tabs. You can toggle visibility with the arrow in the top right")),d(b("</p>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/pvr/list/tpl/channel.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="play">\n    <div class="thumb">\n        <img src="')),d(this.thumbnail),d(b('" />\n    </div>\n    <div class="meta">\n        <strong>')),d(this.label),d(b("</strong>\n    </div>\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/list/tpl/search_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="search-inner">\n    <div class="entity-set entity-set-movie"></div>\n    <div class="entity-set entity-set-tvshow"></div>\n    <div class="entity-set entity-set-artist"></div>\n    <div class="entity-set entity-set-album"></div>\n    <div class="entity-set entity-set-song"></div>\n    <div class="entity-set entity-set-loading"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/list/tpl/search_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h2 class="set-header"></h2>\n<div class="set-results"></div>\n<div class="more"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/search/show/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="search-page search-page__empty set-page">\n    <h3>')),d(t.gettext("Enter your search above")),d(b("</h3>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/shell/show/tpl/homepage.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="homepage"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/shell/show/tpl/shell.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div id="shell">\n\n    <a id="logo" href="#"></a>\n\n    <div id="nav-bar"></div>\n\n    <div id="header">\n\n        <h1 id="page-title">\n            <span class="context"></span>\n            <span class="title"></span>\n        </h1>\n\n        <ul class="mobile-menu">\n            <li><a href="#remote" class="mobile-menu--link__remote remote-toggle"><i></i></a></li>\n            <li><a href="#search" class="mobile-menu--link__search"><i></i></a></li>\n            <li><a href="#playlist" class="mobile-menu--link__playlist"><i></i></a></li>\n        </ul>\n\n        <div id="search-region">\n            <input id="search" title="Search">\n            <span id="do-search"></span>\n        </div>\n\n    </div>\n\n    <div id="main">\n\n        <div id="sidebar-one"></div>\n\n        <div id="content">')),d(t.gettext("Loading things...")),d(b('</div>\n\n    </div>\n\n    <div id="sidebar-two">\n        <div class="playlist-toggle-open"></div>\n        <div id="playlist-summary"></div>\n        <div id="playlist-bar"></div>\n    </div>\n\n    <div id="remote"></div>\n\n    <div id="player-wrapper">\n        <footer id="player-kodi"></footer>\n        <footer id="player-local"></footer>\n    </div>\n\n    <div class="player-menu-wrapper">\n        <ul class="player-menu">\n            <li class="video-scan">')),d(t.gettext("Scan video library")),d(b('</li>\n            <li class="audio-scan">')),d(t.gettext("Scan audio library")),d(b('</li>\n            <li class="about">')),d(t.gettext("About Chorus")),d(b('</li>\n        </ul>\n    </div>\n\n</div>\n\n<div id="fanart"></div>\n<div id="fanart-overlay"></div>\n\n<div id="snackbar-container"></div>\n\n<div class="modal fade" id="modal-window">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title"></h4>\n            </div>\n            <div class="modal-body"></div>\n            <div class="modal-footer"></div>\n        </div>\n    </div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/song/list/tpl/song.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<td class="cell-first">\n    <div class="thumb" style="background-image: url(\'')),d(this.thumbnail),d(b('\')">\n    </div>\n    <div class="track">')),d(this.track),d(b('</div>\n    <div class="mdi play"></div>\n</td>\n<td class="cell-label song-title"><span class="crop">')),d(this.label),d(b('</span></td>\n<td class="cell-label song-artist"><a class="crop" href="#music/artist/')),d(this.artistid),d(b('">')),d(this.artist),d(b('</a></td>\n<td class="cell-last">\n    <li class="thumbed-up"></li>\n    <div class="duration">')),d(this.displayDuration),d(b('</div>\n    <ul class="actions">\n        <li class="mdi thumbs"></li>\n        <li class="mdi add"></li>\n        <li class="menu dropdown">\n            <i data-toggle="dropdown" class="mdi"></i>\n            <ul class="dropdown-menu pull-right"></ul>\n        </li>\n    </ul>\n</td>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/thumbs/list/tpl/thumbs_layout.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="thumbs-inner">\n    <div class="entity-set entity-set-movie"></div>\n    <div class="entity-set entity-set-tvshow"></div>\n    <div class="entity-set entity-set-artist"></div>\n    <div class="entity-set entity-set-album"></div>\n    <div class="entity-set entity-set-song"></div>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/thumbs/list/tpl/thumbs_set.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<h2 class="set-header"></h2>\n<div class="set-results"></div>\n<div class="more"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/episode/tpl/content.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('\n<div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n\n<div class="section-content">\n    <h2>')),d(t.gettext("Synopsis")),d(b("</h2>\n    <p>")),d(this.plot),d(b("</p>\n</div>\n\n")),this.cast.length>0&&(d(b('\n    <div class="section-content">\n        <h2>')),d(t.gettext("Full Cast")),d(b('</h2>\n        <div class="region-cast"></div>\n    </div>\n'))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/episode/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;if(d(b('<div class="region-details-top">\n    ')),null!=this.showtitle&&d(b("\n\n    ")),d(b('\n    <div class="region-details-title">\n        <h2>\n            <span class="title">')),d(this.label),d(b('</span>\n            <span class="sub show-title"><a href="#')),d(this.url.split("/",2).join("/")),d(b('">')),d(this.showtitle),d(b('</a></span>\n            <span class="sub">S')),d(this.season),d(b(" E")),d(this.episode),d(b('</span>\n        </h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n\n        <div class="runtime">\n            ')),d(helpers.global.formatTime(helpers.global.secToTime(this.runtime))),d(b('\n        </div>\n\n    </div>\n\n\n\n\n    <ul class="people">\n        ')),this.director.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Director","Directors",this.director.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","director",this.director))),d(b("</span></li>\n        "))),d(b("\n        ")),this.writer.length>0&&(d(b("\n            <li><label>")),d(t.ngettext("Writer","Writers",this.writer.length)),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","writer",this.writer))),d(b("</span></li>\n        "))),d(b("\n        ")),this.cast.length>0&&(d(b("\n            <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <ul class="streams">\n        <li><label>')),d(t.gettext("Video")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.video,"label").join(", ")),d(b("</span></li>\n        <li><label>")),d(t.gettext("Audio")),d(b(":</label> <span>")),d(_.pluck(this.streamdetails.audio,"label").join(", ")),d(b("</span></li>\n        ")),this.streamdetails.subtitle.length>0&&""!==this.streamdetails.subtitle[0].label){for(d(b("\n            <li><label>")),d(t.ngettext("Subtitle","Subtitles",this.streamdetails.subtitle.length)),d(b(':</label>\n                <span class="dropdown"><span data-toggle="dropdown">')),d(_.first(_.pluck(this.streamdetails.subtitle,"label"))),d(b('</span>\n                <ul class="dropdown-menu">\n                    ')),f=this.streamdetails.subtitle,c=0,e=f.length;e>c;c++)a=f[c],d(b("\n                        <li>")),d(a.label),d(b("</li>\n                    "));d(b("\n                </ul>\n                </span>\n            </li>\n        "))}d(b('\n    </ul>\n\n    <ul class="inline-links">\n        <li class="btn-flat-play play">')),d(t.gettext("Play")),d(b('</li>\n        <li class="btn-flat-add add">')),d(t.gettext("Queue")),d(b('</li>\n        <li class="btn-flat-stream stream">')),d(t.gettext("Stream")),d(b('</li>\n        <li class="btn-flat-download download">')),d(t.gettext("Download")),d(b("</li>\n    </ul>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/landing/tpl/landing.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<h3>")),d(t.gettext("Recently added")),d(b('</h3>\n<div class="landing-section region-recently-added"></div> '))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/season/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2>\n            <span class="title">')),d(t.gettext("Season")),d(b(" ")),d(this.season),d(b('</span>\n            <span class="sub"><a href="#tvshow/')),d(this.tvshowid),d(b('">')),d(this.label),d(b('</a></span>\n        </h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("tvshows","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <ul class="people">\n        ')),this.cast.length>0&&(d(b("\n        <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <div class="description">')),d(this.plot),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["apps/tvshow/show/tpl/details_meta.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="region-details-top">\n    <div class="region-details-title">\n        <h2><span class="title">')),d(this.label),d(b('</span> <span class="sub">')),d(this.year),d(b('</span></h2>\n    </div>\n    <div class="region-details-rating">\n        ')),d(this.rating),d(b(' <i></i>\n    </div>\n</div>\n<div class="region-details-meta-below">\n\n    <div class="region-details-subtext">\n        ')),this.genre.length>0&&(d(b('\n        <div class="genres">\n            ')),d(b(helpers.url.filterLinks("tvshows","genre",this.genre))),d(b("\n        </div>\n        "))),d(b('\n    </div>\n\n    <ul class="people">\n        ')),this.cast.length>0&&(d(b("\n        <li><label>")),d(t.gettext("Cast")),d(b(":</label> <span>")),d(b(helpers.url.filterLinks("tvshows","cast",_.pluck(this.cast,"name")))),d(b("</span></li>\n        "))),d(b('\n    </ul>\n\n    <div class="description">')),d(this.plot),d(b("</div>\n\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="form-inner">\n	<div class="form-content-region"></div>\n    <footer>\n        <ul class="inline-list">\n            <li>\n                <button type="submit" data-form-button="submit" class="btn btn-primary form-save">Save</button>\n            </li>\n            <li class="response">\n\n            </li>\n        </ul>\n    </footer>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form_item.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.title&&(d(b('\n    <label class="control-label">')),d(this.title),d(b("</label>\n"))),d(b('\n<div class="element">\n    ')),"checkbox"!==this.type?(d(b("\n        ")),d(b(this.element)),d(b("\n    "))):(d(b('\n        <div class="togglebutton">\n            <label>')),d(b(this.element)),d(b("</label>\n        </div>\n    "))),d(b("\n    ")),this.description&&(d(b('\n        <div class="help-block description">')),d(this.description),d(b("</div>\n    "))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["components/form/tpl/form_item_group.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.title&&(d(b('\n    <h3 class="group-title">')),d(this.title),d(b("</h3>\n"))),d(b('\n<div class="form-items"></div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/card/tpl/card.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e;if(d(b('<div class="card-')),d(this.type),d(b('">\n    <div class="artwork">\n        <a href="#')),d(this.url),d(b('" class="thumb" title="')),d(helpers.global.stripTags(this.label)),d(b('" style="background-image: url(\'')),d(this.thumbnail),d(b('\')"></a>\n        <div class="mdi play"></div>\n        ')),("channeltv"===this.type||"channelradio"===this.type)&&d(b('\n          <div class="mdi record"></div>\n        ')),d(b('\n    </div>\n    <div class="meta">\n        <div class="title"><a href="#')),d(this.url),d(b('" title="')),d(helpers.global.stripTags(this.label)),d(b('">')),d(b(this.label)),d(b("</a></div>\n        ")),null!=this.subtitle&&(d(b('\n            <div class="subtitle">')),d(b(this.subtitle)),d(b("</div>\n        "))),d(b("\n    </div>\n    ")),this.actions){d(b('\n        <ul class="actions">\n            ')),e=this.actions;for(a in e)c=e[a],d(b('<li class="mdi ')),d(a),d(b('" title="')),d(c),d(b('"></li>'));d(b("\n        </ul>\n    "))}d(b("\n    ")),this.menu&&d(b('\n        <div class="dropdown">\n            <i data-toggle="dropdown" class="mdi"></i>\n            <ul class="dropdown-menu"></ul>\n        </div>\n    ')),d(b("\n    ")),this.progress&&(d(b('\n        <div class="entity-progress"><div class="current-progress" style="width: ')),d(this.progress),d(b('%" title="')),d(this.progress),d(b("% ")),d(t.gettext("complete")),d(b('"></div></div>\n    '))),d(b('\n    <i class="mdi watched-tick"></i>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/card/tpl/card_placeholder.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<i></i>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/empty/tpl/empty_page.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="empty--page">\n    ')),this.title&&(d(b('\n        <h2 class="empty--page-title">')),d(title),d(b("</h2>\n    "))),d(b("\n\n    ")),this.content&&(d(b('\n        <div class="empty--page-content">')),d(this.content),d(b("</div>\n    "))),d(b("\n</div>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/empty/tpl/empty_results.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="empty-result">\n    <h2>No results found</h2>\n    <p>Have you done a library scan?</p>\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_details_header.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container details-header">\n\n    <div class="region-details-side"></div>\n\n    <div class="region-details-meta-wrapper"><div class="region-details-meta">\n\n        <div class="region-details-title"><span class="title"></span> <span class="sub"></span></div>\n\n        <div class="region-details-meta-below">\n            <div class="region-details-subtext"></div>\n            <div class="description"></div>\n        </div>\n\n    </div></div>\n\n    <div class="region-details-fanart"><div class="gradient"></div></div>\n\n</div>\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_with_header.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container with-header">\n\n    <header class="region-header"></header>\n\n    <section class="region-content"></section>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST["views/layouts/tpl/layout_with_sidebar_first.jst"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<div class="layout-container with-sidebar-first">\n\n    <div class="region-first-toggle"></div>\n    <section class="region-first"></section>\n\n    <section class="region-content-wrapper">\n        <div class="region-content-top"></div>\n        <div class="region-content"></div>\n    </section>\n\n</div>'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())};